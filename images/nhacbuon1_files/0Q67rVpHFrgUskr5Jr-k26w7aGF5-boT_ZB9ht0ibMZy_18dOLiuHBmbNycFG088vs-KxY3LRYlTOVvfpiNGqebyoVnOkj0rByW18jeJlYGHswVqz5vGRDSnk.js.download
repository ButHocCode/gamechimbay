if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("CometFeedFavoritesEndOfFeedMessageQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7221332091272137"}),null);
__d("CometFeedFavoritesEndOfFeedMessageQuery.graphql",["CometFeedFavoritesEndOfFeedMessageQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"hasNoStories"}],c=[{alias:null,args:[{kind:"Literal",name:"is_end_of_feed",value:!0}],concreteType:"SeeFirstMigrationContent",kind:"LinkedField",name:"see_first_migration_content",plural:!1,selections:[{args:null,documentName:"CometFeedFavoritesEndOfFeedMessageQuery_eof",fragmentName:"CometFeedSeeFirstMigrationCard_content",fragmentPropName:"content",kind:"ModuleImport"}],storageKey:"see_first_migration_content(is_end_of_feed:true)"},{alias:null,args:[{kind:"Variable",name:"is_empty_feed",variableName:"hasNoStories"}],concreteType:"ValueProposition",kind:"LinkedField",name:"favorites_caught_up_content",plural:!1,selections:[{args:null,documentName:"CometFeedFavoritesEndOfFeedMessageQuery_caughtup",fragmentName:"CometFeedFavoritesCaughtUp_content",fragmentPropName:"content",kind:"ModuleImport"}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometFeedFavoritesEndOfFeedMessageQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometFeedFavoritesEndOfFeedMessageQuery",selections:c},params:{id:b("CometFeedFavoritesEndOfFeedMessageQuery_facebookRelayOperation"),metadata:{},name:"CometFeedFavoritesEndOfFeedMessageQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometModernHomeFeedQuery.graphql",["FBReelsEnableDefer.relayprovider","CometFeedUnit_feedUnit$normalization.graphql","CometModernHomeFeedQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__FBReelsEnableDeferrelayprovider:b("FBReelsEnableDefer.relayprovider")};a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"RELAY_INCREMENTAL_DELIVERY"},c={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},d={defaultValue:null,kind:"LocalArgument",name:"connectionClass"},e={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},f={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},h={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},i={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},j={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},k={defaultValue:null,kind:"LocalArgument",name:"experimentalValues"},l={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},m={defaultValue:null,kind:"LocalArgument",name:"feedStyle"},n={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},o={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},p={defaultValue:["TOP_STORIES"],kind:"LocalArgument",name:"orderby"},q={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},r={defaultValue:null,kind:"LocalArgument",name:"recentVPVs"},s={defaultValue:null,kind:"LocalArgument",name:"refreshMode"},t={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},u={defaultValue:null,kind:"LocalArgument",name:"scale"},v={defaultValue:!1,kind:"LocalArgument",name:"useDefaultActor"},w=[{kind:"Variable",name:"connection_class",variableName:"connectionClass"},{kind:"Literal",name:"environment",value:"DESKTOP"},{kind:"Variable",name:"experimental_values",variableName:"experimentalValues"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Literal",name:"first",value:2},{kind:"Variable",name:"orderby",variableName:"orderby"},{kind:"Variable",name:"recent_vpvs_v2",variableName:"recentVPVs"},{kind:"Variable",name:"refresh_mode",variableName:"refreshMode"},{kind:"Literal",name:"site",value:"comet"}],x={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},z=[y],A=[{alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:z,storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v],kind:"Fragment",metadata:null,name:"CometModernHomeFeedQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNewsFeed_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,j,e,f,h,i,l,m,n,o,q,u,v,s,t,a,p,c,r,k,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReelsEnableDeferrelayprovider"}],kind:"Operation",name:"CometModernHomeFeedQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:w,concreteType:"NewsFeedConnection",kind:"LinkedField",name:"news_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Stream",label:"CometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[x,{kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[x],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:A,type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:A,type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:z,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:z,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:z,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{args:null,fragment:b("CometFeedUnit_feedUnit$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Defer",label:"CometNewsFeed_viewer$defer$CometNewsFeed_viewer_news_feed$page_info",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:w,filters:["orderby","feed_style"],handle:"comet_news_feed",key:"CometNewsFeed_viewer_news_feed",kind:"LinkedHandle",name:"news_feed"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null}],storageKey:null}]},params:{id:b("CometModernHomeFeedQuery_facebookRelayOperation"),metadata:{},name:"CometModernHomeFeedQuery",operationKind:"query",text:null,providedVariables:g}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometNewsFeedPaginationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5539416052811081"}),null);
__d("CometNewsFeedPaginationQuery.graphql",["FBReelsEnableDefer.relayprovider","CometFeedUnit_feedUnit$normalization.graphql","CometNewsFeedPaginationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__FBReelsEnableDeferrelayprovider:b("FBReelsEnableDefer.relayprovider")};a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"RELAY_INCREMENTAL_DELIVERY"},c={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},d={defaultValue:null,kind:"LocalArgument",name:"clientQueryId"},e={defaultValue:null,kind:"LocalArgument",name:"connectionClass"},f={defaultValue:2,kind:"LocalArgument",name:"count"},h={defaultValue:null,kind:"LocalArgument",name:"cursor"},i={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},j={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},k={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},l={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},m={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},n={defaultValue:null,kind:"LocalArgument",name:"experimentalValues"},o={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},p={defaultValue:null,kind:"LocalArgument",name:"feedStyle"},q={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},r={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},s={defaultValue:null,kind:"LocalArgument",name:"orderby"},t={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},u={defaultValue:null,kind:"LocalArgument",name:"recentVPVs"},v={defaultValue:null,kind:"LocalArgument",name:"refreshMode"},w={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},x={defaultValue:null,kind:"LocalArgument",name:"scale"},y={defaultValue:null,kind:"LocalArgument",name:"useDefaultActor"},z=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"client_query_id",variableName:"clientQueryId"},{kind:"Variable",name:"connection_class",variableName:"connectionClass"},{kind:"Literal",name:"environment",value:"DESKTOP"},{kind:"Variable",name:"experimental_values",variableName:"experimentalValues"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"orderby",variableName:"orderby"},{kind:"Variable",name:"recent_vpvs_v2",variableName:"recentVPVs"},{kind:"Variable",name:"refresh_mode",variableName:"refreshMode"},{kind:"Literal",name:"site",value:"comet"}],A={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},C=[B],D=[{alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:C,storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y],kind:"Fragment",metadata:null,name:"CometNewsFeedPaginationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[{kind:"Variable",name:"clientQueryId",variableName:"clientQueryId"},{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"CometNewsFeed_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReelsEnableDeferrelayprovider"}],kind:"Operation",name:"CometNewsFeedPaginationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:z,concreteType:"NewsFeedConnection",kind:"LinkedField",name:"news_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Stream",label:"CometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[A,{kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[A],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:D,type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:D,type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:C,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:C,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:C,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{args:null,fragment:b("CometFeedUnit_feedUnit$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Defer",label:"CometNewsFeed_viewer$defer$CometNewsFeed_viewer_news_feed$page_info",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:z,filters:["orderby","feed_style"],handle:"comet_news_feed",key:"CometNewsFeed_viewer_news_feed",kind:"LinkedHandle",name:"news_feed"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},B],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null}],storageKey:null}]},params:{id:b("CometNewsFeedPaginationQuery_facebookRelayOperation"),metadata:{},name:"CometNewsFeedPaginationQuery",operationKind:"query",text:null,providedVariables:g}}}();e.exports=a}),null);
__d("CometNewsFeedUnit_edge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometNewsFeedUnit_edge",selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_feedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null}],storageKey:null},{kind:"InlineDataFragmentSpread",name:"CometNewsFeedVPVDStore_newsFeedEdge",selections:[{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},{args:null,kind:"FragmentSpread",name:"useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge"},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_newsFeedEdge"}],type:"NewsFeedEdge",abstractKey:null};e.exports=a}),null);
__d("CometNewsFeed_viewer.graphql",["CometNewsFeedPaginationQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["news_feed"],c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"RELAY_INCREMENTAL_DELIVERY"},{kind:"RootArgument",name:"UFI2CommentsProvider_commentsKey"},{defaultValue:null,kind:"LocalArgument",name:"clientQueryId"},{kind:"RootArgument",name:"connectionClass"},{defaultValue:2,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{kind:"RootArgument",name:"displayCommentsContextEnableComment"},{kind:"RootArgument",name:"displayCommentsContextIsAdPreview"},{kind:"RootArgument",name:"displayCommentsContextIsAggregatedShare"},{kind:"RootArgument",name:"displayCommentsContextIsStorySet"},{kind:"RootArgument",name:"displayCommentsFeedbackContext"},{kind:"RootArgument",name:"experimentalValues"},{kind:"RootArgument",name:"feedLocation"},{kind:"RootArgument",name:"feedStyle"},{kind:"RootArgument",name:"feedbackSource"},{kind:"RootArgument",name:"focusCommentID"},{kind:"RootArgument",name:"orderby"},{kind:"RootArgument",name:"privacySelectorRenderLocation"},{kind:"RootArgument",name:"recentVPVs"},{kind:"RootArgument",name:"refreshMode"},{kind:"RootArgument",name:"renderLocation"},{kind:"RootArgument",name:"scale"},{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:a,stream:!0}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:a},fragmentPathInResult:["viewer"],operation:b("CometNewsFeedPaginationQuery.graphql")}},name:"CometNewsFeed_viewer",selections:[{alias:"news_feed",args:[{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"orderby",variableName:"orderby"}],concreteType:"NewsFeedConnection",kind:"LinkedField",name:"__CometNewsFeed_viewer_news_feed_comet_news_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null},{kind:"Stream",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c,{args:null,kind:"FragmentSpread",name:"CometFeedUnitErrorBoundary_feedUnit"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometNewsFeedUnit_edge"},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{kind:"Defer",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null}],type:"Viewer",abstractKey:null}}();e.exports=a}),null);
__d("CometFeedFavoritesHeaderQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4698600443600354"}),null);
__d("CometFeedFavoritesHeaderQuery.graphql",["CometFeedFavoritesHeaderQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SeeFirstMigrationContent",kind:"LinkedField",name:"see_first_migration_content",plural:!1,selections:[{args:null,documentName:"CometFeedFavoritesHeaderQuery",fragmentName:"CometFeedSeeFirstMigrationCard_content",fragmentPropName:"content",kind:"ModuleImport"}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedFavoritesHeaderQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometFeedFavoritesHeaderQuery",selections:a},params:{id:b("CometFeedFavoritesHeaderQuery_facebookRelayOperation"),metadata:{},name:"CometFeedFavoritesHeaderQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge",selections:[{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useCometFeedUnitEventLogger_feedUnit"}],storageKey:null}],type:"NewsFeedEdge",abstractKey:null};e.exports=a}),null);
__d("CometHomeContactGroupsContainerQuery.graphql",["WebPixelRatio.relayprovider","CometHomeContactGroupsContainerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__WebPixelRatiorelayprovider:b("WebPixelRatio.relayprovider")};a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},e={kind:"Literal",name:"height",value:36},f={kind:"Literal",name:"width",value:36},h=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeContactGroupsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometHomeContactGroups_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__WebPixelRatiorelayprovider"}],kind:"Operation",name:"CometHomeContactGroupsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_status_viewable",storageKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:[{kind:"Literal",name:"group_threads_only",value:!0},{kind:"Literal",name:"last",value:10}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_xac",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null},c],storageKey:null},d,{alias:null,args:[e,f],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:h,storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[a,c,d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[e,{kind:"Variable",name:"scale",variableName:"__relay_internal__pv__WebPixelRatiorelayprovider"},f],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:h,storageKey:null}],storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:"message_threads(group_threads_only:true,last:10)"}],storageKey:null}]},params:{id:b("CometHomeContactGroupsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactGroupsContainerQuery",operationKind:"query",text:null,providedVariables:g}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometHomeContactGroups_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},b={kind:"Literal",name:"height",value:36},c={kind:"Literal",name:"width",value:36},d=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__WebPixelRatiorelayprovider"}],kind:"Fragment",metadata:null,name:"CometHomeContactGroups_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_status_viewable",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:[{kind:"Literal",name:"group_threads_only",value:!0},{kind:"Literal",name:"last",value:10}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_xac",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null}],storageKey:null},a,{alias:null,args:[b,c],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:d,storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[b,{kind:"Variable",name:"scale",variableName:"__relay_internal__pv__WebPixelRatiorelayprovider"},c],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:d,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"message_threads(group_threads_only:true,last:10)"}],type:"Viewer",abstractKey:null}}();e.exports=a}),null);
__d("CometHomeContactsContainerQuery.graphql",["CometHomeContactsContainerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"noHovercards"},c={defaultValue:null,kind:"LocalArgument",name:"numContactsToFetch"},d={defaultValue:null,kind:"LocalArgument",name:"presenceReadEnableMsys"},e={defaultValue:null,kind:"LocalArgument",name:"scale"},f=[{kind:"Literal",name:"supported",value:["XFBContactsHomeDefaultRenderer","XFBContactsHomeMessagingSolutionForAPRenderer"]}],g={kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeContactsContainerQuery",fragmentName:"CometHomeContactsDefaultRenderer_contactsHomeDefaultRenderer",fragmentPropName:"contactsHomeDefaultRenderer",kind:"ModuleImport"}],type:"XFBContactsHomeDefaultRenderer",abstractKey:null},h={kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeContactsContainerQuery",fragmentName:"CometHomeContactsMessagingSolutionForAPRenderer_contactsHomeMessagingSolutionForAPRenderer",fragmentPropName:"contactsHomeMessagingSolutionForAPRenderer",kind:"ModuleImport"}],type:"XFBContactsHomeMessagingSolutionForAPRenderer",abstractKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e],kind:"Fragment",metadata:null,name:"CometHomeContactsContainerQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:f,concreteType:null,kind:"LinkedField",name:"contacts_home_renderer",plural:!1,selections:[g,h],storageKey:'contacts_home_renderer(supported:["XFBContactsHomeDefaultRenderer","XFBContactsHomeMessagingSolutionForAPRenderer"])'}],type:"User",abstractKey:null}],storageKey:null},action:"THROW",path:"viewer.actor"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,e,a,d],kind:"Operation",name:"CometHomeContactsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:f,concreteType:null,kind:"LinkedField",name:"contacts_home_renderer",plural:!1,selections:[i,g,h],storageKey:'contacts_home_renderer(supported:["XFBContactsHomeDefaultRenderer","XFBContactsHomeMessagingSolutionForAPRenderer"])'}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometHomeContactsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactsContainerQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometHomeRightSideEgoContainer_egoPanel.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeRightSideEgoContainer_egoPanel",selections:[{args:null,kind:"FragmentSpread",name:"CometHomeRightSideEgo_viewer"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometHomeRightSideEgoRefetchQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5486315661429977"}),null);
__d("CometHomeRightSideEgoRefetchQuery.graphql",["CometHomeRightSideEgoRefetchQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:0,kind:"LocalArgument",name:"refresh_num"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c={kind:"Variable",name:"refresh_num",variableName:"refresh_num"},d=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometHomeRightSideEgoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[c],kind:"FragmentSpread",name:"CometHomeRightSideEgo_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometHomeRightSideEgoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"sideFeed",args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!0},c],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:d,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:d,type:"AdsSideFeedUnitItem",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometHomeRightSideEgoRefetchQuery_facebookRelayOperation"),metadata:{},name:"CometHomeRightSideEgoRefetchQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometHomeRightSideEgo_viewer.graphql",["CometHomeRightSideEgoRefetchQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:0,kind:"LocalArgument",name:"refresh_num"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["viewer"],operation:b("CometHomeRightSideEgoRefetchQuery.graphql")}},name:"CometHomeRightSideEgo_viewer",selections:[{alias:"sideFeed",args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!0},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometRightSideHeaderCardsQuery.graphql",["CometRightSideHeaderCardsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"refresh_num"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c={kind:"Literal",name:"environment",value:"COMET"},d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f=[e],g={kind:"InlineFragment",selections:f,type:"Node",abstractKey:"__isNode"};f={kind:"InlineFragment",selections:f,type:"AdsSideFeedUnitItem",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometRightSideHeaderCardsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometRightSideHeaderCards_viewerSideFeed"},{args:null,kind:"FragmentSpread",name:"CometHomeRightSideEgoContainer_egoPanel"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PagesCometHomeAdminContainer_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometRightSideHeaderCardsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"right_side_widget_container_placement",storageKey:null},{alias:null,args:[c,{kind:"Literal",name:"query_ego_units",value:!1},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[d,{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"PagesCometHomeAdminContainer_pagesPanel",fragmentPropName:"pagesPanel",kind:"ModuleImport"}],type:"PagesSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"FriendingCometHomeInlineRHCContainer_friendsPanel",fragmentPropName:"friendsPanel",kind:"ModuleImport"}],type:"FriendingRequestsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRemindersContainer_reminderPanel",fragmentPropName:"reminderPanel",kind:"ModuleImport"}],type:"RemindersSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainer_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainerWithSeeMore_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainerWithSeeMore",abstractKey:null},g,f],storageKey:null}],storageKey:null},{alias:"sideFeed",args:[c,{kind:"Literal",name:"query_ego_units",value:!0},{kind:"Literal",name:"refresh_num",value:0}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[d,{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},g,f],storageKey:null}],storageKey:'side_feed(environment:"COMET",query_ego_units:true,refresh_num:0)'},{alias:null,args:null,kind:"ScalarField",name:"globe_focus",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_profile_plus_on_like_experience",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delegate_page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_manage_classic_page_in_pages_tab",storageKey:null}],type:"User",abstractKey:null},e],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:b("CometRightSideHeaderCardsQuery_facebookRelayOperation"),metadata:{},name:"CometRightSideHeaderCardsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometRightSideHeaderCards_viewerSideFeed.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"refresh_num"}],kind:"Fragment",metadata:null,name:"CometRightSideHeaderCards_viewerSideFeed",selections:[{alias:null,args:null,kind:"ScalarField",name:"right_side_widget_container_placement",storageKey:null},{alias:null,args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!1},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"PagesCometHomeAdminContainer_pagesPanel",fragmentPropName:"pagesPanel",kind:"ModuleImport"}],type:"PagesSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"FriendingCometHomeInlineRHCContainer_friendsPanel",fragmentPropName:"friendsPanel",kind:"ModuleImport"}],type:"FriendingRequestsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRemindersContainer_reminderPanel",fragmentPropName:"reminderPanel",kind:"ModuleImport"}],type:"RemindersSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainer_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainerWithSeeMore_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainerWithSeeMore",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometFeedInlineComposerQuery.graphql",["CometFeedInlineComposerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"includeInlineSprouts"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null},g=[e,f];return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerWOYM_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerPressableProfilePic_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsList_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsListFromGraphQL_profile"},{kind:"InlineFragment",selections:g,type:"User",abstractKey:null},{kind:"InlineFragment",selections:g,type:"Page",abstractKey:null}],storageKey:null},action:"THROW",path:"viewer.actor"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"FeedCometComposer",kind:"LinkedField",name:"feed_comet_composer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsList_composer"},{condition:"includeInlineSprouts",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsListFromGraphQL_composer"}]}],storageKey:null},action:"THROW",path:"viewer.feed_comet_composer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"CometFeedInlineComposerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[d,{kind:"TypeDiscriminator",abstractKey:"__isActor"},e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},f],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:40},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"delegate_page",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"connected_whatsapp_number",storageKey:null},{alias:"whatsapp_sprout_qe",args:[{kind:"Literal",name:"disable_auto_log_exposures",value:!0},{kind:"Literal",name:"qe_universe",value:"bmx_ctwa_pplus_inline_sprout_feed"}],concreteType:"QECheck",kind:"LinkedField",name:"qe_check",plural:!1,selections:[{alias:"show_wa_inline_sprout",args:[{kind:"Literal",name:"bool_default",value:!1},{kind:"Literal",name:"param_name",value:"show_wa_inline_sprout"}],kind:"ScalarField",name:"bool",storageKey:'bool(bool_default:false,param_name:"show_wa_inline_sprout")'}],storageKey:'qe_check(disable_auto_log_exposures:true,qe_universe:"bmx_ctwa_pplus_inline_sprout_feed")'}],storageKey:null}],type:"User",abstractKey:null}],type:"Profile",abstractKey:"__isProfile"},{kind:"InlineFragment",selections:[f],type:"Page",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FeedCometComposer",kind:"LinkedField",name:"feed_comet_composer",plural:!1,selections:[{kind:"InlineFragment",selections:[d],type:"ICometComposer",abstractKey:"__isICometComposer"},{condition:"includeInlineSprouts",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["FeedCometComposerLiveProducerSprout","CometComposerUploadMediaSprout","CometComposerMagicUploadsSprout","CometComposerWithTaggingSprout","CometComposerLocationTaggingSprout","FeedCometComposerGetMessagesSprout","CometComposerMinutiaeSprout","FeedCometComposerGetWhatsAppMessagesSprout","CometComposerArticlesSprout","CometComposerReelsSprout"]}],concreteType:null,kind:"LinkedField",name:"inline_sprouts",plural:!0,selections:[d,{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"InlineComposerLiveProducerSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerLiveProducerSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerMediaSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerUploadMediaSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerMagicUploadsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMagicUploadsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerWithTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerLocationTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerLocationTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerGetMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerFeelingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMinutiaeSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerGetWhatsAppMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetWhatsAppMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerArticlesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerArticlesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsListFromGraphQL_composer",fragmentName:"FeedInlineComposerReelsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerReelsSprout",abstractKey:null}],storageKey:'inline_sprouts(supported:["FeedCometComposerLiveProducerSprout","CometComposerUploadMediaSprout","CometComposerMagicUploadsSprout","CometComposerWithTaggingSprout","CometComposerLocationTaggingSprout","FeedCometComposerGetMessagesSprout","CometComposerMinutiaeSprout","FeedCometComposerGetWhatsAppMessagesSprout","CometComposerArticlesSprout","CometComposerReelsSprout"])'}],type:"ICometComposer",abstractKey:"__isICometComposer"}]}],storageKey:null}],storageKey:null}]},params:{id:b("CometFeedInlineComposerQuery_facebookRelayOperation"),metadata:{},name:"CometFeedInlineComposerQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometMegaphoneRootQuery.graphql",["CometMegaphoneRootQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:1,kind:"LocalArgument",name:"first"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"surface_nux_id",value:2646},{kind:"Literal",name:"trigger",value:"NEWSFEED"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometMegaphoneRootQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"megaphonePromotions",args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerEligibleQuickPromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMegaphoneQuickPromotionSection_quickPromotion"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometMegaphoneRootQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"megaphonePromotions",args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerEligibleQuickPromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometPrimaryTestUserUpsellQP","CometSlimMegaphoneRendererStrategy","CometStandardMegaphoneRendererStrategy","CometEmergencyMegaphoneRendererStrategy","CometMegaphoneWWWDeviceBasedLoginRendererStrategy","CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy","CometQuickPromotionPageTransparencyMegaphoneRendererStrategy","CometQuickPromotionMegaphonePrivacyNotificationRendererStrategy","CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy","CometQuickPromotionNonprofitMegaphoneRendererStrategy","CometQPDiglossiaSurveyRendererStrategy","CometQPRegularSurveyRendererStrategy","CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy","CometQuickPromotionFullImageMegaphoneRendererStrategy","CometQuickPromotionBLMMegaphoneRendererStrategy","CometConsentFrameworkRendererStrategy","CometQuickPromotionPPAMegaphoneRendererStrategy","CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy","CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy","CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy","CometQuickPromotionFullBleedImageRendererStrategy","CometQuickPromotionCreateStreamerFanGroupsRendererStrategy","CometSideImageMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionRendererStrategy","CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy","CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy","CometQuickPromotionTransparencyInformPlatformRendererStrategy","CometQuickPromotionSettingsContextualMessageRendererStrategy","CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy","CometMegaphoneGHLAdBlockerNotificationRendererStrategy"]}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometPrimaryTestUserUpsellQP_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometPrimaryTestUserUpsellQP",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometSlimMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometSlimMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometStandardMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometStandardMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometEmergencyMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometEmergencyMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPageTransparencyMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPageTransparencyMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionMegaphonePrivacyNotificationRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionMegaphonePrivacyNotificationRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionNonprofitMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionNonprofitMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPDiglossiaSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPDiglossiaSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPRegularSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPRegularSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullImageMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullImageMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionBLMMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionBLMMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometConsentFrameworkRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometConsentFrameworkRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPPAMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPPAMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullBleedImageRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullBleedImageRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionCreateStreamerFanGroupsRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionCreateStreamerFanGroupsRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometSideImageMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometSideImageMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWEmailAcquisitionRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWEmailAcquisitionRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionTransparencyInformPlatformRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionTransparencyInformPlatformRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionSettingsContextualMessageRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionSettingsContextualMessageRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneGHLAdBlockerNotificationRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneGHLAdBlockerNotificationRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:["CometPrimaryTestUserUpsellQP","CometSlimMegaphoneRendererStrategy","CometStandardMegaphoneRendererStrategy","CometEmergencyMegaphoneRendererStrategy","CometMegaphoneWWWDeviceBasedLoginRendererStrategy","CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy","CometQuickPromotionPageTransparencyMegaphoneRendererStrategy","CometQuickPromotionMegaphonePrivacyNotificationRendererStrategy","CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy","CometQuickPromotionNonprofitMegaphoneRendererStrategy","CometQPDiglossiaSurveyRendererStrategy","CometQPRegularSurveyRendererStrategy","CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy","CometQuickPromotionFullImageMegaphoneRendererStrategy","CometQuickPromotionBLMMegaphoneRendererStrategy","CometConsentFrameworkRendererStrategy","CometQuickPromotionPPAMegaphoneRendererStrategy","CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy","CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy","CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy","CometQuickPromotionFullBleedImageRendererStrategy","CometQuickPromotionCreateStreamerFanGroupsRendererStrategy","CometSideImageMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionRendererStrategy","CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy","CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy","CometQuickPromotionTransparencyInformPlatformRendererStrategy","CometQuickPromotionSettingsContextualMessageRendererStrategy","CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy","CometMegaphoneGHLAdBlockerNotificationRendererStrategy"])'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometMegaphoneRootQuery_facebookRelayOperation"),metadata:{},name:"CometMegaphoneRootQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("StoriesTrayRectangularBuckets_buckets.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"Variable",name:"isCommentEnabled",variableName:"isCommentEnabled"};return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"shouldEnableLiveInStoriesDropdown"}],kind:"Fragment",metadata:{plural:!0},name:"StoriesTrayRectangularBuckets_buckets",selections:[a,{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[a],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayTilePrefetchProfileURI_profile"},{args:null,kind:"FragmentSpread",name:"useStoriesBucketsLogger_buckets"},{args:null,kind:"FragmentSpread",name:"useStoriesBucketsIndexer_buckets"},{args:[b],kind:"FragmentSpread",name:"StoriesTrayTileSelf_bucket"},{args:[{kind:"Variable",name:"blur",variableName:"blur"},b,{kind:"Variable",name:"shouldEnableLiveInStoriesDropdown",variableName:"shouldEnableLiveInStoriesDropdown"}],kind:"FragmentSpread",name:"StoriesTrayTile_bucket"}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("StoriesTrayRectangularBuckets_createTileUris.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularBuckets_createTileUris",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayCreateTile_imageUris"}],type:"User",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayRectangularBuckets_reels.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"StoriesTrayRectangularBuckets_reels",selections:[{args:null,kind:"FragmentSpread",name:"FBReelsTopOfFeedTrayTile_card"}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayRectangularQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4747538668682139"}),null);
__d("StoriesTrayRectangularQuery.graphql",["StoriesTrayRectangularQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"blur"},c={defaultValue:null,kind:"LocalArgument",name:"bucketsToFetch"},d={defaultValue:null,kind:"LocalArgument",name:"cursor"},e={defaultValue:null,kind:"LocalArgument",name:"id"},f={defaultValue:null,kind:"LocalArgument",name:"isCommentEnabled"},g={defaultValue:null,kind:"LocalArgument",name:"scale"},h={defaultValue:null,kind:"LocalArgument",name:"shouldEnableLiveInStoriesDropdown"},i=[{kind:"Variable",name:"id",variableName:"id"}],j={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"bucketsToFetch"}],m={kind:"Variable",name:"scale",variableName:"scale"},n={kind:"Literal",name:"width",value:40},o=[m,n],p=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],q={alias:"profilePic",args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};o={alias:null,args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null};var s=[{kind:"Literal",name:"height",value:277},m,{kind:"Literal",name:"width",value:156}],t={alias:"coverImage",args:s,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},u=[q,r,o,t];n=[{kind:"Literal",name:"height",value:40},m,n];var v=[k],w={kind:"InlineFragment",selections:v,type:"Node",abstractKey:"__isNode"},x={kind:"InlineFragment",selections:v,type:"GenericAttachmentMedia",abstractKey:null},y={kind:"InlineFragment",selections:v,type:"MontageImage",abstractKey:null},z={kind:"InlineFragment",selections:v,type:"MontageVideo",abstractKey:null};return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"StoriesTrayRectangular_me"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,d,f,g,h,e],kind:"Operation",name:"StoriesTrayRectangularQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,k,{kind:"InlineFragment",selections:[{alias:null,args:l,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,{kind:"TypeDiscriminator",abstractKey:"__isStoryBucket"},k,{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[k,{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},k],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[j,{kind:"InlineFragment",selections:u,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:n,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},r,{alias:null,args:n,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},t],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:u,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[q,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},k,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},r,o,t,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},w],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[k,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[j,w,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[j,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null},w],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:s,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:p,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null},k],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[k,{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[j,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},m],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:p,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[j,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},m,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:p,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{kind:"InlineFragment",selections:[{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_comments",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{condition:"shouldEnableLiveInStoriesDropdown",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"organic_tracking",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:v,type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:v,type:"Video",abstractKey:null},j,w,x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardToStoryViewersConnection",kind:"LinkedField",name:"story_viewers",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"live_video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},k],storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:l,filters:null,handle:"connection",key:"StoriesTrayRectangular_unified_stories_buckets",kind:"LinkedHandle",name:"unified_stories_buckets"}],type:"User",abstractKey:null}],storageKey:null}]},params:{id:b("StoriesTrayRectangularQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("StoriesTrayRectangularReelsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4027091244081273"}),null);
__d("StoriesTrayRectangularReelsQuery.graphql",["StoriesTrayRectangularReelsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"isMLEnabled"},{defaultValue:null,kind:"LocalArgument",name:"reelsCount"},{defaultValue:null,kind:"LocalArgument",name:"reelsCursor"}],c=[{kind:"Variable",name:"after",variableName:"reelsCursor"},{kind:"Variable",name:"first",variableName:"reelsCount"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e=[d];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StoriesTrayRectangularReelsQuery",selections:[{args:[{kind:"Variable",name:"reelsCursor",variableName:"reelsCursor"}],kind:"FragmentSpread",name:"StoriesTrayRectangular_reels"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StoriesTrayRectangularReelsQuery",selections:[{alias:null,args:c,concreteType:"FbShortsUnifiedTofuConnection",kind:"LinkedField",name:"fb_shorts_unified_tofu",plural:!1,selections:[{alias:null,args:null,concreteType:"FbShortsUnifiedTofuEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:null,concreteType:"ShortFormVideoContext",kind:"LinkedField",name:"short_form_video_context",plural:!1,selections:[{condition:"isMLEnabled",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"play_count_reduced",storageKey:null}]},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"playback_video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:e,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:e,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:e,type:"XFBDummyReelsInWatchIFU",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},d],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:c,filters:null,handle:"connection",key:"StoriesTrayRectangularReels_fb_shorts_unified_tofu",kind:"LinkedHandle",name:"fb_shorts_unified_tofu"}]},params:{id:b("StoriesTrayRectangularReelsQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularReelsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("StoriesTrayRectangularRootQuery.graphql",["StoriesTrayRectangularRootQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:10,kind:"LocalArgument",name:"blur"},c={defaultValue:8,kind:"LocalArgument",name:"bucketsToFetch"},d={defaultValue:!1,kind:"LocalArgument",name:"isCommentEnabled"},e={defaultValue:!1,kind:"LocalArgument",name:"isMLEnabled"},f={defaultValue:1,kind:"LocalArgument",name:"reelsCount"},g={defaultValue:null,kind:"LocalArgument",name:"scale"},h={defaultValue:!1,kind:"LocalArgument",name:"shouldEnableHybridTray"},i={defaultValue:!1,kind:"LocalArgument",name:"shouldEnableLiveInStoriesDropdown"},j={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},k=[j],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},m=[{kind:"Variable",name:"first",variableName:"bucketsToFetch"}],n={kind:"Variable",name:"scale",variableName:"scale"},o={kind:"Literal",name:"width",value:40},p=[n,o],q=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],r={alias:"profilePic",args:p,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};p={alias:null,args:p,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null};var t=[{kind:"Literal",name:"height",value:277},n,{kind:"Literal",name:"width",value:156}],u={alias:"coverImage",args:t,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},v=[r,s,p,u];o=[{kind:"Literal",name:"height",value:40},n,o];var w={kind:"InlineFragment",selections:k,type:"Node",abstractKey:"__isNode"},x={kind:"InlineFragment",selections:k,type:"GenericAttachmentMedia",abstractKey:null},y={kind:"InlineFragment",selections:k,type:"MontageImage",abstractKey:null},z={kind:"InlineFragment",selections:k,type:"MontageVideo",abstractKey:null},A={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},B={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null},C=[{kind:"Variable",name:"first",variableName:"reelsCount"}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h,i],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularRootQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangular_me"},{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_createTileUris"}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:k,storageKey:null}],storageKey:null},{condition:"shouldEnableHybridTray",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangular_reels"}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[g,c,a,i,d,f,h,e],kind:"Operation",name:"StoriesTrayRectangularRootQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[l,j,{kind:"InlineFragment",selections:[{alias:null,args:m,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isStoryBucket"},j,{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[j,{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},j],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[l,{kind:"InlineFragment",selections:v,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},s,{alias:null,args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},u],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:v,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[r,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},s,p,u,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},w],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[j,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[l,w,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null},w],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:t,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null},j],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[j,{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},n],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},n,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{kind:"InlineFragment",selections:[{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_comments",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{condition:"shouldEnableLiveInStoriesDropdown",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"organic_tracking",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:k,type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:k,type:"Video",abstractKey:null},l,w,x,y,z],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardToStoryViewersConnection",kind:"LinkedField",name:"story_viewers",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"live_video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},j],storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null}]}],storageKey:null},A],storageKey:null},B],storageKey:null},{alias:null,args:m,filters:null,handle:"connection",key:"StoriesTrayRectangular_unified_stories_buckets",kind:"LinkedHandle",name:"unified_stories_buckets"},{alias:"profilePicture",args:[{kind:"Literal",name:"height",value:150},n,{kind:"Literal",name:"width",value:150}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[l,j],storageKey:null}],storageKey:null},{condition:"shouldEnableHybridTray",kind:"Condition",passingValue:!0,selections:[{alias:null,args:C,concreteType:"FbShortsUnifiedTofuConnection",kind:"LinkedField",name:"fb_shorts_unified_tofu",plural:!1,selections:[{alias:null,args:null,concreteType:"FbShortsUnifiedTofuEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:null,concreteType:"ShortFormVideoContext",kind:"LinkedField",name:"short_form_video_context",plural:!1,selections:[{condition:"isMLEnabled",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"play_count_reduced",storageKey:null}]},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"playback_video",plural:!1,selections:[j,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},w,{kind:"InlineFragment",selections:k,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:k,type:"XFBDummyReelsInWatchIFU",abstractKey:null}],storageKey:null},A,j],storageKey:null},B],storageKey:null},{alias:null,args:C,filters:null,handle:"connection",key:"StoriesTrayRectangularReels_fb_shorts_unified_tofu",kind:"LinkedHandle",name:"fb_shorts_unified_tofu"}]}]},params:{id:b("StoriesTrayRectangularRootQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularRootQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("StoriesTrayRectangular_me.graphql",["StoriesTrayRectangularQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["unified_stories_buckets"];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"bucketsToFetch"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{kind:"RootArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"scale"},{kind:"RootArgument",name:"shouldEnableLiveInStoriesDropdown"}],kind:"Fragment",metadata:{connection:[{count:"bucketsToFetch",cursor:"cursor",direction:"forward",path:a}],refetch:{connection:{forward:{count:"bucketsToFetch",cursor:"cursor"},backward:null,path:a},fragmentPathInResult:["node"],operation:b("StoriesTrayRectangularQuery.graphql"),identifierField:"id"}},name:"StoriesTrayRectangular_me",selections:[{alias:"unified_stories_buckets",args:null,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"__StoriesTrayRectangular_unified_stories_buckets_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_buckets"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"User",abstractKey:null}}();e.exports=a}),null);
__d("StoriesTrayRectangular_reels.graphql",["StoriesTrayRectangularReelsQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["fb_shorts_unified_tofu"];return{argumentDefinitions:[{kind:"RootArgument",name:"isMLEnabled"},{kind:"RootArgument",name:"reelsCount"},{defaultValue:null,kind:"LocalArgument",name:"reelsCursor"}],kind:"Fragment",metadata:{connection:[{count:"reelsCount",cursor:"reelsCursor",direction:"forward",path:a}],refetch:{connection:{forward:{count:"reelsCount",cursor:"reelsCursor"},backward:null,path:a},fragmentPathInResult:[],operation:b("StoriesTrayRectangularReelsQuery.graphql")}},name:"StoriesTrayRectangular_reels",selections:[{alias:"fb_shorts_unified_tofu",args:null,concreteType:"FbShortsUnifiedTofuConnection",kind:"LinkedField",name:"__StoriesTrayRectangularReels_fb_shorts_unified_tofu_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"FbShortsUnifiedTofuEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_reels"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null}}();e.exports=a}),null);
__d("StoriesTrayTileSelf_bucket.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"Variable",name:"scale",variableName:"scale"},c=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],d=[{kind:"Literal",name:"height",value:277},b,{kind:"Literal",name:"width",value:156}];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{defaultValue:!1,kind:"LocalArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"scale"},{kind:"RootArgument",name:"shouldEnableLiveInStoriesDropdown"}],kind:"Fragment",metadata:null,name:"StoriesTrayTileSelf_bucket",selections:[a,{kind:"InlineFragment",selections:[{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_comments",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[b,{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null},{alias:"coverImage",args:d,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[a,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_warningScreen"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:d,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:c,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[a,{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePressable_story"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayProfileImpressionLogging_bucket"},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{args:[{kind:"Variable",name:"shouldEnableLiveInStoriesDropdown",variableName:"shouldEnableLiveInStoriesDropdown"}],kind:"FragmentSpread",name:"StoriesTrayTileView_bucket"}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("StoriesTrayTile_LWRAnimations.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTile_LWRAnimations",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_LWRAnimations"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayTile_bucket.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},c={kind:"Variable",name:"scale",variableName:"scale"},d={kind:"Literal",name:"width",value:40},e=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],f={alias:null,args:[c,d],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:e,storageKey:null},g=[{kind:"Literal",name:"height",value:277},c,{kind:"Literal",name:"width",value:156}],h={alias:"coverImage",args:g,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:e,storageKey:null},i=[b,f,h];return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"},{defaultValue:!1,kind:"LocalArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"scale"},{defaultValue:!1,kind:"LocalArgument",name:"shouldEnableLiveInStoriesDropdown"},{defaultValue:!1,kind:"LocalArgument",name:"shouldSkipCanViewerReply"}],kind:"Fragment",metadata:null,name:"StoriesTrayTile_bucket",selections:[{kind:"InlineFragment",selections:[{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_comments",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayProfileImpressionLogging_bucket"},a,{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:i,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[b,{alias:null,args:[{kind:"Literal",name:"height",value:40},c,d],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:e,storageKey:null},h],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[b,f,h,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_warningScreen"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:g,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[a,{condition:"shouldSkipCanViewerReply",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}]},{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePressable_story"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{args:[{kind:"Variable",name:"shouldEnableLiveInStoriesDropdown",variableName:"shouldEnableLiveInStoriesDropdown"}],kind:"FragmentSpread",name:"StoriesTrayTileView_bucket"}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesTrayProfileImpressionLogging_bucket.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStoriesTrayProfileImpressionLogging_bucket",selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[b],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesTrayTilePrefetchImageURI_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"useStoriesTrayTilePrefetchImageURI_story",selections:[{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},a],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:b,storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},a,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:b,storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}}();e.exports=a}),null);
__d("useStoriesTrayTilePrefetchProfileURI_profile.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b={kind:"Literal",name:"width",value:40},c=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],d=[{alias:"profilePic",args:[a,b],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{plural:!0},name:"useStoriesTrayTilePrefetchProfileURI_profile",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:d,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:[{kind:"Literal",name:"height",value:40},a,b],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:d,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:d,type:"User",abstractKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesTrayTilePressable_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"}],kind:"Fragment",metadata:null,name:"useStoriesTrayTilePressable_story",selections:[{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePrefetchImageURI_story"}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("useStoriesBucketsIndexer_buckets.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"useStoriesBucketsIndexer_buckets",selections:[{args:null,kind:"FragmentSpread",name:"useStoriesIsBucketEmpty_buckets"},a,{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesBucketsLogger_buckets.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"useStoriesBucketsLogger_buckets",selections:[{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},a],type:"User",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:b,storageKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("TopOfFeedTrayWrapperQuery.graphql",["TopOfFeedTrayWrapperQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"nux_id",value:10289}],c={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"xfb_default_landing_tab_tofu_interface",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TopOfFeedTrayWrapperQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[c],storageKey:"nux(nux_id:10289)"},d],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"TopOfFeedTrayWrapperQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:"nux(nux_id:10289)"},d]},params:{id:b("TopOfFeedTrayWrapperQuery_facebookRelayOperation"),metadata:{},name:"TopOfFeedTrayWrapperQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometSideAdsRefreshHandler",["CometDebounce","CometHomeRightSideEgoRefetchQuery.graphql","CometRHCRefreshConfig","CometRelay","ODS","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g){var h=this;d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.constructor");this.$1=a;this.$2=!0;this.$9=1;this.$3=!1;this.$4=b;this.$6=!1;this.$7=!1;this.$8=!1;this.$10=!1;this.$11=!1;this.$5=Date.now();this.$13=e;this.$14=f;this.$16=g;this.$15=!1;this.$12=c("CometDebounce")(function(){h.checkEligibilityAndRefreshIfAllowed()},{wait:c("CometRHCRefreshConfig").debounceDelay})}var b=a.prototype;b.checkEligibilityAndRefreshIfAllowed=function(){this.checkRefreshEligibility()&&this.refresh()};b.checkRefreshEligibility=function(){if(this.$14||this.$6||!this.$2)return!1;if(this.isAdBackgroundedOnHomeTab()||this.isAdHiddenOnHomeTab())return!1;if(this.$8||Date.now()-this.$5>=c("CometRHCRefreshConfig").refreshTimeout){c("CometRHCRefreshConfig").enableTestMode&&d("CometRelay").fetchQuery(this.$1,c("CometHomeRightSideEgoRefetchQuery.graphql"),{refresh_num:this.$9,scale:d("WebPixelRatio").get()},{}).toPromise();return!0}return!1};b.unregister=function(){this.$15&&d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_query_discarded"),this.$2=!1,this.handleActivityTracking()};b.refresh=function(){var a=this;if(this.$6)return;d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refresh_triggered");this.$6=!0;var b="store-or-network";this.$8&&this.$9!==0&&(d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_started"),b="network-only",this.$9=0,this.$15=!0);d("CometRelay").fetchQuery(this.$1,c("CometHomeRightSideEgoRefetchQuery.graphql"),{refresh_num:this.$9,scale:d("WebPixelRatio").get()},{fetchPolicy:b}).toPromise().then(function(b){if(a.$14||a.isAdBackgroundedOnHomeTab()||a.isAdHiddenOnHomeTab()||a.$7){d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refresh_cancelled");return}b=a.isAdHiddenForRefresh();a.$8&&d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_finished."+(b?"hidden":"visible"));a.$8=!1;b?(a.$10=!0,a.$13(a.$9),a.$9++,d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refreshing_ui.hidden")):(a.$13(a.$9),a.$9++,a.$15=!1,a.$5=Date.now(),d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refreshing_ui.visible"))})["finally"](function(){a.$6=!1,a.$7&&(a.$7=!1,window.setTimeout(a.checkEligibilityAndRefreshIfAllowed(),0))})};b.restartInitialLoad=function(){if(this.$8||!this.$2){this.$2&&!this.$8&&d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_opportunity_lost.not_refreshed");return}this.$8=!0;this.$6?this.$7=!0:this.checkEligibilityAndRefreshIfAllowed()};b.handleActivityTracking=function(){var a=this.$2&&this.$3&&!this.$4;a!==this.$11&&(a?this.enableActivityListeners():this.removeActivityListeners())};b.isAdHiddenForRefresh=function(){return this.$4&&!this.$3};b.isAdHiddenOnHomeTab=function(){return!this.$4&&!this.$3};b.isAdBackgroundedOnHomeTab=function(){return!this.$4&&this.$16()};b.handleAnyVisibilityChange=function(){this.$3&&!this.$4&&this.$10&&(this.$10=!1,this.$15=!1,this.$5=Date.now())};b.enableActivityListeners=function(){window.addEventListener("scroll",this.$12),window.addEventListener("resize",this.$12),this.$11=!0};b.removeActivityListeners=function(){window.removeEventListener("scroll",this.$12),window.removeEventListener("resize",this.$12),this.$11=!1};b.setHiddenSubtree=function(a){this.$4=a,a&&(d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_opportunity"),this.restartInitialLoad()),this.handleAnyVisibilityChange(),this.handleActivityTracking()};b.setAdUnitVisibility=function(a){this.$3=a,this.handleAnyVisibilityChange(),this.handleActivityTracking()};b.setEnvironment=function(a){this.$1=a};b.setRefetchCallback=function(a){this.$13=a};b.setIsHovered=function(a){this.$14=a};b.setGetIsBackgrounded=function(a){this.$16=a};return a}();g["default"]=a}),98);
__d("useSideAdsRefreshHandler",["CometRelay","CometSideAdsRefreshHandler","HiddenSubtreePassiveContext","react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useContext,j=b.useEffect,k=b.useRef;function a(a,b){var e=d("CometRelay").useRelayEnvironment(),f=k(null),g=k(null),l=i(c("HiddenSubtreePassiveContext")),m=h(function(){return l.getCurrentState().backgrounded},[l]);j(function(){f.current!=null&&f.current.setEnvironment(e)},[e]);j(function(){f.current!=null&&f.current.setRefetchCallback(function(b){a(b)})},[a]);j(function(){f.current!=null&&f.current.setGetIsBackgrounded(m)},[m]);j(function(){f.current!=null&&f.current.setIsHovered(b)},[b]);var n=h(function(){if(f.current!=null)return;var d=l.getCurrentState();f.current=new(c("CometSideAdsRefreshHandler"))(e,d.hidden,function(b){a(b)},b,m);g.current!=null&&(g.current.remove(),g.current=null);g.current=l.subscribeToChanges(function(a){f.current!=null&&f.current.setHiddenSubtree(a.hidden)})},[m,e,l,b,a]),o=c("useVisibilityObserver")({onHidden:function(){f.current!=null&&f.current.setAdUnitVisibility(!1)},onVisible:function(){f.current!=null&&f.current.setAdUnitVisibility(!0)}}),p=h(function(a){a!=null&&(n(),o(a))},[n,o]);j(function(){return function(){f.current!=null&&(f.current.unregister(),f.current=null),g.current!=null&&(g.current.remove(),g.current=null)}},[]);return p}g["default"]=a}),98);
__d("CometFeedEndOfFeedMessageForNewsfeedOnly.react",["CometFeedEndOfFeedMessage.react","HiddenSubtreePassiveContext","NetworkStatus","cr:1638891","gkx","qex","react","requireDeferred","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useEffect,k=e.useRef,l=c("requireDeferred")("CometNewsFeedEofFalcoEvent").__setRef("CometFeedEndOfFeedMessageForNewsfeedOnly.react"),m=c("requireDeferred")("CometNewsFeedEofUnmountedFalcoEvent").__setRef("CometFeedEndOfFeedMessageForNewsfeedOnly.react");function a(a){var d,e=a.endOfFeedComponent;e=e===void 0?c("CometFeedEndOfFeedMessage.react"):e;var f=a.feedUnitReceivedCount,g=a.feedUnitRenderedCount,n=a.friendsCount,o=a.hasPageInfo,p=a.isError,q=a.maxFeedUnitsReceived,r=a.onReload,s=a.onTailLoadReload,t=a.renderLocation,u=a.tailLoadErrored;a=babelHelpers.objectWithoutPropertiesLoose(a,["endOfFeedComponent","feedUnitReceivedCount","feedUnitRenderedCount","friendsCount","hasPageInfo","isError","maxFeedUnitsReceived","onReload","onTailLoadReload","renderLocation","tailLoadErrored"]);var v=k(!1),w=i(c("HiddenSubtreePassiveContext")),x=k(null),y=r!=null?function(){v.current=!0,c("gkx")("1555064")&&u?s():r()}:void 0;d=(d=c("qex")._("292"))!=null?d:!1;var z=c("useCometRouterState")(),A=(z=z==null?void 0:(z=z.main)==null?void 0:(z=z.route)==null?void 0:z.tabKey)!=null?z:"",B=A==="most_recent_feed"&&d;j(function(){if(t==="homepage_stream"||B){var a=p?"unknown_error":"no_more_edges";p&&(!o&&u?a="missing_page_info_and_tail_load_error":!o?a="missing_page_info":u&&(a="tail_load_error"));var b=c("NetworkStatus").isOnline();x.current=Date.now();l.onReady(function(c){c.log(function(){return{eof_mount_reason:a,feed_tab_key:A,feed_unit_count:g,feed_unit_received_count:f,is_online:b,max_feed_units_received_count:q,was_in_hidden_subtree:w.getCurrentState().hiddenOrBackgrounded_FIXME}})});return function(){var a=Date.now(),b=x.current!=null?a-x.current:null,c=v.current,d=w.getCurrentState().hiddenOrBackgrounded;m.onReady(function(a){a.log(function(){return{feed_unit_count:g,feed_unit_received_count:f,manual_reload:c,mounted_duration:b,was_in_hidden_subtree:d}})})}}},[]);z=!p&&(n==null||n>=60);return h.jsx(e,babelHelpers["extends"]({},a,{feedUnitReceivedCount:f,friendsCount:n,isError:p,isTailLoadError:c("gkx")("1555064")&&u,onReload:y,unstable_fbOnlyMessage:z&&b("cr:1638891")!=null?h.jsx(b("cr:1638891"),{}):void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedFavoritesEndOfFeedMessage.react",["CometFeedFavoritesEndOfFeedMessageQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var c=a.feedUnitReceivedCount;a=a.onReload;c={hasNoStories:c===0};var e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("CometFeedFavoritesEndOfFeedMessageQuery.graphql"),c);return i.jsxs("div",{children:[i.jsx(d("CometRelay").MatchContainer,{match:e==null?void 0:e.see_first_migration_content,props:{onReload:a}}),i.jsx(d("CometRelay").MatchContainer,{match:e==null?void 0:e.favorites_caught_up_content,props:{hasNoStories:c.hasNoStories}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedBrandSafetyContextProvider.react",["CometFeedBrandSafetyContext","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.children;a=a.feedStateInfoRef;var d=c("useUnsafeRef_DEPRECATED")({}),e=c("useUnsafeRef_DEPRECATED")({feedStateInfoRef:a,feedUnitRegistry:d.current});a=i(function(){return e.current},[]);return h.jsx(c("CometFeedBrandSafetyContext").Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedKeyboardNavPositionContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(0);g["default"]=b}),98);
__d("CometNewsFeedLoadedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743387");c=b("FalcoLoggerInternal").create("comet_news_feed_loaded",a);e.exports=c}),null);
__d("CometNewsFeedPerfExperiments",["gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("gkx")("6191")){var a;a=(a=window.navigator)==null?void 0:a.deviceMemory;var b=a!=null&&c("qex")._("42")||!1;b===!0&&a!=null?a<=2?b=c("qex")._("53"):a<=4?b=c("qex")._("58"):b=c("qex")._("106"):b=c("qex")._("1888");return b!=null&&b>0?b:c("justknobx")._("546")}return-1}g.getMaxFeedEdgesToRender=a}),98);
__d("useLogCometFeedUnitRenderAttemptEvent",["CometRelay","react","recoverableViolation","unrecoverableViolation","useCometFeedUnitEventLogger","useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useEffect,j=e.useRef;function a(a,e,f){var g=j(!1);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql"),a);var k=a.category,l=a.deduplication_key;if(a.node==null)throw c("unrecoverableViolation")("node cannot be null on edge in useLogCometFeedUnitRenderAttemptEvent","comet_feed");var m=c("useCometFeedUnitEventLogger")(a.node);i(function(){if(!g.current){g.current=!0;if(l!=null){var a;m({category:(a=k)!=null?a:void 0,event:"render_attempt",position:e,renderLocation:(a=f)!=null?a:void 0})}else c("recoverableViolation")("deduplication key and node cannot be null in useLogCometFeedUnitRenderAttemptEvent","comet_feed")}},[k,l,m,e,f])}g["default"]=a}),98);
__d("CometNewsFeedUnit.react",["CometFeedUnit.react","CometFeedUnitOnUnsupportedLoggerContext","CometFeedUnitSetStatusContext","CometNewsFeedUnit_edge.graphql","CometNewsFeedVPVDStore","CometRelay","FBLogger","react","useLayoutEffect_SAFE_FOR_SSR","useLogCometFeedUnitRenderAttemptEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useContext;function a(a){var e=d("CometRelay").useFragment(h!==void 0?h:h=b("CometNewsFeedUnit_edge.graphql"),a.edge),f=e.category,g=e.node,k=g==null?void 0:g.__typename,l=g==null?void 0:g.post_id,m=a.position,n=a.variables.renderLocation!=="%future added value"?a.variables.renderLocation:null;c("useLogCometFeedUnitRenderAttemptEvent")(e,m,n);var o=j(d("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContext),p=g==null;c("useLayoutEffect_SAFE_FOR_SSR")(function(){p&&(o("error"),c("FBLogger")("CometNewsFeedUnitNull").warn("node should not be null in CometNewsFeedUnit","comet_feed"))},[p,o]);return g==null?null:i.jsx("div",{"data-testid":void 0,children:i.jsx(d("CometNewsFeedVPVDStore").LoggerProvider,{newsFeedEdge:e,children:i.jsx(d("CometFeedUnitOnUnsupportedLoggerContext").CometFeedUnitOnUnsupportedLoggerContextProvider,{category:f,position:m,postID:l,renderLocation:n,unitName:k,children:i.jsx(c("CometFeedUnit.react"),{feedUnit:g,newsFeedEdge:e,position:m,variables:a.variables})})})})}a.displayName=a.name+" [from "+f.id+"]";e=i.memo(a);g["default"]=e}),98);
__d("CometNewsfeedOrderingDebuggingState",[],(function(a,b,c,d,e,f){"use strict";var g={hasInjectedStories:null,order:null,reorderingEnabled:null};function a(){return g}function b(a){g.order=a}function c(a){g.hasInjectedStories=a}function d(a){g.reorderingEnabled=a}f.dump=a;f.setFeedUnitOrderingState=b;f.setHasInjectedStories=c;f.setReorderingEnabled=d}),66);
__d("GHLRandomTags.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.children;a.depth>1&&(b=h.jsx(i,{children:a.children,depth:a.depth-1}));return h.jsx("span",{children:b})}i.displayName=i.name+" [from "+f.id+"]";g["default"]=i}),98);
__d("useCometCappedList",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b){var c,d=j(0),e=k(!1),f=e[0],g=e[1];!f?c=b>0&&a.length>b?a.length-b:0:c=d.current;i(function(){d.current=c},[c]);e=c>0?a.slice(c):a;f=h(function(){return g(!0)},[]);b=h(function(){return g(!1)},[]);return{cappedList:e,pauseTrim:f,resumeTrim:b,topOffset:c}}g["default"]=a}),98);
__d("CometFeedGapRuleConfigProvider",["cr:10858"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:10858")}),98);
__d("CometFeedGapRules",["CometFeedGapRuleConfigProvider","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("CometFeedGapRuleConfigProvider").configName}function a(){return Object.keys(c("CometFeedGapRuleConfigProvider").minGapFromTop)}function i(a){return c("CometFeedGapRuleConfigProvider").minGapFromTop[a]!==void 0}var j=new Set();function k(a,b,d){if(j.has(a))return;b=c("FBLogger")(b);d&&(b=b.catching(d));b.warn(a);j.add(a);return}function l(a){i(a)||k("Feed unit category "+a+" is not supported by client-side gap rule config "+h(),"CometFeedGapValidation")}function b(a,b){a=[a,b];a.forEach(l);a.sort();b=a[0];a=a[1];return(b=(b=c("CometFeedGapRuleConfigProvider").minGap[b])==null?void 0:b[a])!=null?b:0}function d(a){l(a);return(a=c("CometFeedGapRuleConfigProvider").minGapFromTop[a])!=null?a:0}g.getGapRuleConfigName=h;g.getSupportedFeedUnitCategories=a;g.getMinGapBetweenCategories=b;g.getMinGapFromTop=d}),98);
__d("CometValidFeedUnitOrdering",["CometFeedGapRules","CometFeedUnitStatusTrackingUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b.key]=b,a))},{})}function i(a){var b={};d("CometFeedGapRules").getSupportedFeedUnitCategories().forEach(function(a){b[a]=null});a.forEach(function(a,c){b[a.category]=c});return b}function j(a,b,c){return k(a,b,d("CometFeedUnitStatusTrackingUtils").isPossiblyVisible,c)===null}function k(a,b,c,e){var f=d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(a,c),g=f.length,h=i(f);a=Object.keys(h);c=d("CometFeedGapRules").getMinGapFromTop(b);var j=g;if(j<c)return{conflictPosition:null,conflictUnitCategory:null,violationType:"minGapFromTop"};j=null;var k=(c=e==null?void 0:e.sponsoredAuctionDistance)!=null?c:0;a.some(function(a){var c=d("CometFeedGapRules").getMinGapBetweenCategories(b,a);c=b==="SPONSORED"&&a==="SPONSORED"?Math.max(c,k+1):c;if(h[a]!=null){var e=g-h[a];if(e<c){j={conflictPosition:f[h[a]].position,conflictUnitCategory:a,violationType:"minGapBetweenCategories"};return!0}}return!1});return j}function l(a,b){for(var c=0;c<b.length;c++){var d,e=b[c];if(j(a,e.category,{sponsoredAuctionDistance:e==null?void 0:(d=e.edgeData)==null?void 0:d.sponsoredAuctionDistance}))return e}return null}function m(a,b){var c=h(a);return b.filter(function(a){return c[a.key]==null})}function n(a,b){if(a.length<2||b.length===0)return[];b=b.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b]=!0,a))},{});var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(b[e.key]!=null)return c;c.push(e)}return[]}function a(a,b){b===void 0&&(b=0);var c=[];for(var b=b;b<a.length;b++){var e=a[b];if(d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible(e)){var f=k(a.slice(0,b),e.category,d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible);f!=null&&c.push(babelHelpers["extends"]({},f,{violationPosition:b,violationUnitCategory:e.category,violationUnitKey:e.key}))}}return c}function b(a,b,c){c===void 0&&(c=!1);var d=b.reduce(function(a,b,c){return babelHelpers["extends"]({},a,(a={},a[b.key]=c,a))},{}),e={};a.forEach(function(a,b){if(e[a.key]!=null){e[a.key].receivedPositions=e[a.key].receivedPositions.concat([b]);return}e[a.key]={receivedPositions:[b],renderedPosition:(b=d[a.key])!=null?b:null}});if(c)return e;var f={};Object.keys(e).forEach(function(a){var b=e[a];if(b.receivedPositions.length===1&&b.receivedPositions[0]===b.renderedPosition)return;f[a]=b});return f}function o(a){var b={};a=a.filter(function(a){if(b[a.key])return!1;b[a.key]=!0;return!0});return a}function c(a,b,c){b=o(b);var e=h(b);a=a.filter(function(a){return e[a.key]!=null});a=d("CometFeedUnitStatusTrackingUtils").getAllPositionedFeedUnits(d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithRenderingOutOfOrderFixed(a));c=n(b,c).map(function(a){return babelHelpers["extends"]({},a,{status:"positioned"})});var f=c.concat(a),g=m(f,b);c=function(){var a=l(f,g);if(a==null)return"break";f.push(babelHelpers["extends"]({},a,{status:"received"}));g=g.filter(function(b){return b.key!==a.key})};while(g.length>0){a=c();if(a==="break")break}return f}g.getFeedUnitMap=h;g.getLastPositionsForCategories=i;g.isUnitEligibleToBePlacedNext=j;g.getViolationIfUnitIsPlacedNext=k;g.getNextEligibleUnit=l;g.getAvailableUnits=m;g.getNewHeadLoadedUnits=n;g.getFeedUnitOrderViolations=a;g.getFeedUnitReorderInfo=b;g.removeDuplicates=o;g.getValidFeedUnitOrdering=c}),98);
__d("useCometFeedIneligibleUnitLogger",["CometFeedUnitsTypedLoggerLite","CometValidFeedUnitOrdering","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useMemo,j=b.useRef;function a(a,b){var e=c("useUnsafeRef_DEPRECATED")({}),f=i(function(){return a.map(function(a){if(a!=null&&a.category!=null&&a.deduplication_key!=null){return{category:a.category,key:a.deduplication_key,status:"received",typename:(a=a==null?void 0:(a=a.node)==null?void 0:a.__typename)!=null?a:null}}return null}).filter(Boolean)},[a]),g=f.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b.key]=b,a))},{}),k=f.map(function(a){return{category:a.category,key:a.key,status:"rendered"}}),l=0;k.some(function(a,b){if(e.current[a.key]==null){l=b;return!0}});var m=d("CometValidFeedUnitOrdering").getFeedUnitOrderViolations(k,l),n=j({});h(function(){var a={};f.forEach(function(d,e){if(a[d.key]!=null){var f;a[d.key]+=1;a[d.key]>((f=n.current[d.key])!=null?f:0)&&c("CometFeedUnitsTypedLoggerLite").log({category:d.category,event:"ineligible_for_position",ineligible_reason:"duplicate",position:e,render_location:b,unit_name:d.typename})}else a[d.key]=1});n.current=a});h(function(){m.forEach(function(a){if(e.current[a.violationUnitKey]==null){var d=a.violationPosition,f=a.violationUnitCategory;a=a.violationUnitKey;c("CometFeedUnitsTypedLoggerLite").log({category:f,event:"ineligible_for_position",ineligible_reason:"gap_rule_violation",position:d,render_location:b,unit_name:(d=(f=g[a])==null?void 0:f.typename)!=null?d:null})}}),k.forEach(function(a){e.current[a.key]=!0})})}g["default"]=a}),98);
__d("FeedRequestWaterfallTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:FeedRequestWaterfallLoggerConfig")}),null);
__d("useCometFeedRequestWaterfallLogger",["FeedRequestWaterfallTypedLoggerLite","react","usePrevious","uuid"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useRef;function a(a,b,d){var e=j(null),f=c("usePrevious")(a);i(function(){if(f===a)return;if(e.current!=null){var b=f!=null?a.filter(function(a){return!f.find(function(b){return b===a})}):a,g=b.reduce(function(a,b){b=(b=b.feed_backend_data)==null?void 0:b.qid;if(b==null)return a;a[b]==null?a[b]=1:a[b]++;return a},{});Object.keys(g).forEach(function(a){c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e.current,event:"client_received_response",is_employee:d,number_of_stories:g[a],query_id:a})})}},[a,d,f]);var g=j(0),k=b.length;i(function(){e.current!=null&&(c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e.current,event:"client_rendered_success",is_employee:d,number_of_stories:k-g.current}),g.current=k)},[k,d]);b=h(function(){var a=c("uuid")();c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:a,event:"client_sent_request",is_employee:d});e.current=a;return a},[d]);var l=h(function(a){c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e.current,event:"client_failed_to_receive_response",failure_reason:a.message,is_employee:d,number_of_stories:g.current})},[d]);return[b,l]}g["default"]=a}),98);
__d("CometFeedUnitOrderingDebugInfo",["CometValidFeedUnitOrdering"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=[],e=[],f=d("CometValidFeedUnitOrdering").getFeedUnitMap(b.map(function(a){return babelHelpers["extends"]({},a,{status:"received"})}).concat(a)),g=d("CometValidFeedUnitOrdering").getFeedUnitReorderInfo(b,a,!0);b.forEach(function(a){a=a.key;a={renderedPosition:g[a]!=null?g[a].renderedPosition:null,receivedPositions:g[a]!=null?g[a].receivedPositions:[],category:f[a].category,key:a,status:f[a].status};a.renderedPosition!=null?c[a.renderedPosition]=a:e.push(a)});return{feedUnitsDeferred:e,feedUnitsToRender:c}}function a(a,b,c,d,e){c===void 0&&(c=!0);d===void 0&&(d=0);a=h(a,b);b=a.feedUnitsToRender.concat(a.feedUnitsDeferred);a=b.slice(d,e!=null?e:b.length);d=a.map(function(a){var b=a.renderedPosition!==a.receivedPositions[0];return(b?"*":" ")+" "+((b=a.renderedPosition)!=null?b:"X").toString().padStart(3)+": ["+(a.receivedPositions.toString()+"]").padEnd(7)+" "+a.category.padEnd(12).slice(0,12)+" "+a.key.padEnd(10).slice(0,10)+" "+a.status.slice(0,16)});if(c){e="  Pos: [recvd]  "+"Category".padEnd(13)+"Key (part)".padEnd(11)+"Status";return[e].concat(d).join("\n")}return d.join("\n")}g.getCometFeedUnitOrderingDebugInfo=h;g.getCometFeedUnitOrderingDebugInfoString=a}),98);
__d("getCometFeedUnitOrderingDebuggingTable",["CometFeedUnitOrderingDebugInfo"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return{ReceivedPositions:"["+a.receivedPositions.toString()+"]"+(a.renderedPosition!==a.receivedPositions[0]?" reordered":""),Category:a.category,Key:a.key,Status:a.status+(a.renderedPosition==null?" (deferred)":"")}}function a(a,b){a=d("CometFeedUnitOrderingDebugInfo").getCometFeedUnitOrderingDebugInfo(a,b);b=a.feedUnitsToRender.map(h);a=a.feedUnitsDeferred.map(h);return{feedUnitsDeferred:a,feedUnitsToRender:b}}g["default"]=a}),98);
__d("useCometFeedGapRuleViolationLogger",["CometFeedUnitOrderingDebugInfo","CometFeedUnitStatusTrackingUtils","CometValidFeedUnitOrdering","react","requireDeferred","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=c("requireDeferred")("CometFeedGapRuleViolationTypedLoggerLite").__setRef("useCometFeedGapRuleViolationLogger"),j=6,k=3;function a(a,b,e){var f=c("useUnsafeRef_DEPRECATED")({}),g=0;a.some(function(a,b){if(d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible(a)&&f.current[a.key]==null){g=b;return!0}});var l=d("CometValidFeedUnitOrdering").getFeedUnitOrderViolations(a,g);h(function(){l.forEach(function(c){if(a[c.violationPosition]!=null&&f.current[a[c.violationPosition].key]==null){var g=c.conflictPosition,h=c.conflictUnitCategory,l=c.violationPosition,m=c.violationType,n=c.violationUnitCategory;c=(c=g)!=null?c:0;var o=e?d("CometFeedUnitOrderingDebugInfo").getCometFeedUnitOrderingDebugInfoString(a,b,!0,c-j,l+1+k):null,p=a.slice(0,l+1).filter(function(a){return a.status==="error"}).length,q=a.slice(c+1,l).filter(function(a){return a.status==="error"}).length;i.onReady(function(a){a.log({conflict_position:g,conflict_unit_category:h,debug_info:o,errored_in_gap_count:q,errored_total_count:p,reordering_enabled:e,violation_cause:"unknown",violation_position:l,violation_type:m,violation_unit_category:n})})}}),a.filter(d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible).forEach(function(a){f.current[a.key]=!0})})}g["default"]=a}),98);
__d("useCometFeedUnitStatusTracking",["CometFeedUnitStatusTrackingUtils","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef,j=["received","positioned","rendered","error"];function k(a,b){b=b.map(function(b){return a[b]!=null?{category:a[b].category,key:b,status:a[b].status}:null}).filter(Boolean);return d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithRenderingOutOfOrderFixed(b)}function a(a,b){var d=c("useUnsafeRef_DEPRECATED")({}),e=c("useUnsafeRef_DEPRECATED")([]),f=i({}),g=c("useUnsafeRef_DEPRECATED")(0),l=g.current,m=h(function(){if(a!=null){var b=k(d.current,e.current);a(b)}},[a]),n=h(function(){return k(d.current,e.current)},[]),o=h(function(){d.current={},e.current=[],f.current={},g.current+=1},[]),p=h(function(a){var b=e.current.length===a.length&&e.current.every(function(b,c){return b===a[c]});if(b)return;e.current.filter(function(b){return a.indexOf(b)===-1}).forEach(function(a){delete d.current[a]});e.current=a;m()},[m]),q=h(function(a,c){l;var e=d.current[a];if(e==null){d.current[a]=c;m();return}var g=j[Math.max(j.indexOf(c.status),j.indexOf(e.status))];c={category:c.category,status:g};if(c.category===e.category&&c.status===e.status)return;c.status==="error"&&f.current[a]===void 0&&(b!=null&&b(a,e.status==="rendered"),f.current[a]=!0);d.current[a]=c;m()},[b,m,l]),r=k(d.current,e.current);return[r,p,q,o,n]}g["default"]=a}),98);
__d("useCometFeedUnitReordering",["CometFeedGapRules","CometFeedUnitStatusTrackingUtils","CometNewsfeedOrderingDebuggingState","CometValidFeedUnitOrdering","FBLogger","InteractionTracing","cr:991456","emptyFunction","getCometFeedUnitOrderingDebuggingTable","gkx","react","recoverableViolation","useCometFeedGapRuleViolationLogger","useCometFeedUnitStatusTracking","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useEffect,j=e.useRef,k=e.useState;function l(a,b,d){b===void 0&&(b="CometFeedRenderingOrderError");d===void 0&&(d="Feed unit effects called out of order");var e=null,f=null;a.forEach(function(a,b){a.status==="rendered"&&(e=b),a.status==="received"&&f===null&&(f=b)});if(e!=null&&f!=null&&f<e&&f!==0){a=a.map(function(a,b){return babelHelpers["extends"]({},a,{position:b})}).slice(Math.max(0,f-2),e+2).map(function(a){return String(a.position).padStart(2)+": "+a.status+" | "+a.category+" | "+a.key}).join("\n");c("FBLogger")(b).warn(d+" in positions "+f+"-"+e+".\n"+a)}}function a(a,e,f){var g=k(0);g[0];var m=g[1],n=j({});g=h(function(a,b){m(function(a){return a+1}),b&&(n.current[a]=!0)},[]);i(function(){d("CometNewsfeedOrderingDebuggingState").setReorderingEnabled(e)},[e]);g=c("useCometFeedUnitStatusTracking")(c("emptyFunction"),g);var o=g[0],p=g[1],q=g[2],r=g[3],s=g[4],t=a.map(function(a){if(a==null){c("recoverableViolation")("edge should not be nullish in useCometFeedUnitReordering","comet_feed");return null}if(a.node==null)return null;if(a.category==null){c("recoverableViolation")("category should not be nullish in useCometFeedUnitReordering","comet_feed");return null}if(a.deduplication_key==null){c("recoverableViolation")("deduplication_key should not be nullish in useCometFeedUnitReordering","comet_feed");return null}var b={category:a.category,key:a.deduplication_key};return c("gkx")("1578866")?babelHelpers["extends"]({},b,{edgeData:{sponsoredAuctionDistance:a.sponsored_auction_distance}}):b}).filter(Boolean);g=c("usePrevious")(t.map(function(a){return a.key}));c("useCometFeedGapRuleViolationLogger")(o,t,e);var u=e?d("CometValidFeedUnitOrdering").getValidFeedUnitOrdering(o,t,(o=g)!=null?o:[]):t.map(function(a){return babelHelpers["extends"]({},a,{status:"received"})});i(function(){var a=u.map(function(a){return a.key});p(a);d("CometFeedUnitStatusTrackingUtils").getUncommittedFeedUnits(u).forEach(function(a){return q(a.key,{category:a.category,status:a.status})})});var v=a.filter(Boolean).reduce(function(a,b){if(b==null||b.deduplication_key==null)return a;return a[b.deduplication_key]!=null?a:babelHelpers["extends"]({},a,(a={},a[b.deduplication_key]=b,a))},{});g=f&&e?u.filter(d("CometFeedUnitStatusTrackingUtils").isPossiblyVisible):u;o=e?g.map(function(a){return v[a.key]}).filter(Boolean):a.filter(Boolean);var w=j(!1);i(function(){var b;b=(b=a[0])==null?void 0:b.deduplication_key;if(e&&!w.current&&b!=null&&t!=null&&u!=null){var f=d("CometValidFeedUnitOrdering").getFeedUnitReorderInfo(t,u);f[b]!=null&&c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationInt("firstFeedUnitReordered",1)});w.current=!0}});i(function(){if(b("cr:991456")!=null)var a,c=d("CometFeedGapRules").getGapRuleConfigName(),a={CometFeedClientBlueSiteGapRuleConfig:"blue",CometFeedClientFullGapRuleConfig:"green",CometFeedClientMinimalGapRuleConfig:"cyan",CometFeedClientQEBasedGapRuleConfig:"orange"},c=(a=a[c])!=null?a:"green"},[e]);i(function(){d("CometNewsfeedOrderingDebuggingState").setFeedUnitOrderingState(c("getCometFeedUnitOrderingDebuggingTable")(u,t)),b("cr:991456")!=null&&b("cr:991456")(u,t)});i(function(){window.requestAnimationFrame(function(){l(s(),"CometFeedRenderingOrderErrorAfterAnimationFrame","Feed units rendered out of order")})});return{feedEdgesToRender:o,getFeedUnitStatusListPassive:s,resetFeedUnitRegistry:r,setFeedUnitRecord:q}}g["default"]=a}),98);
__d("CometNewsFeed.react",["fbt","CometBackupPlaceholder.react","CometFeedBrandSafetyContextProvider.react","CometFeedEndOfFeedMessageForNewsfeedOnly.react","CometFeedInfiniteScrollSuspenseList.react","CometFeedKeyboardNavPositionContext","CometFeedTailLoadConfig","CometFeedUnitErrorBoundary.react","CometFeedUnitSetDebugInfoContextProvider.react","CometFeedUnitSetStatusContext","CometFeedUnitStatusListPassiveContext","CometFeedUnitsTypedLoggerLite","CometGHLFeedClassContext","CometHeroFeedItem.react","CometHeroHoldTrigger.react","CometNewsFeedLoadedFalcoEvent","CometNewsFeedPerfExperiments","CometNewsFeedUnit.react","CometNewsFeed_viewer.graphql","CometNewsfeedOrderingDebuggingState","CometOnInitialMount.react","CometRelay","CometScreenReaderHeading.react","ErrorGuard","FBLogger","GHLRandomTags.react","GHLSurfaceContainerContext","HiddenSubtreePassiveContext","InteractionTracing","Random","VideoAutoplayLocalScopeProvider.react","VideoPlayerAutoplayRulesProvider","cr:1142206","cr:1813330","gkx","react","useCometCappedList","useCometFeedIneligibleUnitLogger","useCometFeedKeyCommands","useCometFeedRequestWaterfallLogger","useCometFeedUnitReordering","useSimpleImpression","useStable","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useRef,o=e.useState,p=c("gkx")("1101967"),q=d("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("default_feed"),r="homepage_stream",s=c("gkx")("1217157")?[2,2,2,2,4]:void 0,t=i!==void 0?i:i=b("CometNewsFeed_viewer.graphql"),u=j.memo(function(a){var b,e=a.feedEdge,f=a.position,g=a.setFeedUnitRecord;a=a.variables;var h=n(!1),i=e.node;if(i==null)return null;var k=(b=i.__typename)!=null?b:null;return j.jsx(c("CometHeroFeedItem.react"),{position:f,children:j.jsx(c("CometBackupPlaceholder.react"),{fallback:j.jsx(c("CometOnInitialMount.react"),{onInitialMount:function(){c("CometFeedUnitsTypedLoggerLite").log({category:e.category,event:"unexpected_resuspense",position:f,render_location:r,unit_name:k})}}),unstable_onSuspense:function(a){h.current||(c("CometFeedUnitsTypedLoggerLite").log({category:e.category,event:"unexpected_resuspense_with_name",position:f,promise_name:a,render_location:r,unit_name:k}),h.current=!0)},children:j.jsx(d("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContextProvider,{category:e.category,deduplicationKey:e.deduplication_key,setFeedUnitRecord:g,children:j.jsx(c("CometFeedUnitErrorBoundary.react"),{category:(b=e.category)!=null?b:void 0,feedUnit:i,position:f,renderLocation:r,unitTypename:k,children:j.jsx(c("CometNewsFeedUnit.react"),{edge:e,position:f,variables:a})})})})})}),v=d("CometNewsFeedPerfExperiments").getMaxFeedEdgesToRender();function a(a){var e,f,g=o(!1),i=g[0],w=g[1];g=o(!1);var x=g[0],y=g[1];g=d("CometRelay").usePaginationFragment(t,a.viewer);var z=g.data,A=g.hasNext,B=g.isLoadingNext,C=g.loadNext,D=d("CometRelay").useIsParentQueryActive(t,a.viewer);g=a.endOfFeedComponent;var E=a.isReloading,F=a.onReload,aa=a.variables;a=z==null?void 0:z.is_fb_employee;var G=z==null?void 0:z.news_feed;e=(e=z==null?void 0:z.can_have_friends)!=null?e:!0;f=(f=z==null?void 0:(f=z.actor)==null?void 0:f.name)!=null?f:null;var H=B||D||!x||E,I=!i&&(A||D||!x),J=z==null?void 0:(B=z.news_feed)==null?void 0:B.injected_stories;E=(G==null?void 0:G.page_info)!=null;z=z==null?void 0:(B=z.all_friends)==null?void 0:B.friend_count;var K=(B=G==null?void 0:G.edges)!=null?B:[];G=n(null);var L=n(null);m(function(){var a={didMount:x,hasMore:I,hasNextFromPaginationFragment:A,isParentQueryActive:D,tailLoadErrored:i};if(L.current!=null&&L.current.tailLoadErrored===!1&&L.current.hasMore===!1&&I===!0){var b;b=(b=c("ErrorGuard").applyWithGuard(function(){return JSON.stringify({hasMoreObject:a,previousHasMoreObject:L.current})},null,[]))!=null?b:"";c("FBLogger")("CometNewsfeedHasMoreUnstable").addMetadata("COMET_FEED","FEED_UNIT_RECEIVED_COUNT",String(K.length)).mustfix("hasMore unexpectedly became true again after being false\n\n"+b)}L.current=a},[x,K.length,I,A,D,i]);var M=c("useUnsafeRef_DEPRECATED")(0),N=Math.max(M.current,K.length);m(function(){M.current=N},[N]);c("useCometFeedIneligibleUnitLogger")(K,r);B=c("useCometFeedUnitReordering")(K,c("gkx")("951936")&&!J,p);var O=B.feedEdgesToRender,ba=B.getFeedUnitStatusListPassive,ca=B.setFeedUnitRecord;B=c("useCometCappedList")(O,v);var P=B.cappedList,Q=B.pauseTrim,R=B.resumeTrim,S=B.topOffset,da=l(c("HiddenSubtreePassiveContext"));m(function(){c("CometNewsFeedLoadedFalcoEvent").log(function(){return{feed_unit_count:O.length,feed_unit_received_count:K.length,was_in_hidden_subtree:da.getCurrentState().hiddenOrBackgrounded_FIXME}})},[]);m(function(){y(!0)},[]);m(function(){d("CometNewsfeedOrderingDebuggingState").setHasInjectedStories(J!=null)},[J]);B=c("useCometFeedRequestWaterfallLogger")(K,O,!!a);var T=B[0],U=B[1],V=k(function(){b("cr:1142206")!=null&&b("cr:1142206").log("[handleLoadMore]","checking if we have hasNext or are isLoading",{hasNext:I,isLoading:H});if(!I||H)return;b("cr:1142206")!=null&&b("cr:1142206").log("[handleLoadMore]","starting tail load with trace");var a=T();C(c("CometFeedTailLoadConfig").fetchCount,{UNSTABLE_extraVariables:{clientQueryId:a},onComplete:function(a){a!=null&&(w(!0),U(a),b("cr:1142206")!=null&&b("cr:1142206").log("[loadNext]","Failed to fetch next page",{errorMessage:a.toString(),hasNext:I,isLoading:H}))}})},[I,H,C,U,T]);a=k(function(){w(!1),V()},[V]);c("useSimpleImpression")(function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationInt("comet_news_feed_count",P.length)})});B=null;J!=null&&(B=d("CometRelay").ModuleResource.read(J));var W={},ea=S,X=P.map(function(a,b){if(a.node==null)return null;var c=a.deduplication_key;c!=null?(W[c]!=null?W[c]+=1:W[c]=1,c=c+"-"+W[c].toString()):c=(b+S).toString();return j.jsx(u,{feedEdge:a,position:ea++,setFeedUnitRecord:ca,variables:aa},c)});b("cr:1813330")!=null&&(b("cr:1813330").setNewsFeedCount(X.length),b("cr:1813330").setNewsFeedStoryPositionOffset(S));Q=c("useCometFeedKeyCommands")(O.length,"newsfeed",null,Q,R);var Y=!H&&!I,Z=!E||i,$=n(null);m(function(){$.current={hasMore:I,isEOFError:Z,isLoading:H,showEOFMessageAfterFeedStoppedLoading:Y}},[Y,I,Z,H]);R=c("gkx")("8240")?null:{role:"feed"};var fa=c("useStable")(function(){return Math.floor(d("Random").random()*5)+4});Q=j.jsxs(j.Fragment,{children:[j.jsx(c("CometScreenReaderHeading.react"),{children:h._("__JHASH__DhoLL8WnZ7W__JHASH__")}),j.jsx(c("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:q,children:j.jsx(c("GHLSurfaceContainerContext").Provider,{value:G,children:j.jsxs(c("CometFeedKeyboardNavPositionContext").Provider,{value:Q,children:[B?j.jsx(B,{}):null,j.jsx(c("CometFeedUnitStatusListPassiveContext").Provider,{value:ba,children:j.jsx(c("CometFeedUnitSetDebugInfoContextProvider.react"),{location:"newsfeed",children:j.jsxs(c("CometFeedBrandSafetyContextProvider.react"),{feedStateInfoRef:$,children:[j.jsx(c("CometHeroHoldTrigger.react"),{description:"FeedQuery",hold:(I||H)&&P.length<2}),j.jsx(c("CometGHLFeedClassContext").Provider,{value:c("gkx")("7166"),children:j.jsx(c("CometFeedInfiniteScrollSuspenseList.react"),{hasMore:I,incrementalRenderingPageSizes:s,interactionSource:0,isLoading:H,onLoadMore:V,pageletName:"FeedUnit",positionLimitForSSR:c("gkx")("1490223")?1:0,waitOnScrollIntent:!0,children:X})})]})})}),Y?j.jsx(c("CometFeedEndOfFeedMessageForNewsfeedOnly.react"),{canHaveFriends:e,endOfFeedComponent:g,feedUnitReceivedCount:K.length,feedUnitRenderedCount:P.length,friendsCount:z,hasPageInfo:E,isError:Z,maxFeedUnitsReceived:N,onReload:F,onTailLoadReload:a,renderLocation:r,tailLoadErrored:i,viewerName:f}):null]})})})]});return j.jsx("div",babelHelpers["extends"]({"data-testid":void 0,ref:G},R,{children:c("gkx")("8409")?j.jsx(c("GHLRandomTags.react"),{children:Q,depth:fa}):Q}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FeedsCometEndOfFeed.react",["fbt","ix","CometCard.react","TetraIcon.react","TetraTextPairing.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){a=h._("__JHASH__v08xGtDkJGJ__JHASH__");var b=h._("__JHASH__OyqzLoZqCEb__JHASH__");return j.jsx("div",{className:"x1hq5gj4",children:j.jsx(c("CometCard.react"),{background:"white",dropShadow:1,children:j.jsxs("div",{className:"xbbxn1n xwxc41k xxbr6pl x1p5oq8j xdt5ytf x78zum5 x6s0dn4",children:[j.jsx("div",{className:"x1t2a60a xs9asl8 x1mpkggp x123j3cw x1yztbdb",children:j.jsx(c("TetraIcon.react"),{color:"positive",icon:d("fbicon")._(i("509885"),32)})}),j.jsx(c("TetraTextPairing.react"),{body:a,headline:b,level:2,textAlign:"center"})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometModernHomeFeed.react",["CometFeedFavoritesEndOfFeedMessage.react","CometModernHomeFeedQuery.graphql","CometNewsFeed.react","CometRelay","FeedsCometEndOfFeed.react","RelayUFI2CommentsKeyContext","gkx","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("CometModernHomeFeedQuery.graphql");a=i.memo(function(a){var b,e=a.cacheBreaker,f=a.feedQueryReference,g=a.isLoading;a=a.onReload;var h=d("CometRelay").usePreloadedQuery(j,f),k=String(f.variables.orderby);e=k+"_"+e;b=(b=c("qex")._("292"))!=null?b:!1;k=f.variables.feedStyle==="FAVORITES_FEED"&&c("gkx")("1386487")?c("CometFeedFavoritesEndOfFeedMessage.react"):k==="MOST_RECENT"&&b?c("FeedsCometEndOfFeed.react"):void 0;return i.jsx(c("RelayUFI2CommentsKeyContext").Provider,{value:"CometModernHomeFeedQuery",children:i.jsx(c("CometNewsFeed.react"),{endOfFeedComponent:k,isReloading:g,onReload:a,variables:f.variables,viewer:h.viewer},e)})});g["default"]=a}),98);
__d("CometFeedFavoritesHeader.react",["fbt","ix","CometFeedFavoritesHeaderQuery.graphql","CometRelay","TetraButton.react","TetraText.react","fbicon","react","useCometFeedPreferencesDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=d("react");function a(){var a=d("CometRelay").useLazyLoadQuery(j!==void 0?j:j=b("CometFeedFavoritesHeaderQuery.graphql"),{}),e=c("useCometFeedPreferencesDialog")(),f=e[0];e=e[1];return k.jsxs("div",{children:[k.jsxs("div",{className:"xyorhqc x78zum5",children:[k.jsx("div",{className:"xz9dl7a x1iyjqo2",children:k.jsx(c("TetraText.react"),{type:"headlineEmphasized3",children:h._("__JHASH__gQCwNEoCDV5__JHASH__")})}),k.jsx("div",{className:"x1c4vz4f",children:k.jsx(c("TetraButton.react"),{icon:d("fbicon")._(i("497566"),16),label:h._("__JHASH__RQlCb2nGstH__JHASH__"),onPress:function(){return f()},onPressIn:e,type:"secondary"})}),k.jsx("div",{className:"x1c4vz4f xurb0ha",children:k.jsx(c("TetraButton.react"),{icon:d("fbicon")._(i("638854"),16),label:h._("__JHASH__3_zHGB-NXwp__JHASH__"),linkProps:{url:"/"},type:"secondary"})})]}),k.jsx(d("CometRelay").MatchContainer,{match:a==null?void 0:a.see_first_migration_content})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedMostRecentHeader.react",["fbt","CometPressable.react","CometRouteParams","TetraText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){var a=d("CometRouteParams").useRouteParams();a=a.sk;if(a!=="h_chr")return null;a=h._("__JHASH__uwsm5G_5HyE__JHASH__");return i.jsxs("div",{className:"xkhd6sd x1l90r2v x4uap5 xyamay9 x1gryazu xat24cr xkrivgy xdj266r x78zum5 x1n2xptk",children:[i.jsx("div",{className:"x1iyjqo2",children:i.jsx(c("TetraText.react"),{type:"headlineEmphasized3",children:h._("__JHASH__EwjDAHsS3QO__JHASH__")})}),i.jsx("div",{className:"xs83m0k",children:i.jsx(c("CometPressable.react"),{display:"inline",label:a,linkProps:{url:"/"},overlayDisabled:!0,children:i.jsx(c("TetraText.react"),{color:"blueLink",type:"body3",children:a})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedClientQEBasedGapRuleConfig",["qex"],(function(a,b,c,d,e,f,g){"use strict";b={configName:"CometFeedClientQEBasedGapRuleConfig",minGapFromTop:{END_OF_FEED_CONTENT:0,ENGAGEMENT:0,ENGAGEMENT_QP:1,FB_SHORTS:7,FB_STORIES:0,FB_STORIES_ENGAGEMENT:0,FIXED_POSITION:0,HIGH_VALUE_PROMOTION:0,ORGANIC:0,PROMOTION:0,SHOWCASE:3,SPONSORED:1,UNKNOWN:0},minGap:{END_OF_FEED_CONTENT:{ORGANIC:0,ENGAGEMENT:0,FIXED_POSITION:0,PROMOTION:0,SPONSORED:0,END_OF_FEED_CONTENT:0,FB_STORIES:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},ENGAGEMENT:{ORGANIC:0,ENGAGEMENT:2,FIXED_POSITION:0,PROMOTION:0,SPONSORED:0,FB_STORIES:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},FB_STORIES:{ORGANIC:0,FIXED_POSITION:0,PROMOTION:0,SPONSORED:0,FB_STORIES:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},FB_STORIES_ENGAGEMENT:{PROMOTION:0,ORGANIC:0,FIXED_POSITION:0,SPONSORED:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},FIXED_POSITION:{ORGANIC:0,FIXED_POSITION:0,PROMOTION:2,SPONSORED:0,HIGH_VALUE_PROMOTION:0},HIGH_VALUE_PROMOTION:{ORGANIC:0,PROMOTION:0,SPONSORED:0,HIGH_VALUE_PROMOTION:0},ORGANIC:{ORGANIC:0,PROMOTION:0,SPONSORED:0},PROMOTION:{PROMOTION:2,SPONSORED:0},SPONSORED:{SPONSORED:(a=c("qex")._("1115"))!=null?a:2}}};g["default"]=b}),98);
__d("MWJewelThreadFacepile.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}e={availabilityBadge:a,lastActiveTimeBadge:b,activityBadge:c,trigger:d};f.ProfilePhotoAddOn=e}),null);
__d("MWThreadAddOnPrimary.bs",["ImmutableArray.bs","MWJewelThreadFacepile.bs","bs_belt_Option","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e,f){return{primaryPhoto:{alt:b("bs_belt_Option").getWithDefault(d,""),source:{uri:a}},secondaryPhoto:{alt:b("bs_belt_Option").getWithDefault(d,""),source:{uri:c}},size:e,addOn:f,type:"messenger-facepile"}}function h(a,c,d,e,f){return{addOn:e,shape:f,size:d,source:{uri:a},alt:b("bs_belt_Option").getWithDefault(c,""),linkProps:void 0,type:"profile-photo"}}function a(a,c,d,e,f,i){e=e!==void 0?b("bs_caml_option").valFromOption(e):"circle";var j=b("MWJewelThreadFacepile.bs").ProfilePhotoAddOn.availabilityBadge({type:"availabilityBadge"}),k=b("MWJewelThreadFacepile.bs").ProfilePhotoAddOn.lastActiveTimeBadge({border:"web-wash",time:i,type:"lastActiveTimeBadge"});d=d?b("bs_caml_option").some(j):i!==void 0?b("bs_caml_option").some(k):void 0;j=b("ImmutableArray.bs").get(a,0);i=b("ImmutableArray.bs").get(a,1);if(j!==void 0)if(i!==void 0)return g(j,i,c,f,d);else return h(j,c,f,d,e);else if(i!==void 0)return h(i,c,f,d,e);else return}f.buildFacepileConfig=g;f.buildProfileConfig=h;f.get=a}),null);
__d("MWThreadAddOnPrimary.re",["MWThreadAddOnPrimary.bs"],(function(a,b,c,d,e,f){a=b("MWThreadAddOnPrimary.bs").get;f.get=a}),null);
__d("CometHomeContactGroup.react",["CometGlobalPanelGating","JSResourceForInteraction","JSScheduler","MWThreadAddOnPrimary.re","TetraListCell.react","react","useCometPreloader","useMWChatOpenTabForGroup"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback,j=c("JSResourceForInteraction")("MWV2ChatTab.bs").__setRef("CometHomeContactGroup.react");function a(a){var b=a.activeStatusOn,e=a.images,f=a.isThreadActive,g=a.lastActiveTime,k=a.name,l=a.threadID;a=c("MWThreadAddOnPrimary.re").get(e,k,f,void 0,d("CometGlobalPanelGating").isGlobalPanelEnabled()?24:36,b?g:void 0);e=c("useMWChatOpenTabForGroup")("sidebarGroupsList");var m=e[0],n=e[1];f=i(function(){d("JSScheduler").scheduleSpeculativeCallback(function(){j.preload()}),n(l)},[n,l]);b=c("useCometPreloader")("button",f,f);g=b[0];e=b[1];return h.jsx(c("TetraListCell.react"),{addOnPrimary:a,headline:k,level:4,onHoverIn:g,onHoverOut:e,onPress:function(){return m(l)},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactGroupsContentWrapper.react",["fbt","ix","CometHomeContactsPresenceAwareList.react","MWChatOpenNewTab.re","TetraListCell.react","fbicon","gkx","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.activeStatusOn;a=a.groups;var e=d("MWChatOpenNewTab.re").useHook("sidebarGroupsList");if(a.length>0)return j.jsx(c("CometHomeContactsPresenceAwareList.react"),{active:b,children:j.jsx(j.Fragment,{children:a})});else return c("gkx")("1406650")?null:j.jsx(c("TetraListCell.react"),{addOnPrimary:{icon:d("fbicon")._(i("483769"),20),size:36,type:"contained-icon"},headline:h._("__JHASH__nldYURqlkh6__JHASH__"),level:4,onPress:function(){return e()(!1)}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("JsDictReadOnly.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";function a(a){return Object.keys(a)}function c(a){return a}d=b("bs_js_dict").get;e=b("bs_js_dict").entries;b=b("bs_js_dict").values;f.from=c;f.get=d;f.keys=a;f.entries=e;f.values=b}),null);
__d("MWParticipantListRenderer",["fbt","react"],(function(a,b,c,d,e,f,g,h){"use strict";d("react");a=function(){function a(){var a=this;this.$6=function(b){var c=a.$5;if(c!=null){var d=b.id;if(d!=null&&c[d]!=null&&c[d]!=null)return c[d]}return a.$2?b.short_name:b.name};this.$1=!1;this.$2=!1;this.$3=!1;this.$4=0;this.$5=null}var b=a.prototype;b.renderParticipantList=function(a){a=a.map(this.$6);switch(a.length){case 0:return i(this.$1);case 1:return j(a);case 2:return this.$3?l(a):k(a);case 3:return this.$3?n(a):m(a);default:return this.$3?p(a,this.$4):o(a,this.$4)}};b.setIsNewThread=function(a){this.$1=a;return this};b.setNameRenderer=function(a){this.$6=a;return this};b.setUseShortName=function(a){this.$2=a;return this};b.setNickname=function(a){this.$5=a;return this};b.setUseAndSeparator=function(a){this.$3=a;return this};b.setTotalParticipantCount=function(a){this.$4=a;return this};return a}();function i(a){if(a)return h._("__JHASH__uhF6__U4Uqu__JHASH__");else return h._("__JHASH__sUmg9cbVQAa__JHASH__")}function j(a){return a[0]}j.displayName=j.name+" [from "+f.id+"]";function k(a){return h._("__JHASH__QVqNH0CDXLb__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])])}k.displayName=k.name+" [from "+f.id+"]";function l(a){return h._("__JHASH__JTikoCjxB3O__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])])}l.displayName=l.name+" [from "+f.id+"]";function m(a){return h._("__JHASH__FfZsrZ3E8l3__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}m.displayName=m.name+" [from "+f.id+"]";function n(a){return h._("__JHASH__0a7wtHuBFBj__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}n.displayName=n.name+" [from "+f.id+"]";function o(a,b){return h._("__JHASH__DTZWN4rVq-W__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2]),h._param("others_link",q((b||a.length)-3))])}o.displayName=o.name+" [from "+f.id+"]";function p(a,b){return h._("__JHASH__P_doxz4r-mz__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("others_link",q((b||a.length)-2))])}p.displayName=p.name+" [from "+f.id+"]";function q(a){if(a>1)return h._("__JHASH__fXVmG3gSqH2__JHASH__",[h._param("others_count",a,[0])]);else return h._("__JHASH__AXvVFDKadXa__JHASH__")}g["default"]=a}),98);
__d("MWUIThreadTitle.bs",["CurrentUser","FBID.bs","JsDictReadOnly.bs","MWParticipantListRenderer","bs_belt_Array","bs_caml_option","bs_js_dict"],(function(a,b,c,d,e,f){"use strict";function g(a){var c={};b("bs_js_dict").entries(a).forEach(function(a){c[a[0]]=a[1]});return c}function h(a,c,d,e,f){if(a!=="")return a;a=g(d);return new(b("MWParticipantListRenderer"))().setUseShortName(f).setUseAndSeparator(e).setIsNewThread(!1).setNickname(a).renderParticipantList(c)}function i(a,c,d){var e=b("CurrentUser").getID(),f=b("JsDictReadOnly.bs").keys(c).length,g=b("bs_belt_Array").keepMap(b("JsDictReadOnly.bs").keys(c),function(a){if(b("FBID.bs").ofStringExn(a)===e&&f>1)return;a=b("JsDictReadOnly.bs").get(c,a);if(a!==void 0)return{id:a.id,name:a.name,short_name:a.short_name}});return h(a,g,d,!0,!0)}function a(a,c,d){return i(a,b("JsDictReadOnly.bs").from(c),d)}function j(a,c){if(a!==void 0)return[b("bs_caml_option").valFromOption(a)];else{var d=b("CurrentUser").getID();a=b("JsDictReadOnly.bs").keys(c);var e=a.length;return b("bs_belt_Array").keepMap(a,function(a){a=b("FBID.bs").ofStringExn(a);if(a===d&&e!==1)return;else{a=b("JsDictReadOnly.bs").get(c,a);if(a!==void 0)return b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(a).image_src);else return}})}}function c(a,c){return j(a,b("JsDictReadOnly.bs").from(c))}f.getTitleForGroup_=i;f.getTitleForGroup=a;f.getProfileImages_=j;f.getProfileImages=c}),null);
__d("MWUIThreadTitle.re",["MWUIThreadTitle.bs"],(function(a,b,c,d,e,f){a=b("MWUIThreadTitle.bs").getTitleForGroup_;f.getTitleForGroup_=a;c=b("MWUIThreadTitle.bs").getProfileImages_;f.getProfileImages_=c}),null);
__d("CometHomeContactGroups.react",["fbt","CometGlobalPanelGating","CometHomeContactGroup.react","CometHomeContactGroupsContentWrapper.react","CometHomeContactGroups_viewer.graphql","CometHomeRightRailUnit.react","CometRelay","CometUnitHeader.react","CometVisualCompletionAttributes","MWUIThreadTitle.re","MWXacGating.re","cr:254","qex","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=h._("__JHASH__b0sYOo4GQ6M__JHASH__");function l(a,b){return a.map(function(a){var e,f,g,h;a=a==null?void 0:a.node;if(a==null||((e=a.thread_key)==null?void 0:e.thread_fbid)==null)return null;if(a.is_xac&&!c("MWXacGating.re").isGroupsEnabled())return null;e=a.thread_key.thread_fbid;f=(f=(f=a.all_participants)==null?void 0:f.edges)!=null?f:[];var i=!1;f=Object.fromEntries(f.map(function(a){var b;a=(a=a.node)==null?void 0:a.messaging_actor;if((a==null?void 0:a.id)==null)return null;var c=a.id;if((a==null?void 0:a.name)==null||((b=a.profile_picture)==null?void 0:b.uri)==null)return null;a.availability==="ACTIVE"&&(i=!0);return[c,{id:c,image_src:a.profile_picture.uri,name:a.name,short_name:(b=a.short_name)!=null?b:a.name}]}).filter(Boolean));g=(g=(g=a.customization_info)==null?void 0:g.participant_customizations)!=null?g:[];g=Object.fromEntries(g.map(function(a){return a==null||a.participant_id==null||a.nickname==null?null:[a.participant_id,a.nickname]}).filter(Boolean));h=d("MWUIThreadTitle.re").getTitleForGroup_((h=a.name)!=null?h:"",f,g);g=d("MWUIThreadTitle.re").getProfileImages_((g=a.image)==null?void 0:g.uri,f);return j.jsx("li",{children:j.jsx(c("CometHomeContactGroup.react"),{activeStatusOn:b,images:g,isThreadActive:i,lastActiveTime:a.updated_time,name:h,threadID:e})},e)}).filter(Boolean).slice(0,3)}function m(a){var b=a.activeStatusOn;a=a.viewer;a=l((a=a==null?void 0:(a=a.message_threads)==null?void 0:a.edges)!=null?a:[],b);return j.jsx(c("CometHomeContactGroupsContentWrapper.react"),{activeStatusOn:b,groups:a})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e;a=a.viewer$key;a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometHomeContactGroups_viewer.graphql"),a);if((a==null?void 0:a.chat_sidebar_is_collapsed)===!0)return null;if((a==null?void 0:(e=a.actor)==null?void 0:e.should_hide_group_conversations_list)===!0)return null;e=c("qex")._("1285");e=e===!0?(a==null?void 0:(e=a.presence_view_side_settings)==null?void 0:e.is_active_status_viewable)===!0:(a==null?void 0:a.chat_visibility)===!0;return j.jsx("div",babelHelpers["extends"]({"data-testid":void 0},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:j.jsxs(c("CometHomeRightRailUnit.react"),{hasBottomDivider:!1,header:j.jsx(c("CometUnitHeader.react"),{headline:k,headlineColor:d("CometGlobalPanelGating").isGlobalPanelEnabled()?"primary":"secondary",level:3}),children:[j.jsx(m,{activeStatusOn:e,viewer:a}),b("cr:254")?j.jsx(b("cr:254"),{}):null]})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactGroupsContainer.react",["CometHomeContactGroups.react","CometHomeContactGroupsContainerQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){a=a.homeContactGroupsQueryReference;a=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("CometHomeContactGroupsContainerQuery.graphql"),a);a=a.viewer;return i.jsx(c("CometHomeContactGroups.react"),{viewer$key:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactsContainer.react",["CometHomeContactsContainerQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){a=a.homeContactsQueryReference;a=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("CometHomeContactsContainerQuery.graphql"),a);a=a.viewer;a=a.actor.contacts_home_renderer;return a==null?i.jsx("div",{}):i.jsx(d("CometRelay").MatchContainer,{fallback:i.jsx("div",{}),match:a,props:{}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactAndGroupContainer.react",["CometErrorBoundary.react","CometHomeContactGroupsContainer.react","CometHomeContactsContainer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.homeContactGroupsQueryReference;a=a.homeContactsQueryReference;return h.jsxs(h.Fragment,{children:[h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("CometHomeContactsContainer.react"),{homeContactsQueryReference:a})}),h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("CometHomeContactGroupsContainer.react"),{homeContactGroupsQueryReference:b})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContentAnimationContainer.react",["CometFeedGlimmer.react","clearTimeout","cr:683059","react","scrollTo","setTimeout","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef,k=e.useState,l=500,m=1500;function a(a){var d=a.children,e=a.isPending,f=j(null);a=k(!1);var g=a[0],n=a[1];a=k(!1);var o=a[0],p=a[1];i(function(){var a=f.current;e&&a!=null&&(p(!0),c("setTimeout")(function(){var a=Math.max(window.innerHeight,m);window.scrollY>a&&c("scrollTo")({top:a});c("scrollTo")({behavior:"smooth",top:0});b("cr:683059")&&(b("cr:683059").setInitialScrollY(0),b("cr:683059").addAnnotationInt("ScrollToTop",1))},l))},[e]);i(function(){if(e!==!1||o===!1)return;n(!0);var a=c("setTimeout")(function(){n(!1),p(!1)},l);return function(){return c("clearTimeout")(a)}},[e,o]);return h.jsxs(h.Fragment,{children:[o===!0?h.jsx("div",{className:c("stylex")({"animation-duration-1":"x54ewbq","animation-name-1":"xqcmdr3","opacity-1":"x1hc1fzr","pointer-events-1":"x47corl","transition-duration-1":"x1unhpq9","transition-property-1":"x6o7n8i","width-1":"xh8yej3"},g?{"opacity-1":"xg01cxk"}:null),children:h.jsx(c("CometFeedGlimmer.react"),{})}):null,h.jsx("div",{className:c("stylex")({"opacity-1":"x1hc1fzr","transition-duration-1":"x1unhpq9","transition-property-1":"x6o7n8i"},g?{"opacity-1":"xg01cxk"}:null,o===!0?{"opacity-1":"xg01cxk","pointer-events-1":"x47corl"}:null),ref:f,children:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeCreateGroupButtonShim.react",["cr:1996927"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1996927")}),98);
__d("CometHomeGQLCreateGroupButton.react",["fbt","ix","TetraListCell.react","fbicon","react","useCometHomeOpenNewChatTab"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useCallback;function a(){var a=c("useCometHomeOpenNewChatTab")("sidebarGroupsList"),b=a.onPress;a=babelHelpers.objectWithoutPropertiesLoose(a,["onPress"]);var e=k(function(){b()},[b]);return j.jsx(c("TetraListCell.react"),babelHelpers["extends"]({},a,{addOnPrimary:{icon:d("fbicon")._(i("483769"),20),size:36,type:"contained-icon"},headline:h._("__JHASH__N3jQuSpN-AP__JHASH__"),level:4,onPress:e,testid:void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeRightSideEgo.react",["CometHomeRightSideEgo_viewer.graphql","CometRelay","ODS","Random","react","useSideAdsRefreshHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.startTransition,k=e.useCallback,l=e.useEffect,m=e.useState,n=h!==void 0?h:h=b("CometHomeRightSideEgo_viewer.graphql");function a(a){a=d("CometRelay").useRefetchableFragment(n,a.viewerRef);var b=a[0],e=a[1];b=b==null?void 0:(a=b.sideFeed)==null?void 0:a.nodes;a=m(null);var f=a[0];a=a[1];var g=m(!1),h=g[0],o=g[1];l(function(){var a=function(){o(!1)};window.addEventListener("blur",a);return function(){window.removeEventListener("blur",a)}},[]);l(function(){if(f==null){var a=2;d("Random").coinflip(a)&&d("ODS").bumpEntityKey(144,"feed_ads","CometHomeRightSideEgo.empty_first_unit",a)}},[f]);g=k(function(a){j(function(){e({refresh_num:a},{fetchPolicy:"store-only"})})},[e,j]);g=c("useSideAdsRefreshHandler")(g,h);if(b!=null&&b.length>=1&&f!==b[0]){a(b[0]);return null}return f==null||Object.keys(f).length===0?null:i.jsx("div",{onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},ref:g,children:i.jsx(d("CometRelay").MatchContainer,{match:f})})}a.displayName=a.name+" [from "+f.id+"]";e=a;g["default"]=e}),98);
__d("CometHomeRightSideEgoContainer.react",["CometHomeRightSideEgo.react","CometHomeRightSideEgoContainer_egoPanel.graphql","CometRelay","FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){a=a.egoPanel;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometHomeRightSideEgoContainer_egoPanel.graphql"),a);if(!a){c("FBLogger")("feed_ads").mustfix("Expecting non-nullviewer");return null}return i.jsx("span",{children:i.jsx(c("CometHomeRightSideEgo.react"),{viewerRef:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometRightSideHeaderCards.react",["CometErrorBoundary.react","CometHomeRightSideEgoContainer.react","CometRelay","CometRightSideHeaderCardsQuery.graphql","CometRightSideHeaderCards_viewerSideFeed.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react"),k=h!==void 0?h:h=b("CometRightSideHeaderCardsQuery.graphql"),l=i!==void 0?i:i=b("CometRightSideHeaderCards_viewerSideFeed.graphql");function m(a){var b;a=a.rightSideHeaderCardsQueryReference;a=d("CometRelay").usePreloadedQuery(k,a);var e=a.viewer,f=a;a=d("CometRelay").useFragment(l,e);if(e==null)return null;b=a==null?void 0:(b=a.side_feed)==null?void 0:b.nodes;var g=null;b=b!=null?b.map(function(a,b){if((a==null?void 0:a.__typename)==="CometHomeSideFeedWidgetContainer"||(a==null?void 0:a.__typename)==="CometHomeSideFeedWidgetContainerWithSeeMore"){g=j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(d("CometRelay").MatchContainer,{match:a})},b);return null}else if((a==null?void 0:a.__typename)==="PagesSideFeedUnit")return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(d("CometRelay").MatchContainer,{match:a,props:{query$key:f}})},b);return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(d("CometRelay").MatchContainer,{match:a})},b)}).filter(Boolean):null;a=a==null?void 0:a.right_side_widget_container_placement;return j.jsxs("div",{children:[a==="ABOVE_ADS"?g:null,j.jsx(c("CometHomeRightSideEgoContainer.react"),{egoPanel:e}),a==="BELOW_ADS"?g:null,b]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(m,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedInlineComposer.react",["fbt","CometCard.react","CometComposerAttachmentPluginTypes","CometFeedInlineComposerPressableProfilePic.react","CometFeedInlineComposerQuery.graphql","CometFeedInlineComposerWOYM.react","CometRelay","CometScreenReaderHeading.react","cometGetKeyCommandConfig","cr:1993522","cr:4928","getComposerUnsavedChangesAlert","gkx","react","useComposerTerminalEventLog","useFeedComposerCometDialog","useLayerKeyCommands","useNullthrowsViolation","useOnBeforeUnload","usePostInProgress","useResumableComposerViewState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useMemo,m=e.useRef,n={current:null};function a(a){a=a.feedInlineComposerQueryReference;var e=m(!1),f=c("useResumableComposerViewState")(),g=f.clearResumableViewState,o=f.getResumableViewState,p=f.saveResumableViewState;f=c("usePostInProgress")();var q=f.postPlainText,r=f.updatePostPlainText,s=m(!1);c("useOnBeforeUnload")(function(){return c("getComposerUnsavedChangesAlert")(s.current)});c("useComposerTerminalEventLog")(function(){return s.current},function(){return o().creationSessionID});f=k(function(a){if(e.current===!0)s.current=!1,g(),r(o());else{var b;s.current=(b=a==null?void 0:a.isDirty)!=null?b:!1;p(a);r(o())}},[g,r,o,p]);var t=function(){e.current=!1},u=function(){s.current=!0,e.current=!1},v=function(){e.current=!0},w=h._("__JHASH__ecVLcDRqpWJ__JHASH__");a=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("CometFeedInlineComposerQuery.graphql"),a);a=a.viewer;var x=c("useNullthrowsViolation")(a.actor.id,"Unable to render CometFeedInlineComposer with null viewerID and type "+a.actor.__typename),y=a.actor.has_professional_features_for_watch===!0,z=y&&c("gkx")("1430759");y=c("useFeedComposerCometDialog")({composerEntryPointName:"inline_composer",composerSourceSurface:"newsfeed",composerType:"feed",onBeforeClose:f,onSave:t,onSaveError:u,onSubmit:v,profileID:x,title:w,tracePolicy:"comet.composer.feed"});var A=y[0];f=y[1];t=y[2];u=y[3];v=y[4];var B=k(function(a){s.current=!1;var b=c("gkx")("1224637");b=o(a==null?void 0:a.additionalMediaAttachmentItems,{startWithHeaderTextStyle:b});b=babelHelpers["extends"]({},b,{characterLimit:63206,mediaAttachmentsLimit:80,useFeatureDefinitions:c("gkx")("2093"),videoComposerData:{shouldOpenVideoSpecificComposer:z,targetID:x}});if((a==null?void 0:a.pushedPageOnLoad)==="get_messages"){var d=c("gkx")("6262");b=babelHelpers["extends"]({},b,{attachmentArea:babelHelpers["extends"]({},b.attachmentArea,{activeAttachmentType:c("CometComposerAttachmentPluginTypes").GET_MESSAGES}),isGetMessagesPost:!0,isGetMessagesPostAttachmentOptional:d})}(a==null?void 0:a.pushedPageOnLoad)==="get_whatsapp_messages"&&(b=babelHelpers["extends"]({},b,{attachmentArea:babelHelpers["extends"]({},b.attachmentArea,{activeAttachmentType:c("CometComposerAttachmentPluginTypes").GET_WHATSAPP_MESSAGES}),isGetWhatsAppMessagePost:!0,isGetWhatsappMessagesPostAttachmentOptional:!0}));A({beginningViewState:b,pushedPageOnLoad:a==null?void 0:a.pushedPageOnLoad})},[o,A,x,z]);w=l(function(){return[d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("newsfeed","newPost",B)]},[B]);c("useLayerKeyCommands")(w);y=h._("__JHASH__wQWxG07eOjM__JHASH__");w=j.jsx(c("CometCard.react"),{background:"white",dropShadow:1,children:j.jsxs("div",{"aria-label":y,className:"xz9dl7a x1swvt13 x1pi30zi x1a8lsjc x1a02dak x78zum5 x6s0dn4",role:"region",children:[j.jsxs("div",{className:"xh8yej3 xs83m0k x1iyjqo2 x78zum5 x1cy8zhl",children:[j.jsx(c("CometScreenReaderHeading.react"),{children:y}),j.jsx(c("CometFeedInlineComposerPressableProfilePic.react"),{profile$key:a.actor}),j.jsx(c("CometFeedInlineComposerWOYM.react"),{onHoverInPrerenderer:t,onHoverOutPrerenderer:u,onPress:function(){return B()},onPressInPrerenderer:v,postPlainText:q,profile$key:a.actor,triggerRef:f})]}),j.jsx(b("cr:4928"),{composer:a.feed_comet_composer,onHoverInPrerenderer:t,onHoverOutPrerenderer:u,onPressInPrerenderer:v,profile$key:a.actor,showFeedComposerDialog:B,triggerRef:f})]})});if(b("cr:1993522")==null)return w;else return j.jsx(b("cr:1993522"),{enableFeature:!1,fallback:j.jsx(c("CometCard.react"),{background:"white",dropShadow:1,children:j.jsxs("div",{"aria-label":y,className:"xz9dl7a x1swvt13 x1pi30zi x1a8lsjc x1a02dak x78zum5 x6s0dn4",role:"region",children:[j.jsx(c("CometScreenReaderHeading.react"),{children:y}),j.jsx(c("CometFeedInlineComposerPressableProfilePic.react"),{profile$key:a.actor}),j.jsx(c("CometFeedInlineComposerWOYM.react"),{onPress:function(){},profile$key:a.actor,triggerRef:n}),j.jsx(b("cr:4928"),{composer:null,showFeedComposerDialog:function(){},triggerRef:n})]})}),children:w})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMegaphoneRoot.react",["CometMegaphoneQuickPromotionSection.react","CometMegaphoneRootQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("CometMegaphoneRootQuery.graphql");function a(a){a=a.megaphoneQueryReference;a=d("CometRelay").usePreloadedQuery(j,a);a=(a=a.viewer)==null?void 0:(a=a.megaphonePromotions)==null?void 0:(a=a.edges[0])==null?void 0:a.node;return a==null?null:i.jsx(c("CometMegaphoneQuickPromotionSection.react"),{quickPromotion:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FBReelsTopOfFeedTrayRoot.entrypoint",["FBReelsTopOfFeedTrayRootWithEntrypointQuery$Parameters","JSResourceForInteraction","qex"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){var a;a=(a=c("qex")._("1826"))!=null?a:!1;a={FBReelsRootReference:{parameters:c("FBReelsTopOfFeedTrayRootWithEntrypointQuery$Parameters"),variables:{count:a?6:7,isMLEnabled:a}}};return{queries:a}},root:c("JSResourceForInteraction")("FBReelsTopOfFeedTrayRoot.react").__setRef("FBReelsTopOfFeedTrayRoot.entrypoint")};b=a;g["default"]=b}),98);
__d("StoriesTrayCreateCard.react",["fbt","ix","CometCard.react","QuickPerformanceLogger","StoriesGating","TetraAccessoryListCell.react","TopOfFeedContext","XCometStoriesCreateControllerRouteBuilder","fbicon","qpl","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useCallback,l=b.useContext;function a(){var a=c("XCometStoriesCreateControllerRouteBuilder").buildURL({}),b={entryPoint:"add_to_story_persistent_button",sourceSurface:"newsfeed"},e=k(function(){c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238400,"7688"),4),c("QuickPerformanceLogger").markerStart(c("qpl")._(13238400,"7688"))},[]),f=l(c("TopOfFeedContext"));f=f.topOfFeedEnabled;return j.jsx("div",{className:"x1yztbdb",children:j.jsx(c("CometCard.react"),{background:"white",dropShadow:f?0:1,children:j.jsx("div",{className:"xwib8y2 x1y1aw1k",children:j.jsx(c("TetraAccessoryListCell.react"),{addOnPrimary:{color:"lightblue",icon:d("fbicon")._(i("483770"),24),size:40,type:"contained-icon"},body:d("StoriesGating").getCreationDescription(),emphasized:!0,headline:h._("__JHASH__Piwub9vzMev__JHASH__"),linkProps:{passthroughProps:b,url:a},onPress:e})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayErrorCardLazyLoaded.react",["JSResourceForInteraction","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";a=c("lazyLoadComponent")(c("JSResourceForInteraction")("StoriesTrayErrorCard.react").__setRef("StoriesTrayErrorCardLazyLoaded.react"));g["default"]=a}),98);
__d("StoriesTrayTileHScrollScrollListener.react",["StoriesConstants","StoriesTrayTileGlimmer.react","react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.onShow;a=c("useVisibilityObserver")({onVisible:a});return h.jsx("div",{ref:a,children:h.jsx(c("StoriesTrayTileGlimmer.react"),{aspectRatio:d("StoriesConstants").DEFAULT_ASPECT_RATIO})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayHScrollContainer.react",["fbt","CometHScroll.react","CometOnRefresh.react","FBLogger","JSScheduler","StoriesGating","StoriesTrayTileHScrollScrollListener.react","TopOfFeedContext","cr:573","cr:574","emptyFunction","gkx","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react"),k=j.useCallback,l=j.useContext,m=j.useEffect,n=j.useRef,o=j.useState,p=c("gkx")("402")?c("emptyFunction"):e,q={card:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4"},header:{alignItems:"x1cy8zhl",display:"x78zum5",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",marginTop:"x11xss2o",width:"xnalus7"},hScrollContainer:{paddingTop:"x13zrc24"},stickyHeader:{position:"x7wzq59",start:"xoie2o3"}};function a(a){var e=a.cardWidth,f=a.children,g=a.hasNext,j=a.hideArrows,r=a.isLoadingNext,s=a.loadNext;a=a.peek;var t=i.Children.map(f,function(a){var c=a.key==="header"||a.key==="sticky-header",e=c||a.key==="tofu-null-card"||a.key==="divider";return i.jsx(d("CometHScroll.react").Child,{type:e?"custom":"default",xstyle:[a.key==="sticky-header"&&q.stickyHeader,c&&q.header],children:a.key==="sticky-header"&&b("cr:574")!=null?i.jsx(b("cr:574"),{hscrollChildrenCount:i.Children.count(f),children:a}):a},a.key)}),u=o(!1),v=u[0],w=u[1];u=l(c("TopOfFeedContext"));var x=u.hybridTrayEnabled;u=u.hybridTrayWithHeaderEnabled;var y=d("StoriesGating").getHScrollRefetchCount(),z=n(null),A=k(function(){y===0?c("FBLogger")("fbstories").warn("Stories to fetch = 0, yet the user is attempting to fetch more buckets"):g&&!r&&(z.current=s(y))},[g,r,s,y]);c("useLayoutEffect_SAFE_FOR_SSR")(function(){return function(){var a;(a=z.current)==null?void 0:a.dispose()}},[]);p(A);var B=function(){w(!0)};d("CometOnRefresh.react").useOnRefresh(B);g&&!v&&t.push(i.jsx(d("CometHScroll.react").Child,{children:i.jsx(c("StoriesTrayTileHScrollScrollListener.react"),{onShow:A})},"visibility-placeholder"));m(function(){v&&w(!1)},[v]);B=108;x=x?u?12:0:16;e=i.jsx(d("CometHScroll.react").Container,{accessibilityLabel:h._("__JHASH__yzvEdZ9X8cq__JHASH__"),cardWidth:e!=null?e:{minWidth:B,type:"responsive"},children:t,gap:8,hideArrows:j,initialScrollToIndex:v?0:void 0,onPressNext:A,peek:a,peekPaddingEnd:x,peekPaddingStart:x,scrollViewXStyle:u?q.hScrollContainer:void 0});return b("cr:573")!=null?i.jsx(b("cr:573"),{background:"white",dropShadow:1,xstyle:q.card,children:e}):e}a.displayName=a.name+" [from "+f.id+"]";function e(a){var b=n(a);c("useLayoutEffect_SAFE_FOR_SSR")(function(){b.current=a},[a]);m(function(){if(d("StoriesGating").enableBufferNextPageForHScroll()){var a=b.current;if(a!=null){var e=c("JSScheduler").defer(function(){a(),e=null});return function(){e&&c("JSScheduler").cancelCallback(e)}}}},[])}g["default"]=a}),98);
__d("StoriesTrayRow.react",["StoriesGating","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;var b=4;a=h.Children.map(a,function(a,c){return h.jsx("div",{className:"x1e558r4 x150jy0e x98rzlu"+(c===b&&!d("StoriesGating").isTopOfFeedUnitEnabled()?" xfa1y8d x1283tta xo1ujjn":"")+(c>=b+1&&!d("StoriesGating").isTopOfFeedUnitEnabled()?" x1qw9tx2 x4e3nt7 xb19nzs xq4ptzf":""),children:a},"stories_tray_tile_"+c)});return h.jsx("div",{className:"x193iq5w x9f619",children:h.jsx("div",{className:c("stylex")({"align-items-1":"x1qjc9v5","display-1":"x78zum5","flex-direction-1":"x1q0g3np","flex-wrap-1":"xozqiw3","justify-content-1":"x1nhvcw1","margin-end-1":"xcud41i","margin-start-1":"x139jcc6","overflow-x-1":"x6ikm8r","overflow-y-1":"x10wlt62","padding-bottom-1":"xwxc41k","padding-top-1":"x1y1aw1k","position-1":"x1n2onr6"},d("StoriesGating").isTopOfFeedUnitEnabled()?{"margin-end-1":"x11i5rnm","margin-start-1":"x16n37ib","max-height-1":"xl5ka8d","padding-bottom-1":"x18d9i69","padding-top-1":"xyamay9","width-1":"xh8yej3"}:null),children:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTraySeeAllStoriesButton.react",["fbt","ArrowLeftFilled20IconSvg.react","ArrowRightFilled20IconSvg.react","CometTooltip.react","Locale","TetraCircleButton.react","XCometStoriesControllerRouteBuilder","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("requireDeferred")("ODS").__setRef("StoriesTraySeeAllStoriesButton.react");function a(){var a=function(){j.onReady(function(a){a.bumpEntityKey(4329,"fb_stories_web","stories_tray_see_all_stories_button_click",1)})},b=d("Locale").isRTL()?c("ArrowLeftFilled20IconSvg.react"):c("ArrowRightFilled20IconSvg.react"),e=h._("__JHASH__JuCGQWapuNv__JHASH__");b={color:"secondary",icon:b,label:e,linkProps:{traceParams:{navigation_source:"stories_tray_arrow"},url:c("XCometStoriesControllerRouteBuilder").buildURL({})},size:40,type:"overlay"};return i.jsx("div",{className:"x1egi5h6 x1owr592 x10l6tqk xjf5wm9 x4pb5v6 x1mnwbp6 xjy5m1g x1z11no5",children:i.jsx(c("CometTooltip.react"),{delayMs:300,tooltip:e,children:i.jsx(c("TetraCircleButton.react"),babelHelpers["extends"]({},b,{onPress:a}))})},"button")}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useStoriesTrayProfileImpressionLogging",["CometRelay","StoriesActorContext","StoriesLoggerHelper","TopOfFeedLoggingContext","react","requireDeferred","useImpressionLogger","useStoriesTrayProfileImpressionLogging_bucket.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;d("react");e=d("react");var i=e.useCallback,j=e.useContext,k=e.useRef,l=c("requireDeferred")("StoryProfileImpressionFalcoEvent").__setRef("useStoriesTrayProfileImpressionLogging"),m=h!==void 0?h:h=b("useStoriesTrayProfileImpressionLogging_bucket.graphql");function a(a,b,e,f){var g,h=k(!1),n=d("CometRelay").useFragment(m,a);a=j(c("StoriesActorContext"));a=a.actorID;var o=j(c("TopOfFeedLoggingContext")),p=o.tofuSessionID;o=n==null?void 0:(o=n.story_bucket_owner)==null?void 0:o.__typename;var q=n==null?void 0:(g=n.story_bucket_owner)==null?void 0:g.id;g=(n==null?void 0:(g=n.story_bucket_owner)==null?void 0:g.is_viewer_friend)||!1;var r=d("StoriesLoggerHelper").getOwnerType(a,o,q,g),s=n==null?void 0:(a=n.thumbnail_story_to_show)==null?void 0:(o=a.attachments)==null?void 0:(g=o[0])==null?void 0:(a=g.media)==null?void 0:a.id;o=i(function(a,c){if(h.current||n==null)return;h.current=!0;a.log(function(){return{has_new_content:n.is_bucket_seen_by_viewer||!1,has_new_views:n.is_bucket_seen_by_viewer||!1,media_id:s,preview_type:"rectangle",source:b,story_index:f,story_owner:q,story_owner_type:r,tofu_tray_session_id:p,tracking_string:n==null?void 0:n.ranking_tracking_string,tray_session_id:e}})},[n,s,b,f,q,r,p,e]);return c("useImpressionLogger")(l,o)}g["default"]=a}),98);
__d("useStoriesTrayTilePrefetchImageURI",["CometRelay","useStoriesTrayTilePrefetchImageURI_story.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesTrayTilePrefetchImageURI_story.graphql"),a);c=a==null?void 0:(c=a.attachments)==null?void 0:(c=c[0])==null?void 0:c.media;var e=c==null?void 0:(c=c.image)==null?void 0:c.uri,f=a==null?void 0:(c=a.backdrop)==null?void 0:(a=c.media)==null?void 0:(c=a.image)==null?void 0:c.uri;return e==null&&f==null?null:function(){if(e!=null){var a=new Image();a.src=e;if(f!=null){a=new Image();a.src=f}}}}g["default"]=a}),98);
__d("useStoriesTrayTilePressable",["CometRelay","QPLUserFlow","StoriesLoggingConstants","qpl","useStoriesTrayTilePrefetchImageURI","useStoriesTrayTilePressable_story.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e===void 0&&(e=c("StoriesLoggingConstants").ACTION_SOURCE.TRAY);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesTrayTilePressable_story.graphql"),a);var f=c("useStoriesTrayTilePrefetchImageURI")(a),g=e===c("StoriesLoggingConstants").ACTION_SOURCE.TRAY?c("qpl")._(13249850,"5510"):c("qpl")._(13239835,"17340");return{onPress:function(){c("QPLUserFlow").start(g)},onPressIn:function(a){f&&f()}}}g["default"]=a}),98);
__d("StoriesTrayTile.react",["fbt","CometImage.react","CometRelay","GraphQLGender","StoriesEnums","StoriesLoggingConstants","StoriesTrayTileAvatar.react","StoriesTrayTileView.react","StoriesTrayTile_LWRAnimations.graphql","StoriesTrayTile_bucket.graphql","StoriesTrayUtils","react","useStoriesTrayProfileImpressionLogging","useStoriesTrayTilePressable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=d("react");function a(a){var e,f,g,l,m,n,o=a.animations,p=a.bucketCount,q=a.bucketLength,r=a.bucketNode,s=a.gender;s=s===void 0?"UNKNOWN":s;var t=a.shouldShowInterstitial;t=t===void 0?!1:t;var u=a.hasSelfBucket,v=a.isOnBizKit;v=v===void 0?!1:v;var w=a.traySessionID,x=a.source;x=x===void 0?c("StoriesLoggingConstants").ACTION_SOURCE.UNKNOWN:x;var y=a.storiesTrayType;y=y===void 0?"TOP_OF_FEED_TRAY":y;var z=a.index,A=a.trayBucketIDs,B=a.hasReactionIcon;B=B===void 0?!1:B;var C=a.onPress,D=a.onPressIn;a=babelHelpers.objectWithoutPropertiesLoose(a,["animations","bucketCount","bucketLength","bucketNode","gender","shouldShowInterstitial","hasSelfBucket","isOnBizKit","traySessionID","source","storiesTrayType","index","trayBucketIDs","hasReactionIcon","onPress","onPressIn"]);r=d("CometRelay").useFragment(i!==void 0?i:i=b("StoriesTrayTile_bucket.graphql"),r);var E=r==null?void 0:r.id;z=c("useStoriesTrayProfileImpressionLogging")(r,x,w,z);var F=c("useStoriesTrayTilePressable")(r==null?void 0:r.first_story_to_show,x),G=F.onPress,H=F.onPressIn;F=d("CometRelay").useFragment(j!==void 0?j:j=b("StoriesTrayTile_LWRAnimations.graphql"),o);if(r==null||E==null)return null;o=r.story_bucket_owner;var I=r.first_story_to_show,J=r.thumbnail_story_to_show,K=r.ranking_tracking_string;e=(e=r.has_comments)!=null?e:!1;f=(f=r.should_show_close_friend_badge)!=null?f:!1;var L=J==null?void 0:J.story_card_info;g=(g=I==null?void 0:(g=I.story_card_info)==null?void 0:g.can_viewer_reply)!=null?g:!1;l=(L==null?void 0:(l=L.story_thumbnail)==null?void 0:l.uri)||(o==null?void 0:(l=o.coverImage)==null?void 0:l.uri);L=L==null?void 0:(L=L.background_color_info)==null?void 0:(L=L.color_info)==null?void 0:L[0];L=L==null?void 0:L.dominant_color;m=o==null?void 0:(m=o.profile_picture)==null?void 0:m.uri;var M=(o==null?void 0:o.name)||h._("__JHASH__fHKXLeuru3K__JHASH__"),N=r.is_bucket_seen_by_viewer===!1;n=(n=r==null?void 0:r.is_bucket_live)!=null?n:!1;o=(o=o==null?void 0:o.availability)!=null?o:null;o=o==="ACTIVE";m=m!=null?k.jsx(c("CometImage.react"),{alt:M,height:40,src:m,width:40}):k.jsx("div",{className:"x100vrsf x1vqgdyp"});o=k.jsx(c("StoriesTrayTileAvatar.react"),{hasNew:N,isLiveStreaming:n,isOnline:o,isOpaqueBackground:!1,shouldShowCloseFriendsBadge:f,children:m});f=v?null:d("StoriesTrayUtils").getBucketURL(E,I==null?void 0:I.id,p,x);m=new(c("GraphQLGender"))(s).toIntlVariationsEnum();v=h._("__JHASH__tkqpcCYUVoy__JHASH__",[h._name("Story owner's name (possesive)",M,m)]);E=L!=null&&L!==""?"#"+L:null;J=J==null?void 0:(p=J.attachments)==null?void 0:(s=p.find(function(a){return((a=a.media)==null?void 0:a.cix_screen)!=null}))==null?void 0:(m=s.media)==null?void 0:(L=m.cix_screen)==null?void 0:L.view_model;return k.jsx("div",{ref:z,children:k.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({animations:F,avatar:o,backgroundColor:E,bucket:r,bucketUrl:f,canViewerReply:g,coverImage:l,hasComments:e,hasNew:N,hasReactionIcon:B,label:v,onPress:function(a){G&&G(a),C&&C()},onPressIn:function(a){H&&H(a),D&&D()},passthroughProps:{bucketLength:q,bucketType:d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OTHER,hasSelfBucket:u,source:x,storiesTrayType:y,trackingString:K,trayBucketIDs:A,traySessionID:w},shouldShowInterstitial:t,storyId:I==null?void 0:I.id},a,{isLiveStreaming:n,text:M,warningScreenNode:J}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayTilePlaceholder.react",["StoriesTrayTileAvatar.react","StoriesTrayTileView.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=babelHelpers["extends"]({},a);return h.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({avatar:h.jsx(c("StoriesTrayTileAvatar.react"),{}),showShadow:!1},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayTileSelf.react",["fbt","CometImage.react","CometRelay","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayTileAvatar.react","StoriesTrayTileSelf_bucket.graphql","StoriesTrayTileView.react","StoriesTrayUtils","react","requireDeferred","useOnBeforeUnload","useStoriesTrayProfileImpressionLogging","useStoriesTrayTilePressable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useState,m=c("requireDeferred")("ODS").__setRef("StoriesTrayTileSelf.react");function a(a){var e,f,g,n,o,p=a.bucketCount,q=a.bucketNode,r=a.bucketLength,s=a.hasSelfBucket,t=a.traySessionID,u=a.source;u=u===void 0?c("StoriesLoggingConstants").ACTION_SOURCE.TRAY:u;var v=a.index,w=a.isUploading,x=a.optimisticStoryURI,y=a.onPressIn;a=babelHelpers.objectWithoutPropertiesLoose(a,["bucketCount","bucketNode","bucketLength","hasSelfBucket","traySessionID","source","index","isUploading","optimisticStoryURI","onPressIn"]);q=d("CometRelay").useFragment(i!==void 0?i:i=b("StoriesTrayTileSelf_bucket.graphql"),q);var z=q==null?void 0:q.id;v=c("useStoriesTrayProfileImpressionLogging")(q,u,t,v);var A=l(x),B=A[0];A=A[1];var C=c("useStoriesTrayTilePressable")(q==null?void 0:q.first_story_to_show,u),D=C.onPress,E=C.onPressIn,F=k(function(){m.onReady(function(a){a.bumpEntityKey(4329,"fb_stories_web","stories_tray.self_story_tile",1)})},[]);c("useOnBeforeUnload")(function(a){if(w===!0&&a==null)return{warnMessage:h._("__JHASH__uxWAqVRcCKO__JHASH__")}});if(q==null||z==null)return null;C=q.story_bucket_owner;e=(e=q.has_comments)!=null?e:!1;f=(f=q.should_show_close_friend_badge)!=null?f:!1;var G=q.first_story_to_show,H=q.thumbnail_story_to_show,I=q.ranking_tracking_string;g=(H==null?void 0:(g=H.story_card_info)==null?void 0:(g=g.story_thumbnail)==null?void 0:g.uri)||(C==null?void 0:(g=C.coverImage)==null?void 0:g.uri);var J=q.is_bucket_seen_by_viewer===!1;n=(n=q==null?void 0:q.is_bucket_live)!=null?n:!1;g={coverImage:g,hasNew:J};o=(H==null?void 0:(o=H.story_card_info)==null?void 0:o.story_thumbnail)!=null;var K=h._("__JHASH__s_ZRMdXMEE9__JHASH__"),L=h._("__JHASH__ZsZbryTgDNj__JHASH__");z=d("StoriesTrayUtils").getBucketURL(z,G==null?void 0:G.id,p,u);p=C==null?void 0:(G=C.profile_picture)==null?void 0:G.uri;G=(C==null?void 0:C.name)||h._("__JHASH__fHKXLeuru3K__JHASH__");C=p!=null?j.jsx(c("CometImage.react"),{alt:G,height:40,src:p,width:40}):j.jsx("div",{className:"x100vrsf x1vqgdyp"});p=H==null?void 0:(G=H.attachments)==null?void 0:(p=G.find(function(a){return((a=a.media)==null?void 0:a.cix_screen)!=null}))==null?void 0:(H=p.media)==null?void 0:(G=H.cix_screen)==null?void 0:G.view_model;H=j.jsx(c("StoriesTrayTileAvatar.react"),{hasNew:J,isLiveStreaming:n,isOpaqueBackground:!1,isUploading:w,shouldShowCloseFriendsBadge:f,children:C});if(w===!0&&d("StoriesGating").shouldEnableOptimisticImprovements()){x!=null&&(B===null||B!==x)&&A(x);G={coverImage:B};return j.jsx("div",{"data-testid":void 0,ref:v,children:j.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({avatar:H,bucketUrl:z,hasComments:e,label:L,onPress:D,onPressIn:function(a){E&&E(a),y&&y(),F()},passthroughProps:{source:u,trackingString:I,traySessionID:t},text:K,warningScreenNode:p},G,a))})}else if(o)return j.jsx("div",{"data-testid":void 0,ref:v,children:j.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({avatar:H,bucket:q,bucketUrl:z,hasComments:e,isLiveStreaming:n,label:L,onPressIn:function(a){E&&E(a),y&&y(),F()},passthroughProps:{bucketLength:r,bucketType:d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF,hasSelfBucket:s,source:u,trackingString:I,traySessionID:t},text:K,warningScreenNode:p},g,a))});else if(w===!0)return j.jsx("div",{ref:v,children:j.jsx(c("StoriesTrayTileView.react"),{avatar:H,hasComments:e,isUploading:!0,label:L,text:K,warningScreenNode:p})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TopOfFeedConsts",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({REELS:"reels",ROOMS:"rooms",STATUS:"status",STORIES:"stories",UNDEFINED:"undefined"});c=[a.STORIES,a.REELS,a.ROOMS];d=b("$InternalEnum")({UNKNOWN:0,STORIES:1,REELS:2,ROOMS:3});f.UnifiedTofuTrayEnum=a;f.TABS_DISPLAYED=c;f.UnifiedTofuTrayDefaultLandingTabEnum=d}),66);
__d("useStoriesBucketsIndexer",["CometRelay","Env","StoriesActorContext","StoriesEnums","react","useStoriesBucketsIndexer_buckets.graphql","useStoriesIsBucketEmpty","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useContext,j=e.useEffect;function k(a){a=(a=a.unified_stories)==null?void 0:a.nodes;return a!=null?a.some(function(a){return((a=a.story_card_info)==null?void 0:a.story_card_type)==="LIVE_STORY"}):!1}function l(a,b){var c;return a.can_viewer_post===!0&&((c=a.story_bucket_owner)==null?void 0:c.id)===b&&(a.story_bucket_type==="STORY"||a.story_bucket_type==="PROFILE_PLUS_STORY")}function m(a,b){return l(a,b)?d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF:d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OTHER}function n(a,b,c){return l(a,c)?!0:!b&&!k(a)}function a(a){var e=c("useUnsafeRef_DEPRECATED")(!0),f=i(c("StoriesActorContext")),g=f.actorID;f=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesBucketsIndexer_buckets.graphql"),a);j(function(){e.current=!1});var k=c("useStoriesIsBucketEmpty")(f);return f!=null?f.map(function(a){var b,d=k(a==null?void 0:a.id,(e.current?c("Env").start:Date.now())/1e3);return a!=null?{gender:(b=(b=a.story_bucket_owner)==null?void 0:b.gender)!=null?b:"UNKNOWN",isEmpty:d,isSeen:(b=a.is_bucket_seen_by_viewer)!=null?b:!1,shouldShow:n(a,d,g),type:m(a,g)}:null}):null}g["default"]=a}),98);
__d("useStoriesBucketsLogger",["CometRelay","StoriesActorContext","react","requireDeferred","useStoriesBucketsLogger_buckets.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useCallback,j=e.useContext,k=c("requireDeferred")("StoriesTrayLogger").__setRef("useStoriesBucketsLogger"),l=h!==void 0?h:h=b("useStoriesBucketsLogger_buckets.graphql");function a(a,b){var e=d("CometRelay").useFragment(l,b);b=j(c("StoriesActorContext"));var f=b.actorID;return i(function(b,c){k.onReady(function(d){d.logStoryTrayLoad({actorID:f,buckets:e,feedUnitTrackingString:c,sessionID:b,source:a})})},[f,e,a])}g["default"]=a}),98);
__d("useStoriesTrayTilePrefetchProfileURI",["CometRelay","useStoriesTrayTilePrefetchProfileURI_profile.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesTrayTilePrefetchProfileURI_profile.graphql"),a);var c=a!=null?a.map(function(a){return a==null?void 0:(a=a.story_bucket_owner)==null?void 0:(a=a.profilePic)==null?void 0:a.uri}):[];return c.length===0?null:function(){c.map(function(a){if(a!=null){var b=new Image();b.src=a}})}}g["default"]=a}),98);
__d("useTopOfFeedStoriesInterstitial",["emptyFunction","nux:266"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("nux:266")==null?void 0:b("nux:266")("www_unified_tofu_stories_nux"))!=null?a:c("emptyFunction").thatReturns([void 0,void 0]);g["default"]=d}),98);
__d("StoriesTrayRectangularBuckets.react",["fbt","ix","CometRelay","CometScreenReaderHeading.react","CometVisualCompletionAttributes","StoriesConstants","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayCreateCard.react","StoriesTrayCreateTile.react","StoriesTrayRectangularBuckets_buckets.graphql","StoriesTrayRectangularBuckets_createTileUris.graphql","StoriesTrayRectangularBuckets_reels.graphql","StoriesTrayRow.react","StoriesTraySeeAllStoriesButton.react","StoriesTrayTile.react","StoriesTrayTilePlaceholder.react","StoriesTrayTileSelf.react","TopOfFeedConsts","TopOfFeedContext","cr:1638955","cr:3260","cr:3271","cr:3760","cr:576","fbicon","qex","react","requireDeferred","stylex","usePrevious","useStoriesBucketsIndexer","useStoriesBucketsLogger","useStoriesIsUploading","useStoriesTrayTilePrefetchProfileURI","useTopOfFeedReelsInterstitial","useTopOfFeedStoriesInterstitial"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=d("react");e=d("react");var n=e.useCallback,aa=e.useContext,o=e.useEffect,p=e.useMemo,q=e.useState,ba=e.useTransition,r=c("requireDeferred")("ODS").__setRef("StoriesTrayRectangularBuckets.react"),ca=(e=c("qex")._("1856"))!=null?e:!1,da=(e=c("qex")._("1871"))!=null?e:1,s=(e=c("qex")._("1857"))!=null?e:d("StoriesConstants").TOFU_TILE_HEIGHT;function ea(a,b){if(b==null)return[];b=b.reduce(function(b,c){var d=c.id;if(d==null)return b;var e=a.find(function(a){return a.id===d});if(e==null)return b.concat(d);c=(c=(c=c.unified_stories)==null?void 0:(c=c.nodes)==null?void 0:c.map(function(a){return a.id}))!=null?c:[];e=(e=(e=e.unified_stories)==null?void 0:(e=e.nodes)==null?void 0:e.map(function(a){return a.id}))!=null?e:[];if(c.length!==e.length)return b.concat(d);for(var f=0;f<e.length;f++)if(e[f]!==c[f])return b.concat(d);return b},[]);return b}function t(a,b,e,f,g,h,i,j,k,l){var n=f==null?void 0:f.type;return n==null?null:m.jsx(c("StoriesTrayTile.react"),{bucketCount:d("StoriesConstants").NAV_PANE_TOTAL_COUNT,bucketLength:b,bucketNode:a,gender:f.gender,hasSelfBucket:e,index:i,onPress:j,onPressIn:function(){k&&k(),u(i)},shouldShowInterstitial:g,source:c("StoriesLoggingConstants").ACTION_SOURCE.TRAY,trayBucketIDs:l,traySessionID:h},a.id)}t.displayName=t.name+" [from "+f.id+"]";function u(a){r.onReady(function(b){b.bumpEntityKey(4329,"fb_stories_web","stories_tray.pog_index_"+a,1)})}var fa=j!==void 0?j:j=b("StoriesTrayRectangularBuckets_createTileUris.graphql"),ga=k!==void 0?k:k=b("StoriesTrayRectangularBuckets_reels.graphql");function a(a){var e=a.createTileRef,f=a.edges,g=a.hasNext,j=a.isLoadingNext,k=a.loadNext,r=a.reelsHasNext,u=a.reelsIsLoadingNext,v=a.reelsLoadNext,w=a.reelsNodes,x=a.refetch,y=a.traySessionID,z=d("CometRelay").useRelayEnvironment();a=ba();var A=a[0],B=a[1];a=aa(c("TopOfFeedContext"));var C=a.hybridTrayEnabled,ha=a.hybridTrayWithHeaderEnabled,D=a.topOfFeedEnabled;a=q(0);var E=a[0],ia=a[1];a=c("useTopOfFeedStoriesInterstitial")();var F=a[0],G=a[1];a=c("useTopOfFeedReelsInterstitial")();var H=a[0],I=a[1],J=d("CometRelay").useFragment(l!==void 0?l:l=b("StoriesTrayRectangularBuckets_buckets.graphql"),f),K=c("useStoriesTrayTilePrefetchProfileURI")(J),L=d("CometRelay").useFragment(fa,e),M=d("CometRelay").useFragment(ga,w);a=q(!1);var N=a[0],O=a[1];f=n(function(){!N&&!A&&(O(!0),B(function(){x(function(){O(!1)})}))},[A,N,x,B]);e=c("useStoriesIsUploading")(f);var P=e||N||A,Q=d("StoriesGating").shouldUseHScroll(),R=p(function(){var a=J||[],b=[];for(var c=0;c<a.length;c++)a[c]!=null&&b.push(a[c]);return b},[J]),S=c("usePrevious")(R);o(function(){var a=ea(R,S);a.length!==0&&a.forEach(function(a){z.commitUpdate(function(b){b=b.get(a);b!=null&&b.invalidateRecord()})})},[z,S,R]);var T=c("useStoriesBucketsIndexer")(R),U=p(function(){var a;return(a=T)!=null?a:[]},[T]),V=c("usePrevious")(y),W=b("cr:1638955")(),X=c("useStoriesBucketsLogger")(c("StoriesLoggingConstants").ACTION_SOURCE.TRAY,R),Y=(w=U==null?void 0:U.length)!=null?w:0,Z=!1;if(U!=null&&Y>0){a=U[0];e=(f=U[0])==null?void 0:f.type;f=(w=a==null?void 0:a.isEmpty)!=null?w:!0;e===d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF&&!f&&(Z=!0)}var $=5,ja=n(function(a,b){if(a==null)return[];b=b.reduce(function(a,b,c){if(b.id==null)return a;c=U[c];return(c==null?void 0:c.shouldShow)===!0&&c.type===d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF?a:[].concat(a,[b.id])},[]);var c=b.indexOf(a);if(c===-1)return[];var e=b.slice(0,c).slice(-3);b=b.slice(c+1,Math.min(R.length,c+4));return[].concat(e,[a],b)},[U,R.length]),ka=d("StoriesGating").shouldUseTrayOrder();a=p(function(){var a=!0,e=[],f={entryPoint:"add_to_story_first_pog",sourceSurface:"newsfeed"};C&&b("cr:3760")!==null&&da!==0&&(b("cr:576")!=null&&e.push(m.jsx(b("cr:576"),{showIcon:!0,title:d("TopOfFeedConsts").UnifiedTofuTrayEnum.REELS},"header")),e.push(m.jsx(b("cr:3760"),{fragmentRef:M!=null?M[E]:null,onPress:function(){I===!0?H&&H():ca&&!u&&r&&v&&(v(1),window.setTimeout(function(){ia(E+1)},1e3))},positionInTray:0,shouldShowInterstitial:I},"reels_tile")),e.push(m.jsx("div",{className:"x51ohtg xieb3on x1sy10c2 xvo3xdp xf6uls8 x1thhq0t x11t77rh x146dn1l x14nfmen"},"divider")));D&&(b("cr:576")!=null&&e.push(m.jsx(b("cr:576"),{showIcon:!0,title:d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES},"sticky-header")),e.push(m.jsx(c("StoriesTrayCreateTile.react"),{fragmentProp:L,passthroughProps:f},"stories_creation_tile")));for(var g=0;g<R.length&&(e.length<$||Q);g++){var j=U[g];if((j==null?void 0:j.shouldShow)===!0){var k=j==null?void 0:j.type;if(k===d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF){var l;k=R[g];l=(l=j==null?void 0:j.isEmpty)!=null?l:!0;D||e.push(m.jsx(c("StoriesTrayCreateTile.react"),{fragmentProp:L,passthroughProps:f},g));(!l||P)&&(e.push(m.jsx(c("StoriesTrayTileSelf.react"),{bucketCount:d("StoriesConstants").NAV_PANE_TOTAL_COUNT,bucketLength:Y,bucketNode:k,hasSelfBucket:Z,index:g,isUploading:P,onPressIn:K,optimisticStoryURI:W,traySessionID:y},k.id)),a=!1)}else{l=R[g];k=ka?ja(l.id,R):[];l=t(l,Y,Z,j,G,y,g,F,K,k);l!=null&&(e.push(l),(j==null?void 0:j.isEmpty)===!1&&(a=!1))}}}k=$-e.length;if(b("cr:3260")!=null&&e.length===1)e.push(m.jsx(b("cr:3260"),{body1:h._("__JHASH__iJLSI4bB6rl__JHASH__"),body2:h._("__JHASH__9J1h-gHVCXF__JHASH__"),body3:h._("__JHASH__f4Wx-GATbfd__JHASH__"),icon1:d("fbicon")._(i("875971"),24),icon2:d("fbicon")._(i("518675"),24),icon3:d("fbicon")._(i("505621"),24)},"tofu-null-card"));else if(!D)for(var l=0;l<Math.max(0,k);l++)e.push(m.jsx(c("StoriesTrayTilePlaceholder.react"),{},"placeholder-"+l));return{placeHoldersCount:k,shouldShowCreateCard:a,tiles:e}},[C,D,M,E,I,u,r,v,H,L,R,Q,U,P,Y,Z,K,W,y,ka,ja,G,F]);w=a.placeHoldersCount;e=a.shouldShowCreateCard;f=a.tiles;o(function(){if(V===y)return;X(y)},[y,X,V]);a=h._("__JHASH__TIbUrjBujSG__JHASH__");if(e&&!D)if(c("StoriesTrayCreateCard.react")!=null)return m.jsx(c("StoriesTrayCreateCard.react"),{});else return null;else if(Q&&b("cr:3271")!=null){e=null;D&&(e={type:"fixed",width:s*d("StoriesConstants").DEFAULT_ASPECT_RATIO});return m.jsxs("div",babelHelpers["extends"]({"aria-label":a,className:c("stylex")({"position-1":"x1n2onr6"},{"padding-bottom-1":"x1g2khh7"},D?{"height-1":"x121yvx8","margin-bottom-1":"xieb3on","margin-top-1":"x9otpla","padding-top-1":"x1iorvi4","padding-bottom-1":"xjkvuk6"}:null,ha?{"height-1":"xrxnnga"}:null)},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{role:"region",style:{minHeight:s},children:[m.jsx(c("CometScreenReaderHeading.react"),{children:a}),m.jsx(b("cr:3271"),{cardWidth:e,children:f,hasNext:g,hideArrows:D?!1:w>0,isLoadingNext:j,loadNext:k,peek:D})]}))}return m.jsxs("div",{"aria-label":a,className:"x1n2onr6",role:"region",children:[m.jsx(c("CometScreenReaderHeading.react"),{children:a}),m.jsx(c("StoriesTrayRow.react"),{children:f}),m.jsx(c("StoriesTraySeeAllStoriesButton.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayRectangular.react",["CometRelay","StoriesGating","StoriesTrayRectangularBuckets.react","StoriesTrayRectangular_me.graphql","StoriesTrayRectangular_reels.graphql","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react");e=d("react");var k=e.useCallback,l=e.useMemo,m=h!==void 0?h:h=b("StoriesTrayRectangular_me.graphql"),n=i!==void 0?i:i=b("StoriesTrayRectangular_reels.graphql");function a(a){var b,e,f=a.storiesData;a=a.traySessionID;if(!f.me)throw c("unrecoverableViolation")("Expected current actor for StoriesRoot to be available","fb_stories_web");var g=f.me,h=d("CometRelay").usePaginationFragment(m,g),i=h.data,o=h.hasNext,p=h.isLoadingNext,q=h.loadNext,r=h.refetch,s=i;h=d("CometRelay").usePaginationFragment(n,d("StoriesGating").isHybridTrayEnabled()?f:null);var t=h.data;i=h.hasNext;f=h.isLoadingNext;h=h.loadNext;var u=k(function(a){r({},{fetchPolicy:"store-and-network",onComplete:a})},[r]);b=l(function(){var a;return!d("StoriesGating").isHybridTrayEnabled()?null:((t==null?void 0:(a=t.fb_shorts_unified_tofu)==null?void 0:a.edges)||[]).map(function(a){return a==null?void 0:a.node}).filter(Boolean)},[t==null?void 0:(b=t.fb_shorts_unified_tofu)==null?void 0:b.edges]);e=l(function(){var a;return((s==null?void 0:(a=s.unified_stories_buckets)==null?void 0:a.edges)||[]).map(function(a){return a==null?void 0:a.node}).filter(Boolean)},[s==null?void 0:(e=s.unified_stories_buckets)==null?void 0:e.edges]);return j.jsx(c("StoriesTrayRectangularBuckets.react"),{createTileRef:g,edges:e,hasNext:o,isLoadingNext:p,loadNext:q,reelsHasNext:i,reelsIsLoadingNext:f,reelsLoadNext:h,reelsNodes:b,refetch:u,traySessionID:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayRectangularRoot.react",["fbt","CometErrorBoundary.react","CometPlaceholder.react","CometRelay","StoriesActorProvider.react","StoriesGating","StoriesTrayRectangular.react","StoriesTrayRectangularRootQuery$Parameters","StoriesTrayRectangularRootQuery.graphql","WebPixelRatio","cr:3664","cr:4185","cr:4186","qex","react","useRefetchablePreloadedQuery","useStoriesTrayRefresh","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useState,m=(e=c("qex")._("980"))!=null?e:!1,n=i!==void 0?i:i=b("StoriesTrayRectangularRootQuery.graphql");function o(a){var e;a=a.queries;var f=l(function(){return c("uuid")()});f=f[0];a=c("useRefetchablePreloadedQuery")(c("StoriesTrayRectangularRootQuery$Parameters"),a.storiesTrayQueryReference);var g=a[0];a=a[1];a=d("CometRelay").usePreloadedQuery(n,a);var i=d("StoriesGating").getTrayBucketCount(),o=k(function(){g({bucketsToFetch:i,scale:d("WebPixelRatio").get(),shouldEnableHybridTray:d("StoriesGating").isHybridTrayEnabled(),shouldEnableLiveInStoriesDropdown:d("StoriesGating").shouldEnableLiveInStoriesDropdown()})},[g,i]);c("useStoriesTrayRefresh")(o);e=a==null?void 0:(e=a.viewer)==null?void 0:(e=e.actor)==null?void 0:e.id;return j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return j.jsxs(j.Fragment,{children:[b("cr:4186")!=null&&!m&&j.jsx(b("cr:4186"),{description:h._("__JHASH__K7kc1TK2hE0__JHASH__"),onPress:o}),b("cr:4185")!=null&&!m&&j.jsx(b("cr:4185"),{})]})},children:j.jsx(c("CometPlaceholder.react"),{fallback:b("cr:3664")!=null&&j.jsx(b("cr:3664"),{}),children:j.jsx(c("StoriesActorProvider.react"),{actorID:e,children:j.jsx(c("StoriesTrayRectangular.react"),{storiesData:a,traySessionID:f})})})})}o.displayName=o.name+" [from "+f.id+"]";function a(a){return j.jsx(o,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TopOfFeedLoggingContextProvider",["TopOfFeedLoggingContext","react","uuid"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useMemo,j=b.useState;function a(a){a=a.children;var b=j(c("uuid")()),d=b[0],e=b[1];b=i(function(){return{refreshTofuSessionID:function(){return e(c("uuid")())},tofuSessionID:d}},[d]);return h.jsx(c("TopOfFeedLoggingContext").Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("AppFacebookReelsFilled20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 20 20",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("g",{fillRule:"evenodd",transform:"translate(-446 -350)",children:h.jsx("path",{d:"M454.59 355h4.18l-2.4-4h-3.28c-.22 0-.423.008-.624.017L454.59 355zm6.514 0h3.695c-.226-1.031-.65-1.79-1.326-2.489-1.061-1.025-2.248-1.488-4.392-1.511h-.379l2.401 4zm-8.78 0-1.942-3.64c-.73.247-1.315.63-1.868 1.165-.668.69-1.09 1.445-1.315 2.475h5.125zm7.043 7.989a.711.711 0 0 1-.22.202l-4.573 2.671-.05.027a.713.713 0 0 1-1.024-.643v-5.343l.002-.056a.714.714 0 0 1 1.072-.56l4.572 2.67.054.036a.714.714 0 0 1 .167.996zm-12.366-5.99V363.083l.001.03v.112l.005.048h.001c.05 2.02.513 3.176 1.506 4.203 1.102 1.066 2.324 1.525 4.577 1.525h5.99c2.144-.023 3.331-.486 4.392-1.511 1.005-1.04 1.467-2.198 1.517-4.217h.003c.003-.1.005-.1.006-.204l.001-.156V357h-18z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("StoriesFilled20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 20 20",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("g",{fillRule:"evenodd",transform:"translate(-446 -350)",children:h.jsx("path",{d:"M457 368.832a.5.5 0 0 0 .883.323l1.12-1.332a.876.876 0 0 1 .679-.323h3.522a2.793 2.793 0 0 0 2.796-2.784v-10.931a2.793 2.793 0 0 0-2.796-2.785h-3.454a2.75 2.75 0 0 0-2.75 2.75v15.082zm-1.5 0a.5.5 0 0 1-.883.323l-1.12-1.332a.876.876 0 0 0-.679-.323h-3.522a2.793 2.793 0 0 1-2.796-2.784v-10.931a2.793 2.793 0 0 1 2.796-2.785h3.454a2.75 2.75 0 0 1 2.75 2.75v15.082z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("TopOfFeedTrayHeaderTabs.react",["ix","AppFacebookReelsFilled20.svg.react","AppRoomsFilled20.svg.react","CometRow.react","CometRowItem.react","CometTab.react","ImageIconSource","SVGIcon","StoriesFilled20.svg.react","StoriesGating","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={materialTab:{flexGrow:"x1iyjqo2",height:"xng8ra",justifyContent:"xl56j7k",minWidth:"xznra1h"},materialTabContainerStretched:{flexGrow:"x1iyjqo2"}};function a(a){var b=a.nuxTargetRef,e=a.nuxView,f=a.reelsTabProps,g=a.roomsTabProps;a=a.storiesTabProps;var k=d("StoriesGating").shouldShowIcon(),l=d("StoriesGating").shouldShowColorfulIcon(),m=20,n="left",o=k?{icon:d("SVGIcon").svgIcon(c("StoriesFilled20.svg.react")),iconLocation:n,iconSize:m}:l?{icon:new(c("ImageIconSource"))(h("293294"),m,m),iconLocation:n,iconSize:m}:null,p=k?{icon:d("SVGIcon").svgIcon(c("AppFacebookReelsFilled20.svg.react")),iconLocation:n,iconSize:m}:l?{icon:new(c("ImageIconSource"))(h("293292"),m,m),iconLocation:n,iconSize:m}:null;k=k?{icon:d("SVGIcon").svgIcon(c("AppRoomsFilled20.svg.react")),iconLocation:n,iconSize:m}:l?{icon:new(c("ImageIconSource"))(h("1384648"),m,m),iconLocation:n,iconSize:m}:null;return i.jsxs(c("CometRow.react"),{align:"start",paddingHorizontal:16,paddingVertical:0,spacingHorizontal:0,children:[i.jsxs(c("CometRowItem.react"),{xstyle:j.materialTabContainerStretched,children:[i.jsx(c("CometTab.react"),babelHelpers["extends"]({},a,o,{overlayOffset:-4,overlayRadius:8,tabRef:b!=null?b:void 0,testid:void 0,underlineColor:"var(--accent)",xstyle:j.materialTab})),e]}),i.jsx(c("CometRowItem.react"),{xstyle:j.materialTabContainerStretched,children:i.jsx(c("CometTab.react"),babelHelpers["extends"]({},f,p,{overlayOffset:-4,overlayRadius:8,testid:void 0,underlineColor:"var(--accent)",xstyle:j.materialTab}))}),d("StoriesGating").shouldDisableRoomsTab()?null:i.jsx(c("CometRowItem.react"),{xstyle:j.materialTabContainerStretched,children:i.jsx(c("CometTab.react"),babelHelpers["extends"]({},g,k,{overlayOffset:-4,overlayRadius:8,testid:void 0,underlineColor:"var(--accent)",xstyle:j.materialTab}))})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("RoomsRoot.entrypoint",["JSResourceForInteraction","VideoChatHomeContainerCometQuery$Parameters","WebPixelRatio","gkx"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){var a={};c("gkx")("1363069")&&(a={joinableVideoChatsQueryReference:{parameters:c("VideoChatHomeContainerCometQuery$Parameters"),variables:{scale:d("WebPixelRatio").get()}}});return{queries:a}},root:c("JSResourceForInteraction")("RoomsRoot.react").__setRef("RoomsRoot.entrypoint")};b=a;g["default"]=b}),98);
__d("TopOfFeedStoriesTray.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferredForDisplay")("StoriesTrayRectangularRoot.react").__setRef("TopOfFeedStoriesTray.react"));function a(a){a=a.storiesTrayQueryReference;return a!=null?h.jsx(i,{entryPoints:{},extraProps:null,props:{},queries:{storiesTrayQueryReference:a}}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useTopOfFeedImpressionLogger",["TopOfFeedLoggingContext","react","requireDeferred","usePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useContext,j=b.useMemo,k=c("requireDeferred")("UnifiedTofuTrayImpressionFalcoEvent").__setRef("useTopOfFeedImpressionLogger");function a(a){var b=a.currentTofuTab,d=a.defaultTofuTab,e=a.prevTofuTab,f=a.tabsDisplayed,g=a.tofuTraySessionID;a=i(c("TopOfFeedLoggingContext"));var l=a.refreshTofuSessionID,m=j(function(){return{current_tofu_tab:String(b),default_tofu_tab:String(d),prev_tofu_tab:String(e),tabs_displayed:f.map(function(a){return String(a)}),tofu_tray_session_id:String(g)||""}},[b,d,e,f,g]);a=h(function(){k.onReady(function(a){a=a.log;a(function(){return m})})},[m]);var n=h(function(a){a=a.hiddenReason;a==="NOT_IN_VIEWPORT"&&l()},[l]);return c("usePartialViewImpression")({onImpressionEnd:n,onImpressionStart:a})}g["default"]=a}),98);
__d("useTopOfFeedTrayTabSwitchLogger",["react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback,i=c("requireDeferred")("UnifiedTofuTrayTabSwitchFalcoEvent").__setRef("useTopOfFeedTrayTabSwitchLogger");function a(){var a=h(function(a){var b=a.currentTofuTab,c=a.defaultTofuTab,d=a.prevTofuTab,e=a.tabsDisplayed,f=a.tofuTraySessionID;i.onReady(function(a){a=a.log;return a(function(){return{current_tofu_tab:String(b),default_tofu_tab:String(c),prev_tofu_tab:String(d),tabs_displayed:e.map(function(a){return String(a)}),tofu_tray_session_id:String(f)||""}})})},[]);return{topOfFeedSwitchTabLog:a}}g["default"]=a}),98);
__d("useTopOfFeedVPVLogger",["gkx","react","requireDeferred","useVPVDImpression"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");var h=a.useCallback,i=a.useMemo,j=c("requireDeferred")("UnifiedTofuTrayVpvEndFalcoEvent").__setRef("useTopOfFeedVPVLogger"),k=c("requireDeferred")("UnifiedTofuTrayVpvStartFalcoEvent").__setRef("useTopOfFeedVPVLogger");b=function(a){var b=a.currentTofuTab,d=a.defaultTofuTab,e=a.prevTofuTab,f=a.tabsDisplayed,g=a.tofuTraySessionID,l=i(function(){return{current_tofu_tab:String(b),default_tofu_tab:String(d),prev_tofu_tab:String(e),tabs_displayed:f.map(function(a){return String(a)}),tofu_tray_session_id:String(g)||""}},[b,d,e,f,g]);a=h(function(a){a=a.visibleDuration;var b=babelHelpers["extends"]({},l,{vpv_duration_ms:String(a)});j.onReady(function(a){a=a.log;return a(function(){return b})})},[l]);var m=h(function(){k.onReady(function(a){a=a.log;return a(function(){return l})})},[l]);return c("useVPVDImpression")({onVPVDEnd:a,onVPVDStart:m})};e=b;g["default"]=e}),98);
__d("TopOfFeedTrayStoriesDefault.react",["fbt","BaseView.react","CometCard.react","CometErrorBoundary.react","CometFeedWidthStyles","CometPlaceholder.react","CometRow.react","CometRowItem.react","FBReelsTopOfFeedTrayPlaceholder.react","FBReelsTopOfFeedTrayRoot.entrypoint","RelayHooks","RoomsRoot.entrypoint","TopOfFeedConsts","TopOfFeedLoggingContext","TopOfFeedStoriesTray.react","TopOfFeedTrayErrorLazyLoaded.react","TopOfFeedTrayHeaderTabs.react","VideoChatTrayPlaceholder.react","emptyFunction","react","stylex","useCometPreloader","useMergeRefs","usePrevious","useTopOfFeedImpressionLogger","useTopOfFeedTrayTabSwitchLogger","useTopOfFeedVPVLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useContext,l=b.useMemo,m=b.useState,n=d("CometFeedWidthStyles").getFeedWidthStyles(),o={header:{paddingBottom:"x18d9i69"},headerWrapper:{marginBottom:"x1e56ztr",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",paddingTop:"x889kno"},materialTabsHeader:{borderBottom:"xua58t2",marginBottom:"xod5an3",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd"},topOfFeedContainer:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",marginBottom:"x1yztbdb",paddingTop:"x1y1aw1k"},wrapper:{maxWidth:"x193iq5w"}};function a(a){var b=a.nuxTargetRef,e=a.nuxView;a=a.storiesTrayQueryReference;var f=m(d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES),g=f[0],p=f[1],q=c("usePrevious")(g);f=m(0);var r=f[0],s=f[1],t=d("RelayHooks").useRelayEnvironment();f=l(function(){return{getEnvironment:function(){return t}}},[t]);var u=k(c("TopOfFeedLoggingContext")),v=u.tofuSessionID,w=l(function(){return{currentTofuTab:g,defaultTofuTab:d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES,prevTofuTab:q,tabsDisplayed:d("TopOfFeedConsts").TABS_DISPLAYED,tofuTraySessionID:v}},[g,q,v]);u=c("useTopOfFeedVPVLogger")(w);var x=u[0];u=u[1];var y=c("useTopOfFeedImpressionLogger")(w);x=c("useMergeRefs")(x,y);y=c("useTopOfFeedTrayTabSwitchLogger")();var z=y.topOfFeedSwitchTabLog;y=d("RelayHooks").useEntryPointLoader(f,c("RoomsRoot.entrypoint"));var A=y[0],B=y[1],C=y[2];y=d("RelayHooks").useEntryPointLoader(f,c("FBReelsTopOfFeedTrayRoot.entrypoint"));var D=y[0],E=y[1],F=y[2],G=j(function(a){a!==g&&(z(babelHelpers["extends"]({},w,{currentTofuTab:a,prevTofuTab:g})),p(a))},[g,w,z]);f=j(function(){D==null&&E({})},[E,D]);y=j(function(){A==null&&B({})},[B,A]);var H=c("useCometPreloader")("button_aggressive",c("emptyFunction"),f),I=H[0],J=H[1];H=H[2];var K=c("useCometPreloader")("button_aggressive",c("emptyFunction"),y),L=K[0],M=K[1];K=K[2];var N={label:h._("__JHASH__zrwmn3ul6pl__JHASH__"),onPress:function(){return G(d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES)},selected:g===d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES};f={label:h._("__JHASH__AJDIDx8kf3K__JHASH__"),onFocusIn:f,onHoverIn:I,onHoverOut:J,onPress:function(){G(d("TopOfFeedConsts").UnifiedTofuTrayEnum.REELS)},onPressIn:H,selected:g===d("TopOfFeedConsts").UnifiedTofuTrayEnum.REELS};I={label:h._("__JHASH__3G3M_ziisOu__JHASH__"),onFocusIn:y,onHoverIn:L,onHoverOut:M,onPress:function(){G(d("TopOfFeedConsts").UnifiedTofuTrayEnum.ROOMS)},onPressIn:K,selected:g===d("TopOfFeedConsts").UnifiedTofuTrayEnum.ROOMS};return i.jsxs("div",{className:c("stylex")(o.topOfFeedContainer),ref:x,children:[u,i.jsxs(c("CometCard.react"),{allowOverflow:!1,background:"white",dropShadow:1,children:[i.jsx(c("CometRow.react"),{expanding:!0,role:"tablist",xstyle:[o.headerWrapper,o.materialTabsHeader],children:i.jsx(c("CometRowItem.react"),{expanding:!0,xstyle:o.header,children:i.jsx(c("TopOfFeedTrayHeaderTabs.react"),{nuxTargetRef:b,nuxView:e,reelsTabProps:f,roomsTabProps:I,storiesTabProps:N})})}),i.jsxs("div",{className:c("stylex")(n.composerAndFeedWrapper,o.wrapper),children:[A!=null&&i.jsx(c("BaseView.react"),{hidden:g!==d("TopOfFeedConsts").UnifiedTofuTrayEnum.ROOMS,children:i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return i.jsx(c("TopOfFeedTrayErrorLazyLoaded.react"),{description:h._("__JHASH__E7x7MTTpKTL__JHASH__"),onPress:function(){s(r+1),C(),B({})}})},forceResetErrorCount:r,children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("VideoChatTrayPlaceholder.react"),{}),name:"RoomsTrayTopOfFeed",children:i.jsx(d("RelayHooks").EntryPointContainer,{entryPointReference:A,props:{}})})})}),D!=null&&i.jsx(c("BaseView.react"),{hidden:g!==d("TopOfFeedConsts").UnifiedTofuTrayEnum.REELS,children:i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return i.jsx(c("TopOfFeedTrayErrorLazyLoaded.react"),{description:h._("__JHASH__-p3ZtGrABR7__JHASH__"),onPress:function(){s(r+1),F(),E({})}})},forceResetErrorCount:r,children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("FBReelsTopOfFeedTrayPlaceholder.react"),{}),name:"ReelsTrayTopOfFeed",children:i.jsx(d("RelayHooks").EntryPointContainer,{entryPointReference:D,props:{}})})})}),i.jsx(c("BaseView.react"),{hidden:g!==d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES,children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("FBReelsTopOfFeedTrayPlaceholder.react"),{}),children:i.jsx(c("TopOfFeedStoriesTray.react"),{storiesTrayQueryReference:a})})})]})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TopOfFeedTrayWrapper.react",["fbt","CometContextualLayerAnchorRoot.react","CometRelay","TopOfFeedConsts","TopOfFeedLoggingContextProvider","TopOfFeedTrayStoriesDefault.react","TopOfFeedTrayWrapperQuery.graphql","cr:4969","react","useCometPulseNUX"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=d("react").useMemo,l="10289",m=i!==void 0?i:i=b("TopOfFeedTrayWrapperQuery.graphql");function a(a){var e,f=a.reelsTrayQueryReference,g=a.storiesTrayQueryReference;a=a.topOfFeedTrayWrapperQueryReference;a=d("CometRelay").usePreloadedQuery(m,a);var i=k(function(){return h._("__JHASH__uuc4A-0QJ0D__JHASH__")},[]);e=c("useCometPulseNUX")(l,k(function(){return{calloutProps:{align:"start",arrowStyle:"inset",hasCloseButton:!0,label:i,position:"below",type:"accent"},contextualLayerProps:{align:"start",position:"above"},pulseProps:{label:"pulse nux for tab switching education"}}},[i]),(e=a==null?void 0:(e=a.nux)==null?void 0:e.should_show)!=null?e:!1);var n=e.targetRef;e=e.view;a=d("TopOfFeedConsts").UnifiedTofuTrayDefaultLandingTabEnum.cast(a==null?void 0:a.xfb_default_landing_tab_tofu_interface)===d("TopOfFeedConsts").UnifiedTofuTrayDefaultLandingTabEnum.REELS;return j.jsx(c("CometContextualLayerAnchorRoot.react"),{children:j.jsx(c("TopOfFeedLoggingContextProvider"),{children:b("cr:4969")!=null&&a?j.jsx(b("cr:4969"),{nuxTargetRef:n,nuxView:e,reelsTrayQueryReference:f}):j.jsx(c("TopOfFeedTrayStoriesDefault.react"),{nuxTargetRef:n,nuxView:e,storiesTrayQueryReference:g})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSLocalizedStrings",["fbt"],(function(a,b,c,d,e,f,g){a=function(a,b){switch(a){default:return""}};e.exports=a}),null);
__d("LSLocalizedStringsV2",["fbt","bs_caml_int64"],(function(a,b,c,d,e,f,g){a=function(a,c){switch(a){case"2285622730":return g._("__JHASH__bHf-pjjpSrh__JHASH__");case"1919524925":return g._("__JHASH__g2TuGL7kp7W__JHASH__");case"14617150":return g._("__JHASH__KN5FuK9HL68__JHASH__");case"460740012":return g._("__JHASH__PmrYWcLl7s-__JHASH__");case"2353844300":return g._("__JHASH__U3_S6m-Asci__JHASH__");case"2421884758":return g._("__JHASH__6vTlb2bku1-__JHASH__");case"2676961947":return g._("__JHASH__TK1WqTTq979__JHASH__",[g._param("participant_name",c(0))]);case"2352696798":return g._("__JHASH__4w1HQhVySfH__JHASH__");case"3298086032":return g._("__JHASH__AI6Z85qZOTl__JHASH__",[g._param("sender_name",c(0))]);case"3873263038":return g._("__JHASH__1Mq5qyIkjxC__JHASH__",[g._param("sender_name",c(0))]);case"2616853333":return g._("__JHASH__Jm7dkp7Q46M__JHASH__",[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"4002265907":return g._("__JHASH__YfSaJhpdv0H__JHASH__");case"2663996736":return g._("__JHASH__rouMYaFboPj__JHASH__",[g._param("participant_name",c(0))]);case"2868699317":return g._("__JHASH__gln0mR6BSos__JHASH__",[g._param("sender_name",c(0))]);case"2688620547":return g._("__JHASH__xBthZSMLrSR__JHASH__",[g._param("sender_name",c(0))]);case"3544071775":return g._("__JHASH__Bfn4BTqFbTw__JHASH__",[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"2375715979":return g._("__JHASH__wwqS06IKURT__JHASH__");case"3810165735":return g._("__JHASH___xK_oqrbVu3__JHASH__",[g._param("user_name",c(0))]);case"1890485478":return g._("__JHASH__r5f8SC2OUWe__JHASH__");case"1299547062":return g._("__JHASH__UxIyHnrkGvQ__JHASH__");case"3621454483":return g._("__JHASH__6CXDyy4pKod__JHASH__",[g._param("user_name",c(0))]);case"3948960063":return g._("__JHASH__4jXDffqGKxc__JHASH__");case"1249692047":return g._("__JHASH__XuMb0GRtMp2__JHASH__",[g._param("user_name",c(0))]);case"2106510577":return g._("__JHASH__adFbSa44M9G__JHASH__");case"3960370133":return g._("__JHASH__WRQpot61Zha__JHASH__",[g._param("user_name",c(0))]);case"3798396796":return g._("__JHASH__AKC6gu2oXen__JHASH__",[g._param("app_name",c(0))]);case"3388601579":return g._("__JHASH__LLEsQ4Y9-C7__JHASH__",[g._param("user_name",c(0)),g._param("app_name",c(1))]);case"1556712457":return g._("__JHASH__pQsKY3JdghI__JHASH__");case"3601791933":return g._("__JHASH__VzXmY6Nofoo__JHASH__",[g._param("user_name",c(0))]);case"3759817031":return g._("__JHASH__C6rFQy3ZqgT__JHASH__");case"2934729541":return g._("__JHASH__5sq-yY8-PHO__JHASH__",[g._param("user_name",c(0))]);case"392493418":return g._("__JHASH__Y9RNnaq--9C__JHASH__");case"4085467454":return g._("__JHASH__Tf8KEtj2NUW__JHASH__",[g._param("user_name",c(0))]);case"2738683656":return g._("__JHASH__VTdyPQ7H4GZ__JHASH__");case"2996525642":return g._("__JHASH__YPG0HYdjvfW__JHASH__",[g._param("user_name",c(0))]);case"2326868239":return g._("__JHASH__j-o8KFpMPxd__JHASH__");case"1001986796":return g._("__JHASH__zsY9ES-V3Ko__JHASH__",[g._param("user_name",c(0))]);case"2285746939":return g._("__JHASH__8PT2JtdeJx9__JHASH__");case"3759448420":return g._("__JHASH__H7eOZ8S6YOP__JHASH__",[g._param("user_name",c(0))]);case"3719716921":return g._("__JHASH__qiicOieyAHd__JHASH__");case"284944921":return g._("__JHASH__TkSIon2AHjf__JHASH__",[g._param("user_name",c(0))]);case"3322002377":return g._("__JHASH__hs-XIkGvPGM__JHASH__",[g._param("user_name",c(0))]);case"2486550278":return g._("__JHASH__78NZ4EbNix1__JHASH__");case"3557790945":return g._("__JHASH__9P29njYEtVJ__JHASH__");case"3756846086":return g._("__JHASH__HqUxJ78yQEs__JHASH__",[g._param("user_name",c(0))]);case"780378803":return g._("__JHASH__4RDpwDU2bxj__JHASH__");case"3918212613":return g._("__JHASH__sfM4caXMU8x__JHASH__",[g._param("user_name",c(0))]);case"3161890215":return g._("__JHASH__rMpUt8zHstd__JHASH__");case"863428456":return g._("__JHASH__ZqoJBBTdmfd__JHASH__",[g._param("user_name",c(0))]);case"2716405471":return g._("__JHASH__3bEfkOlWqZQ__JHASH__");case"3909474073":return g._("__JHASH__0LAhbzE2305__JHASH__",[g._param("user_name",c(0))]);case"1522141193":return g._("__JHASH__Xv5h5VWZ1z-__JHASH__");case"2804766375":return g._("__JHASH__iwXmJRLI5oQ__JHASH__",[g._param("user_name",c(0))]);case"772459202":return g._("__JHASH__da1hGBDyrc0__JHASH__");case"3546068912":return g._("__JHASH__eB3RT9ZRPNU__JHASH__",[g._param("user_name",c(0))]);case"2459540079":return g._("__JHASH__uVYFUqdjsDk__JHASH__");case"1596311291":return g._("__JHASH__JNmnqH9YpVN__JHASH__",[g._param("user_name",c(0))]);case"2253698324":return g._("__JHASH__cjVmAaYlDK5__JHASH__");case"4269602817":return g._("__JHASH__tgAN3WazCx7__JHASH__",[g._param("user_name",c(0))]);case"1739999037":return g._("__JHASH__LG-CVe6YeL2__JHASH__");case"3373597599":return g._("__JHASH__XSfhGJMwPL8__JHASH__");case"259473449":return g._("__JHASH__qL_GOsBRgrZ__JHASH__",[g._param("user_name",c(0))]);case"1338912959":return g._("__JHASH__LrXrY17Mwwh__JHASH__",[g._param("user_name",c(0))]);case"812940701":return g._("__JHASH__NEO9buPurkr__JHASH__",[g._param("user_name",c(0))]);case"1099878966":return g._("__JHASH__Qho_g3FF8mq__JHASH__",[g._param("user_name",c(0))]);case"3443782102":return g._("__JHASH__Xxt66o3iPYX__JHASH__");case"1196128688":return g._("__JHASH__z8eeQq9oV5-__JHASH__");case"2135145355":return g._("__JHASH__woc-8KLy7zj__JHASH__");case"3603511704":return g._("__JHASH__--XUHiOY0Z1__JHASH__",[g._param("user_name",c(0))]);case"705614308":return g._("__JHASH__vsnRcMCSSFJ__JHASH__",[g._plural(b("bs_caml_int64").to_float(c(0)),"number")]);case"313217698":return g._("__JHASH__rG1E-FG-TxB__JHASH__",[g._plural(b("bs_caml_int64").to_float(c(1)),"number"),g._param("user_name",c(0))]);case"3558654267":return g._("__JHASH___H0KEIF4aGq__JHASH__");case"3422266740":return g._("__JHASH__F5OxWfUB9Dy__JHASH__",[g._param("user_name",c(0))]);default:return""}};e.exports=a}),null);
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],indexes:{queueNameTaskId:["queueName","taskId"]},auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0},{name:"mailbox_task_completion_notification_context",id:232,primary_key:["notificationScopeKey"]},{name:"mailbox_task_completion_api_tasks",id:233,primary_key:["taskId"]}],[{name:"contacts",id:7,primary_key:["id"],indexes:{blockedByViewerStatusId:["blockedByViewerStatus","id"]}},{name:"ig_contact_info",id:176,primary_key:["contactId"]},{name:"work_contact_info",id:210,primary_key:["id"]},{name:"contextual_profile_v1",id:216,primary_key:["ownerId","associatedEntityId"]},{name:"fb_transport_contacts",id:240,primary_key:["pk"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"]},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:["lastActivityTimestampMs","threadKey"],parentThreadKeyLastActivityTimestampMs:["parentThreadKey","lastActivityTimestampMs","threadKey"],clientThreadKey:["clientThreadKey","threadKey"],threadTypeLastActivityTimestampMs:["threadType","lastActivityTimestampMs","threadKey"]}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:["offlineThreadingId"],messageDisplayOrder:["threadKey","primarySortKey","secondarySortKey","messageId"],messageId:["messageId"]}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:["threadKey","readWatermarkTimestampMs","contactId"],threadKeyDeliveredWatermarkTimestampMs:["threadKey","deliveredWatermarkTimestampMs","contactId"]}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:["threadKey","timestampMs","messageId","attachmentFbid"]}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","attachmentIndex"]}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","ctaId"]}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:["ctaId"]}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:["threadKey","ctaId"]}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v2__generated",id:159,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"]},{name:"community_folders",id:162,primary_key:["folderId"]},{name:"community_members",id:170,primary_key:["communityId","contactId","source"],indexes:{communityContactId:["communityId","contactId","source"],communitySource:["communityId","source","name","contactId"]}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName","source"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"]},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:["threadKey","inviterId","inviteeId"]}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]},{name:"msg_pinned_messages_v2",id:205,primary_key:["threadKey","messageId","pinnedTimestampMs"],indexes:{pinnedMessageDisplayOrder:["threadKey","pinnedTimestampMs","messageId"]}},{name:"filtered_messages_ranges_v2__generated",id:211,primary_key:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"]},{name:"taken_down_threads",id:212,primary_key:["threadKey"]},{name:"participant_list_queries",id:219,primary_key:["threadKey"]},{name:"sync_group_threads_ranges",id:220,primary_key:["syncGroup","parentThreadKey"]},{name:"community_chat_message_seen_count",id:221,primary_key:["threadKey","messageId"]},{name:"community_chat_polls",id:223,primary_key:["pollId"]},{name:"community_chat_poll_options",id:224,primary_key:["pollId","optionId"]},{name:"community_chat_poll_votes",id:225,primary_key:["pollId","optionId","contactId"]},{name:"reactions_v2",id:226,primary_key:["threadKey","messageId","reactionFbid","messageTimestamp"],indexes:{optimistic:["threadKey","messageId","reactionFbid"]}},{name:"reactions_v2_details_users",id:227,primary_key:["reactorId","reactionFbid"]},{name:"reactions_v2_details_users_ranges_v2__generated",id:228,primary_key:["reactorId","reactionFbid","minTimestampMs"]},{name:"reaction_v2_types",id:229,primary_key:["reactionFbid"]},{name:"bots",id:230,primary_key:["threadKey","botId"]},{name:"business_comm_items",id:234,primary_key:["threadKey","entId"]},{name:"group_invitations_pending",id:235,primary_key:["linkHash"]},{name:"business_support_notification_settings",id:236,primary_key:["userId"]},{name:"thread_label_mappings",id:237,primary_key:["threadKey","labelId"]},{name:"audio_channel_events",id:238,primary_key:["eventId","roomId"]},{name:"reactions_v2_details",id:239,primary_key:["threadId","messageId","reactorId","reactionFbid"]}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]},{name:"participant_search_queries",id:214,primary_key:["query","threadKey"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:["optimisticClientToken"]}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:["pinnedTimestamp","threadKey"]}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"]},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"]},{name:"community_events",id:202,primary_key:["eventId","communityId"]},{name:"avatar_settings",id:209,primary_key:["threadId"]},{name:"thread_labels",id:215,primary_key:["labelId"]},{name:"business_support_case_details",id:222,primary_key:["threadId"]}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:["stickerPackId","stickerId"]}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:["threadKey"]}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:["scoreType","contactId"]}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:["ownerId","bucketType"]}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:["optimisticClientId"]}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:["optimisticClientToken"]}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:["roomId","participantId"]}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:["serverThreadKey"],chat_id:["clientThreadPk"],jid:["jid"]}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"],indexes:{shouldFlushInitTimestampMsTraceId:["shouldFlush","initTimestampMs","traceId"]}},{name:"data_trace_addon",id:154,primary_key:["addonId"],indexes:{traceIdAddonId:["traceId","addonId"]},auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]},{name:"client_thread_proactive_warning_settings",id:241,primary_key:["threadPk"]}],[{name:"presence_states",id:186,primary_key:["contactId"],indexes:{statusContactId:["status","contactId"]}}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:["pendingBackupTaskId"]},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"encrypted_backups_debug_metadata",id:206,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata",id:207,primary_key:["epochId"]},{name:"encrypted_backups_debug_metadata_v2",id:217,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata_v2",id:218,primary_key:["epochId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:["backupId","epochId"]}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]},{name:"encrypted_backups_dyi_backup_restore_status",id:208,primary_key:["pk"]},{name:"encrypted_backups_message_backup_status",id:213,primary_key:["messagePk"]},{name:"encrypted_backups_client_restore_status",id:231,primary_key:["threadId"]}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:["deviceId","supportedVersion"]}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]}],[{name:"community_messaging_aggregated_user_presence_counts_for_community",id:203,primary_key:["folderId"]},{name:"community_messaging_aggregated_copresence_counts_for_chat",id:204,primary_key:["threadId"]}]]}),null);
__d("LSSetThreadImageURL",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadPictureUrl:a[1]===""?d:a[1],threadPictureUrlFallback:a[2],threadPictureUrlExpirationTimestampMs:a[3],isCustomThreadPicture:a[4],shouldRoundThreadPicture:a[5]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertContact",["LSSetThreadImageURL"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.i64.eq(a[23],[0,39423])?d[0]=[0,1]:(c.i64.eq(a[23],[0,14342874])?d[1]=[0,2]:d[1]=f,d[0]=d[1]),c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])&&c.i64.gt(b.authorityLevel,a[21])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(7).put({id:a[0],profilePictureUrl:a[2],profilePictureFallbackUrl:a[3],profilePictureUrlExpirationTimestampMs:a[4],profilePictureLargeUrl:a[5],profilePictureLargeFallbackUrl:a[6],profilePictureLargeUrlExpirationTimestampMs:a[7],name:a[9],secondaryName:a[41],normalizedNameForSearch:a[10],normalizedSearchTerms:a[33],isMessengerUser:a[11],isMemorialized:a[12],isManagedByViewer:a[35],blockedByViewerStatus:a[14],rank:a[17],firstName:a[18],contactType:a[19],contactTypeExact:a[20],authorityLevel:a[21],messengerCallLogThirdPartyId:a[22],profileRingColor:a[23],requiresMultiway:a[24],blockedSinceTimestampMs:a[25],fbUnblockedSinceTimestampMs:a[46],canViewerMessage:a[26],profileRingColorExpirationTimestampMs:a[27],phoneNumber:a[28],emailAddress:a[29],workCompanyId:a[30],workCompanyName:a[31],workJobTitle:a[32],deviceContactId:a[34],workForeignEntityType:a[36],capabilities:a[37],capabilities2:a[38],profileRingState:d[0],contactViewerRelationship:a[39],gender:a[40],contactReachabilityStatusType:a[43],restrictionType:a[44],waConnectStatus:a[45]}):0})},function(d){return c.sp(b("LSSetThreadImageURL"),a[0],a[2],a[3],a[4],!1,!0)}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIssueNewTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(d){return b.seq([function(c){return b.db.table(2).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:b.i64.of_float(Date.now()),httpUrlOverride:a[3],timeoutTimestampMs:a[4],pluginType:a[5],priority:a[6],syncGroupId:a[7],minTimeToSyncTimestampMs:a[9]})},function(d){return b.ftr(b.db.table(2).fetchDesc([[[a[0]]],"queueNameTaskId"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])&&c.taskValue===a[2]}).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=[-1,4294967295]:(b=a.item,c[0]=b.taskId)})},function(a){return function(a){b.logger(a).info(a)}(["NewTask"," ",b.i64.to_string(c[0])].join(""))}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSVerifyContactRowExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(e){var g=e.done;e.value;return g?c.seq([function(b){return d[0]=a[3]==null?"":a[3],c.fe(c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])&&c.i64.lt(b.authorityLevel,a[14])}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],profilePictureUrl:a[2]==null?"":a[2],profilePictureFallbackUrl:a[5],name:d[0],secondaryName:a[20],normalizedNameForSearch:d[0],isMemorialized:a[9],blockedByViewerStatus:a[11],canViewerMessage:a[12],profilePictureLargeUrl:"",isMessengerUser:!0,rank:0,contactType:a[4],contactTypeExact:[0,0],requiresMultiway:!1,authorityLevel:a[14],workForeignEntityType:[0,0],capabilities:a[15],capabilities2:a[16],contactViewerRelationship:a[19],gender:a[18]})},function(e){return d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[2]=c.toJSON(d[1]),c.sp(b("LSIssueNewTask"),"cpq_v2",[0,207],d[2],f,f,[0,0],[0,0],f,f,[0,0])}]):0})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSExecuteFinallyBlockForSyncTransaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.seq([function(c){return b.fe(b.ftr(b.db.table(3).fetch([[["",a[1]]]]),function(c){return c.taskQueueName===""&&b.i64.eq(c.syncDatabaseId,a[1])&&b.i64.eq(c.epochId,a[2])}),function(c){var e=c.update;c=c.item;return e({epochId:!a[0]&&b.i64.eq(c.failureCount,[-1,4294967295])?c.epochId:d,failureCount:b.i64.eq(c.failureCount,[-1,4294967295])?[0,0]:b.i64.add(c.failureCount,[0,1])})})},function(a){return b.resolve()}])},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSAppendDataTraceAddon",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(154).add({addonId:void 0,traceId:a[0],timestampMs:b.i64.of_float(Date.now()),checkPointId:a[1],syncChannel:a[2],errorMessage:a[3],tags:a[4]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSArrayGetObjectAt",["Promise","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e,f){return b("Promise").resolve([e[d("bs_caml_int64").to_int32(f)],e])}g.call=a}),98);
__d("LSLogEventAnnotate.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("Promise").resolve(void 0)}f.call=a}),null);
__d("LSLogEventAnnotate.re",["LSLogEventAnnotate.bs"],(function(a,b,c,d,e,f){a=b("LSLogEventAnnotate.bs").call;f.call=a}),null);
__d("LSLogEventAnnotate.nop",["LSLogEventAnnotate.re"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f,g){return d("LSLogEventAnnotate.re").call(a,b,c,e,f,g)};g["default"]=a}),98);
__d("LSExecuteFirstBlockForSyncTransaction",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSLogEventAnnotate.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(f){return c.seq([function(a){return c.resolve()},function(e){return c.ftr(c.db.table(3).fetch([[["",a[0]]]]),function(b){return b.taskQueueName===""&&c.i64.eq(b.syncDatabaseId,a[0])&&c.i64.eq(b.epochId,a[1])}).next().then(function(e,f){f=e.done;e=e.value;return f?c.seq([function(e){return function(a){c.logger(a).mustfix(a)}(["epoch mismatch",",",c.i64.to_string(a[0])].join("")),d[2]=new c.Map(),d[2].set("database_id",a[0]),d[2].set("epoch_id",a[1]),d[2].set("sync_status",a[4]),d[2].set("next_cursor",a[3]),d[2].set("error_msg","epoch mismatch"),a[9]?d[3]=!1:d[3]=!0,d[3]?c.resolve():(d[5]=a[9].keys(),d[6]=c.i64.of_int32(d[5].length),c.i64.gt(d[6],[0,0])?c.loopAsync(d[6],function(e){return d[7]=e,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[5],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(b){return d[10]=a[9].get(d[8]),a[9],d[2].set(d[8],d[10])}])}):c.resolve())},function(a){return c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,35],[0,0],d[2])},function(a){return d[4]=!1,d[0]=d[4]}]):(e.item,c.seq([function(e){return c.ftr(c.db.table(1).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.groupId,a[0])&&b.currentCursor===a[2]}).next().then(function(e,f){f=e.done;e=e.value;return f?c.seq([function(e){return function(a){c.logger(a).mustfix(a)}(["cursor mismatch",",",c.i64.to_string(a[0])].join("")),d[4]=new c.Map(),d[4].set("database_id",a[0]),d[4].set("epoch_id",a[1]),d[4].set("sync_status",a[4]),d[4].set("next_cursor",a[3]),d[4].set("error_msg","cursor mismatch"),a[9]?d[5]=!1:d[5]=!0,d[5]?c.resolve():(d[7]=a[9].keys(),d[8]=c.i64.of_int32(d[7].length),c.i64.gt(d[8],[0,0])?c.loopAsync(d[8],function(e){return d[9]=e,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[7],d[9]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],a})},function(b){return d[12]=a[9].get(d[10]),a[9],d[4].set(d[10],d[12])}])}):c.resolve())},function(a){return c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,35],[0,0],d[4])},function(a){return d[6]=!1,d[2]=d[6]}]):(e.item,c.seq([function(b){return c.fe(c.db.table(1).fetch([[[a[0]]]]),function(b){var d=b.update;b.item;return d({currentCursor:a[3],syncStatus:a[4],sendSyncParams:a[5],minTimeToSyncTimestampMs:c.i64.eq(a[6],[0,0])?[0,0]:c.i64.add(c.i64.of_float(Date.now()),a[6]),canIgnoreTimestamp:a[7],syncChannel:a[8],lastSyncCompletedTimestampMs:c.i64.of_float(Date.now())})})},function(b){return c.fe(c.db.table(3).fetch([[["",a[0]]]]),function(a){var b=a.update;a.item;return b({failureCount:[-1,4294967295]})})},function(e){return d[4]=new c.Map(),d[4].set("database_id",a[0]),d[4].set("epoch_id",a[1]),d[4].set("sync_status",a[4]),d[4].set("next_cursor",a[3]),a[9]?d[5]=!1:d[5]=!0,d[5]?c.resolve():(d[7]=a[9].keys(),d[8]=c.i64.of_int32(d[7].length),c.i64.gt(d[8],[0,0])?c.loopAsync(d[8],function(e){return d[9]=e,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[7],d[9]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],a})},function(b){return d[12]=a[9].get(d[10]),a[9],d[4].set(d[10],d[12])}])}):c.resolve())},function(a){return c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,35],[0,0],d[4])},function(a){return d[6]=!0,d[2]=d[6]}]))})},function(a){return d[0]=d[2]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetCursor",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=e:(b=a.item,c[0]=b.currentCursor)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSGetViewerFBID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(a){return b.seq([function(a){return b.db.table(4).fetch([[[[0,1]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=[-1,4294967295]:(b=a.item,c[0]=b.facebookUserId)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSIssueNewTaskAndGetTaskID",["LSIssueNewTask","LSLogEventAnnotate.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(f){return c.seq([function(d){return c.sp(b("LSIssueNewTask"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9])},function(b){return d[3]=c.i64.to_string(a[1]),c.ftr(c.db.table(2).fetchDesc([[[a[0]]],"queueNameTaskId"]),function(b){return b.queueName===a[0]&&b.context===d[3]&&b.taskValue===a[2]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=[-1,4294967295]:(b=a.item,d[0]=b.taskId)})},function(e){return d[2]=new c.Map(),d[2].set("task_id",d[0]),d[2].set("task_queue_name",a[0]),d[2].set("task_label",d[3]),c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,23],[0,0],d[2])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.fe(b.db.table(2).fetch([[[d.queueName,{lte:a[0]}]],"queueNameTaskId"]),function(a){return a["delete"]()}))})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSSetRegionHint",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(1).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({regionHint:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSTaskExists",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(e){return b.seq([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?c[0]=!1:(a.item,c[0]=!0)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(1).fetch([[[a[0]]]]),function(a){var c=a.update;a.item;return c({lastSyncCompletedTimestampMs:b.i64.of_float(Date.now())})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.db.table(9).fetch([[[a[7]]]]).next().then(function(d,f){var g=d.done;d=d.value;return g?b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[25],parentThreadKey:a[31],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],isAdminSnippet:a[16],snippetSenderContactId:a[17],snippetStringHash:a[20],snippetStringArgument1:a[21],snippetAttribution:a[22],snippetAttributionStringHash:a[23],cannotReplyReason:a[26],customEmoji:a[27],customEmojiImageUrl:a[28],outgoingBubbleColor:a[29],themeFbid:a[30],nullstateDescriptionText1:a[32],nullstateDescriptionType1:a[33],nullstateDescriptionText2:a[34],nullstateDescriptionType2:a[35],nullstateDescriptionText3:a[36],nullstateDescriptionType3:a[37],draftMessage:a[38],snippetHasEmoji:a[39],hasPersistentMenu:a[40],disableComposerInput:a[41],cannotUnsendReason:a[42],viewedPluginKey:a[43],viewedPluginContext:a[44],clientThreadKey:a[45],capabilities:a[46],shouldRoundThreadPicture:a[47],proactiveWarningDismissTime:a[48],isCustomThreadPicture:a[49],otidOfFirstMessage:a[50],normalizedSearchTerms:a[51],additionalThreadContext:a[52],disappearingThreadKey:a[53],isDisappearingMode:a[54],disappearingModeInitiator:a[55],unreadDisappearingMessageCount:a[56],lastMessageCtaId:a[58],lastMessageCtaType:a[59],threadDescription:a[60],unsendLimitMs:a[61],syncGroup:a[62],threadInvitesEnabled:a[63],threadInviteLink:a[64],threadInvitesEnabledV2:a[65],eventStartTimestampMs:a[66],eventEndTimestampMs:a[67],takedownState:a[68],memberCount:a[69],igFolder:a[70],inviterId:a[71],threadTags:a[72]}):(f=d.item,c[1]=f.lastActivityTimestampMs,c[3]=f.parentThreadKey,c[2]=f.disappearingThreadKey,c[4]=f.isDisappearingMode,b.i64.le(f.authorityLevel,a[6])?b.i64.gt(c[1],a[0])&&b.i64.neq(c[2],e)?(b.i64.eq(a[31],[-1,4294967286])&&b.i64.eq(c[3],[0,0])?(g=[c[3],f.folderName],c[5]=g[0],c[6]=g[1],g):(d=[a[31],a[10]],c[5]=d[0],c[6]=d[1],d),b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:f.lastReadWatermarkTimestampMs,authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:c[6],ongoingCallState:a[25],parentThreadKey:c[5],lastActivityTimestampMs:c[1],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],isAdminSnippet:a[16],snippetSenderContactId:a[17],snippetStringHash:a[20],snippetStringArgument1:a[21],snippetAttribution:a[22],snippetAttributionStringHash:a[23],cannotReplyReason:a[26],customEmoji:a[27],customEmojiImageUrl:a[28],outgoingBubbleColor:a[29],themeFbid:a[30],nullstateDescriptionText1:a[32],nullstateDescriptionType1:a[33],nullstateDescriptionText2:a[34],nullstateDescriptionType2:a[35],nullstateDescriptionText3:a[36],nullstateDescriptionType3:a[37],draftMessage:a[38],snippetHasEmoji:a[39],hasPersistentMenu:a[40],disableComposerInput:a[41],cannotUnsendReason:a[42],viewedPluginKey:a[43],viewedPluginContext:a[44],clientThreadKey:a[45],capabilities:a[46],shouldRoundThreadPicture:a[47],proactiveWarningDismissTime:a[48],isCustomThreadPicture:a[49],otidOfFirstMessage:a[50],normalizedSearchTerms:a[51],additionalThreadContext:a[52],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[55],unreadDisappearingMessageCount:a[56],lastMessageCtaId:a[58],lastMessageCtaType:a[59],threadDescription:a[60],unsendLimitMs:a[61],syncGroup:a[62],threadInvitesEnabled:a[63],threadInviteLink:a[64],threadInvitesEnabledV2:a[65],eventStartTimestampMs:a[66],eventEndTimestampMs:a[67],takedownState:a[68],memberCount:a[69],igFolder:a[70],inviterId:a[71],threadTags:a[72]})):b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[25],parentThreadKey:a[31],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],isAdminSnippet:a[16],snippetSenderContactId:a[17],snippetStringHash:a[20],snippetStringArgument1:a[21],snippetAttribution:a[22],snippetAttributionStringHash:a[23],cannotReplyReason:a[26],customEmoji:a[27],customEmojiImageUrl:a[28],outgoingBubbleColor:a[29],themeFbid:a[30],nullstateDescriptionText1:a[32],nullstateDescriptionType1:a[33],nullstateDescriptionText2:a[34],nullstateDescriptionType2:a[35],nullstateDescriptionText3:a[36],nullstateDescriptionType3:a[37],draftMessage:a[38],snippetHasEmoji:a[39],hasPersistentMenu:a[40],disableComposerInput:a[41],cannotUnsendReason:a[42],viewedPluginKey:a[43],viewedPluginContext:a[44],clientThreadKey:a[45],capabilities:a[46],shouldRoundThreadPicture:a[47],proactiveWarningDismissTime:a[48],isCustomThreadPicture:a[49],otidOfFirstMessage:a[50],normalizedSearchTerms:a[51],additionalThreadContext:a[52],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[55],unreadDisappearingMessageCount:a[56],lastMessageCtaId:a[58],lastMessageCtaType:a[59],threadDescription:a[60],unsendLimitMs:a[61],syncGroup:a[62],threadInvitesEnabled:a[63],threadInviteLink:a[64],threadInvitesEnabledV2:a[65],eventStartTimestampMs:a[66],eventEndTimestampMs:a[67],takedownState:a[68],memberCount:a[69],igFolder:a[70],inviterId:a[71],threadTags:a[72]}):b.resolve())})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSIssueMessagesRangeQuery",["LSGetCursor","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.islc(c.ftr(c.db.table(13).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.eq(b.minTimestampMs,f)||c.i64.le(b.minTimestampMs,a[1]))}),0,c.i64.to_float([0,1])).next().then(function(e,g){var h=e.done;e=e.value;return h?0:(g=e.item,d[3]=g.threadKey,d[4]=[0,0],d[1]=g.minTimestampMs,d[2]=g.minMessageId,c.i64.eq(a[2],[0,0])?d[0]=g.hasMoreBefore&&!g.isLoadingBefore:d[0]=g.hasMoreAfter&&!g.isLoadingAfter,d[0]?c.seq([function(b){return c.i64.eq(a[2],[0,0])?c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch([[[d[3],d[1],d[2]]]]),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})})},function(a){return a=[d[1],d[2]],d[5]=a[0],d[6]=a[1],a}]):c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch([[[d[3],d[1],d[2]]]]),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})})},function(a){return a=[g.maxTimestampMs,g.maxMessageId],d[5]=a[0],d[6]=a[1],a}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[7]=[0,1]:(e=b.item,d[14]=e.syncGroup,c.i64.neq(d[14],f)?d[13]=d[14]:d[13]=[0,1],d[7]=d[13])})},function(a){return c.sp(b("LSGetCursor"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(e){return d[10]=new c.Map(),d[10].set("thread_key",a[0]),d[10].set("direction",a[2]),d[10].set("reference_timestamp_ms",d[5]),d[10].set("reference_message_id",d[6]),d[10].set("sync_group",d[7]),d[10].set("cursor",d[9]),d[11]=d[10].get("thread_key"),d[10],d[12]=c.toJSON(d[10]),c.sp(b("LSIssueNewTask"),"mrq.{}".split("{}").join(c.i64.to_string(d[11])),[0,228],d[12],f,f,[0,0],[0,0],f,f,[0,0])}]):c.resolve())})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(e){return c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(25).put({id:d[0],lastAppliedMailboxSequenceId:a[0]})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExists",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return[[0,7],[0,8],[0,13],[0,10],[0,11],[0,16]].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(f=[!0,!0,!1],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,d[10]=e.authorityLevel,e.folderName==="other"?(f=[!0,!1,!1],d[7]=f[0],d[8]=f[1],d[9]=f[2],f):(c.i64.ge(d[10],a[4])||c.i64.eq(d[10],[0,20])&&(c.i64.eq(a[1],[0,2])||[[0,23],[0,21],[0,18]].some(function(b){return c.i64.eq(a[1],b)}))?(b=[!1,!1,!1],d[11]=b[0],d[12]=b[1],d[13]=b[2],b):(e=[!0,!1,!0],d[11]=e[0],d[12]=e[1],d[13]=e[2],e),f=[d[11],d[12],d[13]],d[7]=f[0],d[8]=f[1],d[9]=f[2],f),b=[d[7],d[8],d[9]],d[3]=b[0],d[4]=b[1],d[5]=b[2],b)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",!1),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",a[5]),d[3].set("metadata_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),[0,209],d[5],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(e){return d[1]?c.seq([function(b){return d[3]=[64,1083495711],d[4]=[0,0],d[5]=[0,0],c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:[0,0],threadType:a[1],folderName:a[2],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[-1,4294967295],ongoingCallState:[0,0],parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3],capabilities2:d[4],capabilities3:d[5],unsendLimitMs:[-1,4294967295]})},function(e){return c.i64.eq(a[1],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[6]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[6])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[6],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.fe(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExists",["LSVerifyThreadExists"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExists"),a[0],a[1]==null?[0,1]:a[1],"inbox",[0,0],[0,40],a[2])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("I64",["bs_caml","bs_caml_format","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])?a:void 0}function b(a){return a}g.mk=c("bs_caml_int64").mk;g.succ=c("bs_caml_int64").succ;g.min_int=c("bs_caml_int64").min_int;g.max_int=c("bs_caml_int64").max_int;g.one=c("bs_caml_int64").one;g.zero=c("bs_caml_int64").zero;g.neg_one=c("bs_caml_int64").neg_one;g.of_int32=c("bs_caml_int64").of_int32;g.to_int32=c("bs_caml_int64").to_int32;g.add=c("bs_caml_int64").add;g.neg=c("bs_caml_int64").neg;g.sub=c("bs_caml_int64").sub;g.lsl_=c("bs_caml_int64").lsl_;g.lsr_=c("bs_caml_int64").lsr_;g.asr_=c("bs_caml_int64").asr_;g.is_zero=c("bs_caml_int64").is_zero;g.mul=c("bs_caml_int64").mul;g.xor=c("bs_caml_int64").xor;g.or_=c("bs_caml_int64").or_;g.and_=c("bs_caml_int64").and_;g.equal_null=c("bs_caml_int64").equal_null;g.equal_undefined=c("bs_caml_int64").equal_undefined;g.equal_nullable=c("bs_caml_int64").equal_nullable;g.to_float=c("bs_caml_int64").to_float;g.of_float=c("bs_caml_int64").of_float;g.div=c("bs_caml_int64").div;g.mod_=c("bs_caml_int64").mod_;g.compare=c("bs_caml_int64").compare;g.float_of_bits=c("bs_caml_int64").float_of_bits;g.bits_of_float=c("bs_caml_int64").bits_of_float;g.div_mod=c("bs_caml_int64").div_mod;g.to_hex=c("bs_caml_int64").to_hex;g.discard_sign=c("bs_caml_int64").discard_sign;g.to_string=c("bs_caml_int64").to_string;g.minus_one=c("bs_int64").minus_one;g.pred=c("bs_int64").pred;g.abs=c("bs_int64").abs;g.lognot=c("bs_int64").lognot;g.of_string_opt=c("bs_int64").of_string_opt;g.equal=c("bs_int64").equal;g.of_string=c("bs_caml_format").caml_int64_of_string;g.gt=c("bs_caml").i64_gt;g.ge=c("bs_caml").i64_ge;g.lt=c("bs_caml").i64_lt;g.le=c("bs_caml").i64_le;g.cast=a;g.asI64=b}),98);
__d("LSIntEnum",["I64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("I64").of_float(a)}function b(a){return d("I64").to_float(a)}g.ofNumber=a;g.toNumber=b}),98);
__d("nativePromiseRegeneratorRuntime",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;b=typeof Symbol==="function"?Symbol:{};var h=b.iterator||"@@iterator";c=b.asyncIterator||"@@asyncIterator";var i=e.exports;function j(a,b,c,d){b=Object.create((b||q).prototype);d=new A(d||[]);b._invoke=w(a,c,d);return b}i.wrap=j;function k(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}var l="suspendedStart",m="suspendedYield",n="executing",o="completed",p={};function q(){}function r(){}function s(){}var t=s.prototype=q.prototype;r.prototype=t.constructor=s;s.constructor=r;r.displayName="GeneratorFunction";function a(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}v.prototype[c]=function(){return this};i.isGeneratorFunction=function(a){a=typeof a==="function"&&a.constructor;return a?a===r||(a.displayName||a.name)==="GeneratorFunction":!1};i.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,s):Object.assign(a,s);a.prototype=Object.create(t);return a};i.awrap=function(a){return new u(a)};function u(a){this.arg=a}function v(a){function b(b,e){var f=a[b](e);b=f.value;return b instanceof u?window.Promise.resolve(b.arg).then(c,d):window.Promise.resolve(b).then(function(a){f.value=a;return f})}typeof process==="object"&&process.domain&&(b=process.domain.bind(b));var c=b.bind(a,"next"),d=b.bind(a,"throw");b.bind(a,"return");var e;function f(a,c){var d=e?e.then(function(){return b(a,c)}):new window.Promise(function(d){d(b(a,c))});e=d["catch"](function(a){});return d}this._invoke=f}a(v.prototype);i.async=function(a,b,c,d){var e=new v(j(a,b,c,d));return i.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function w(a,b,c){var d=l;return function(e,f){if(d===n)throw new Error("Generator is already running");if(d===o){if(e==="throw")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e==="return"||e==="throw"&&g.iterator[e]===void 0){c.delegate=null;var h=g.iterator["return"];if(h){h=k(h,g.iterator,f);if(h.type==="throw"){e="throw";f=h.arg;continue}}if(e==="return")continue}h=k(g.iterator[e],g.iterator,f);if(h.type==="throw"){c.delegate=null;e="throw";f=h.arg;continue}e="next";f=void 0;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=m;return i}c.delegate=null}if(e==="next")d===m?c.sent=f:c.sent=void 0;else if(e==="throw"){if(d===l){d=o;throw f}c.dispatchException(f)&&(e="next",f=void 0)}else e==="return"&&c.abrupt("return",f);d=n;h=k(a,b,c);if(h.type==="normal"){d=c.done?o:m;var i={value:h.arg,done:c.done};if(h.arg===p)c.delegate&&e==="next"&&(f=void 0);else return i}else h.type==="throw"&&(d=o,e="throw",f=h.arg)}}}a(t);var x=!1;i.defineGeneratorMethods=function(){if(x)return;x=!0;t[h]=function(){return this};t.toString=function(){return"[object Generator]"}};i.defineGeneratorMethods();function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(y,this),this.reset(!0)}i.keys=function(a){var b=[];for(var c in a)b.push(c);b.reverse();return function c(){while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){if(a){var b=a[h];if(b)return b.call(a);if(typeof a.next==="function")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(g.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=void 0;b.done=!0;return b};return b.next=b}}return{next:C}}i.values=B;function C(){return{value:void 0,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=void 0;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(var a in this)a.charAt(0)==="t"&&g.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function c(c,d){f.type="throw";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc==="root")return c("end");if(e.tryLoc<=this.prev){var h=g.call(e,"catchLoc"),i=g.call(e,"finallyLoc");if(h&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(h){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&g.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return p},complete:function(a,b){if(a.type==="throw")throw a.arg;a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=a.arg,this.next="end"):a.type==="normal"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return p}}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type==="throw"){var e=d.arg;z(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return p}}}),null);
__d("BPlusTreeBase",["justknobx","unrecoverableViolation"],(function(aa,ba,a,ca,da,ea,b){"use strict";var c={gte:[!0,0],lt:[!0,1],gt:[!1,0],lte:[!1,1]};function* d(n){var o=(yield* n.readHeader());if(o==null||o.rootId==null||o.headId==null)return;var p=(yield* n.readExn(o.rootId)),q=[{node:p,id:o.rootId}];while(q.length>0){var r=q.shift(),s=r.id,t=r.node;if(!t.isLeaf)for(var u=t.children,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var x;if(v){if(w>=u.length)break;x=u[w++]}else{w=u.next();if(w.done)break;x=w.value}var y=x,z=(yield* n.read(y));z!=null&&q.push({node:z,id:y})}yield* n.remove(s)}yield* n.removeHeader()}function* e(n,o,p,q){var r=(yield* o.readExn(p)),s=[],t=r,u=p,v=-1;while(!t.isLeaf)s.push([t,u,v]),v=f(n,t.keys,q,c.gt),v===-1&&(v=t.keys.length),u=t.children[v],t=(yield* o.readExn(u));return[t,u,s,v]}function f(n,o,p,q){var r=0,s=o.length-1;while(r<=s){var t=r+s>>1;(q[0]?n(o[t],p)<0:n(o[t],p)<=0)?r=t+1:s=t-1}var u=[r,s][q[1]];return u===o.length?-1:u}function g(n,o,p){if(!o.length)return[0,0];var q=f(n,o,p,c.gte);if(q===-1)return[o.length,0];else if(n(o[q],p)===0)return[q,1];return[q,0]}function h(n,o,p){for(var q=arguments.length,r=new Array(q>3?q-3:0),s=3;s<q;s++)r[s-3]=arguments[s];return[].concat(n.slice(0,o),r,n.slice(o+p))}function* i(n){var o=(yield* n.readHeader());if(o==null){var p=(yield* n.writeNew({isLeaf:!0,children:[],keys:[]}));o={rootId:p,tailId:p,headId:p};yield* n.writeHeader(o)}return o}function* j(n,o,p){var q=(yield* e(n,o,(yield* i(o)).rootId,p)),r=q[0],s=f(n,r.keys,p,c.gte);if(s===-1||n(r.keys[s],p)!==0)throw a("unrecoverableViolation")("key not found: "+String(p),"messenger_web_product");return r.children[s]}function* k(n,o,p,q){var r=(yield* e(n,o,(yield* i(o)).rootId,p)),s=r[0],t=f(n,s.keys,p,c.gte);return t===-1||n(s.keys[t],p)!==0?q:s.children[t]}function* l(n,o,p){var q=(yield* e(n,o,(yield* i(o)).rootId,p)),r=q[0],s=f(n,r.keys,p,c.gte);return s!==-1&&n(r.keys[s],p)===0}function* m(n,o,p,q,r){var s=(yield* i(o)),t={},u=(yield* e(n,o,s.rootId,q)),v=u[0],w=u[1],x=u[2],y=g(n,v.keys,q),z=y[0],A=y[1],B,C,D,E;for(B=babelHelpers.extends({},v,{children:h(v.children,z,A,r),keys:A===1?v.keys:h(v.keys,z,A,q)}),C=w;B.keys.length>=p;B=D,C=E){var F=x.pop()||[{keys:[],children:[C],isLeaf:!1}];D=F[0];E=F[1];var G=Math.floor(B.keys.length/2),H=void 0,I=void 0;B.isLeaf?(H={isLeaf:!0,children:B.children.slice(G),keys:B.keys.slice(G),nextId:B.nextId,prevId:C},I=B.nextId=(yield* o.writeNew(H)),H.nextId?yield* o.write(H.nextId,babelHelpers.extends({},yield* o.readExn(H.nextId),{prevId:I})):t.tailId=I):(H={isLeaf:!1,children:B.children.slice(G+1),keys:B.keys.slice(G+1)},I=(yield* o.writeNew(H)));var J=g(n,D.keys,B.keys[G]),K=J[0];D=babelHelpers.extends({},D,{keys:h(D.keys,K,0,B.keys[G]),children:h(D.children,K+1,0,I)});yield* o.write(C,babelHelpers.extends({},B,{keys:B.keys.slice(0,G),children:B.children.slice(0,G+(B.isLeaf?0:1))}))}C==null?t.rootId=(yield* o.writeNew(B)):yield* o.write(C,B);Object.keys(t).length&&(yield* o.writeHeader(babelHelpers.extends({},s,t)))}function* fa(n,o,p,q){var r=(yield* i(o)),s={},t=Math.floor(p/2),u=(yield* e(n,o,r.rootId,q)),v=u[0],w=u[1],x=u[2],y=u[3],z=f(n,v.keys,q,c.gte);if(z===-1||n(v.keys[z],q)!==0)return!1;var A=babelHelpers.extends({},v,{keys:h(v.keys,z,1),children:h(v.children,z,1)}),B=w;yield* o.write(B,A);var C=y;for(var D,E,F;A.keys.length<t&&x.length;G=[D,E,F],A=G[0],B=G[1],C=G[2],G){var G,H=x.pop();D=H[0];E=H[1];F=H[2];var I=[[{nodeId:D.children[C-1]},{nodeId:B,node:A},C-1],[{nodeId:B,node:A},{nodeId:D.children[C+1]},C]].filter(function($){var ia=$[0],ja=$[1];return ia.nodeId!==void 0&&ja.nodeId!==void 0});for(var J=I,K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M,O=N[0],P=N[1],Q=N[2];O.node=O.node||(yield* o.readExn(O.nodeId));P.node=P.node||(yield* o.readExn(P.nodeId));if(O.node.keys.length+P.node.keys.length>=t*2){A.isLeaf?(P.node=babelHelpers.extends({},P.node,{children:[].concat(O.node.children,P.node.children),keys:[].concat(O.node.keys,P.node.keys)}),O.node=babelHelpers.extends({},O.node,{children:P.node.children.splice(0,t),keys:P.node.keys.splice(0,t)}),D=babelHelpers.extends({},D,{keys:h(D.keys,Q,1,P.node.keys[0])})):(P.node=babelHelpers.extends({},P.node,{children:[].concat(O.node.children,P.node.children),keys:[].concat(O.node.keys,[D.keys[Q]],P.node.keys)}),O.node=babelHelpers.extends({},O.node,{children:P.node.children.splice(0,t+1)}),D=babelHelpers.extends({},D,{keys:h(D.keys,Q,1,P.node.keys.splice(t,1)[0])}),O.node.keys=P.node.keys.splice(0,t));yield* o.write(O.nodeId,O.node);yield* o.write(P.nodeId,P.node);yield* o.write(E,D);Object.keys(s).length&&(yield* o.writeHeader(babelHelpers.extends({},r,s)));return!0}}for(var R=I,S=Array.isArray(R),T=0,R=S?R:R[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var U;if(S){if(T>=R.length)break;U=R[T++]}else{T=R.next();if(T.done)break;U=T.value}var V=U,W=V[0],X=V[1],Y=V[2];W.node=babelHelpers.extends({},W.node,{children:[].concat(W.node.children,X.node.children)});A.isLeaf?(W.node.keys=[].concat(W.node.keys,X.node.keys),X.node.nextId?yield* o.write(X.node.nextId,babelHelpers.extends({},yield* o.readExn(X.node.nextId),{prevId:W.nodeId})):s.tailId=W.nodeId,W.node.nextId=X.node.nextId):W.node.keys=[].concat(W.node.keys,[D.keys[Y]],X.node.keys);D=babelHelpers.extends({},D,{keys:h(D.keys,Y,1),children:h(D.children,Y+1,1)});a("justknobx")._("672")&&(yield* o.write(E,D));yield* o.write(W.nodeId,W.node);yield* o.remove(X.nodeId);break}}yield* o.write(B,A);var Z=(yield* o.readExn(r.rootId));if(!Z.keys.length&&Z.children.length){if(Z.isLeaf)throw a("unrecoverableViolation")("cannot be leaf","messenger_web_product");yield* o.remove(r.rootId);s.rootId=Z.children[0]}Object.keys(s).length&&(yield* o.writeHeader(babelHelpers.extends({},r,s)));return!0}function ga(n,o,p){var q=p===void 0?{}:p,r=q.dir,s=r===void 0?"asc":r,t=babelHelpers.objectWithoutPropertiesLoose(q,["dir"]);function u(){if(s==="asc"){if(Object.prototype.hasOwnProperty.call(t,"gt"))return t.gt;else if(Object.prototype.hasOwnProperty.call(t,"gte"))return t.gte}else if(Object.prototype.hasOwnProperty.call(t,"lt"))return t.lt;else if(Object.prototype.hasOwnProperty.call(t,"lte"))return t.lte}function v(x){if(s==="asc")return Object.prototype.hasOwnProperty.call(t,"gt")?f(n,x.keys,t.gt,c.gt):Object.prototype.hasOwnProperty.call(t,"gte")?f(n,x.keys,t.gte,c.gte):0;else return Object.prototype.hasOwnProperty.call(t,"lt")?f(n,x.keys,t.lt,c.lt):Object.prototype.hasOwnProperty.call(t,"lte")?f(n,x.keys,t.lte,c.lte):x.keys.length-1}if(Object.prototype.hasOwnProperty.call(t,"gt")&&Object.prototype.hasOwnProperty.call(t,"gte"))throw a("unrecoverableViolation")("cannot specify both greater than and greater than or equal","messenger_web_product");if(Object.prototype.hasOwnProperty.call(t,"lt")&&Object.prototype.hasOwnProperty.call(t,"lte"))throw a("unrecoverableViolation")("cannot specify both less than and less than or equal","messenger_web_product");var w;return{next:function*(x){var y,z,A,B;if(w==null){var C=(yield* i(o)),D=u();if(D!=null){var E=(yield* e(n,o,C.rootId,D));z=E[0];A=E[1]}else if(s==="asc"){var F=[yield* o.readExn(C.headId),C.headId];z=F[0];A=F[1]}else{var G=[yield* o.readExn(C.tailId),C.tailId];z=G[0];A=G[1]}y=v(z)}else{var H=w;y=H.i;B=H.key;A=H.nodeId;z=(yield* o.read(A));if(x!=null){if(n(x,B)===(s==="asc"?-1:1))throw a("unrecoverableViolation")("key must be ahead of current key","messenger_web_product");if(z==null||n(x,z.keys[0])<0||n(x,z.keys[z.keys.length-1])>0){var I=(yield* e(n,o,(yield* i(o)).rootId,x));z=I[0];A=I[1]}y=f(n,z.keys,x,c[s==="asc"?"gte":"lte"])}else{if(z==null||y<0||y>=z.keys.length||n(z.keys[y],B)!==0){if(z==null||!z.keys.length||n(B,z.keys[0])<0||n(B,z.keys[z.keys.length-1])>0){var J=(yield* e(n,o,(yield* i(o)).rootId,B));z=J[0];A=J[1]}y=f(n,z.keys,B,c[s==="asc"?"lte":"gte"])}y+=s==="asc"?1:-1}}if(y<0||y>=z.keys.length)if(s==="asc"){if(z.nextId===void 0)return{done:!0};A=z.nextId;z=(yield* o.readExn(A));y=0}else{if(z.prevId===void 0)return{done:!0};A=z.prevId;z=(yield* o.readExn(A));y=z.keys.length-1}B=z.keys[y];w={node:z,nodeId:A,key:B,i:y};if(y<0||y>=z.keys.length)return{done:!0};var K=s==="asc"?Object.prototype.hasOwnProperty.call(t,"lt")&&n(B,t.lt)>=0||Object.prototype.hasOwnProperty.call(t,"lte")&&n(B,t.lte)>0:Object.prototype.hasOwnProperty.call(t,"gt")&&n(B,t.gt)<=0||Object.prototype.hasOwnProperty.call(t,"gte")&&n(B,t.gte)<0;return K?{done:!0}:{done:!1,value:[z.keys[y],z.children[y]]}}}}function ha(n,o,p){o===void 0&&(o=32);return{get:function(q){return j(n,p,q)},getWithDefault:function(q,r){return k(n,p,q,r)},has:function(q){return l(n,p,q)},set:function(q,r){return m(n,p,o,q,r)},delete:function(q){return fa(n,p,o,q)},entries:function(q){return ga(n,p,q)},clear:function(){return d(p)}}}b.default=ha}),98);
__d("BPlusTree",["BPlusTreeBase","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var k={},l=void 0,m=0;return{read:function*(n){return k[n]},readExn:function*(n){if(Object.prototype.hasOwnProperty.call(k,n))return k[n];else throw c("unrecoverableViolation")("expected key","messenger_web_product")},readHeader:function*(){return l},remove:function*(n){delete k[n]},removeHeader:function*(){l=void 0},write:function*(n,o){k[n]=o},writeHeader:function*(n){l=n},writeNew:function*(n){k[m++]=n;return m-1}}}function i(k){var l=k.next();while(!l.done)l=k.next(l.value);return l.value}function j(k,l){l===void 0&&(l=16);var m=c("BPlusTreeBase")(k,l,h()),n;return n={clear:function(){return i(m.clear())},delete:function(o){return i(m.delete(o))},entries:function(o){function p(){var q,r=m.entries(o);return q={next:function(s){return i(r.next(s))}},q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=p,q}return p()},get:function(o){return i(m.get(o))},getWithDefault:function(o,p){return i(m.getWithDefault(o,p))},has:function(o){return i(m.has(o))},set:function(o,p){i(m.set(o,p));return n}}}g.default=j}),98);
__d("LSDbKeyComparer",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=[[]];function i(a,b){var d=a===h,e=b===h;if(d&&e)return 0;if(d)return 1;if(e)return-1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;else if(Array.isArray(a)){if(!Array.isArray(b))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");d=a[0];e=b[0];if(d<e)return-1;if(d>e)return 1;d=a[1];e=b[1];if(d<e)return-1;if(d>e)return 1}else if(typeof a==="string"){if(typeof b!=="string")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="number"){if(typeof b!=="number")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="boolean"){if(typeof b!=="boolean")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(!a&&b)return-1;if(a&&!b)return 1}else throw c("unrecoverableViolation")("Unexpected type","messenger_comet");return 0}function a(a,b){for(var a=a,b=b;;a=a.tl,b=b.tl){if(a===0&&b===0)return 0;if(a===0)return-1;if(b===0)return 1;var c=i(a.hd,b.hd);if(c!==0)return c}return 0}g.MAX_KEY=h;g.compareValue=i;g.compareKey=a}),98);
__d("PromiseOrValue",["isPromise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(c("isPromise")(a)&&c("isPromise")(b))return a.then(function(a){return b.then(function(b){return[a,b]})});if(c("isPromise")(a))return a.then(function(a){return[a,b]});return c("isPromise")(b)?b.then(function(b){return[a,b]}):[a,b]}function b(a,b){return c("isPromise")(a)?a.then(b):b(a)}function h(a,b){b=b;while(!0){var d=a(b);if(c("isPromise")(d))return d.then(function(b){return b.action==="break"?b.value:h(a,b.value)});if(d.action==="break")return d.value;b=d.value}throw c("unrecoverableViolation")("just for flow","messenger_web_product")}g.all2=a;g.map=b;g.loop=h}),98);
__d("ReQLBounds",["LSDbKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";function h(n,o){return n?{hd:n.hd,tl:h(n.tl,o)}:o}function i(n){return h(n,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})}function j(n,o,p){if(n!=null&&o!=null)return d("LSDbKeyComparer").compareKey(n[1],o[1])*p>0?n[0]:o[0];if(n!=null)return n[0];if(o!=null)return o[0]}function k(n,o){return j((n==null?void 0:n.gt)!=null?[{gt:n.gt},i(n.gt)]:(n==null?void 0:n.gte)!=null?[{gte:n.gte},n.gte]:void 0,(o==null?void 0:o.gt)!=null?[{gt:o.gt},i(o.gt)]:(o==null?void 0:o.gte)!=null?[{gte:o.gte},o.gte]:void 0,1)}function l(n,o){return j((n==null?void 0:n.lt)!=null?[{lt:n.lt},n.lt]:(n==null?void 0:n.lte)!=null?[{lte:n.lte},i(n.lte)]:void 0,(o==null?void 0:o.lt)!=null?[{lt:o.lt},o.lt]:(o==null?void 0:o.lte)!=null?[{lte:o.lte},i(o.lte)]:void 0,-1)}function m(n,o,p){n.forEach(function(q){var r=q[0],s=q[1],t=(r==null?void 0:r.gt)!=null?d("LSDbKeyComparer").compareKey(o,i(r.gt))>=0:(r==null?void 0:r.gte)!=null?d("LSDbKeyComparer").compareKey(o,r.gte)>0:!0,u=(r==null?void 0:r.lt)!=null?d("LSDbKeyComparer").compareKey(o,r.lt)<0:(r==null?void 0:r.lte)!=null?d("LSDbKeyComparer").compareKey(o,i(r.lte))<=0:!0;if(t&&u)return p(s)})}g.getLowerLimit=k;g.getUpperLimit=l;g.forEachMatchingBounds=m}),98);
__d("ReQLGlobalQueryContext",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){a=a.get(g);return a==null?[]:a}function b(a,b){a.set(g,b)}c={contents:void 0};f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=c}),66);
__d("ReQL",["BPlusTree","LSDbKeyComparer","PromiseOrValue","ReQLBounds","ReQLGlobalQueryContext","unrecoverableViolation"],(function(a,b,c,d,e,aa,f){"use strict";var g={bounds:l,filter:o,getKeyRange:p,map:r,take:v};function h(B,C){return B?{hd:B.hd,tl:h(B.tl,C)}:C}function i(B,C){var D=C,E=B;while(D){if(!E)throw c("unrecoverableViolation")("unexpected end of key","messenger_web_product");D=D.tl;E=E.tl}return E}function j(B,C){try{var D=d("ReQLGlobalQueryContext").globalQueryContext.contents,E=d("ReQLGlobalQueryContext").getDependencies(C);d("ReQLGlobalQueryContext").setDependencies(C,[]);d("ReQLGlobalQueryContext").globalQueryContext.contents=C;var F,G;try{F=B(),G=d("ReQLGlobalQueryContext").getDependencies(C)}finally{d("ReQLGlobalQueryContext").setDependencies(C,E),d("ReQLGlobalQueryContext").globalQueryContext.contents=D}return[F,G]}catch(H){if(H instanceof Promise)return H.then(function(){return j(B,C)});throw H}}function k(){for(var B=arguments.length,C=new Array(B),D=0;D<B;D++)C[D]=arguments[D];return C.reduceRight(function(E,F){return{hd:F,tl:E}},0)}function l(l){var B=this;function C(l,D){if(D==null)return l;var E=d("ReQLBounds").getLowerLimit(D,l),F=d("ReQLBounds").getUpperLimit(D,l);if(E!=null&&F!=null)return babelHelpers.extends({},E,F);if(E!=null)return E;if(F!=null)return F}return Object.setPrototypeOf({direction:B.direction,iterator:function(D,E){return B.iterator(D,C(l,E))},keyLength:B.keyLength,subscribe:function(D,E){return B.subscribe(D,C(l,E))}},g)}var m=Object.setPrototypeOf({direction:"asc",iterator:function(){return{next:function(){return{done:!0}}}},keyLength:0,subscribe:function(){return function(){}}},g);function n(){return m}function o(B){var C=this,D=new Map();return Object.setPrototypeOf({direction:C.direction,iterator:function(E,l){var F=C.iterator(E,l);return{next:function(G){return d("PromiseOrValue").loop(function(H){return d("PromiseOrValue").map(F.next(H),function(I){if(I.done)return{action:"break",value:I};var J=I.value,k=J[0],K=J[1];if(B(K)){d("ReQLBounds").forEachMatchingBounds(D,k,function(L){L.add(JSON.stringify(k))});return{action:"break",value:I}}d("ReQLBounds").forEachMatchingBounds(D,k,function(L){L.delete(JSON.stringify(k))});return{action:"continue",value:void 0}})},G)}}},keyLength:C.keyLength,subscribe:function(E,l){var F={},G=new Set();D.set(F,[l,G]);var H=C.subscribe(async function(k,I,J){var K=JSON.stringify(k);I.operation==="add"&&B(I.value)?(G.add(K),await E(k,I,J)):I.operation==="put"&&B(I.value)?G.has(K)?await E(k,I,J):(G.add(K),await E(k,{operation:"add",value:I.value},J)):I.operation==="put"&&G.has(K)?(G.delete(K),await E(k,{operation:"delete"},J)):I.operation==="delete"&&G.has(K)&&(G.delete(K),await E(k,I,J))},l);return function(){D.delete(F);return H()}}},g)}function p(){var B=this;for(var C=arguments.length,D=new Array(C),E=0;E<C;E++)D[E]=arguments[E];var k=D.reduceRight(function(I,J){return{hd:J,tl:I}},0);function F(I){return I.gt!=null?{gt:h(k,I.gt)}:{gte:h(k,I.gte)}}function G(I){return I.lt!=null?{lt:h(k,I.lt)}:{lte:h(k,I.lte)}}function H(I){return I==null?{gte:k,lte:k}:babelHelpers.extends({},I.gte!=null||I.gt!=null?F(I):{gte:k},I.lte!=null||I.lt!=null?G(I):{lte:k})}return Object.setPrototypeOf({direction:B.direction,iterator:function(I,J){var K=B.iterator(I,H(J));return{next:function(L){return d("PromiseOrValue").map(K.next(L==null?L:h(k,L)),function(M){return M.done?{done:!0}:{done:!1,value:[i(M.value[0],k),M.value[1]]}})}}},keyLength:B.keyLength-D.length,subscribe:function(I,J){return B.subscribe(function(K,L,M){return I(i(K,k),L,M)},H(J))}},g)}function q(B,C){if(B.direction!==C.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:B.direction,iterator:function(D,l){var E=B.iterator(D,l),F=C.iterator(D,l),G=F.next();function H(I){return d("PromiseOrValue").map(G,function(J){var K=J.done?!0:d("LSDbKeyComparer").compareKey(I,J.value[0])<=0,L=K?J:F.next(I);G=L;return L})}return{next:function(k){return d("PromiseOrValue").map(E.next(k),function(I){if(I.done)return{done:!0,value:void 0};var J=I.value,K=J[0];return d("PromiseOrValue").map(H(K),function(L){var M=I.value,K=M[0],N=M[1];if(L.done)return{done:!1,value:[K,[N,void 0]]};var O=L.value,P=O[0],Q=O[1],R=d("LSDbKeyComparer").compareKey(K,P);if(R>0)throw c("unrecoverableViolation")("Right iterable should always be equal to or ahead","messenger_web_product");else if(R<0)return{done:!1,value:[K,[N,void 0]]};else return{done:!1,value:[K,[N,Q]]}})})}}},keyLength:Math.max(B.keyLength,C.keyLength),subscribe:function(D,l){var E=!0,F=B.subscribe(async function(H,I,J){var K,L,M=await C.iterator(J,{gte:H,lte:H}).next();if(!E)return;await D(H,I.operation==="add"?{operation:"add",value:[I.value,(K=M.value)==null?void 0:K[1]]}:I.operation==="put"?{operation:"put",value:[I.value,(L=M.value)==null?void 0:L[1]]}:{operation:"delete"},J)},l),G=C.subscribe(async function(H,I,J){var K=await B.iterator(J,{gte:H,lte:H}).next();if(!E||K.done)return;await D(H,I.operation==="add"?{operation:"add",value:[K.value[1],I.value]}:I.operation==="put"?{operation:"put",value:[K.value[1],I.value]}:{operation:"delete"},J)},l);return function(){E=!1,F(),G()}}},g)}function r(B){var C=this,D=new Map();function E(H,I,k,J,K){var L=JSON.stringify(k),M=H.get(L);M==null&&(M=[],H.set(L,M));M.forEach(function(O){return O()});M.length=0;var N=M;K.forEach(function(C){N.push(C.subscribe(async function(O,P,Q){await F(H,I,k,J,Q),await I(k,{operation:"put",value:B(J)},Q)}))})}function F(H,I,k,J,K){return d("PromiseOrValue").map(j(function(){return B(J)},K),function(L){var M=L[0],N=L[1];E(H,I,k,J,N);return M})}function G(H,k){var I,J=JSON.stringify(k);if(!H.has(J))return;var K=(I=H.get(JSON.stringify(k)))!=null?I:[];K.forEach(function(L){return L()});K.length=0;H.delete(J)}return Object.setPrototypeOf({direction:C.direction,iterator:function(H,l){var I=C.iterator(H,l);return{next:function(k){return d("PromiseOrValue").map(I.next(k),function(J){if(J.done)return J;var K=J.value,k=K[0],L=K[1];return d("PromiseOrValue").map(d("PromiseOrValue").map(j(function(){return B(L)},H),function(M){var N=M[0],O=M[1];d("ReQLBounds").forEachMatchingBounds(D,k,function(P){var Q=P[0],R=P[1];return E(Q,R,k,L,O)});return N}),function(L){return{done:!1,value:[k,L]}})})}}},keyLength:C.keyLength,subscribe:function(H,l){var k={},I=new Map();D.set(k,[l,[I,H]]);var J=C.subscribe(async function(k,K,L){if(K.operation==="delete")G(I,k),await H(k,K,L);else if(K.operation==="add"){var M=K.value,N=await F(I,H,k,M,L);B(M);await H(k,{operation:"add",value:N},L)}else if(K.operation==="put"){var O=K.value,P=await F(I,H,k,O,L);B(O);await H(k,{operation:"put",value:P},L)}},l);return function(){I.forEach(function(D){D.forEach(function(K){return K()})}),D.delete(k),J()}}},g)}function s(B,C){var D=t(B,C);for(var E=arguments.length,F=new Array(E>2?E-2:0),G=2;G<E;G++)F[G-2]=arguments[G];return F.reduce(function(H,I){return t(H,I)},D)}function t(B,C){if(B.direction!==C.direction)throw c("unrecoverableViolation")("union requires iterables to be sorted in the same direction","messenger_web_product");var D=Math.max(B.keyLength,C.keyLength);function E(k,I){return I===0||k===0?0:{hd:k.hd,tl:E(k.tl,I-1)}}function F(I){return I.gt!=null?{gt:E(I.gt,D)}:{gte:E(I.gte,D)}}function G(I){return I.lt!=null?{lt:E(I.lt,D)}:{lte:E(I.lte,D)}}function H(I){return I==null?void 0:babelHelpers.extends({},I.gte!=null||I.gt!=null?F(I):{},I.lte!=null||I.lt!=null?G(I):{})}return Object.setPrototypeOf({direction:B.direction,iterator:function(I,l){var J=B.iterator(I,H(l)),K=C.iterator(I,H(l)),L=J.next(),M=K.next();return{next:function(N){N!==void 0&&(L=J.next(E(N,D)),M=K.next(E(N,D)));return d("PromiseOrValue").map(d("PromiseOrValue").all2(L,M),function(O){var P,Q,R=O[0],S=O[1];function T(Y,Z){if(Y.done)return{done:!0};var $={done:!1,value:[h(Y.value[0],{hd:Z,tl:0}),Y.value[1]]};Z?L=J.next():M=K.next();return $}if(R.done)return T(S,!1);if(S.done)return T(R,!0);var U=B.direction==="asc"?[R,S]:[S,R],V=U[0],W=U[1],X=d("LSDbKeyComparer").compareKey((P=V.value)==null?void 0:P[0],(Q=W.value)==null?void 0:Q[0]);if(X<0)return T(R,!0);else return T(S,!1)})}}},keyLength:D+1,subscribe:function(I,l){var J=B.subscribe(function(L,M,N){return I(h(L,{hd:!0,tl:0}),M,N)},l),K=C.subscribe(function(L,M,N){return I(h(L,{hd:!1,tl:0}),M,N)},l);return function(){J(),K()}}},g)}function u(B,C){if(B.direction!==C.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:B.direction,iterator:function(D,l){var E=B.iterator(D,l),F=C.iterator(D,l);function G(H){return d("PromiseOrValue").loop(function(I){var J=I[0],K=I[1];if(J.done||K.done)return{action:"break",value:{done:!0}};var L=J.value,M=L[0],N=L[1],O=K.value,P=O[0],Q=O[1],R=d("LSDbKeyComparer").compareKey(M,P);if(R>0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(J,F.next(M)),function(S){return{action:"continue",value:S}});else if(R<0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(E.next(P),K),function(S){return{action:"continue",value:S}});return{action:"break",value:{done:!1,value:[M,[N,Q]]}}},H)}return{next:function(k){return d("PromiseOrValue").map(d("PromiseOrValue").all2(E.next(k),F.next(k)),G)}}},keyLength:Math.max(B.keyLength,C.keyLength),subscribe:function(D,l){var E=!0;async function F(I,J,k,K,L){var M=await I.iterator(L,{gte:k,lte:k}).next();if(M.done||!E)return;var N=M.value[1],O=K.operation==="add"?{operation:"add",value:J(K.value,N)}:K.operation==="put"?{operation:"put",value:J(K.value,N)}:K;await D(k,O,L)}var G=B.subscribe(function(){for(var I=arguments.length,J=new Array(I),K=0;K<I;K++)J[K]=arguments[K];return F.apply(void 0,[C,function(L,M){return[L,M]}].concat(J))},l),H=C.subscribe(function(){for(var I=arguments.length,J=new Array(I),K=0;K<I;K++)J[K]=arguments[K];return F.apply(void 0,[B,function(L,M){return[M,L]}].concat(J))},l);return function(){E=!1,G(),H()}}},g)}function v(B){var C=this,D=new Map();return Object.setPrototypeOf({direction:C.direction,iterator:function(E,l){var F=C.iterator(E,l),G=0;return{next:function(k){if(G>=B)return{done:!0};else return d("PromiseOrValue").map(F.next(k),function(H){H.done||d("ReQLBounds").forEachMatchingBounds(D,H.value[0],function(I){var J=I[0],K=I[1];K.contents<=B&&(J.has(H.value[0])||(K.contents+=1,J.set(H.value[0],void 0)))});G+=1;return H})}}},keyLength:C.keyLength,subscribe:function(E,l){var F={},G=C.direction==="asc"?1:-1,H=c("BPlusTree")(function(K,L){return d("LSDbKeyComparer").compareKey(K,L)*-G}),I={contents:0};D.set(F,[l,[H,I]]);var J=C.subscribe(async function(k,K,L){var M,N=(M=H.entries().next().value)==null?void 0:M[0],O=N==null?!0:d("LSDbKeyComparer").compareKey(k,N)*G<=0;if(K.operation==="delete"&&O){I.contents>0&&(H.delete(k),await E(k,K,L));var P=await C.iterator(L,N==null?void 0:G===1?{gt:N}:{lt:N}).next();!P.done&&D.has(F)?(H.set(P.value[0],void 0),await E(P.value[0],{operation:"add",value:P.value[1]},L)):I.contents>0&&(I.contents-=1)}else K.operation==="add"&&I.contents<B?(I.contents+=1,H.set(k,void 0),await E(k,K,L)):K.operation==="add"&&O?(N!=null&&(H.delete(N),await E(N,{operation:"delete"},L)),H.set(k,void 0),await E(k,K,L)):K.operation==="put"&&O&&await E(k,K,L)},l);return function(){D.delete(F);return J()}}},g)}function w(B){return Object.setPrototypeOf({direction:"asc",iterator:function(C,l){return B.entries(C,"asc",l)},keyLength:B.keyLength,subscribe:B.subscribe},g)}function x(B){return Object.setPrototypeOf({direction:"desc",iterator:function(C,l){return B.entries(C,"desc",l)},keyLength:B.keyLength,subscribe:B.subscribe},g)}async function y(B){var C=[],D=B.iterator(new WeakMap()),E=await D.next();while(!E.done)C.push(E.value[1]),E=await D.next();return C}async function z(B){var C=B.iterator(new WeakMap()),D=await C.next();return D.done?void 0:D.value[1]}async function A(B){var C=B.iterator(new WeakMap()),D=await C.next();if(D.done)throw c("unrecoverableViolation")("expected result","messenger_web_product");return D.value[1]}f.prototype=g;f.key=k;f.empty=n;f.leftJoin=q;f.union=s;f.mergeJoin=u;f.fromTableAscending=w;f.fromTableDescending=x;f.toArrayAsync=y;f.firstAsync=z;f.firstExnAsync=A}),98);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(var d=e,b=Array.isArray(d),a=0,d=b?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(b){if(a>=d.length)break;g=d[a++]}else{a=d.next();if(a.done)break;g=a.value}g=g;if(typeof g!=="string")return null}}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!=="string")return null}return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string",tableName:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"?null:{data:e,indexName:a.indexName,tableName:a.tableName}}function b(a,b){if(a==null)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}function d(a){return{indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName}}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("MAWEBSwitch",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=!1}var b=a.prototype;b.set=function(a){this.$1=a;return this.$1};b.isEnabled=function(){return this.$1};return a}();b=new a();c=b;f["default"]=c}),66);
__d("MAWTTRC",["MAWEBSwitch","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=!1,j=new Set(),k=new Set(["offline_queue_end","maw_init_end","ls_init_end"]);function a(a){if(!i||!h)return;i=!0;c("QPLUserFlow").endFailure(c("qpl")._(1056839232,"112"),a)}function b(a){if(i||j.has(a))return;h||(h=!0,c("QPLUserFlow").startFromNavStart(c("qpl")._(1056839232,"112")),c("QPLUserFlow").addAnnotations(c("qpl")._(1056839232,"112"),{bool:{isEBEnabled:c("MAWEBSwitch").isEnabled()}}));j.add(a);k["delete"](a);c("QPLUserFlow").addPoint(c("qpl")._(1056839232,"112"),a);k.size===0&&(i=!0,c("QPLUserFlow").endSuccess(c("qpl")._(1056839232,"112")))}g.fail=a;g.markEvent=b}),98);
__d("MAWTTRC.bs",["MAWTTRC"],(function(a,b,c,d,e,f){"use strict";function a(a){b("MAWTTRC").fail(a)}function c(a){b("MAWTTRC").markEvent(a)}f.fail=a;f.markEvent=c}),null);
__d("LSDict",["nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a.tag="ls-array";return a}a=function(){function a(a){this.size=0;var b=new Map(Array.from(a||[]).map(function(a){var b=a[0];a=a[1];return[JSON.stringify(b),a]}));this.$1=b;Object.defineProperties(this,{size:{get:function(){return b.size}}})}var b=a.prototype;b.get=function(a){return this.$1.get(JSON.stringify(a))};b.set=function(a,b){this.$1.set(JSON.stringify(a),b);return this};b["delete"]=function(a){return this.$1["delete"](JSON.stringify(a))};b.clear=function(){return this.$1.clear()};b.forEach=function(a){var b=this;this.$1.forEach(function(c,d){return a(c,JSON.parse(d),b)})};b.$2=function(){return this.$1.size};b.has=function(a){return this.$1.has(JSON.stringify(a))};b.entries=c("nativePromiseRegeneratorRuntime").mark(function a(){var b,d,e,f,g,h,i;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:b=this.$1.entries(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){a.next=7;break}if(!(e>=b.length)){a.next=4;break}return a.abrupt("break",18);case 4:f=b[e++];a.next=11;break;case 7:e=b.next();if(!e.done){a.next=10;break}return a.abrupt("break",18);case 10:f=e.value;case 11:g=f;h=g[0];i=g[1];a.next=16;return[JSON.parse(h),i];case 16:a.next=1;break;case 18:case"end":return a.stop()}},a,this)});b.keys=function(){return h(Array.from(this.$1.keys()).map(function(a){return JSON.parse(a)}))};b.values=function(){return this.$1.values()};a.fromObject=function(b){return new a(Object.entries(b))};a.shapeToRecord=function(a){return Array.from(a.entries()).reduce(function(a,b){var d=b[0];b=b[1];if(typeof d!=="string")throw c("unrecoverableViolation")("Cannot convert dicts with mixed keys to records","messenger_web_product");return babelHelpers["extends"]({},a,(a={},a[d]=b,a))},{})};return a}();g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSDbKeyComparer","LSDict","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(x){var y=[];while(x!==0)y.push(x.hd),x=x.tl;return y}function i(x){return x.reduceRight(function(y,z){return{hd:z,tl:y}},0)}function j(x,y,z){z===void 0&&(z="asc");var A=x.entries(new WeakMap(),z);function B(){var C;return C={},C[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=B,C.next=async function(){var D=await A.next();outer:while(!D.done){var E=async function(F){var H=y[F]||{},I=H.end,J=H.start,K=h(D.value[0]),L=K.slice(0,F);if(J){var M=d("LSDbKeyComparer").compareValue(K[F],J[0]);if(M*(z==="asc"?1:-1)<J[1]){if(F===K.length-1&&M===0)D=await A.next();else{var N=[].concat(L,[J[0]],J[1]&&z==="asc"||!J[1]&&z==="desc"?[d("LSDbKeyComparer").MAX_KEY]:[]);D=await A.next(i(N))}if(D.done)return{v:{done:!0}};K=h(D.value[0]);if(!L.every(function(O,F){return d("LSDbKeyComparer").compareValue(O,K[F])===0}))return"continue|outer"}}if(I&&d("LSDbKeyComparer").compareValue(I[0],K[F])*(z==="asc"?1:-1)<I[1]){D=await A.next(i([].concat(K.slice(0,F),z==="asc"?[d("LSDbKeyComparer").MAX_KEY]:[])));return"continue|outer"}};for(var F=0;F<y.length;F++){var G=await E(F);switch(G){case"continue|outer":continue outer;default:if(typeof G==="object")return G.v}}break}return D},C}return B()}function k(x,y){var z;return z={},z[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=k.bind(null,x,y),z.next=async function(){var A=await x.next();while(!A.done&&!await y(A.value.item))A=await x.next();return A},z}function l(x,y,z){var A,B=0;return A={},A[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=l.bind(null,x,y,z),A.next=async function(){while(B<y){var C=await x.next(),D=C.done;if(D){c("FBLogger")("messenger_web_product").info("not enough iterable values to slice from %d",y);return{done:!0}}B++}if(B<z){B++;return x.next()}return{done:!0}},A}async function m(x,y){var z=await x.next(),A=[];while(!z.done)A.push(z.value),z=await x.next();for(var B=0;B<A.length;B++){var C=A[B];await y(C)}}async function n(x){var y=[],z=await x.next();while(!z.done)y.push(z.value),z=await x.next();return y}function o(x,y,z){z===void 0&&(z=[]);var A={ASC:1,DESC:-1},B=function(D,E){var F=D.item,G=E.item;for(var H=0;H<y.length;H++){var I=y[H],J=I[0],K=F[J],L=G[J],M;K===void 0&&L===void 0?M=0:K===void 0&&L!==void 0?M=-1:K!==void 0&&L===void 0?M=1:M=d("LSDbKeyComparer").compareValue(K,L);if(M===0)continue;return M*A[y[H][1]]}return 0},C=function(){var D=babelHelpers.wrapAsyncGenerator(function*(){var E=(yield babelHelpers.awaitAsyncGenerator(x.next())),F,G=[];while(!E.done){var H=0;for(var I=z.length-1;I>=0;I--)H={hd:E.value.item[z[I]],tl:H};if(F!==void 0&&d("LSDbKeyComparer").compareKey(F,H)!==0){for(var J=G.sort(B),K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M;yield N}G=[]}E.done||G.push(E.value);F=H;E=(yield babelHelpers.awaitAsyncGenerator(x.next()))}if(G.length)for(var O=G.sort(B),P=Array.isArray(O),Q=0,O=P?O:O[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var R;if(P){if(Q>=O.length)break;R=O[Q++]}else{Q=O.next();if(Q.done)break;R=Q.value}var S=R;yield S}});return function(){return D.apply(this,arguments)}}();return C()}async function p(x){var y=0,z=await x.next();while(!z.done)y++,z=await x.next();return c("bs_caml_int64").of_int32(y)}function q(x,y){return{forEach:async function(z){var A=await n(x),B=A.reduce(function(K,L){var I=L.item[y],J=(K.get(I)||0)+1;return K.set(I,J)},new(c("LSDict"))());for(var C=B.entries(),D=Array.isArray(C),E=0,C=D?C:C[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var F,G;if(D){if(E>=C.length)break;G=C[E++]}else{E=C.next();if(E.done)break;G=E.value}var H=G,I=H[0],J=H[1];await z((F={},F[y]=I,F.group_count=c("bs_caml_int64").of_int32(J),F))}}}}function r(x,y,z){return{delete:function(){return z.delete(x)},item:y,update:function(A){return z.upsert(x,babelHelpers.extends({},y,A))}}}function s(x,y){return t.apply(this,arguments)}function t(){t=babelHelpers.wrapAsyncGenerator(function*(x,y){var z=(yield babelHelpers.awaitAsyncGenerator(x.next()));while(!z.done)yield z.value,z=(yield babelHelpers.awaitAsyncGenerator(x.next()));z=(yield babelHelpers.awaitAsyncGenerator(y.next()));while(!z.done)yield z.value,z=(yield babelHelpers.awaitAsyncGenerator(y.next()))});return t.apply(this,arguments)}function u(x,y,z){return v.apply(this,arguments)}function v(){v=babelHelpers.wrapAsyncGenerator(function*(x,y,z){var A=(yield babelHelpers.awaitAsyncGenerator(x.next())),B=(yield babelHelpers.awaitAsyncGenerator(y.next()));while(!A.done&&!B.done){var C=d("LSDbKeyComparer").compareKey(A.value[0],B.value[0]);C===0?(yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next())),B=(yield babelHelpers.awaitAsyncGenerator(y.next()))):C*(z==="asc"?1:-1)<0?(yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next()))):(yield B.value,B=(yield babelHelpers.awaitAsyncGenerator(y.next())))}while(!A.done)yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next()));while(!B.done)yield B.value,B=(yield babelHelpers.awaitAsyncGenerator(y.next()))});return v.apply(this,arguments)}function w(x,y,z,A,B,C){var D=new Set(),E=x.length>1,F=x.length===1&&x[0][1]===void 0,G=x.map(function(I){var J=I[0],K=I[1];return J.map(function(L){A.key_lookup===!0&&L.length!==0;A.table_scan===!0&&L.length===0;var M=L.map(function(P){return C(P,y)}),N=M.length===(K===void 0?z.primaryKeyIds:z.indexes[K]).length&&M.every(function(P){var Q=P.start,R=P.end;return Q&&R&&Q[0]===R[0]&&Q[1]===0&&R[1]===0});if(N){var O=function O(){var P,Q=!1;return P={},P[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=O,P.next=async function(){if(Q)return{done:!0};Q=!0;var R=i(M.map(function(T){var U=T.start;return U[0]})),S=await (K===void 0?B:B.index(K)).get(R);return!S?{done:!0}:{value:[R,S],done:!1}},P};return O()}return j(K===void 0?B:B.index(K),M,y)})}).flat().reduce(function(I,J){return x.length>1?s(I,J):u(I,J,y)});function H(){var I;return I={},I[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=H,I.next=async function(){var J,K,L,M=await G.next();while(!M.done){var N=M.value;K=N[0];L=N[1];J=F?K:z.primaryKeyIds.reduceRight(function(P,Q){return{hd:L[Q],tl:P}},0);if(E){var O=JSON.stringify(J);if(D.has(O)){M=await G.next();continue}D.add(O)}break}return M.done||J===void 0||L===void 0?{done:!0}:{done:!1,value:r(J,L,B)}},I}return H()}g.filter=k;g.slice=l;g.forEach=m;g.toArray=n;g.sortBy=o;g.count=p;g.groupBy=q;g.fetch=w}),98);
__d("LSJson",["LSDict","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=512;function i(a,b,e){b===void 0&&(b=0);e===void 0&&(e="");if(b>h)throw c("unrecoverableViolation")("recursion limit exceeded","messenger_comet");if(typeof a==="string"||typeof a==="number")return JSON.stringify(a);else if(typeof a==="boolean")return a?"1":"0";else if(a===void 0)return"null";else if(typeof a==="object")if(Array.isArray(a))return a.tag==="ls-array"?"["+a.map(function(a,c){return i(a,b+1,e+"/"+c.toString())}).join(",")+"]":d("bs_caml_int64").to_string(a);else if(a instanceof c("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var d=a[0];a=a[1];if(typeof d==="string")return JSON.stringify(d)+":"+i(a,b+1,e+"/"+d);else throw c("unrecoverableViolation")("key must be a string","messenger_comet")}).join(",")+"}";throw c("unrecoverableViolation")("type not supported: "+(a===null?"null":typeof a)+", path: "+e,"messenger_comet")}g.stringify=i}),98);
__d("LSLogHistory",["performance"],(function(a,b,c,d,e,f,g){"use strict";var h=[];function a(){return h}function b(){h=[]}function d(a,b){var d;c("performance").timing!=null?d=Math.round(c("performance").timing.navigationStart+c("performance").now()):d=Date.now();h.push([d.toString(),b,"lightspeed_log","lightspeed_log_event",a].join(" | "))}g.getEntries=a;g.clearEntries=b;g.log=d}),98);
__d("LS",["FBLogger","I64","LSDbKeyComparer","LSDict","LSIterationHelpers","LSJson","LSLogHistory","ODS","base64-js","bs_caml","bs_caml_format","bs_caml_int64","cr:3109","emptyFunction","gkx","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var z=babelHelpers.taggedTemplateLiteralLoose(["2"]);h=function(){return z};return z}function i(){var z=babelHelpers.taggedTemplateLiteralLoose(["0"]);i=function(){return z};return z}function j(){var z=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return z};return z}function k(){var z=babelHelpers.taggedTemplateLiteralLoose(["2"]);k=function(){return z};return z}var l="LS_WEB";function m(z){return z.name.match(/secure_|inbox(?!_)/i)}var n=babelHelpers.extends({},c("bs_caml_int64"),{eq:function(z,A){return z==null&&A==null||z!=null&&A!=null&&c("bs_caml").i64_eq(z,A)},neq:function(z,A){return z==null&&A!=null||z!=null&&A==null||z!=null&&A!=null&&c("bs_caml").i64_neq(z,A)},lt:c("bs_caml").i64_lt,gt:c("bs_caml").i64_gt,le:c("bs_caml").i64_le,ge:c("bs_caml").i64_ge,min:c("bs_caml").i64_min,max:c("bs_caml").i64_max,to_int32:function(q){return q==null?q:c("bs_caml_int64").to_int32(q)},to_string:function(q){return q==null?q:c("bs_caml_int64").to_string(q)},from_string:function(q){try{return c("bs_caml_format").caml_int64_of_string(q)}catch(z){throw c("unrecoverableViolation")('Unable to cast "'+q+'" to int64',"messenger_comet")}},random:function(){var z=a.crypto||a.msCrypto,A=Array.from(z.getRandomValues(new Uint32Array(2)));A[0]>>>=1;return A}});function o(z){return c("base64-js").toByteArray(z).buffer}var p={to_string:function(z){if(z==null)return void 0;var A=new TextDecoder();return A.decode(z)},of_string:function(z){if(z==null)return void 0;var A=new TextEncoder();return A.encode(z).buffer},eq:function(z,A){if(z==null&&A==null)return!0;if(z==null||A==null)return!1;var B=new Uint8Array(z),C=new Uint8Array(A);if(B.length!==C.length)return!1;for(var D=0;D<B.length;D++)if(B[D]!==C[D])return!1;return!0},neq:function(z,A){return!p.eq(z,A)},compareTo:function(z,A){var B=new Uint8Array(z),C=new Uint8Array(A),D=Math.min(B.length,C.length);for(var E=0;E<D;E++){var F=B[E]-C[E];if(F!==0)return F}return B.length===C.length?0:B.length-C.length},le:function(z,A){return p.compareTo(z,A)<=0},lt:function(z,A){return p.compareTo(z,A)<0},ge:function(z,A){return p.compareTo(z,A)>=0},gt:function(z,A){return p.compareTo(z,A)>0}};function q(z){if(z.length!==1)throw c("unrecoverableViolation")("only literal strings supported","messenger_web_product");var A=z[0],B=parseInt(A.substr(-8),16),C=parseInt(A.substr(0,A.length-8),16);return d("I64").asI64([C>>>1^-(B&1),((B>>>1)+(C&1)*2147483648^-(B&1))>>>0])}function r(z,A){if(typeof z==="object"&&!Array.isArray(z)){var B,C;if(A==="asc"){Object.prototype.hasOwnProperty.call(z,"gt")&&(B=[z.gt,1]);if(Object.prototype.hasOwnProperty.call(z,"gte")){if(B!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");B=[z.gte,0]}Object.prototype.hasOwnProperty.call(z,"lt")&&(C=[z.lt,1]);if(Object.prototype.hasOwnProperty.call(z,"lte")){if(C!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");C=[z.lte,0]}}else{Object.prototype.hasOwnProperty.call(z,"lt")&&(B=[z.lt,1]);if(Object.prototype.hasOwnProperty.call(z,"lte")){if(B!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");B=[z.lte,0]}Object.prototype.hasOwnProperty.call(z,"gt")&&(C=[z.gt,1]);if(Object.prototype.hasOwnProperty.call(z,"gte")){if(C!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");C=[z.gte,0]}}return{start:B,end:C}}return{start:[z,0],end:[z,0]}}function s(z,A,B){var C=z.table(A.name);return{add:function(D){return C.add(D)},fetch:function(){for(var D=arguments.length,E=new Array(D),F=0;F<D;F++)E[F]=arguments[F];return d("LSIterationHelpers").fetch(E.length===0?[[[[]],void 0]]:E,"asc",A,B,C,r)},fetchDesc:function(){for(var D=arguments.length,E=new Array(D),F=0;F<D;F++)E[F]=arguments[F];return d("LSIterationHelpers").fetch(E.length===0?[[[[]],void 0]]:E,"desc",A,B,C,r)},put:function(D){return C.deleteThenInsert(D)},peekNextAutoIncrementId:function(){return C.peekNextAutoIncrementId()}}}function t(z,A,B,C){return{table:function(D){var E=B.tableIds[D];if(A===0&&m(E))throw c("unrecoverableViolation")("cannot access secure table from dynamic mode","messenger_web_product");return s(z,E,C)}}}function u(z){var A="unknown_sproc",B=z.displayName,C=/\[from (.*)\]/,D=C.exec(B);D!=null&&(A=D[1]);return A}var v=function(){var z=0,A={},B={};function C(J){var K,L=(K=B[J])!=null?K:0;B[J]=L+1}function D(J){if(J in A)return A[J];A[J]=z;z++;return A[J]}function E(J){var K=J.shouldLog,L=J.sprocName;C(L);if(!K)return;var M=D(L);b("cr:3109")==null?void 0:b("cr:3109").markerStart(c("qpl")._(25302991,"143"),M);b("cr:3109")==null?void 0:b("cr:3109").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:L}},{instanceKey:M})}function F(J,K){var L=J.shouldLog,M=J.sprocName;if(!L)return;var N=D(M),O=K==="success"?2:3;b("cr:3109")==null?void 0:b("cr:3109").markerEnd(c("qpl")._(25302991,"143"),O,N)}function G(J){F(J,"success")}function H(J){F(J,"failure")}function I(J){return!1}return{call:E,success:G,failure:H,shouldLogSproc:I}}();function w(z,A,B){var C=c("bs_caml_int64").to_string(A),D=function(E){return!B?"":B[E]||""};return z(C,D).toString()}function x(z,A,B){var C=c("bs_caml_int64").to_string(A),D=function(E){return!B?"":B[E]||""};return z(C,D).toString()}function y(z,A,B,C,D,E,F,G){F===void 0&&(F={});G===void 0&&(G=void 0);var H=t(E,z,A,F),I=[];return{Map:c("LSDict"),constructor:{n:q},createArray:function(){return Object.defineProperty([],"tag",{value:"ls-array"})},createArrayWithElements:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return Object.defineProperty(K,"tag",{value:"ls-array"})},db:H,i64:n,islc:d("LSIterationHelpers").slice,ct:d("LSIterationHelpers").count,blob:o,blobs:p,fe:d("LSIterationHelpers").forEach,ftr:d("LSIterationHelpers").filter,gb:d("LSIterationHelpers").groupBy,logger:function(J){if(G)return{mustfix:G,warn:G,info:G,debug:G};var K=c("FBLogger")("messenger_web_product");if(J.startsWith("epoch mismatch")||J.startsWith("cursor mismatch")){var L=function(M){d("LSLogHistory").log(M,"error");var N=M!=null?M.replace(/[\s,]+/g,"_"):"epoch_or_cursor_mismatch";d("ODS").bumpEntityKey(3185,"lsplatform",N)};return{mustfix:L,warn:L,info:function(M){return d("LSLogHistory").log(M,"log")},debug:function(M){return d("LSLogHistory").log(M,"debug")}}}else{c("gkx")("7465")||(K.info=c("emptyFunction"));return K}},like:function(J,K){var L=K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(L).test(J)},loopAsync:function(J,K){function L(M){var N;return n.lt(M,J)?K(M).then(function(){return L(n.add(M,q(k())))}):((N=window.Promise)!=null?N:Promise).resolve()}return L(q(j()))},loopSync:function(J,K){for(var L=q(i());n.lt(L,J);L=n.add(L,q(h())))K(L)},merge:function(){function J(P,Q){return d("LSDbKeyComparer").compareValue(P,Q)>0?P:Q}function K(P,Q){return d("LSDbKeyComparer").compareValue([P[0],-P[1]],[Q[0],-Q[1]])<0?P:Q}for(var L=arguments.length,M=new Array(L),N=0;N<L;N++)M[N]=arguments[N];var O=M.reduce(function(P,Q){var R=r(Q,"asc");return{start:P.start&&R.start?J(R.start,P.start):R.start||P.start,end:P.end&&R.end?K(R.end,P.end):R.end||P.end}},{});return babelHelpers.extends({},O.start?O.start[1]?{gt:O.start[0]}:{gte:O.start[0]}:null,O.end?O.end[1]?{lt:O.end[0]}:{lte:O.end[0]}:null)},n:q,nop:async function(J){var K;if(typeof J==="string"){K=B[J+".bs"];if(K==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native op with id: "+J,"messenger_web_product");K.load&&(K=await K.load());K=K}else K=J;try{for(var L=arguments.length,M=new Array(L>1?L-1:0),N=1;N<L;N++)M[N-1]=arguments[N];return K.apply(void 0,[E,z].concat(M))}catch(O){c("FBLogger")("messenger_web_product").catching(O).addMetadata(l,"NATIVE_OP_ID",J.toString()).warn("Native operation %s failed",J.toString());throw O}},notnull:function(J){if(J===null)throw c("unrecoverableViolation")("value should not be null","messenger_web_product");return J},ntop:async function(J,K){var L;if(typeof K==="string"){L=B[K.toString()];if(L==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native type op with type: "+J+" and id: "+K,"messenger_web_product");L.load&&(L=await L.load());L=L.call}else L=K.call;for(var M=arguments.length,N=new Array(M>2?M-2:0),O=2;O<M;O++)N[O-2]=arguments[O];return L.apply(void 0,[E,z].concat(N))},print:function(J){},resolve:function(J){var K;return((K=window.Promise)!=null?K:Promise).resolve(J)},rm:n.of_int32(z),seq:function(J){return J.slice(1).reduce(function(K,L){return K.then(L)},J[0]())},slc:function(J,K){return Array.prototype.slice.call(J,K)},sp:async function(J){var K;if(typeof J==="string"){K=B[J];if(K==null)throw c("unrecoverableViolation")("Attempted to call unimplemented stored procedure with id: "+J,"messenger_web_product");K.load&&(K=await K.load())}else K=J;var L=this;switch(z){case 0:L=y(2,A,B,C,D,E,F,G);break;case 2:L=y(1,A,B,C,D,E,F,G);break}var M=u(K),N=v.shouldLogSproc(M),O={sprocName:M,shouldLog:N};I.push(J);try{v.call(O);for(var P=arguments.length,Q=new Array(P>1?P-1:0),R=1;R<P;R++)Q[R-1]=arguments[R];var S=await K.apply(void 0,Q.concat([L]));v.success(O);return S}catch(T){c("FBLogger")("messenger_web_product").catching(T).addMetadata(l,"SPROC_STACK",I.join("\n")).warn("Sproc %s failed",J);v.failure(O);throw T}finally{I.pop()}},throw:function(J){throw c("unrecoverableViolation")(J,"messenger_comet")},ta:d("LSIterationHelpers").toArray,toJSON:function(J){return d("LSJson").stringify(J)},sb:d("LSIterationHelpers").sortBy,localize:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return w.apply(void 0,[C].concat(K))},localizeAsync:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return Promise.resolve(w.apply(void 0,[C].concat(K)))},localizeV2:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return x.apply(void 0,[D].concat(K))},localizeV2Async:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return Promise.resolve(x.apply(void 0,[D].concat(K)))}}}y.n=q;g.default=y}),98);
__d("LSDynamicDependencies",["Bootloader","LSDeleteThenInsertContact","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSRemoveTask","LSSetRegionHint","LSTaskExists","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertSequenceId","LSVerifyContactRowExists","Promise","RelayFBModuleLoader","SiteData","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={deleteThenInsertContact:c("LSDeleteThenInsertContact"),deleteThenInsertThread:c("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:c("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:c("LSExecuteFirstBlockForSyncTransaction"),removeTask:c("LSRemoveTask"),setRegionHint:c("LSSetRegionHint"),taskExists:c("LSTaskExists"),updateLastSyncCompletedTimestampMsToNow:c("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertSequenceId:c("LSUpsertSequenceId"),verifyContactRowExists:c("LSVerifyContactRowExists")};function a(a){var c=[];for(var a=a,e=Array.isArray(a),g=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(e){if(g>=a.length)break;i=a[g++]}else{g=a.next();if(g.done)break;i=g.value}i=i;var j=i.name;j!=null&&!(j in h)&&c.push(i)}var k=b("Promise").all(c.map(function(e){var c,a;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=e.name;if(!(c==null)){f.next=3;break}return f.abrupt("return");case 3:h[c]={load:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(k);case 2:return a.abrupt("return",h[c]);case 3:case"end":return a.stop()}},null,this)}};f.next=6;return b("regeneratorRuntime").awrap(d("RelayFBModuleLoader").load(e.value));case 6:a=f.sent,h[c]=a;case 8:case"end":return f.stop()}},null,this)})).then(function(a){});return k}function i(a,b,c){a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function j(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a,d,e){var f=new Map();for(var a=(a=a)!=null?a:[],g=Array.isArray(a),k=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(g){if(k>=a.length)break;l=a[k++]}else{k=a.next();if(k.done)break;l=k.value}l=l;l in h||f.set(l,"LS"+j(l))}for(var k=(l=d)!=null?l:[],g=Array.isArray(k),a=0,k=g?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(a>=k.length)break;d=k[a++]}else{a=k.next();if(a.done)break;d=a.value}l=d;d=l+".bs";d in h||f.set(d,"LS"+j(l)+".nop")}for(var l=(d=e)!=null?d:[],a=Array.isArray(l),g=0,l=a?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(a){if(g>=l.length)break;k=l[g++]}else{g=l.next();if(g.done)break;k=g.value}e=k;e in h||f.set(e,"LS"+j(e))}if(f.size===0)return b("Promise").resolve();var m=new(b("Promise"))(function(a){var d={},e=[],g=function(){if(k){if(l>=j.length)return"break";n=j[l++]}else{l=j.next();if(l.done)return"break";n=l.value}var a=n,c=a[0];a=a[1];d[a]={be:1,r:[]};e.push(a);h[c]={load:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(m);case 2:return a.abrupt("return",h[c]);case 3:case"end":return a.stop()}},null,this)}}};for(var j=f,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n,o=g();if(o==="break")break}c("Bootloader").handlePayload({compMap:d,consistency:{rev:c("SiteData").client_revision}});i(c("Bootloader"),e,function(b){Array.from(f.entries()).forEach(function(a,c){var d=a[0];a[1];h[d]=b[c]}),a()})});return m}g.cachedModules=h;g.downloadRelayDependencies=a;g.downloadBootloaderDependencies=e}),98);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],messages:[{indexName:"fk_messages",tableName:"attachments"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"}]};b=a;f["default"]=b}),66);
__d("LSMetadata",["LSDbForeignKeys","LSTableSchemas","ReStoreDefaultValuesMetadata","ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},e={},f=-1;for(var g=0;g<a.length;g++){var h=a[g];for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k={autoIncrement:(k=l.auto_increment)!=null?k:!1,cascadeUpdates:(k=c("LSDbForeignKeys")[l.name])!=null?k:[],id:parseInt(l.id,10),indexes:(k=l.indexes)!=null?k:{},name:l.name,primaryKeyIds:l.primary_key};b[k.id]=k;e[k.name]=k;k.id>f&&(f=k.id)}}l={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};b[l.id]=l;e[l.name]=l;k={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]};b[k.id]=k;e[k.name]=k;return{tableIds:b,tableNames:e}}function a(a){a=h(a);var b=a.tableIds;a=a.tableNames;return{tableIds:b,tableNames:a}}b=a(c("LSTableSchemas"));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);
__d("LS.bs",["LS","LSDynamicDependencies","LSLocalizedStrings","LSLocalizedStringsV2","LSMetadata"],(function(a,b,c,d,e,f){"use strict";var g=b("LSLocalizedStringsV2"),h=b("LSLocalizedStrings"),i=b("LSDynamicDependencies").cachedModules,j=b("LSMetadata").metadata;function a(a){return b("LS")(1,j,i,h,g,a,0)}c=b("LSDynamicDependencies").cachedModules;f.make=a;f.cachedModules=c}),null);
__d("MAWGating.bs",["bs_caml_obj","gkx","qex"],(function(a,b,c,d,e,f){"use strict";function a(a){if(b("gkx")("1224637")!==!0)if(b("qex")._("1506")===!0)return!0;else return b("qex")._("155")===!0;else return!1}function c(a){return b("qex")._("272")===!0}function d(a){return b("qex")._("715")===!0}function e(a){if(b("qex")._("1513")===!0)return!0;else return b("qex")._("155")===!0}function g(a){return b("gkx")("7045")}function h(a){return b("bs_caml_obj").caml_equal(b("qex")._("1313"),!0)}function i(a){return b("gkx")("690")}function j(a){return b("gkx")("5611")}function k(a){return b("gkx")("1262")}function l(a){if(b("qex")._("1514")===!0)return!0;else return b("qex")._("155")===!0}function m(a){return b("qex")._("354")}function n(a){if(b("qex")._("1515")===!0)return!0;else return b("qex")._("408")===!0}function o(a){return b("qex")._("1516")===!0}function p(a){return b("gkx")("956")}function q(a){return b("gkx")("6172")}function r(a){return b("gkx")("6187")}function s(a){if(b("gkx")("6172"))return b("qex")._("699")===!0;else return!1}function t(a){if(b("gkx")("6172"))return b("gkx")("956");else return!1}function u(a){if(b("gkx")("6187"))return b("qex")._("700")===!0;else return!1}function v(a){if(b("gkx")("6187"))return b("gkx")("956");else return!1}function w(a){if(b("qex")._("1520")===!0)return!0;else return b("qex")._("155")===!0}function x(a){return b("qex")._("205")===!0}function y(a){return b("qex")._("1521")===!0}function z(a){return b("qex")._("1523")===!0}function A(a){return b("qex")._("751")===!0}function B(a){return b("qex")._("899")===!0}function C(a){return b("qex")._("54")===!0}function D(a){return b("qex")._("1525")===!0}function E(a){return b("qex")._("50")===!0}function F(a){return b("gkx")("8220")}function G(a){return b("qex")._("1672")===!0}function H(a){return b("qex")._("1526")===!0}function I(a){return b("qex")._("386")===!0}function J(a){return b("qex")._("1527")===!0}var K=b("gkx")("4725");function L(a){return b("qex")._("1528")===!0}function M(a){return b("qex")._("1529")===!0}function N(a){if(b("gkx")("3890"))return!0;else return b("qex")._("923")===!0}function O(a){if(b("qex")._("1530")===!0)return!0;else return b("qex")._("155")===!0}function P(a){return b("qex")._("260")===!0}function Q(a){return b("qex")._("1532")===!0}function R(a){return b("qex")._("1533")===!0}function S(a){return b("qex")._("1534")===!0}function T(a){if(b("qex")._("189")===!0)return!0;else return b("qex")._("155")===!0}function U(a){if(b("qex")._("2163")===!0)return!0;else return b("qex")._("198")===!0}function V(a){if(b("qex")._("13")===!0)return!0;else return b("qex")._("199")===!0}function W(a){return b("qex")._("1536")===!0}function X(a){return b("qex")._("41")===!0}function Y(a){if(b("qex")._("68")===!0)return!0;else return b("qex")._("310")===!0}function Z(a){if(b("qex")._("77")===!0||b("qex")._("68")===!0)return!0;else return b("qex")._("1264")===!0}function $(a){if(b("qex")._("112")===!0)return!0;else return b("qex")._("336")===!0}function aa(a){if(b("qex")._("1238")===!0)return!0;else return b("qex")._("336")===!0}function ba(a){if(b("qex")._("1746")===!0&&b("qex")._("160")===!0)return!0;else return b("qex")._("336")===!0}function ca(a){if(b("qex")._("160")===!0)return!0;else return b("qex")._("336")===!0}function da(a){if(b("qex")._("308")===!0)return!0;else return b("qex")._("391")===!0}var ea=b("gkx")("5834");function fa(a){return b("qex")._("351")===!0}function ga(a){return b("qex")._("114")===!0}function ha(a){if(b("qex")._("158")===!0)return!0;else return b("qex")._("336")===!0}function ia(a){return b("qex")._("323")===!0}function ja(a){return b("gkx")("3106")}function ka(a){return b("qex")._("542")===!0}function la(a){return b("qex")._("571")===!0}function ma(a){return b("gkx")("346")}function na(a){return b("gkx")("8355")}function oa(a){return b("qex")._("585")===!0}var pa=b("gkx")("1115");function qa(a){return b("gkx")("964")}function ra(a){return b("gkx")("4169")}function sa(a){return b("gkx")("4662")}function ta(a){if(b("qex")._("1239")===!0)return!0;else return b("qex")._("1677")===!0}function ua(a){return b("qex")._("419")===!0}function va(a){return b("qex")._("1000")===!0}function wa(a){return b("gkx")("6464")}function xa(a){return b("qex")._("133")===!0}function ya(a){return b("qex")._("1306")===!0}function za(a){return b("qex")._("174")===!0}function Aa(a){return b("qex")._("342")===!0}function Ba(a){return b("gkx")("6940")}function Ca(a){return b("qex")._("411")===!0}function Da(a){return b("qex")._("1232")===!0}function Ea(a){return b("qex")._("598")===!0}function Fa(a){return b("gkx")("4483")}function Ga(a){return b("gkx")("7252")}function Ha(a){return b("gkx")("7285")}function Ia(a){return b("qex")._("1268")===!0}function Ja(a){return b("qex")._("155")===!0}function Ka(a){return b("qex")._("1766")===!0}function La(a){return b("qex")._("1766")===!0}function Ma(a){return b("gkx")("3383")}function Na(a){if(b("qex")._("1233")===!0)return!0;else return b("qex")._("754")===!0}function Oa(a){if(b("qex")._("1222")===!0)return!0;else return b("qex")._("96")===!0}function Pa(a){return b("qex")._("548")===!0}function Qa(a){return b("qex")._("681")}function Ra(a){return b("qex")._("1686")===!0}function Sa(a){return b("gkx")("8239")}function Ta(a){return b("qex")._("1790")===!0}function Ua(a){return b("gkx")("8350")}function Va(a){return b("qex")._("302")===!0}function Wa(a){return b("qex")._("1833")===!0}function Xa(a){return b("gkx")("4214")}function Ya(a){return b("gkx")("8457")}function Za(a){return b("qex")._("360")}f.isArmadillo=a;f.isTlcSearchEnabled=c;f.isEyebrowTextEnabled=d;f.isGifEnabled=e;f.isGifSearchEnabled=g;f.isMobileTLCOverride=h;f.isDebugUIEnabled=i;f.isDevDebugEnabled=j;f.enableRawStanzaQueueStore=k;f.isStickerEnabled=l;f.getArmadilloDbVersion=m;f.wellBeingFeaturesEnabled=n;f.isEphemeralMessagesEnabled=o;f.isDualSendWebOrCrossApp=p;f.oneToOneDualSendKillswitch=q;f.groupDualSendKillswitch=r;f.isOneToOneDualSendTextEnabled=s;f.isOneToOneDualSendMediaEnabled=t;f.isGroupDualSendTextEnabled=u;f.isGroupDualSendMediaEnabled=v;f.isForwardEnabled=w;f.isCrossForwardEnabled=x;f.isVaultingEnabled=y;f.isReportingEnabled=z;f.isPullModeEnabled=A;f.isBulkGroupEncEnabled=B;f.isFeatureLimitEnabled=C;f.isReactionsEnabled=D;f.isCustomReactionsEnabled=E;f.isDbCleanupEnabled=F;f.isICDCHTTPRegEnabled=G;f.isICDCEnabled=H;f.isICDCErrorEnabled=I;f.isClientTimeoutsEnabled=J;f.isOptedOutOfTimeouts=K;f.isUnsendGlobalEnabled=L;f.isUnsendLocallyEnabled=M;f.isOccamadillo=N;f.isEncryptionAtRestEnabled=O;f.isDevserverDeviceEnabled=P;f.isBlockEnabled=Q;f.isRestrictEnabled=R;f.isReactionsCleanerEnabled=S;f.isRepliesEnabled=T;f.isSearchEnabled=U;f.isContentSearchEnabled=V;f.isAppSyncDeleteThreadEnabled=W;f.isSecurityAlertEnabled=X;f.isThreadLevelCutoverEnabled=Y;f.isXMAFeedPostShareEnabled=Z;f.isLabyrinthOnWebEnabled=$;f.isUploadFlowEnabled=aa;f.isXMABackupEnabled=ba;f.isAttachmentBackupEnabled=ca;f.isGroupInvitesEnabled=da;f.isArmadilloMessageSortedOrderChanged=ea;f.isHotLikeEnabled=fa;f.isPushNotificationEnabled=ga;f.isPinCodeEnabled=ha;f.isPinCodeAccessibleInputEnabled=ia;f.isE2EEAttributionAndPresenceEnabled=ja;f.isMobileExternalIdFormatEnabled=ka;f.isAdminMsgOptEnabled=la;f.isWebErrorStateM1Enabled=ma;f.isBulkifyHIMEnabled=na;f.isWebLoadStateEnabled=oa;f.isInitSyncApiImprovementsEnabled=pa;f.isSenderKeyPredistributionEnabled=qa;f.isPreEstablishSessionEnabled=ra;f.isSmartSenderKeyRotationEnabled=sa;f.isLegacyThreadUploadEnabled=ta;f.isTlcRestoreFlowEnabled=ua;f.isDyiEnabled=va;f.isArmadilloTotalMessageCollectionEnabled=wa;f.shouldDisplayWeakPinPromptForEBSetup=xa;f.isVirtualDeviceRevocationFlowEnabled=ya;f.isSortOrderPaginationEnabled=za;f.isDeviceAdminMessagesSnippetDisabled=Aa;f.isBulkContactUpdateEnabled=Ba;f.isQrCodeEnabled=Ca;f.isRetroactiveBackupsEnabled=Da;f.isRetroactiveBackupsAttachmentsEnabled=Ea;f.isDetailedHandleIncomingMsgQPLEnabled=Fa;f.isBatchLoadParticipantsEnabled=Ga;f.isPersistedDbDeriskEnabled=Ha;f.isFrankingEnabled=Ia;f.isEbEnabledOnIg=Ja;f.isCodeOnlyInitEnabled=Ka;f.isCodeOnlyWorkerEnabled=La;f.isSecurityToggleForDFEnabled=Ma;f.isOnboardingFlowEnabled=Na;f.isRestoreFlowEnabled=Oa;f.isRestoreFlowHandlingExistingAdminMsgsEnabled=Pa;f.getOrchestratorVersion=Qa;f.isUserPartOfEncryptedBackupDebugging=Ra;f.isTlcPublicUser=Sa;f.shouldUseCoalescedSchemas=Ta;f.isDownloadablePreviewsEnabled=Ua;f.isVoiceClipEnabled=Va;f.shouldUseCondensedSchemas=Wa;f.isJpegThumbnailOverChatdDisabled=Xa;f.isForceNonPersistedJobsEnable=Ya;f.getExtraWebWorkerMemoryToConsume=Za}),null);
__d("MAWGating.re",["MAWGating.bs"],(function(a,b,c,d,e,f){c=(a=b("MAWGating.bs")).isArmadillo;f.isArmadillo=c;d=a.isTlcSearchEnabled;f.isTlcSearchEnabled=d;e=a.isEyebrowTextEnabled;f.isEyebrowTextEnabled=e;b=a.isGifEnabled;f.isGifEnabled=b;c=a.isGifSearchEnabled;f.isGifSearchEnabled=c;d=a.isMobileTLCOverride;f.isMobileTLCOverride=d;e=a.isDebugUIEnabled;f.isDebugUIEnabled=e;b=a.isDevDebugEnabled;f.isDevDebugEnabled=b;c=a.enableRawStanzaQueueStore;f.enableRawStanzaQueueStore=c;d=a.isStickerEnabled;f.isStickerEnabled=d;e=a.getArmadilloDbVersion;f.getArmadilloDbVersion=e;b=a.wellBeingFeaturesEnabled;f.wellBeingFeaturesEnabled=b;c=a.isEphemeralMessagesEnabled;f.isEphemeralMessagesEnabled=c;d=a.isDualSendWebOrCrossApp;f.isDualSendWebOrCrossApp=d;e=a.oneToOneDualSendKillswitch;f.oneToOneDualSendKillswitch=e;b=a.groupDualSendKillswitch;f.groupDualSendKillswitch=b;c=a.isOneToOneDualSendTextEnabled;f.isOneToOneDualSendTextEnabled=c;d=a.isOneToOneDualSendMediaEnabled;f.isOneToOneDualSendMediaEnabled=d;e=a.isGroupDualSendTextEnabled;f.isGroupDualSendTextEnabled=e;b=a.isForwardEnabled;f.isForwardEnabled=b;c=a.isCrossForwardEnabled;f.isCrossForwardEnabled=c;d=a.isVaultingEnabled;f.isVaultingEnabled=d;e=a.isReportingEnabled;f.isReportingEnabled=e;b=a.isPullModeEnabled;f.isPullModeEnabled=b;c=a.isBulkGroupEncEnabled;f.isBulkGroupEncEnabled=c;d=a.isFeatureLimitEnabled;f.isFeatureLimitEnabled=d;e=a.isReactionsEnabled;f.isReactionsEnabled=e;b=a.isCustomReactionsEnabled;f.isCustomReactionsEnabled=b;c=a.isDbCleanupEnabled;f.isDbCleanupEnabled=c;d=a.isICDCHTTPRegEnabled;f.isICDCHTTPRegEnabled=d;e=a.isICDCEnabled;f.isICDCEnabled=e;b=a.isICDCErrorEnabled;f.isICDCErrorEnabled=b;c=a.isClientTimeoutsEnabled;f.isClientTimeoutsEnabled=c;d=a.isOptedOutOfTimeouts;f.isOptedOutOfTimeouts=d;e=a.isUnsendGlobalEnabled;f.isUnsendGlobalEnabled=e;b=a.isUnsendLocallyEnabled;f.isUnsendLocallyEnabled=b;c=a.isOccamadillo;f.isOccamadillo=c;d=a.isEncryptionAtRestEnabled;f.isEncryptionAtRestEnabled=d;e=a.isDevserverDeviceEnabled;f.isDevserverDeviceEnabled=e;b=a.isBlockEnabled;f.isBlockEnabled=b;c=a.isRestrictEnabled;f.isRestrictEnabled=c;d=a.isReactionsCleanerEnabled;f.isReactionsCleanerEnabled=d;e=a.isRepliesEnabled;f.isRepliesEnabled=e;b=a.isSearchEnabled;f.isSearchEnabled=b;c=a.isContentSearchEnabled;f.isContentSearchEnabled=c;d=a.isSecurityAlertEnabled;f.isSecurityAlertEnabled=d;e=a.isThreadLevelCutoverEnabled;f.isThreadLevelCutoverEnabled=e;b=a.isXMAFeedPostShareEnabled;f.isXMAFeedPostShareEnabled=b;c=a.isLabyrinthOnWebEnabled;f.isLabyrinthOnWebEnabled=c;d=a.isUploadFlowEnabled;f.isUploadFlowEnabled=d;e=a.isXMABackupEnabled;f.isXMABackupEnabled=e;b=a.isAttachmentBackupEnabled;f.isAttachmentBackupEnabled=b;c=a.isGroupInvitesEnabled;f.isGroupInvitesEnabled=c;d=a.isArmadilloMessageSortedOrderChanged;f.isArmadilloMessageSortedOrderChanged=d;e=a.isHotLikeEnabled;f.isHotLikeEnabled=e;b=a.isPushNotificationEnabled;f.isPushNotificationEnabled=b;c=a.isPinCodeEnabled;f.isPinCodeEnabled=c;d=a.isPinCodeAccessibleInputEnabled;f.isPinCodeAccessibleInputEnabled=d;e=a.isE2EEAttributionAndPresenceEnabled;f.isE2EEAttributionAndPresenceEnabled=e;b=a.isMobileExternalIdFormatEnabled;f.isMobileExternalIdFormatEnabled=b;c=a.isAdminMsgOptEnabled;f.isAdminMsgOptEnabled=c;d=a.isWebErrorStateM1Enabled;f.isWebErrorStateM1Enabled=d;e=a.isBulkifyHIMEnabled;f.isBulkifyHIMEnabled=e;b=a.isWebLoadStateEnabled;f.isWebLoadStateEnabled=b;c=a.isInitSyncApiImprovementsEnabled;f.isInitSyncApiImprovementsEnabled=c;d=a.isSenderKeyPredistributionEnabled;f.isSenderKeyPredistributionEnabled=d;e=a.isPreEstablishSessionEnabled;f.isPreEstablishSessionEnabled=e;b=a.isSmartSenderKeyRotationEnabled;f.isSmartSenderKeyRotationEnabled=b;c=a.isLegacyThreadUploadEnabled;f.isLegacyThreadUploadEnabled=c;d=a.isTlcRestoreFlowEnabled;f.isTlcRestoreFlowEnabled=d;e=a.isDyiEnabled;f.isDyiEnabled=e;b=a.isArmadilloTotalMessageCollectionEnabled;f.isArmadilloTotalMessageCollectionEnabled=b;c=a.shouldDisplayWeakPinPromptForEBSetup;f.shouldDisplayWeakPinPromptForEBSetup=c;d=a.isVirtualDeviceRevocationFlowEnabled;f.isVirtualDeviceRevocationFlowEnabled=d;e=a.isSortOrderPaginationEnabled;f.isSortOrderPaginationEnabled=e;b=a.isDeviceAdminMessagesSnippetDisabled;f.isDeviceAdminMessagesSnippetDisabled=b;c=a.isBulkContactUpdateEnabled;f.isBulkContactUpdateEnabled=c;d=a.isQrCodeEnabled;f.isQrCodeEnabled=d;e=a.isRetroactiveBackupsEnabled;f.isRetroactiveBackupsEnabled=e;b=a.isRetroactiveBackupsAttachmentsEnabled;f.isRetroactiveBackupsAttachmentsEnabled=b;c=a.isDetailedHandleIncomingMsgQPLEnabled;f.isDetailedHandleIncomingMsgQPLEnabled=c;d=a.isBatchLoadParticipantsEnabled;f.isBatchLoadParticipantsEnabled=d;e=a.isPersistedDbDeriskEnabled;f.isPersistedDbDeriskEnabled=e;b=a.isFrankingEnabled;f.isFrankingEnabled=b;c=a.isEbEnabledOnIg;f.isEbEnabledOnIg=c;d=a.isCodeOnlyInitEnabled;f.isCodeOnlyInitEnabled=d;e=a.isCodeOnlyWorkerEnabled;f.isCodeOnlyWorkerEnabled=e;b=a.isSecurityToggleForDFEnabled;f.isSecurityToggleForDFEnabled=b;c=a.isOnboardingFlowEnabled;f.isOnboardingFlowEnabled=c;d=a.isRestoreFlowEnabled;f.isRestoreFlowEnabled=d;e=a.isRestoreFlowHandlingExistingAdminMsgsEnabled;f.isRestoreFlowHandlingExistingAdminMsgsEnabled=e;b=a.getOrchestratorVersion;f.getOrchestratorVersion=b;c=a.isUserPartOfEncryptedBackupDebugging;f.isUserPartOfEncryptedBackupDebugging=c;d=a.isTlcPublicUser;f.isTlcPublicUser=d;e=a.shouldUseCoalescedSchemas;f.shouldUseCoalescedSchemas=e;b=a.isDownloadablePreviewsEnabled;f.isDownloadablePreviewsEnabled=b;c=a.shouldUseCondensedSchemas;f.shouldUseCondensedSchemas=c;d=a.isJpegThumbnailOverChatdDisabled;f.isJpegThumbnailOverChatdDisabled=d;e=a.isForceNonPersistedJobsEnable;f.isForceNonPersistedJobsEnable=e;b=a.getExtraWebWorkerMemoryToConsume;f.getExtraWebWorkerMemoryToConsume=b}),null);
__d("LSPersistedDbGating",["MAWGating.re","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("MAWGating.re").isLabyrinthOnWebEnabled()&&c("MAWGating.re").isPersistedDbDeriskEnabled()||!1;b=c("gkx")("2361")||a;d=c("gkx")("2361")&&!a;e=d;g.onlyEncryptedBackupsPersisted=a;g.anyTablesPersisted=b;g.allTablesPersisted=d;g.oneMqttConnectionAcrossTabs=e}),98);
__d("MWLSDatabaseNames",[],(function(a,b,c,d,e,f){"use strict";a="LightSpeedV3";f.lightspeedPrefix=a}),66);
__d("MWLSIndexedDBName.bs",["CurrentUserInitialData","MWLSDatabaseNames"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return b("MWLSDatabaseNames").lightspeedPrefix+(g||(g=b("CurrentUserInitialData"))).USER_ID}f.dbName=a}),null);
__d("MWLSIndexedDBName.re",["MWLSIndexedDBName.bs"],(function(a,b,c,d,e,f){a=b("MWLSIndexedDBName.bs").dbName;f.dbName=a}),null);
__d("MWIndexedDBDelete",["FBLogger","MWLSIndexedDBName.re","ODS","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;if(((a=window)==null?void 0:a.indexedDB)!=null)if(typeof window.indexedDB.databases==="function"){a=window.indexedDB.databases();a.then(function(a){a.forEach(function(a){var b=a.name||"";if(b.includes("LightSpeed")){a=window.indexedDB.deleteDatabase(b);a.onsuccess=function(){c("FBLogger")("messenger_web_product").info("MW PDB deletion success for "+b)};a.onblocked=function(){c("recoverableViolation")("[db clean up patch] Cannot delete db: blocked","messenger_web_product"),d("ODS").bumpEntityKey(3185,"mw_pdb_delete","blocked")};a.onerror=function(){d("ODS").bumpEntityKey(3185,"mw_pdb_delete","error"),c("recoverableViolation")("[pdb clean up patch] Cannot delete db","messenger_web_product")}}})})["catch"](function(){c("recoverableViolation")("[pdb clean up patch] LS delete databases error","messenger_web_product")})}else{a=window.indexedDB.deleteDatabase(d("MWLSIndexedDBName.re").dbName());a.onsuccess=function(){d("ODS").bumpEntityKey(3185,"mw_pdb_delete","success_v2")};a.onblocked=function(){c("recoverableViolation")("[db clean up patch v2] Cannot delete db: blocked","messenger_web_product"),d("ODS").bumpEntityKey(3185,"mw_pdb_delete","blocked_v2")};a.onerror=function(){d("ODS").bumpEntityKey(3185,"mw_pdb_delete","error_v2"),c("recoverableViolation")("[pdb clean up patch v2] Cannot delete db","messenger_web_product")}}}g.deleteAllDBs=a}),98);
__d("MessengerWebQuickLogModule",[],(function(a,b,c,d,e,f){a=Object.freeze({ARMADILLO_WEB_VIDEO_TYPE_CHECK:25309473,BLENDED_THREADLIST_IN_JEWEL_VC:25312207,COMPOSER_INTERACTION:25296900,FETCH_MORE_THREAD_LIST:25296906,FETCH_THREAD_INFO:25296904,FETCH_THREAD_LIST:25296905,FIRSTCHATTABOPEN_WWW:25296897,FORWARD_INTERACTION:25298392,GROUP_INPUT_INDIVIDUAL_TAB_OPEN_WWW:25296899,INBOX_THREAD_NAVIGATION:25304023,JUMP_TO_MOST_RECENT_MESSAGE:25300623,JUMP_TO_REPLIED_MESSAGE:25301087,KEY_UPLOAD_IDENTITY_CHANGE:25308792,LS_INIT:25305590,LS_PLATFORM_LOGOUT:25311266,MAW_APP_STATE_SYNC_DAILY:25306941,MAW_BRIDGE_TIMEOUT:25300103,MAW_BULK_WRITE_RECEIPTS:25297955,MAW_CURRENT_DEVICE_UPDATE:25311782,MAW_CURRENT_USER_KEY_CHANGE:25311490,MAW_DECRYPT_MESSAGE:25306682,MAW_DECRYPT_MESSAGE_FINAL:25307464,MAW_DEVICE_REGISTRATION:25302457,MAW_ENCRYPTION_AT_REST_DECRYPT:25313004,MAW_ENCRYPTION_AT_REST_ENCRYPT:25300256,MAW_ENCRYPT_MESSAGE:25299294,MAW_FRANKING_VALIDATION:25299246,MAW_GET_DEVICES:25307483,MAW_HANDLE_INCOMING_MSG_TXN:25311150,MAW_ICDC_ERROR:25313187,MAW_IDB_NOT_SUPPORTED:25299354,MAW_INIT:25310776,MAW_LOCAL_STORAGE_NOT_SUPPORTED:25309925,MAW_MAYBE_WITH_TIMEOUT:25301116,MAW_MEDIA_DOWNLOAD:25312150,MAW_MEDIA_UPLOAD:25313100,MAW_MESSAGE_LIST_PROCESSINIG:25308079,MAW_MULTI_TAB_MUTEX_NO_PERMISSION_INIT:25310181,MAW_MULTI_TAB_MUTEX_NO_PERMISSION_LOCALTAKEOVER:25312554,MAW_MULTI_TAB_MUTEX_NO_PERMISSION_REINIT:25299377,MAW_MULTI_TAB_WORKER_REINIT:25310984,MAW_OCCAMADILLO_CREATE_THREAD:25312774,MAW_OCCAMADILLO_INIT_SYNC:25300040,MAW_OFFLINE_QUEUE_EXECUTION:25306361,MAW_OFFLINE_RETRY:25309990,MAW_PRE_LOGOUT:25309731,MAW_QUERY_GROUP:25310326,MAW_QUERY_GROUPS:25304433,MAW_RETRY_RECEIPTS:25308942,MAW_RETRY_RECEIPTS_SENT:25301644,MAW_SAVE_SIGNAL_SESSION_RETRIES:25309040,MAW_SEND_MESSAGE:25303022,MAW_SYNCD:25308683,MAW_SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:25300196,MAW_SYNCD_BOOTSTRAP_DATA_APPLIED:25300822,MAW_SYNCD_CRITICAL_BOOTSTRAP_STAGE:25308084,MAW_SYNCD_CRITICAL_EVENT:25311142,MAW_SYNCD_DECRYPT_MUTATIONS:25305739,MAW_SYNCD_FATAL_ERROR:25310891,MAW_SYNCD_KEY_ROTATION:25304909,MAW_TIMED_WAIT_UNTIL_COMPLETED:25301560,MAW_TIMED_WAIT_UNTIL_PERSISTED:25305468,MAW_TRANSACTION:25310437,MAW_UNVAULT:25313217,MAW_UPDATE_DEVICES_FOR_USER_TXN:25310731,MAW_VAULT:25301509,MAW_WA_CONNECTIVITY:25312111,MAW_WA_CREATE_GROUP:25307987,MAW_WA_FAILURES:25299391,MAW_WA_JOBS_ORCHESTRATOR:25311870,MAW_WA_REMOVE_PARTICIPANTS:25312342,MAW_WA_SEND_MESSAGE:25304093,MAW_WRITE_MSG_RECEIPTS_TXN:25299660,OPEN_COMMUNITY_THREAD:25298376,PAGE_LOAD_MDOTCOM_WWW:25296901,PRESENCE_MSYS_EXP:25307064,REPLY_INTERACTION:25298086,SEND_MESSAGE:25296903,SPROC_CALL:25302991,TEST_MAW_ENCRYPT_MESSAGE:25306602,TEST_MAW_WA_SEND_MESSAGE:25303259,THREAD_LOAD_MDOTCOM_WWW:25296902,THREAD_NAVIGATION:25305256});f["default"]=a}),66);
__d("WorkplaceWebMessagingQuickLogModule",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_MESSAGE_LIST_LOAD_TIME:1036591326,CHAT_MORE_MESSAGE_LIST_LOAD_TIME:1036596010,CHAT_MORE_THREADS_LOAD_TIME:1036594911,CHAT_PINNED_THREADS_LOAD_TIME:1036586287,CHAT_THREADS_LOAD_TIME:1036588047,CREATE_CHAT_THREAD:1036594803,CUSTOMER_SATISFACTION_SURVEY:1036597559,GROUP_ADD_MEMBER:1036595192,GROUP_REMOVE_MEMBER:1036592539,MESSAGE_SEND:1036587559,THREAD_SEARCH:1036584390,THREAD_SEARCH_CAPPED_RESULTS:1036589483});f["default"]=a}),66);
__d("LSDatabaseDeferred.bs",["CurrentUser","ExecutionEnvironment","LSPersistedDbGating","MWIndexedDBDelete","Promise","QPLUserFlow","bs_curry","cr:4317","justknobx","qpl","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a={contents:!1};a.contents===!1&&(a.contents=!0,b("QPLUserFlow").start(b("qpl")._(25305590,"1127"),{cancelOnUnload:!0,timeoutInMs:b("ExecutionEnvironment").canUseDOM?1e6:0}));c=b("bs_curry")._1(b("cr:4317").get,void 0).then(function(a){try{var c=b("justknobx")._("541"),d=!b("LSPersistedDbGating").anyTablesPersisted;d&&c===1&&b("MWIndexedDBDelete").deleteAllDBs()}catch(a){b("recoverableViolation")("[db clean up patch] Cant delete db","messenger_web_product")}try{b("QPLUserFlow").addPoint(b("qpl")._(25305590,"1127"),"db_created",void 0),b("CurrentUser").isWorkUser()&&b("QPLUserFlow").addPoint(b("qpl")._(1036588047,"310"),"db_created",void 0)}catch(a){}return b("Promise").resolve(a)});d=b("cr:4317");f.$LSPersistedDatabaseProvider$OR$LSEphemeralDatabaseProvider$requireCond=b("cr:4317");f.DatabaseProvider=d;f.isSetupExecuted=a;f.db=c}),null);
__d("LSDatabaseType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70],sa=[0,71],ta=[0,72],ua=[0,73],va=[0,74],wa=[0,75],xa=[0,76],ya=[0,77],za=[0,78],Aa=[0,79],Ba=[0,80],Ca=[0,81],Da=[0,82],Ea=[0,84],Fa=[0,85],Ga=[0,86],Ha=[0,87],Ia=[0,88],Ja=[0,89],Ka=[0,90],La=[0,91],Ma=[0,92],Na=[0,93],Oa=[0,94],Pa=[0,95],Qa=[0,96],Ra=[0,97],Sa=[0,98],Ta=[0,99],Ua=[0,100],Va=[0,101],Wa=[0,102],Xa=[0,103],Ya=[0,104],Za=[0,105],$a=[0,106],ab=[0,107],bb=[0,108],cb=[0,109],db=[0,110],eb=[0,111],fb=[0,112],gb=[0,113],hb=[0,114],ib=[0,115],jb=[0,116],kb=[0,117],lb=[0,118],mb=[0,119],nb=[0,120],ob=[0,121],pb=[0,122],qb=[0,123],rb=[0,124],sb=[0,125],tb=[0,126],ub=[0,127],vb=[0,128],wb=[0,129],xb=[0,130],yb=[0,131];f.test=a;f.mailbox=c;f.contact=d;f.appAlerts=e;f.core=b;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra;f.carrierMessaging=sa;f.notificationsClient=ta;f.cat=ua;f.composerSettings=va;f.groupThreadImage=wa;f.coplayMetadata=xa;f.searchUserGroups=ya;f.tutorial=za;f.paidAds=Aa;f.avatarsCoPresence=Ba;f.graphql=Ca;f.transcribe=Da;f.ixtServerTrigger=Ea;f.novi=Fa;f.testFramework=Ga;f.broker=Ha;f.openMessenger=Ia;f.anonymousCredentials=Ja;f.mlModel=Ka;f.localAuth=La;f.soundBite=Ma;f.encryptedBackups=Na;f.businessOrderManagement=Oa;f.e2eeMessagingMetadataMailbox=Pa;f.communitiesMailbox=Qa;f.mostLikelyToPollQuestions=Ra;f.breakoutSessions=Sa;f.messagingNotificationConfigs=Ta;f.sandboxSelector=Ua;f.gamesBotThread=Va;f.atcDaemon=Wa;f.coPresence=Xa;f.communityExclusive=Ya;f.clientOnlySample=Za;f.urlBlackhole=$a;f.sharing=ab;f.encryptedBackupsVersioning=bb;f.rpPolls=cb;f.everythingTogether=db;f.immersiveModesSpaces=eb;f.inAppPurchaseKit=fb;f.decentralizedTypes=gb;f.armadilloDevice=hb;f.staticEntryPoint=ib;f.giphyCategory=jb;f.communityMessagingPresence=kb;f.reactionsV2=lb;f.threadSubscription=mb;f.communityMessagingSearch=nb;f.communityMessagingDiscovery=ob;f.communityMessagingTrending=pb;f.widget=qb;f.messengerCallsTab=rb;f.botSuggestions=sb;f.testThree=tb;f.unifiedBusinessInboxIgdMailbox=ub;f.testOmnistoreBatchable=vb;f.contentExplorer=wb;f.unifiedBusinessInboxWaMailbox=xb;f.lsStoriesParticipantSettingsV2=yb}),null);
__d("LSMailboxMessagesRangeQueryDirection.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.before=a;f.after=c}),null);
__d("LSTransaction.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a.runInTransaction(b,function(){switch(c){case"readOnly":return"readonly";case"readWrite":return"readwrite"}}())}f.run=a}),null);
__d("LSBitFlag.bs",["bs_caml","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_caml").i64_eq(b("bs_caml_int64").and_(c,a),a)}function c(a,c){return b("bs_caml_int64").or_(c,a)}function d(a,c){return b("bs_caml_int64").and_(c,b("bs_int64").lognot(a))}e=b("bs_caml_int64").zero;f.empty=e;f.has=a;f.set=c;f.clear=d}),null);
__d("LSBitOffset.bs",["LSBitFlag.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(a));return b("LSBitFlag.bs").set(a,c)}function c(a,c){a=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(a));return b("LSBitFlag.bs").clear(a,c)}d=b("bs_caml_int64").zero;f.empty=d;f.set=a;f.clear=c}),null);
__d("LSContactBitOffset.bs",["LSBitFlag.bs","LSBitOffset.bs","bs_belt_Option","bs_caml","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(b("bs_caml").i64_ge(a,[0,64])){var d=c.capabilities2;if(d===void 0)return;d=b("bs_caml_int64").sub(a,[0,64]);d=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(d));return b("LSBitFlag.bs").has(d,b("bs_belt_Option").getWithDefault(c.capabilities2,b("LSBitOffset.bs").empty))}d=c.capabilities;if(d===void 0)return;d=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(a));return b("LSBitFlag.bs").has(d,b("bs_belt_Option").getWithDefault(c.capabilities,b("LSBitOffset.bs").empty))}f.has=a}),null);
__d("LSContactCapabilityBitOffset.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,64],G=[0,65],H=[0,66],I=[0,67],J=[0,68],K=[0,69],L=[0,70],M=[0,71],N=[0,72],O=[0,73],P=[0,74],Q=[0,75],R=[0,76],S=[0,77],T=[0,78];f.message=a;f.replyMessage=c;f.joinGroup=d;f.block=e;f.see=b;f.seeFacebookProfile=g;f.payment=h;f.camera=i;f.mediaPicker=j;f.sticker=k;f.gif=l;f.audioClips=m;f.sharedMedia=n;f.reactions=o;f.seenHeads=p;f.threadDetails=q;f.rtcVideoCall=r;f.rtcVoiceCall=s;f.threadFeedbackAndReport=t;f.goToSecretConversation=u;f.makeAdmin=v;f.removeFromGroup=w;f.removeAsAdmin=x;f.verified=y;f.disappearingMode=z;f.seeMessage=A;f.pseudoBlock=B;f.pushable=C;f.messageBlockPlaced=D;f.facebookBlockPlaced=E;f.viewerIsUnconnected=F;f.pagePlatformBot=G;f.restrictPlaced=H;f.isXacEligible=I;f.isGroupsXacEligible=J;f.isGroupsXacCallingEligible=K;f.isE2eeOnly=L;f.isEligibleForSafetyNotice=M;f.novi=N;f.isContactShareable=O;f.isHidden=P;f.isThreadCutoverUser=Q;f.hasCutoverThread=R;f.isCommunityBotPage=S;f.isSearchable=T}),null);
__d("bs_js_dict",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c in a)return b("bs_caml_option").some(a[c])}var g=function(a,b){delete a[b]};function c(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function d(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=a[b[e]];return d}function e(a){var b={};a=a;while(!0){var c=a;if(!c)return b;var d=c.hd;b[d[0]]=d[1];a=c.tl;continue}}function h(a){var b={},c=a.length;for(var d=0;d<c;++d){var e=a[d];b[e[0]]=e[1]}return b}function i(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0;f<e;++f){var g=d[f];c[g]=a(b[g])}return c}f.get=a;f.unsafeDeleteKey=g;f.entries=c;f.values=d;f.fromList=e;f.fromArray=h;f.map=i}),null);
__d("ReQL.bs",["ReQL","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=function a(c){var d=c.NAME;if(d!=="range")if(d==="lessThan")return b("bs_js_dict").fromArray([["lt",c.VAL]]);else if(d==="greaterThan")return b("bs_js_dict").fromArray([["gt",c.VAL]]);else if(d==="greaterThanOrEqual")return b("bs_js_dict").fromArray([["gte",c.VAL]]);else return b("bs_js_dict").fromArray([["lte",c.VAL]]);d=c.VAL;return b("bs_js_dict").fromArray(b("bs_js_dict").entries(a(d[0])).concat(b("bs_js_dict").entries(a(d[1]))))};return a.bounds(d(c))}function c(a,c){if(!c)return b("unrecoverableViolation")("only support 5","messenger_web_product");var d=c.tl;c=c.hd;if(!d)return a.getKeyRange(c);var e=d.tl;d=d.hd;if(!e)return a.getKeyRange(c,d);var f=e.tl;e=e.hd;if(!f)return a.getKeyRange(c,d,e);var g=f.tl;f=f.hd;if(g)if(g.tl)return b("unrecoverableViolation")("only support 5","messenger_web_product");else return a.getKeyRange(c,d,e,f,g.hd);else return a.getKeyRange(c,d,e,f)}function d(a,b){return a.filter(b)}function e(a,b){return a.map(b)}function g(a){return b("ReQL").toArrayAsync(a)}function h(a,c){return b("ReQL").mergeJoin(a,c)}function i(a,c){return b("ReQL").leftJoin(a,c)}function j(a,b){return a.take(b)}function k(a){return b("ReQL").firstAsync(a)}function l(a){return b("ReQL").firstExnAsync(a)}function m(a){return b("ReQL").fromTableAscending(a)}function n(a){return b("ReQL").fromTableDescending(a)}function o(a){return b("ReQL").fromTableAscending(a)}function p(a){return b("ReQL").fromTableDescending(a)}f.filter=d;f.map=e;f.toArray=g;f.mergeJoin=h;f.leftJoin=i;f.bounds=a;f.getKeyRange=c;f.take=j;f.first=k;f.firstExn=l;f.fromTableAscending=m;f.fromTableDescending=n;f.fromIndexAscending=o;f.fromIndexDescending=p}),null);
__d("MAWVerifyThreadCutover.bs",["LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSDatabaseDeferred.bs","MAWGating.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function g(a){return b("LSDatabaseDeferred.bs").db.then(function(c){var d=b("MAWGating.bs").isThreadLevelCutoverEnabled(void 0)?b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("cutover_threads")),{hd:a,tl:0})).then(b("bs_belt_Option").isSome):b("Promise").resolve(!1);c=b("MAWGating.bs").isThreadLevelCutoverEnabled(void 0)?b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:a,tl:0})).then(function(a){return a}):b("Promise").resolve(void 0);return b("Promise").all([d,c]).then(function(a){var c=b("bs_belt_Option").mapWithDefault(a[1],!1,function(a){return b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").hasCutoverThread,a),!1)});if(a[0])return!0;else return c})})}function a(a){if(a==null)return b("Promise").resolve(!1);else return g(b("bs_caml_format").caml_int64_of_string(a))}f.verifyThreadCutover=g;f.verifyThreadCutoverWithStringInput=a}),null);
__d("MWLSPreloadThreadForContact.bs",["LS.bs","LSDatabaseDeferred.bs","LSDatabaseType.bs","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection.bs","LSTransaction.bs","LSVerifyThreadRowExists","MAWVerifyThreadCutover.bs","ReQL.bs","bs_caml_format","promiseDone"],(function(a,b,c,d,e,f){"use strict";function g(a){var c=b("LSDatabaseDeferred.bs").db.then(function(c){return b("LSTransaction.bs").run(c,function(c){var d=b("bs_caml_format").caml_int64_of_string(a);return b("MAWVerifyThreadCutover.bs").verifyThreadCutover(d).then(function(a){if(a)return;else return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages_ranges_v2__generated")),{hd:d,tl:0})).then(function(a){if(a!==void 0)if(a.minMessageId===a.maxMessageId&&a.minMessageId!=="")return b("LSIssueMessagesRangeQuery")(d,a.minTimestampMs,b("LSMailboxMessagesRangeQueryDirection.bs").before,b("LS.bs").make(c));else return;else return b("LSVerifyThreadRowExists")(d,void 0,b("LSDatabaseType.bs").mailbox,b("LS.bs").make(c))})})},"readWrite")});b("promiseDone")(c,void 0,void 0)}function a(){return g}f.verifyThreadExists=g;f.usePreloaderForUser=a}),null);
__d("LSDbKeyComparer.bs",["LSDbKeyComparer"],(function(a,b,c,d,e,f){"use strict";a=b("LSDbKeyComparer").compareKey;c=b("LSDbKeyComparer").MAX_KEY;f.cmp=a;f.maxKey=c}),null);
__d("LSPlatformClientInstances.bs",["ExecutionEnvironment","LSPlatformClientSingleton.bs","LSSuspense","MAWTTRC.bs","Promise","Promise.bs","QPLUserFlow","bs_caml_option","bs_curry","cr:2864","cr:4387","gkx","qpl"],(function(a,b,c,d,e,f){"use strict";var g=b("LSSuspense").makeCollection(),h={contents:!1};c=b("cr:2864")==null?void 0:b("bs_caml_option").some(b("cr:2864"));d=b("cr:4387")==null?void 0:b("bs_caml_option").some(b("cr:4387"));function a(a,c){h.contents===!1&&(h.contents=!0,!(b("cr:2864")==null)&&!(b("cr:4387")==null)&&b("bs_curry")._1(b("cr:2864").isArmadillo,void 0)&&(b("bs_curry")._1(b("cr:4387").setupMainWaLogger,void 0),b("QPLUserFlow").start(b("qpl")._(25310776,"6155"),{cancelOnUnload:!0,timeoutInMs:b("ExecutionEnvironment").canUseDOM?6e4:0}),b("QPLUserFlow").addAnnotations(b("qpl")._(25310776,"6155"),{bool:{isOccamadillo:b("bs_curry")._1(b("cr:2864").isOccamadillo,void 0),isDev:0,isRelaxedDurability:b("gkx")("6746")}}),b("MAWTTRC.bs").markEvent("ls_init_start"),b("bs_curry")._1(b("cr:2864").isOccamadillo,void 0)&&b("bs_curry")._1(b("cr:4387").log,"[Occamadillo] Beginning hardcoded init sync")));return b("LSSuspense").getFromCollection(g,a,function(){return b("bs_curry")._1(c,void 0).then(function(c){return b("bs_curry")._1(c.make,a).then(function(a){return b("Promise.bs").$$catch(b("bs_curry")._1(a.start,void 0).then(function(c){b("LSPlatformClientSingleton.bs").saveInstance(a);return a}),function(a){b("QPLUserFlow").endFailure(b("qpl")._(25305590,"1127"),"failure_during_client_setup",void 0);b("QPLUserFlow").endFailure(b("qpl")._(25310776,"6155"),"failure_during_client_setup",void 0);b("MAWTTRC.bs").fail("ls_init_fail");return b("Promise").reject(a)})})})})}f.isSetupExecuted=h;f.$MAWGating$requireCondXplat=b("cr:2864");f.mawGating=c;f.$WALogger$requireCondXplat=b("cr:4387");f.waLogger=d;f.getOrInit=a}),null);
__d("GetLsDatabaseForComet.bs",["bs_curry","requireDeferred"],(function(a,b,c,d,e,f){"use strict";c=b("requireDeferred")("MWLSSchemaEphemeral.bs").__setRef("GetLsDatabaseForComet.bs");var g=c.load().then(function(a){return b("bs_curry")._1(a.createDB,void 0)});function a(a){return g}f.$MWLSSchemaEphemeral$Deferred=c;f.get=a}),null);
__d("LSEphemeralDatabaseProvider.bs",["bs_curry","cr:1942626"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_curry")._1(b("cr:1942626").get,void 0)}f.$GetLsDatabase$OR$GetLsDatabaseForComet$requireCond=b("cr:1942626");f.get=a}),null);/*FB_PKG_DELIM*/
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e;return c.seq([function(d){return c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],filename:a[6],attributionAppId:a[7],hasMedia:a[8],isSharable:!1,hasXma:a[9],authorityLevel:[0,20]})},function(d){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],e,!1,c.i64.eq(a[5],[0,1]))}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],[0,0])?c.loopAsync(d[0],function(e){return d[3]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[5],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[3])&&c.i64.eq(b.authorityLevel,[0,20])}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[4])})})}])}):c.resolve()},function(e){return c.i64.eq(f,[0,12])?d[1]=[0,10]:(a[9]?d[3]=[0,9]:d[3]=[0,3],d[1]=d[3]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return a[12]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[12],d[2],c.i64.to_string([0,46]),a[3])},function(d){return c.sp(b("LSAppendDataTraceAddon"),a[12],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.seq([function(d){return b.ftr(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,b.primarySortKey,b.secondarySortKey==null?[-1,4294967295]:b.secondarySortKey],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],d)})},function(d){return b.sb(b.ftr(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?[-1,4294967295]:d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[10]=d[0],c[11]=d[1],c[12]=d[2],c[13]=d[3],c[14]=d[4],c[15]=d[5],c[16]=d[6],c[17]=d[7],c[18]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,[-1,4294967295],[-1,4294967295]],c[10]=d[0],c[11]=d[1],c[12]=d[2],c[13]=d[3],c[14]=d[4],c[15]=d[5],c[16]=d[6],c[17]=d[7],c[18]=d[8],d)})},function(d){return b.sb(b.ftr(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?[-1,4294967295]:d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[20]=d[0],c[21]=d[1],c[22]=d[2],c[23]=d[3],c[24]=d[4],c[25]=d[5],c[26]=d[6],c[27]=d[7],c[28]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,[-1,4294967295],[-1,4294967295]],c[20]=d[0],c[21]=d[1],c[22]=d[2],c[23]=d[3],c[24]=d[4],c[25]=d[5],c[26]=d[6],c[27]=d[7],c[28]=d[8],d)})},function(d){return c[32]=b.i64.or_([0,2],b.i64.or_(!c[3]&&!a[3]?[0,4]:[0,0],b.i64.or_(c[3]?[0,0]:[0,1],b.i64.or_(b.i64.eq(c[5],[0,60])||b.i64.eq(c[5],[0,80])?[0,1048576]:[0,0],b.i64.neq(c[6],[85970,924785702])&&b.i64.neq(c[6],[85970,1004785694])&&b.i64.neq(c[6],[85970,1044785690])?[0,0]:[0,2097152])))),c[14]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],[-1,4294967280]),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5])?[0,2]:[0,0],b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5])?[0,8]:[0,0],b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5]))?[0,4]:[0,0],b.i64.and_(c[12],[0,1]))))),c[33]=b.i64.eq(b.i64.and_(c[35],[0,8]),[0,8]),c[34]=c[33]?b.i64.or_(c[32],[0,16]):c[32],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],[-1,4294967294]):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],[-1,4294967280]),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5])?[0,2]:[0,0],b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5])?[0,8]:[0,0],b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5]))?[0,4]:[0,0],b.i64.and_(c[30],[0,1]))))),c[33]=b.i64.eq(b.i64.and_(c[35],[0,8]),[0,8]),c[34]=c[33]?b.i64.or_(c[22],[0,16]):c[22],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],[-1,4294967294]):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetViewerFBID","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags","gkx"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[7]=c.i64.of_float(Date.now()),f!==f?c.resolve(d[0]=f):c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[0]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.seq([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float([0,1])).next().then(function(a,b){var c=a.done;a=a.value;return c?d[9]=[-1,4294967295]:(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],[0,1]),d[13]=c.i64.gt(d[7],d[11])?d[7]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,[0,40])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:[0,0],threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:[0,0],lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:[0,0],authorityLevel:[0,40]})},function(b){return c.i64.eq(a[2],[0,13])||c.i64.eq(a[2],[0,7])||c.i64.eq(a[2],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:[0,20],isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async([0,2285622730],f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async([0,1919524925],f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,[0,1545093],d[16],d[17],f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,[0,80])||c.i64.eq(b.authorityLevel,[0,60])||c.i64.eq(b.authorityLevel,[0,40]))}),0,c.i64.to_float([0,1])).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.of_float(Date.now()):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==f&&(c.i64.eq(a[9],[0,1])||c.i64.eq(a[10],[0,1]))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[a[8],f,f,[0,0],f,f,f,f,f,f,f,f,f,f,f,f],d[33]=i[0],d[34]=i[1],d[35]=i[2],d[36]=i[3],d[37]=i[4],d[38]=i[5],d[39]=i[6],d[40]=i[7],d[41]=i[8],d[42]=i[9],d[43]=i[10],d[44]=i[11],d[45]=i[12],d[46]=i[13],d[47]=i[14],d[48]=i[15],i):(h=e.item,c.seq([function(e){return d[55]=h.senderId,d[53]=h.stickerId,c.i64.neq(d[53],f)?(e=[d[53],[0,4]],d[56]=e[0],d[57]=e[1],e):(e=[f,f],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[54]=h.replyType==null?[0,0]:h.replyType,c.seq([function(e){return c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(e){return c.i64.eq(d[54],[0,1])?c.seq([function(e){return c.i64.eq(a[0],d[57])?c.seq([function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return c.localizeV2Async([0,2421884758],f).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.seq([function(e){return c.seq([function(e){return d[64]=b("gkx")("7530"),d[64]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.name)})},function(a){return d[65]=d[66]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[66]=f:(c=b.item,d[66]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.firstName==null?e.name:e.firstName)})},function(a){return d[65]=d[66]==null?d[68]:d[66]}])},function(a){return d[61]=d[65]}])},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),c.localizeV2Async([0,2676961947],d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[59]=d[60]}]):c.seq([function(e){return c.seq([function(e){return d[62]=b("gkx")("7530"),d[62]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[66]=a})},function(a){return d[64]=d[66]}]):(e=b.item,d[64]=e.name)})},function(a){return d[63]=d[64]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[64]=f:(c=b.item,d[64]=c.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.firstName==null?e.name:e.firstName)})},function(a){return d[63]=d[64]==null?d[66]:d[64]}])},function(a){return d[60]=d[63]}])},function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[60]),d[62]),c.localizeV2Async([0,3298086032],d[62]).then(function(a){return d[63]=a})},function(a){return d[61]=d[63]}]):c.seq([function(e){return c.i64.eq(a[0],d[55])?c.seq([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),c.localizeV2Async([0,3873263038],d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.seq([function(e){return c.seq([function(e){return d[66]=b("gkx")("7530"),d[66]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.name)})},function(a){return d[67]=d[68]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[68]=f:(c=b.item,d[68]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[72]=a})},function(a){return d[70]=d[72]}]):(e=b.item,d[70]=e.firstName==null?e.name:e.firstName)})},function(a){return d[67]=d[68]==null?d[70]:d[68]}])},function(a){return d[63]=d[67]}])},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[60]),d[64]),d[66]=(d[64].push(d[63]),d[64]),c.localizeV2Async([0,2616853333],d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[61]=d[62]}])},function(a){return d[59]=d[61]}])},function(a){return d[58]=d[59]}]):c.seq([function(e){return c.i64.eq(a[0],d[57])?c.seq([function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return c.localizeV2Async([0,4002265907],f).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.seq([function(e){return c.seq([function(e){return d[64]=b("gkx")("7530"),d[64]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.name)})},function(a){return d[65]=d[66]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[66]=f:(c=b.item,d[66]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.firstName==null?e.name:e.firstName)})},function(a){return d[65]=d[66]==null?d[68]:d[66]}])},function(a){return d[61]=d[65]}])},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),c.localizeV2Async([0,2663996736],d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[59]=d[60]}]):c.seq([function(e){return c.seq([function(e){return d[62]=b("gkx")("7530"),d[62]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[66]=a})},function(a){return d[64]=d[66]}]):(e=b.item,d[64]=e.name)})},function(a){return d[63]=d[64]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[64]=f:(c=b.item,d[64]=c.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.firstName==null?e.name:e.firstName)})},function(a){return d[63]=d[64]==null?d[66]:d[64]}])},function(a){return d[60]=d[63]}])},function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[60]),d[62]),c.localizeV2Async([0,2868699317],d[62]).then(function(a){return d[63]=a})},function(a){return d[61]=d[63]}]):c.seq([function(e){return c.i64.eq(a[0],d[55])?c.seq([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),c.localizeV2Async([0,2688620547],d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.seq([function(e){return c.seq([function(e){return d[66]=b("gkx")("7530"),d[66]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.name)})},function(a){return d[67]=d[68]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[68]=f:(c=b.item,d[68]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[72]=a})},function(a){return d[70]=d[72]}]):(e=b.item,d[70]=e.firstName==null?e.name:e.firstName)})},function(a){return d[67]=d[68]==null?d[70]:d[68]}])},function(a){return d[63]=d[67]}])},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[60]),d[64]),d[66]=(d[64].push(d[63]),d[64]),c.localizeV2Async([0,3544071775],d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[61]=d[62]}])},function(a){return d[59]=d[61]}])},function(a){return d[58]=d[59]}])},function(a){return d[56]=d[58]}])},function(b){return d[52]=c.i64.eq(a[10],[0,1])?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],[0,1],d[52],d[55],h.text,d[50],d[51],f,f,f,f,f,f,d[54]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===f||c.i64.eq(a[9],[0,0])||c.i64.eq(a[10],[0,0])?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],[0,1],f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[f,f,f,f],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=[0,3]:d[32]=d[13],c.i64.eq([0,20],[0,20])?c.db.table(12).add({threadKey:a[1],messageId:d[0],timestampMs:d[7],offlineThreadingId:d[0],primarySortKey:d[9],secondarySortKey:d[7],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:[0,1],sendStatusV2:[0,1],authorityLevel:[0,20],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.seq([function(a){return c.db.table(12).fetch([[[d[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[7],f],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[0]]],"optimistic"]),function(a){return a.offlineThreadingId===d[0]&&c.i64.lt(a.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[0],timestampMs:d[7],offlineThreadingId:d[0],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:[0,1],sendStatusV2:[0,1],authorityLevel:[0,20],localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[1]=c.createArray(),d[2]=(d[1].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[1]),d[3]=(d[1].push("localApplyOptimisticMessage"),d[1]),d[4]=(d[1].push(a[1]),d[1]),d[5]=(d[1].push(d[0]),d[1]),d[6]=c.toJSON(d[1]),function(a){c.logger(a).info(a)}(d[6]),a[14]?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[0],d[7],c.i64.eq(a[2],[0,1]))},function(e){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[7],a[3],!1,c.i64.neq(a[6],f))}]):c.resolve()},function(a){return a=[d[0],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.ftr(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,[0,20])}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:d,imageUrlFallback:d,imageUrlExpirationTimestampMs:d,imageUrlMimeType:d})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[1]=a[3]===""?f:a[3],d[1]!==f?c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],d[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===d[1]&&c.i64.eq(b.authorityLevel,[0,20])}),function(b){var d=b.update;b.item;return d({attachmentFbid:c.i64.to_string(a[7])})})},function(a){return d[0]=d[1]}]):c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],f,f,f,f,[0,3],f,f,f,!0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return c.ftr(c.db.table(16).fetch(),function(b){return b.attachmentFbid===c.i64.to_string(a[7])}).next().then(function(e,h){var i=e.done;e=e.value;return i?c.sp(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),[0,2],f,f,!0,!1):(h=e.item,c.seq([function(e){return c.sp(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),h.attachmentType,h.filename,h.attributionAppId,!0,!1)},function(e){return c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[2],c.i64.to_string(a[7]),h.playableUrl,h.playableUrlFallback,h.playableUrlExpirationTimestampMs,h.playableUrlMimeType,h.previewUrl,h.previewUrlFallback,h.previewUrlExpirationTimestampMs,h.previewUrlMimeType,h.previewWidth,h.previewHeight)}]))})},function(a){return d[0]=d[2]}])},function(e){return c.seq([function(e){return d[2]=c.createArray(),d[9]=(d[2].push(a[7]),d[2]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[8],sendType:[0,4],markThreadRead:!1,initiatingSource:a[9]})},function(b){return d[4]=c.createArray(),d[5]=(d[4].push("optimisticSendAttachmentForward"),d[4]),d[6]=(d[4].push(a[1]),d[4]),d[7]=(d[4].push(a[7]),d[4]),d[8]=c.toJSON(d[4]),function(a){c.logger(a).info(a)}(d[8])}])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[3],a[4],a[5]]]]),function(b){return c.i64.eq(b.threadKey,a[3])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.timestampMs,a[4])&&b.messageId===a[5]&&c.i64.eq(b.authorityLevel,[0,80])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(d[2]=c.createArray(),d[3]=(d[2].push("optimisticSendMessageForward msg not found"),d[2]),d[4]=(d[2].push(a[5]),d[2]),d[5]=c.toJSON(d[2]),function(a){c.logger(a).mustfix(a)}(d[5]),d[0]=""):(h=e.item,c.seq([function(e){return d[8]=h.forwardScore,d[2]=h.text,d[3]=d[8],c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],d[2],f,f,h.stickerId,h.hotEmojiSize,f,f,[0,3],f,d[3],f,!0).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(e){return c.fe(c.db.table(16).fetch([[[h.threadKey,h.messageId]]]),function(e){var h=e.item;return c.seq([function(e){return d[13]=h.attachmentFbid,d[9]=c.createArray(),d[10]=(d[9].push(d[13]),d[9]),d[11]=(d[9].push(d[4]),d[9]),d[12]=c.toJSON(d[9]),c.sp(b("LSInsertOptimisticAttachment"),a[1],d[5],d[4],d[13],d[12],h.attachmentType,h.filename,f,h.hasMedia,h.hasXma)},function(e){return c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[4],d[12],h.playableUrl,h.playableUrlFallback,h.playableUrlExpirationTimestampMs,h.playableUrlMimeType,h.previewUrl,h.previewUrlFallback,h.previewUrlExpirationTimestampMs,h.previewUrlMimeType,h.previewWidth,h.previewHeight)}])})},function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return f!==f?c.sp(b("LSPredefineTraceForTask"),f,d[6],c.i64.to_string([0,46]),d[4]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[6],threadKey:a[1],offlineThreadingId:d[4],messageId:a[5],threadAttributionSource:a[6],sendType:[0,5],markThreadRead:!1,initiatingSource:a[7]})},function(b){return d[9]=new c.Map(),d[10]=d[9].set("optimisticSendMessageForward",a[1]),d[11]=d[9].set("fwdMsgID",a[5]),d[12]=c.toJSON(d[9]),d[7]=d[12],function(a){c.logger(a).info(a)}(d[7]),d[0]=d[4]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAppendDataTraceAddon.bs",["LS.bs","LSAppendDataTraceAddon","bs_belt_Option","killswitch"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){if(b("killswitch")("MESSENGER_WEB_DATA_TRACE_ID"))return window.Promise.resolve(void 0);else return b("LSAppendDataTraceAddon")(d,e,f,b("bs_belt_Option").getWithDefault(g,""),b("bs_belt_Option").getWithDefault(h,""),b("LS.bs").make(a))}f.call=a}),null);
__d("LSAppendDataTraceAddon.re",["LSAppendDataTraceAddon.bs"],(function(a,b,c,d,e,f){a=b("LSAppendDataTraceAddon.bs").call;f.call=a}),null);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddon.re"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f,g,h){return d("LSAppendDataTraceAddon.re").call(a,b,c,e,f,g,h)};g["default"]=a}),98);
__d("LSOptimisticSendMessage",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSLogEventAnnotate.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],a[7],a[8],a[14],a[15],a[16],a[17],a[18],a[19],a[21]).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[10]=a[9]===""?f:a[9],d[10]!==f?c.seq([function(e){return c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],d[0],d[0],[0,3],d[10],a[10],!0,!1)},function(e){return a[22]?d[11]=!1:d[11]=!0,d[11]?c.resolve():(d[12]=a[22].get("playable_url"),a[22],d[13]=a[22].get("playable_url_fallback"),a[22],d[14]=a[22].get("playable_url_expiration_timestamp_ms"),a[22],d[15]=a[22].get("playable_url_mime_type"),a[22],d[16]=a[22].get("preview_url"),a[22],d[17]=a[22].get("preview_url_fallback"),a[22],d[18]=a[22].get("preview_url_expiration_timestamp_ms"),a[22],d[19]=a[22].get("preview_url_mime_type"),a[22],d[20]=a[22].get("preview_width"),a[22],d[21]=a[22].get("preview_height"),a[22],d[22]=a[22].get("image_url"),a[22],d[23]=a[22].get("image_url_fallback"),a[22],d[24]=a[22].get("image_url_expiration_timestamp_ms"),a[22],d[25]=a[22].get("image_url_mime_type"),a[22],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[0],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21]))},function(a){return d[2]=[0,7]}]):c.seq([function(e){return c.i64.neq(a[7],f)?c.seq([function(e){return c.i64.neq(a[7],[53057,267535043])&&c.i64.neq(a[7],[85970,924785702])&&c.i64.neq(a[7],[85970,1004785694])&&c.i64.neq(a[7],[85970,1044785690])?c.seq([function(e){return d[13]=c.i64.to_string(a[7]),c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],c.i64.to_string(a[7]),d[13],[0,1],f,f,!0,!1)},function(e){return a[22]?d[12]=!1:d[12]=!0,d[12]?c.resolve():(d[14]=a[22].get("playable_url"),a[22],d[15]=a[22].get("playable_url_fallback"),a[22],d[16]=a[22].get("playable_url_expiration_timestamp_ms"),a[22],d[17]=a[22].get("playable_url_mime_type"),a[22],d[18]=a[22].get("preview_url"),a[22],d[19]=a[22].get("preview_url_fallback"),a[22],d[20]=a[22].get("preview_url_expiration_timestamp_ms"),a[22],d[21]=a[22].get("preview_url_mime_type"),a[22],d[22]=a[22].get("preview_width"),a[22],d[23]=a[22].get("preview_height"),a[22],d[24]=a[22].get("image_url"),a[22],d[25]=a[22].get("image_url_fallback"),a[22],d[26]=a[22].get("image_url_expiration_timestamp_ms"),a[22],d[27]=a[22].get("image_url_mime_type"),a[22],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21],d[22],d[23]))}]):c.resolve()},function(a){return d[11]=[0,2]}]):c.resolve(d[11]=[0,1])},function(a){return d[2]=d[11]}])},function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return a[24]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[24],d[3],c.i64.to_string([0,46]),d[0])},function(d){return c.nop(b("LSAppendDataTraceAddon.nop"),a[24],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[11],externalAttachmentUrl:a[9],platformRef:a[12],platformToken:a[13],replySourceId:a[14],replySourceType:a[15],sendType:d[2],markThreadRead:a[20]==null?!1:a[20],initiatingSource:a[23],skipUrlPreviewGen:a[25]})},function(e){return(a[20]==null?!1:a[20])?c.sp(b("LSOptimisticMarkThreadReadV2"),a[1],d[1]):c.resolve()},function(e){return d[4]=c.createArray(),d[5]=(d[4].push("optimisticSendMessage"),d[4]),d[6]=(d[4].push(a[1]),d[4]),d[7]=(d[4].push(d[0]),d[4]),d[8]=c.toJSON(d[4]),function(a){c.logger(a).info(a)}(d[8]),d[9]=new c.Map(),d[9].set("offline_threading_id",d[0]),d[9].set("task_id",d[3]),d[9].set("task_queue_name",c.i64.to_string(a[1])),d[9].set("task_label",c.i64.to_string([0,1])),c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,23],[0,0],d[9])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.ftr(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[e,e,e],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2],d)})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSInsertPhase2PendingTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=e:(b=a.item,c[0]=b.threadKey)})},function(d){return b.i64.neq(c[0],e)?b.seq([function(d){return b.db.table(2).add({taskId:void 0,taskValue:a[0],queueName:[b.i64.to_string(c[0]),"_multi_media"].join(""),context:"4",enqueueTimestampMs:b.i64.of_float(Date.now()),pluginType:a[1]})},function(a){return c[2]=e}]):b.resolve(c[2]=[0,1002])},function(a){return d[0]=c[2]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],[0,0])?c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[0],[0,0]).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),d[3],c.i64.neq(a[1],f)?a[2]!==f?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],f)?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSResumeMediaSendJob",["LSGetMessageAttributionParams","LSInsertPhase2PendingTask","LSIssueSendAttachmentMessageTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",f),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure))})},function(b){return d[4]=new c.Map(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],[-1,4294967293])?d[10]=!0:(c.i64.eq(d[11],[0,1])?d[14]=!0:(c.i64.eq(d[11],[0,3])?d[15]=!0:(c.i64.eq(d[11],[0,5])?d[16]=!0:(c.i64.eq(d[11],[0,13])?d[17]=!0:(c.i64.eq(d[11],[0,7])?d[18]=!0:(c.i64.eq(d[11],[0,9])?d[19]=!0:(c.i64.eq(d[11],[0,11])?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],[0,5])||c.i64.eq(d[11],[0,11])?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],[-1,4294967295])?d[14]=[0,5]:(c.i64.eq(d[11],[-1,4294967294])?(d[16]=d[2].get("should_transcode"),d[2],d[15]=d[16]?[0,1]:[0,3]):(c.i64.eq(d[11],[0,2])?d[16]=[0,3]:(c.i64.eq(d[11],[0,4])?(d[18]=d[2].get("send_by_server"),d[2],d[19]=d[2].get("use_double_phase"),d[2],d[17]=d[18]?d[19]?[0,13]:f:[0,5]):(c.i64.eq(d[11],[0,6])?(d[19]=d[2].get("use_double_phase"),d[2],d[18]=d[19]?[0,13]:f):(c.i64.eq(d[11],[0,14])?(d[20]=d[2].get("use_double_phase"),d[2],d[21]=d[2].get("should_transcode"),d[2],d[19]=d[20]?d[21]?[0,7]:[0,9]:f):(c.i64.eq(d[11],[0,8])?d[20]=[0,9]:(c.i64.eq(d[11],[0,10])?(d[22]=d[2].get("send_by_server"),d[2],d[21]=d[22]?f:[0,11]):(c.i64.eq(d[11],[0,12])?d[22]=f:d[22]=f,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],f)?c.seq([function(a){return c.fe(c.db.table(51).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],[0,5])||c.i64.eq(d[14],[0,11])?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=f:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],f)?(d[10]=d[2].get("send_by_server"),d[2],d[11]=d[2].get("use_double_phase"),d[2],d[12]=d[2].get("use_double_phase"),d[2],(d[10]?d[11]?c.i64.eq(d[5],[0,10]):c.i64.eq(d[5],[0,4]):d[12]?c.i64.eq(d[5],[0,12]):c.i64.eq(d[5],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],[0,5])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],f)?(c.i64.neq(a.fbid,f)?d[16]=f:d[16]=[0,9],d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(e){return d[14]=d[2].get("is_secure"),d[2],d[14]?c.seq([function(b){return d[16]=c.createArray(),d[17]=!1,d[18]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[23]=a.fbid,d[18]=c.i64.add(d[18],[0,1]),c.i64.neq(d[23],f)?d[24]=(d[16].push(d[23]),d[16]):0})},function(b){return d[19]=c.createArray(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[23]=a.metadata,d[23]!==f?d[24]=(d[19].push(d[23]),d[19]):0})},function(a){return d[20]=c.i64.of_int32(d[16].length),d[21]=c.i64.of_int32(d[19].length),c.i64.neq(d[20],d[18])||c.i64.neq(d[21],d[18])?d[22]=[0,11]:(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[22]=f),d[15]=d[22]}]):c.seq([function(e){return c.seq([function(b){return d[17]=c.createArray(),d[18]=!1,d[19]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[22]=a.fbid,d[19]=c.i64.add(d[19],[0,1]),c.i64.neq(d[22],f)?d[23]=(d[17].push(d[22]),d[17]):0})},function(e){return d[20]=c.i64.of_int32(d[17].length),c.i64.neq(d[20],d[19])||c.i64.eq(d[19],[0,0])?c.resolve(d[21]=[0,10002]):c.seq([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f,f],d[22]=c[0],d[23]=c[1],d[24]=c[2],d[25]=c[3],d[26]=c[4],c):(b=a.item,c=[b.threadKey,b.senderId,b.text,b.replySourceId,b.replySourceTypeV2],d[22]=c[0],d[23]=c[1],d[24]=c[2],d[25]=c[3],d[26]=c[4],c)})},function(e){return c.i64.eq(d[22],f)||c.i64.eq(d[23],f)?c.resolve((c.i64.eq(d[22],f)?d[29]=[0,10003]:d[29]=[0,10004],d[28]=d[29])):c.seq([function(a){return c.db.table(9).fetch([[[d[22]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[29]=f:(b=a.item,d[29]=b.threadType)})},function(b){return c.ftr(c.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f],d[31]=c[0],d[32]=c[1],d[33]=c[2],d[34]=c[3],c):(b=a.item,c=[b.platformRef,b.platformToken,b.initiatingSource,f],d[31]=c[0],d[32]=c[1],d[33]=c[2],d[34]=c[3],c)})},function(e){return c.i64.neq(d[29],f)?c.seq([function(e){return c.seq([function(e){return c.sp(b("LSGetMessageAttributionParams"),a[0]).then(function(a){return a=a,d[37]=a[0],d[38]=a[1],d[39]=a[2],a})},function(e){return c.i64.neq(d[37],f)?d[40]=d[37]:d[40]=[0,0],c.sp(b("LSIssueSendAttachmentMessageTask"),d[23],d[22],d[29],a[0],d[24],d[17],d[40],d[25],d[26],d[18],d[31],d[32],a[2])}])},function(a){return d[36]=f}]):c.resolve(d[36]=[0,10005])},function(a){return d[28]=d[36]}])},function(a){return d[21]=d[28]}])},function(a){return d[16]=d[21]}])},function(b){return c.i64.eq(d[16],f)?c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,6]})}):c.resolve()},function(a){return d[15]=d[16]}])},function(b){return c.i64.eq(d[15],f)?(d[16]=d[2].get("send_by_server"),d[2],d[17]=d[2].get("use_double_phase"),d[2],d[18]=d[2].get("use_double_phase"),d[2],(d[16]?d[17]?c.i64.eq([0,6],[0,10]):c.i64.eq([0,6],[0,4]):d[18]?c.i64.eq([0,6],[0,12]):c.i64.eq([0,6],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq([0,6],[-1,4294967295])?d[19]=[0,5]:(c.i64.eq([0,6],[-1,4294967294])?(d[21]=d[2].get("should_transcode"),d[2],d[20]=d[21]?[0,1]:[0,3]):(c.i64.eq([0,6],[0,2])?d[21]=[0,3]:(c.i64.eq([0,6],[0,4])?(d[23]=d[2].get("send_by_server"),d[2],d[24]=d[2].get("use_double_phase"),d[2],d[22]=d[23]?d[24]?[0,13]:f:[0,5]):(c.i64.eq([0,6],[0,6])?(d[24]=d[2].get("use_double_phase"),d[2],d[23]=d[24]?[0,13]:f):(c.i64.eq([0,6],[0,14])?(d[25]=d[2].get("use_double_phase"),d[2],d[26]=d[2].get("should_transcode"),d[2],d[24]=d[25]?d[26]?[0,7]:[0,9]:f):(c.i64.eq([0,6],[0,8])?d[25]=[0,9]:(c.i64.eq([0,6],[0,10])?(d[27]=d[2].get("send_by_server"),d[2],d[26]=d[27]?f:[0,11]):(c.i64.eq([0,6],[0,12])?d[27]=f:d[27]=f,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),c.i64.neq(d[19],f)?c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[19]})})},function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[15])))}])}]):c.i64.eq(d[5],[0,11])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],f)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],[0,13])?c.seq([function(e){return c.sp(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,14]})})},function(b){return d[1].set("main_job_succeeded",!0),c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",[0,11])))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[1],d[8]=d[1].get("resume_failed"),d[1],d[9]=d[1].get("error"),d[1],a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWChatForwardDialogQuery$Parameters",["MWChatForwardDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatForwardDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("MWBaseTheme.bs",[],(function(a,b,c,d,e,f){"use strict";a={};b={};c={light:a,dark:b,type:"VARIABLES"};d={};f.empty=c;f.Provider=d}),null);
__d("MWCombineThemeConfigs.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{light:Object.assign(a.light,b.light),dark:Object.assign(a.dark,b.dark),type:b.type}}f.combine=a}),null);
__d("MWSeparatorContainer.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,d=h.Children.toArray(a.children).filter(Boolean);return d.length===0?null:h.jsxs(h.Fragment,{children:[(b=a.beforeContent)!=null?b:null,h.jsx("div",{className:c("stylex")(a.xstyle),children:d.map(function(b,c){return h.jsxs(h.Fragment,{children:[c!==0&&a.separator,b]},"item-"+c)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSMessagingThreadAttributionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,65536];b=[0,65537];var g=[0,65538],h=[0,65539],i=[0,65540],j=[0,65541],k=[0,65542],l=[0,65543],m=[0,65544],n=[0,65545],o=[0,65546],p=[0,65547],q=[0,131072],r=[0,131073],s=[0,131074],t=[0,131075],u=[0,131076],v=[0,196608],w=[0,196609],x=[0,196610],y=[0,196611],z=[0,196612],A=[0,262144],B=[0,262145],C=[0,262146],D=[0,262147],E=[0,262148],F=[0,262149],G=[0,327680],H=[0,327681],I=[0,327682],J=[0,393216],K=[0,393217],L=[0,393218],M=[0,393219],N=[0,393220],O=[0,393221],P=[0,393222],Q=[0,393223],R=[0,393224],S=[0,393225],T=[0,458752],U=[0,458753],V=[0,458754],W=[0,524288],X=[0,524289],Y=[0,524290],Z=[0,524291],$=[0,589824],aa=[0,589825],ba=[0,589826],ca=[0,589827],da=[0,589828],ea=[0,655360],fa=[0,655361],ga=[0,720896],ha=[0,720897],ia=[0,786432],ja=[0,786433],ka=[0,786434],la=[0,786435],ma=[0,786436],na=[0,786437],oa=[0,851968],pa=[0,851969],qa=[0,851970],ra=[0,851971],sa=[0,917504],ta=[0,917505],ua=[0,917506],va=[0,917507],wa=[0,917508],xa=[0,917509],ya=[0,917510],za=[0,983040],Aa=[0,1048576],Ba=[0,1048577],Ca=[0,1048578],Da=[0,1114112],Ea=[0,1114113],Fa=[0,1114114],Ga=[0,1114115],Ha=[0,1114116],Ia=[0,1114117],Ja=[0,1114118],Ka=[0,1114119],La=[0,1179648],Ma=[0,1245184],Na=[0,1245185],Oa=[0,1245186],Pa=[0,1310720],Qa=[0,1310721],Ra=[0,1310722],Sa=[0,1310723],Ta=[0,1310724],Ua=[0,1310725],Va=[0,1310726],Wa=[0,1310727],Xa=[0,1310728],Ya=[0,1376256],Za=[0,1376257],$a=[0,1376258],ab=[0,1441792],bb=[0,1441793],cb=[0,1441794],db=[0,1441795],eb=[0,1507328],fb=[0,1507329],gb=[0,1507330],hb=[0,1507331],ib=[0,1572864],jb=[0,1572865],kb=[0,1572866],lb=[0,1572867],mb=[0,1572868],nb=[0,1572869],ob=[0,1572870],pb=[0,1572871],qb=[0,1572872],rb=[0,1572873],sb=[0,1572874],tb=[0,1638400],ub=[0,1638401],vb=[0,1638402],wb=[0,1703936],xb=[0,1703937],yb=[0,1703938],zb=[0,1769472],Ab=[0,1769473],Bb=[0,1835008],Cb=[0,1835009],Db=[0,1835010],Eb=[0,1835011],Fb=[0,1835012],Gb=[0,1900544],Hb=[0,1900545],Ib=[0,1966080],Jb=[0,1966081],Kb=[0,1966082],Lb=[0,1966083],Mb=[0,2031616],Nb=[0,2031617],Ob=[0,2097152],Pb=[0,2097153],Qb=[0,2097154],Rb=[0,2097155],Sb=[0,2097156],Tb=[0,2162688],Ub=[0,2162689],Vb=[0,2162690],Wb=[0,2162691],Xb=[0,2228224],Yb=[0,2228225],Zb=[0,2228226],$b=[0,2228227],ac=[0,2293760],bc=[0,2293761],cc=[0,2293762],dc=[0,2359296],ec=[0,2359297],fc=[0,2424832],gc=[0,2424833],hc=[0,2424834],ic=[0,2424835],jc=[0,2424836],kc=[0,2424837],lc=[0,2490368],mc=[0,2490369],nc=[0,2490370],oc=[0,2490371],pc=[0,2490372],qc=[0,2490373],rc=[0,2490374],sc=[0,2490375],tc=[0,2490376],uc=[0,2490377],vc=[0,2490378],wc=[0,2490379],xc=[0,2490380],yc=[0,2490381],zc=[0,2490382],Ac=[0,2490383],Bc=[0,2490384],Cc=[0,2555904],Dc=[0,2555905],Ec=[0,2555906],Fc=[0,2555907],Gc=[0,2555908],Hc=[0,2621440],Ic=[0,2686976],Jc=[0,2752512],Kc=[0,2818048],Lc=[0,2883584],Mc=[0,2883585],Nc=[0,2883586],Oc=[0,2949120],Pc=[0,2949121],Qc=[0,3014656],Rc=[0,3080192],Sc=[0,3145728],Tc=[0,3211264],Uc=[0,3211265],Vc=[0,3211266],Wc=[0,3211267],Xc=[0,3276800],Yc=[0,3276801],Zc=[0,3342336],$c=[0,3342337],ad=[0,3407872],bd=[0,3473408],cd=[0,3473409],dd=[0,3538944],ed=[0,3538945],fd=[0,3604480],gd=[0,3604481],hd=[0,3604482],id=[0,3670016],jd=[0,3735552],kd=[0,3801088];f.unknown=a;f.unknownTest=c;f.unknownFailureRetry=d;f.messengerInbox=e;f.messengerInboxInThread=b;f.messengerInboxThreadList=g;f.messengerInboxNestedFolder=h;f.messengerInboxRecentThreads=i;f.messengerInboxRemainingThreads=j;f.messengerInboxMessageSearch=k;f.messengerInboxImageSending=l;f.messengerInboxForward=m;f.messengerInboxArchivedThreads=n;f.messengerInboxPendingRequests=o;f.messengerInboxActiveContacts=p;f.messengerUniversalSearch=q;f.messengerUniversalSearchNullState=r;f.messengerUniversalSearchKeyPressed=s;f.messengerUniversalSearchMessageSearch=t;f.messengerUniversalSearchAdvancedContentSearch=u;f.montageAndActiveNow=v;f.montageAndActiveNowMontageInboxUnit=w;f.montageAndActiveNowActiveNow=x;f.montageAndActiveNowInboxComposer=y;f.montageAndActiveNowActiveAndHasStory=z;f.messengerActiveNowFriendsTab=A;f.messengerActiveNowFriendsTabFriendsTab=B;f.messengerActiveNowFriendsTabPlaceHolder=C;f.messengerActiveNowFriendsTabRecentActive=D;f.messengerActiveNowFriendsTabRecentActiveAndStory=E;f.messengerActiveNowFriendsTabContentDiscovery=F;f.messengerPendingRequests=G;f.messengerPendingRequestsInboxThreadList=H;f.messengerPendingRequestsPendingRequestsPage=I;f.messengerBroadcastFlow=J;f.messengerBroadcastFlowFromMessenger=K;f.messengerBroadcastFlowFromFb=L;f.messengerBroadcastFlowFromExternal=M;f.messengerBroadcastFlowFromFbNewsfeedSharesheet=N;f.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer=O;f.messengerBroadcastFlowFromFbShortsViewer=P;f.messengerBroadcastFlowForwardGutter=Q;f.messengerBroadcastFlowForwardLongclick=R;f.messengerBroadcastFlowMessengerPhotoView=S;f.messengerOmnipicker=T;f.messengerOmnipickerNullState=U;f.messengerOmnipickerKeyPressed=V;f.messengerNotification=W;f.messengerNotificationInThreadReply=X;f.messengerNotificationLongpressReply=Y;f.messengerNotificationLongpressReaction=Z;f.clickToMessengerAd=$;f.clickToMessengerAdFromNewsfeed=aa;f.clickToMessengerAdSendMessageCta=ba;f.clickToMessengerAdViewAndMessage=ca;f.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta=da;f.payments=ea;f.paymentsBubbleClick=fa;f.rtc=ga;f.rtcVoipIncall=ha;f.fbPage=ia;f.fbPageAboutCard=ja;f.fbPageProfileHeaderMessageButton=ka;f.fbPageProfileFooterMessageButton=la;f.fbPageProfileMoreDrawer=ma;f.fbPageResponsivenessContextCard=na;f.fbProfile=oa;f.fbProfileTimelineMessageButton=pa;f.fbProfileFacebookProfile=qa;f.fbProfileMessageButton=ra;f.fbSearch=sa;f.fbSearchContextualProfileActionBarFromSearch=ta;f.fbSearchSearchMessageButton=ua;f.fbSearchFbMessageSearchResults=va;f.fbSearchHighConfidenceCard=wa;f.fbSearchMentions=xa;f.fbSearchNullstateCta=ya;f.crypto=za;f.messengerMontageComposer=Aa;f.messengerMontageComposerFriendsTab=Ba;f.messengerMontageComposerFriendsTabStoryAndActiveNow=Ca;f.messengerMontageReply=Da;f.messengerMontageReplyInboxThreadListProfile=Ea;f.messengerMontageReplyReplyContext=Fa;f.messengerMontageReplyThreadNavBar=Ga;f.messengerMontageReplyInboxThreadListProfileAuthorProfile=Ha;f.messengerMontageReplyReplyContextAuthorProfile=Ia;f.messengerMontageReplyThreadNavBarAuthorProfile=Ja;f.messengerMontageReplyOneToOneChatThreadStoryBubble=Ka;f.messengerThreadMembersList=La;f.marketplace=Ma;f.marketplaceActivityBanner=Na;f.marketplaceSendMessage=Oa;f.fbStory=Pa;f.fbStoryViewerSheetMenu=Qa;f.fbStoryViewerSheetRow=Ra;f.fbStoryStoriesJewelNotification=Sa;f.fbStoryStoriesPushNotification=Ta;f.fbStoryStoriesViewerConsumerReply=Ua;f.fbStoryStoriesViewerConsumerArtifact=Va;f.fbStoryStoriesPageStoryConversations=Wa;f.fbStorySocialContextConversations=Xa;f.workspeed=Ya;f.workspeedComposerLikeButton=Za;f.workspeedComposerGifPicker=$a;f.mdotme=ab;f.mdotmeOrganicPost=bb;f.mdotmeMarketingEmail=cb;f.mdotmeMbsOffsiteEmail=db;f.customerChatPlugin=eb;f.customerChatPluginMobileRedirect=fb;f.customerChatPluginUpgradeFlow=gb;f.customerChatPluginReEngagement=hb;f.fbFeed=ib;f.fbFeedOrganicPost=jb;f.fbFeedOrganicPostViewAndMessage=kb;f.fbFeedQuestionTriggeredConvo=lb;f.fbFeedDynamicHoverCard=mb;f.fbFeedOrganicPostNewsfeedPagePostCta=nb;f.fbFeedOrganicPostNewsfeedBumperSmcta=ob;f.fbFeedBcfOpenChatButton=pb;f.fbFeedReactorsListMessageButton=qb;f.fbFeedReplyToAuthor=rb;f.fbFeedUfiSendSuggestions=sb;f.fbNotification=tb;f.fbNotificationJewelNotif=ub;f.fbNotificationPushNotif=vb;f.fbEvent=wb;f.fbEventMessageHost=xb;f.fbEventShareClassMaterials=yb;f.supportResources=zb;f.supportResourcesFrxAction=Ab;f.leadGenMessaging=Bb;f.leadGenMessagingPreSubmission=Cb;f.leadGenMessagingPostSubmission=Db;f.leadGenMessagingCrossChannelVerticalPresentAndroid=Eb;f.leadGenMessagingCrossChannelHscrollAndroid=Fb;f.messengerGraph=Gb;f.messengerGraphSelectContact=Hb;f.messengerChat=Ib;f.messengerChatFromJewelThreadList=Jb;f.messengerChatInThread=Kb;f.messengerChatForward=Lb;f.messengerArchivedThreads=Mb;f.messengerArchivedThreadsArchivedThreadsFolder=Nb;f.jewel=Ob;f.jewelThreadList=Pb;f.jewelSearch=Qb;f.jewelNewMessage=Rb;f.jewelNestedFolder=Sb;f.chatheads=Tb;f.chatheadsRecentThreads=Ub;f.chatheadsOverflow=Vb;f.chatheadsNewMessage=Wb;f.sidebar=Xb;f.sidebarContactsList=Yb;f.sidebarContactsSearch=Zb;f.sidebarContactsGroups=$b;f.messengerCommunityMessaging=ac;f.messengerCommunityMessagingCommunityChannel=bc;f.messengerCommunityMessagingFullscreenChat=cc;f.fbPlatformLogin=dc;f.fbPlatformLoginLoginConnectWithMessenger=ec;f.contactManager=fc;f.contactManagerContactShare=gc;f.contactManagerPeopleTabContactList=hc;f.contactManagerPeopleTabContactSearch=ic;f.contactManagerIconContactList=jc;f.contactManagerIconContactSearch=kc;f.messagingInboxInBlue=lc;f.messagingInboxInBlueThreadList=mc;f.messagingInboxInBluePeoplePicker=nc;f.messagingInboxInBlueInboxIcon=oc;f.messagingInboxInBlueSwipeFromRight=pc;f.messagingInboxInBlueMibNotification=qc;f.messagingInboxInBlueActiveNow=rc;f.messagingInboxInBlueSuggestedChats=sc;f.messagingInboxInBlueChatPreviewBanner=tc;f.messagingInboxInBlueThreadViewCoreNullState=uc;f.messagingInboxInBlueMessageRequests=vc;f.messagingInboxInBlueSpam=wc;f.messagingInboxInBlueFbGroups=xc;f.messagingInboxInBlueMessengerPeekStateButton=yc;f.messagingInboxInBlueMessengerPeekStateTooltip=zc;f.messagingInboxInBlueBroadcastFlow=Ac;f.messagingInboxInBlueThreadViewHeader=Bc;f.mibNotification=Cc;f.mibNotificationPushNotification=Dc;f.mibNotificationJewelNotification=Ec;f.mibNotificationDirectPushNotif=Fc;f.mibNotificationDirectJewelNotif=Gc;f.messengerRestrictedAccounts=Hc;f.armadilloCutoverThreadLinkingMessage=Ic;f.callsTab=Jc;f.miniShopViewMenuButton=Kc;f.sharesheet=Lc;f.sharesheetGeneralizedBroadcastFlow=Mc;f.sharesheetOffPlatformSharingHScroll=Nc;f.ufi=Oc;f.ufiGeneralizedBroadcastFlow=Pc;f.chatheadClickCollapsed=Qc;f.timelineMessageButton=Rc;f.directReplyIntent=Sc;f.fbGroups=Tc;f.fbGroupsInbox=Uc;f.fbGroupsPickerExistingChat=Vc;f.fbGroupsPickerJoinChat=Wc;f.devices=Xc;f.devicesStella=Yc;f.fbWellbeing=Zc;f.fbWellbeingIncallUnblockingNotification=$c;f.messengerDeepLinking=ad;f.readOnlyCutoverThread=bd;f.readOnlyCutoverThreadArmadilloThread=cd;f.armadilloThread=dd;f.armadilloThreadReadOnlyCutoverThread=ed;f.fbShorts=fd;f.fbShortsProfile=gd;f.fbShortsReactorsListMessageButton=hd;f.sendPlugin=id;f.sendAsMessageFromNt=jd;f.messengerPublicChatsMessaging=kd}),null);
__d("LSThreadAttributionTypeUtil.bs",["LSMessagingThreadAttributionType.bs","LSThreadAttributionStore.bs","bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=b("LSThreadAttributionStore.bs").getSource({TAG:1,_0:c},b("bs_int64").to_string(a));if(c.TAG===0)return c._0;a=c._0;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return b("LSMessagingThreadAttributionType.bs").fbFeedOrganicPost;else if(a==="inboxPendingRequests")return b("LSMessagingThreadAttributionType.bs").messengerInboxPendingRequests;else if(a==="fullscreenChat")return b("LSMessagingThreadAttributionType.bs").messengerCommunityMessagingFullscreenChat;else if(a==="sidebarGroupsList")return b("LSMessagingThreadAttributionType.bs").sidebarContactsGroups;else if(a==="jewel")return b("LSMessagingThreadAttributionType.bs").jewelThreadList;else if(a==="shop")return b("LSMessagingThreadAttributionType.bs").miniShopViewMenuButton;else if(a==="chatheadsOverflow")return b("LSMessagingThreadAttributionType.bs").chatheads;else if(a==="hovercard"||a==="feedDynamicHoverCard")return b("LSMessagingThreadAttributionType.bs").fbFeedDynamicHoverCard;else if(a==="search"||a==="messengerUniversalSearch")return b("LSMessagingThreadAttributionType.bs").messengerUniversalSearch;else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return b("LSMessagingThreadAttributionType.bs").fbStory;else if(a==="timeline"||a==="feedOrganicPost")return b("LSMessagingThreadAttributionType.bs").fbFeedOrganicPost;else if(a==="pageAboutCard")return b("LSMessagingThreadAttributionType.bs").fbPageAboutCard;else if(a==="inboxInThread")return b("LSMessagingThreadAttributionType.bs").messengerInboxInThread;else if(a==="notificationInThreadReply")return b("LSMessagingThreadAttributionType.bs").messengerNotificationInThreadReply;else if(a==="archieve")return b("LSMessagingThreadAttributionType.bs").messengerArchivedThreads;else if(a==="storyViewerSheetRow")return b("LSMessagingThreadAttributionType.bs").fbStoryViewerSheetRow;else if(a==="chatheadsNewMessage")return b("LSMessagingThreadAttributionType.bs").chatheadsNewMessage;else if(a==="event")return b("LSMessagingThreadAttributionType.bs").fbEvent;else if(a==="jewelSearch")return b("LSMessagingThreadAttributionType.bs").jewelSearch;else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return b("LSMessagingThreadAttributionType.bs").messengerInbox;else if(a==="jewelNewMessage")return b("LSMessagingThreadAttributionType.bs").jewelNewMessage;else if(a==="pendingRequests")return b("LSMessagingThreadAttributionType.bs").messengerPendingRequestsInboxThreadList;else if(a==="sidebarSearch")return b("LSMessagingThreadAttributionType.bs").sidebarContactsSearch;else if(a==="inboxRemainingThreads")return b("LSMessagingThreadAttributionType.bs").messengerInboxRemainingThreads;else if(a==="pagesHeader")return b("LSMessagingThreadAttributionType.bs").fbPageProfileHeaderMessageButton;else if(a==="inboxRecentThreads")return b("LSMessagingThreadAttributionType.bs").messengerInboxRecentThreads;else if(a==="chatheads")return b("LSMessagingThreadAttributionType.bs").chatheadsRecentThreads;else if(a==="pageResponsivenessCard")return b("LSMessagingThreadAttributionType.bs").fbPageResponsivenessContextCard;else if(a==="inboxSearch")return b("LSMessagingThreadAttributionType.bs").messengerInboxMessageSearch;else if(a==="jewelNestedFolder")return b("LSMessagingThreadAttributionType.bs").jewelNestedFolder;else if(a==="marketplace")return b("LSMessagingThreadAttributionType.bs").marketplaceSendMessage;else if(a==="feedOrganicPostViewAndMessage")return b("LSMessagingThreadAttributionType.bs").fbFeedOrganicPostViewAndMessage;else if(a==="adsCta")return b("LSMessagingThreadAttributionType.bs").clickToMessengerAdSendMessageCta;else if(a==="chatInThread")return b("LSMessagingThreadAttributionType.bs").messengerChatInThread;else if(a==="payments")return b("LSMessagingThreadAttributionType.bs").payments;else if(a==="inboxFolder")return b("LSMessagingThreadAttributionType.bs").messengerInboxNestedFolder;else if(a==="inboxArchived")return b("LSMessagingThreadAttributionType.bs").messengerInboxArchivedThreads;else if(a==="inboxActiveContacts")return b("LSMessagingThreadAttributionType.bs").messengerInboxActiveContacts;else if(a==="sidebarContactsList")return b("LSMessagingThreadAttributionType.bs").sidebarContactsList;else return b("LSMessagingThreadAttributionType.bs").unknown}f.getSource=a}),null);
__d("LSMessagingInitiatingSource.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.facebookChat=a;f.facebookInbox=c;f.roomsSideChat=d;f.facebookFullscreen=e}),null);
__d("LSMessagingInitiatingSourceHook.bs",["LSMessagingInitiatingSource.bs","MWLSThreadDisplayContext.bs","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Option").map(b("MWLSThreadDisplayContext.bs").useHook(void 0),function(a){if(a==="Inbox")return b("LSMessagingInitiatingSource.bs").facebookInbox;else if(a==="FullscreenChat")return b("LSMessagingInitiatingSource.bs").facebookFullscreen;else if(a==="ChatTab")return b("LSMessagingInitiatingSource.bs").facebookChat;else return b("LSMessagingInitiatingSource.bs").roomsSideChat})}f.useHook=a}),null);
__d("MWLSSendMessageUtils.bs",["MWChatMessageId.bs","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Option").flatMap(a,function(a){a=a.content;switch(a.TAG|0){case 0:case 1:case 2:return b("MWChatMessageId.bs").getMessageId(a._0.messageID)}})}f.getReplySourceId=a}),null);
__d("LSMessageReplySourceType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6];f.none=a;f.message=c;f.story=d;f.forward=e;f.fbStoryShare=b;f.igStoryShare=g;f.lightweightStatus=h}),null);
__d("LSMessageReplySourceTypeV2.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11];f.none=a;f.message=c;f.story=d;f.forward=e;f.fbStoryShare=b;f.igStoryShare=g;f.storyBase64Encoded=h;f.lightweightStatus=i;f.closeFriends=j;f.xma=k;f.igNote=l;f.closeFriendsNoteReply=m}),null);
__d("WorkChatMessageType.bs",[],(function(a,b,c,d,e,f){"use strict";a="text";b="gif";c="sticker";d="audio";e="file";f.text=a;f.gif=b;f.sticker=c;f.audio=d;f.file=e}),null);
__d("MWLSSendStickerMessage.bs",["LS.bs","LSDict","LSMailboxType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSOptimisticSendMessage","LSThreadAttributionTypeUtil.bs","LSTransaction.bs","MWLSSendMessageUtils.bs","MWPActor.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","WorkChatMessageType.bs","bs_caml_format","bs_caml_int64","bs_caml_option","bs_curry","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c,d,e){var f=a!==void 0?a:"unknown",g=c!==void 0?b("bs_caml_option").valFromOption(c):void 0,i=b("useReStore")(),j=b("MWPActor.bs").useActor(void 0);return h.useCallback(function(a){return function(c,e,h){var k=b("LSTransaction.bs").run(i,function(d){var i=b("MWThread_DEPRECATED.bs").toThreadKey(a),k=b("LSThreadAttributionTypeUtil.bs").getSource(i,f);return b("LSOptimisticSendMessage")(j,i,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,void 0,void 0,!1,b("bs_caml_format").caml_int64_of_string(c),void 0,void 0,void 0,k,void 0,void 0,b("bs_caml_option").option_get(b("MWLSSendMessageUtils.bs").getReplySourceId(e)),b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,void 0,void 0,void 0,!0,!0,b("LSDict").fromObject({playable_url:void 0,playable_url_fallback:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_mime_type:void 0,preview_url:h,preview_url_fallback:void 0,preview_url_expiration_timestamp_ms:void 0,preview_url_mime_type:void 0,preview_width:b("bs_caml_int64").zero,preview_height:b("bs_caml_int64").zero}),g!==void 0?b("bs_caml_option").valFromOption(g):void 0,void 0,void 0,b("LS.bs").make(d))},"readWrite");b("promiseDone")(k,function(a){if(d!==void 0)return b("bs_curry")._3(d,b("WorkChatMessageType.bs").sticker,1,a[0])},void 0)}},[i,j])}f.useSendStickerMessage=a}),null);
__d("MWChatForwardDialog.entrypoint",["JSResourceForInteraction","MWChatForwardDialogQuery$Parameters","MWXacGating.re","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{forwardQueryReference:{parameters:b("MWChatForwardDialogQuery$Parameters"),variables:{scale:d("WebPixelRatio").get(),suppress_xac_groups:!c("MWXacGating.re").isGroupsEnabled()}}}}},root:c("JSResourceForInteraction")("MWChatForwardDialog.react").__setRef("MWChatForwardDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatInteractionLog.bs",["QPLUserFlow"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a,c){var d=Date.now()|0;g.set(c,d);b("QPLUserFlow").start(a,{cancelOnUnload:!0,timeoutInMs:6e4,instanceKey:d})}function c(a,c,d){c=g.get(c);if(!(c==null)){b("QPLUserFlow").endFailure(a,d,{instanceKey:c});return}}function d(a,c){c=g.get(c);if(!(c==null)){b("QPLUserFlow").endSuccess(a,{instanceKey:c});return}}function e(a,c,d){c=g.get(c);if(!(c==null)){b("QPLUserFlow").addPoint(a,d,{instanceKey:c});return}}f.logStartUserFlow=a;f.logFailUserFlow=c;f.logSuccessUserFlow=d;f.logPointUserFlow=e}),null);
__d("MWLSForwardMessage.bs",["LS.bs","LSMediaUrl.bs","LSMessagingInitiatingSourceHook.bs","LSMessagingSource.bs","LSMessagingThreadAttributionType.bs","LSMessagingThreadTypeUtil.bs","LSOptimisticSendAttachmentForward","LSOptimisticSendMessageForward","LSTransaction.bs","MWChatInteractionLog.bs","MWChatThreadId.bs","MWLSSendStickerMessage.bs","MWLSThreadDisplayContext.bs","MWPActor.bs","MWThread_DEPRECATED.bs","ODS","Promise","ReQL.bs","bs_caml_format","bs_caml_option","bs_curry","bs_int64","promiseDone","qpl","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){a=b("MWLSThreadDisplayContext.bs").useHook(void 0);if(a!==void 0)if(a==="Inbox")return b("LSMessagingThreadAttributionType.bs").messengerInboxForward;else if(a==="ChatTab")return b("LSMessagingThreadAttributionType.bs").messengerChatForward;else return b("LSMessagingThreadAttributionType.bs").messengerBroadcastFlow;else return b("LSMessagingThreadAttributionType.bs").messengerBroadcastFlow}function a(a){var c=b("useReStore")(),d=b("MWPActor.bs").useActor(void 0),e=b("LSMessagingInitiatingSourceHook.bs").useHook(void 0),f=i(void 0);a=b("LSMessagingSource.bs").useHook(void 0);var g=b("MWLSSendStickerMessage.bs").useSendStickerMessage(a,b("bs_caml_option").some(e),void 0,void 0);return h.useCallback(function(a){return function(h){var i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),j=b("MWThread_DEPRECATED.bs").toThreadKey(a);if(typeof h==="number")return;if(h.TAG===0)return;h=h._0;var k=h.timestamp,l=h.messageId,m=h.threadId;b("ODS").bumpEntityKey(3185,"mw_forward","send");b("MWChatInteractionLog.bs").logPointUserFlow(b("qpl")._(25298392,"4881"),l,"sending");var n=function(a){return b("LSTransaction.bs").run(c,function(a){return b("LSOptimisticSendMessageForward")(d,j,i,m,k,l,f,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,b("LS.bs").make(a))},"readWrite").then(function(a){})};b("promiseDone")(b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages")),{hd:m,tl:{hd:k,tl:{hd:l,tl:0}}})).then(function(d){if(d===void 0)return n(void 0);var e=d.stickerId;if(e!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("attachments")),{hd:m,tl:{hd:l,tl:0}})).then(function(c){c=c!==void 0?b("LSMediaUrl.bs").Attachment.previewUrl(c):void 0;b("bs_curry")._4(g,a,b("bs_int64").to_string(e),void 0,c);return b("Promise").resolve(void 0)});else return n(void 0)}),function(a){b("ODS").bumpEntityKey(3185,"mw_forward","success");return b("MWChatInteractionLog.bs").logSuccessUserFlow(b("qpl")._(25298392,"4881"),l)},function(a){b("ODS").bumpEntityKey(3185,"mw_forward","failure");return b("MWChatInteractionLog.bs").logFailUserFlow(b("qpl")._(25298392,"4881"),l,"ls_error")})}},[c,JSON.stringify(d),e,f,g])}function c(a){var c=b("useReStore")(),d=b("MWPActor.bs").useActor(void 0),e=b("LSMessagingInitiatingSourceHook.bs").useHook(void 0),f=i(void 0);return h.useMemo(function(){return function(a,g,h){b("ODS").bumpEntityKey(3185,"mw_forward","send");h!==void 0&&b("MWChatInteractionLog.bs").logPointUserFlow(b("qpl")._(25298392,"4881"),h,"sending");var i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),j=b("MWThread_DEPRECATED.bs").toThreadKey(a);b("promiseDone")(b("LSTransaction.bs").run(c,function(a){return b("LSOptimisticSendAttachmentForward")(d,j,i,void 0,void 0,void 0,void 0,b("bs_caml_format").caml_int64_of_string(g),f,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,b("LS.bs").make(a))},"readWrite"),function(a){b("ODS").bumpEntityKey(3185,"mw_forward","success");if(h!==void 0)return b("MWChatInteractionLog.bs").logSuccessUserFlow(b("qpl")._(25298392,"4881"),h)},function(a){h!==void 0&&b("MWChatInteractionLog.bs").logFailUserFlow(b("qpl")._(25298392,"4881"),h,"ls_error"),b("ODS").bumpEntityKey(3185,"mw_forward","failure")})}},[c,JSON.stringify(d),e,f])}d=b("MWChatThreadId.bs").getFBID;f.useForwardMessage=a;f.useForwardAttachment=c;f.targetIdString=d}),null);
__d("MWV2ForwardMessage.bs",["LSInt64.bs","LSMessagingThreadTypeUtil.bs","MAWThreadId.bs","MAWVerifyThreadCutover.bs","MWChatMessageId.bs","MWLSForwardMessage.bs","MWPActor.bs","MWThread_DEPRECATED.bs","Promise","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_curry","bs_int64","cr:11272","cr:1564","cr:1746","cr:4175","promiseDone","react","unrecoverableViolation","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){return b("ReQLSubscription.bs").useFirstExn(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:c.threadKey,tl:0})},[a,JSON.stringify(c.threadKey)]))}function j(a,c){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:c,tl:0}))}function k(a,c,d){var e;return(e=b("ReQL.bs")).first(e.filter(e.mergeJoin(e.getKeyRange(e.fromTableAscending(a.table("participants")),{hd:c,tl:0}),e.fromTableAscending(a.table("contacts"))),function(a){return b("bs_caml").i64_neq(a[1].id,d)}))}function l(a,c){return b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("attachments")),{hd:c.threadKey,tl:{hd:c.messageId,tl:0}})},[a,JSON.stringify(c.threadKey),c.messageId]))}function a(a){var c=b("useReStore")(),d=i(c,a),e=l(c,a),f=b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType),g=b("MWPActor.bs").useActor(void 0),m=b("bs_caml").i64_neq(g,a.senderId),n=b("MWLSForwardMessage.bs").useForwardMessage(void 0),o=b("cr:11272")==null?void 0:b("bs_curry")._1(b("cr:11272").useForwardMessage,c),p=b("cr:1564")==null?void 0:b("bs_curry")._1(b("cr:1564").useForwardMessage,c),q=b("cr:1746")==null?void 0:b("bs_curry")._1(b("cr:1746").useForwardMessage,c),r=b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(a.threadKey),a.messageId,b("bs_int64").to_string(a.timestampMs)),s=b("cr:4175")==null?void 0:b("bs_curry")._2(b("cr:4175").call,c,g),t=function(f){var h=b("MWThread_DEPRECATED.bs").toThreadKey(f),i=b("Promise").all([b("MAWThreadId.bs").isSecureThreadId(c,h),j(c,h),k(c,h,g)]).then(function(c){var i=c[2],j=c[1],k=c[0];return b("MAWVerifyThreadCutover.bs").verifyThreadCutover(h).then(function(c){c=k||c;if(q!==void 0&&!c)return b("bs_curry")._6(q,f,d,a,m,e,g);if(o!==void 0)if(s!==void 0&&j!==void 0){b("bs_curry")._2(o,f,a.messageId);return b("bs_curry")._2(s,j,i)}else return b("bs_curry")._2(o,f,a.messageId);else return b("unrecoverableViolation")("We won't reach to this step, if you are in QE, you should use secure forward","messenger_web_product")})});b("promiseDone")(i,void 0,void 0)},u=function(f){var h=b("MWThread_DEPRECATED.bs").toThreadKey(f),i=b("Promise").all([b("MAWThreadId.bs").isSecureThreadId(c,h),j(c,h),k(c,h,g)]).then(function(c){var g=c[2],i=c[1],j=c[0];return b("MAWVerifyThreadCutover.bs").verifyThreadCutover(h).then(function(c){c=j||c;if(p!==void 0&&c)if(s!==void 0&&i!==void 0){b("bs_curry")._5(p,f,d,a,m,e);return b("bs_curry")._2(s,i,g)}else return b("bs_curry")._5(p,f,d,a,m,e);else return b("bs_curry")._2(n,f,r)})});b("promiseDone")(i,void 0,void 0)};return h.useMemo(function(){if(f)return t;else return u},[f,t,u,b("LSInt64.bs").string(d.threadKey),a.messageId])}f.$MAWAcceptMessageRequest$requireCond=b("cr:4175");f.$MAWForwardMessage$requireCond=b("cr:11272");f.$MAWForwardMessageFromSecureThread$requireCond=b("cr:1746");f.$MAWFowardMessageFromOpenThread$requireCond=b("cr:1564");f.useForwardMessage=a}),null);
__d("MWChatInteractionLog.re",["MWChatInteractionLog.bs"],(function(a,b,c,d,e,f){a=b("MWChatInteractionLog.bs").logStartUserFlow;f.logStartUserFlow=a}),null);
__d("useMWChatForward",["MWChatForwardDialog.entrypoint","MWChatInteractionLog.re","MWChatMessageId.re","qpl","react","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a){var b=a.dropToggle,e=a.forwardDialogType,f=a.messageID,g=a.onClose,j=a.onSend;a=i(null);var k=c("useCometEntryPointDialog")(c("MWChatForwardDialog.entrypoint"),{}),l=k[0];k=h(function(){var a=d("MWChatMessageId.re").getMessageId(f);a!=null&&d("MWChatInteractionLog.re").logStartUserFlow(c("qpl")._(25298392,"4881"),a);l({dropToggle:b,forwardDialogType:e,messageID:f,onSend:j},g)},[j,l,f,g,e,b]);return{onClick:k,triggerRef:a}}g["default"]=a}),98);
__d("LsTargetType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").neg_one;c=b("bs_caml_int64").zero;d=b("bs_caml_int64").one;e=[0,2];b=[0,3];var g=[0,4],h=[0,5],i=[0,6],j=[0,7],k=[0,8],l=[0,9],m=[0,10],n=[0,11],o=[0,12],p=[0,13],q=[0,14],r=[0,15],s=[0,16],t=[0,17],u=[0,18],v=[0,19],w=[0,20],x=[0,21],y=[0,22],z=[0,23],A=[0,24],B=[0,25],C=[0,26],D=[0,27],E=[0,28],F=[0,29],G=[0,30],H=[0,31],I=[0,32],J=[0,33],K=[0,34],L=[0,35],M=[0,36],N=[0,37],O=[0,38],P=[0,39],Q=[0,40],R=[0,41],S=[0,42],T=[0,43],U=[0,44],V=[0,45],W=[0,46],X=[0,47],Y=[0,48],Z=[0,49],$=[0,50],aa=[0,51],ba=[0,52],ca=[0,53],da=[0,54],ea=[0,55],fa=[0,56],ga=[0,57],ha=[0,58],ia=[0,59],ja=[0,60],ka=[0,61],la=[0,62],ma=[0,63],na=[0,64],oa=[0,65],pa=[0,66],qa=[0,67],ra=[0,68],sa=[0,69],ta=[0,70],ua=[0,71],va=[0,72],wa=[0,73],xa=[0,74],ya=[0,75],za=[0,76],Aa=[0,77],Ba=[0,78],Ca=[0,79],Da=[0,80];f.cymkAdd=a;f.cymkViewProfile=c;f.cymkWave=d;f.inboxleft=e;f.inboxleftCall=b;f.inboxleftCamera=g;f.inboxleftRtc=h;f.inboxright=i;f.inboxrightDelete=j;f.inboxrightMore=k;f.inboxrightMute=l;f.inboxrightUnmute=m;f.instantGamePlayGame=n;f.messageRequestAccept=o;f.messageRequestDecline=p;f.messengerAdsCta=q;f.rtcCanonicalCallAgain=r;f.rtcCanonicalCallBack=s;f.rtcGroupCallJoinCall=t;f.rtcGroupJoinVideoChat=u;f.rtcScheduledCall=v;f.seeAll=w;f.reaction=x;f.reactionPlus=y;f.mention=z;f.replyMessage=A;f.replyButton=B;f.phoneNumber=C;f.attachmentVideo=D;f.attachmentImage=E;f.attachmentGif=F;f.voiceClip=G;f.tombstoneView=H;f.messageBubble=I;f.attachmentAudio=J;f.attachmentKeyframe=K;f.xmaWebUrl=L;f.xmaRtcMissedVideo=M;f.xmaRtcMissedAudio=N;f.xmaLiveLocation=O;f.xmaLocationSharing=P;f.forwardIcon=Q;f.xmaOpenNative=R;f.sticker=S;f.address=T;f.forwardButton=U;f.removeButton=V;f.removeForYouself=W;f.removeForEveryone=X;f.moreButton=Y;f.copyButton=Z;f.callPhoneNumber=$;f.copyPhoneNumber=aa;f.messageProfileIcon=ba;f.viewFacebookProfile=ca;f.viewIgProfile=da;f.gotToChat=ea;f.xmaRtcVideoEnded=fa;f.xmaRtxAudioEnded=ga;f.saveButton=ha;f.confirmRemove=ia;f.cancelRemove=ja;f.xmaShopsPdp=ka;f.inboxrightArchive=la;f.reactionIcon=ma;f.xmaContactShare=na;f.xmaCustomerInformationTemplate=oa;f.xmaRtcMissedGroupVideo=pa;f.xmaRtcMissedGroupAudio=qa;f.xmaRtcNewAudioDefault=ra;f.xmaAppointmentRequested=sa;f.xmaAppointmentConfirmed=ta;f.messengerThread=ua;f.inboxrightFavorite=va;f.inboxrightUnfavorite=wa;f.inboxrightUnbump=xa;f.longpressinboxUnbump=ya;f.longpressinboxMute=za;f.longpressinboxFavorite=Aa;f.longpressinboxUnfavorite=Ba;f.dismissMaxFavorite=Ca;f.xmaPollPreview=Da}),null);
__d("MWChatColors.bs",[],(function(a,b,c,d,e,f){"use strict";a={replyToOriginal:{backgroundColor:"xmd5bsh",color:"xi81zsa"},outgoingForwarded:{color:"xkxfvhb"},incomingForwarded:{color:"x12scifz"},outgoing:{color:"x14ctfv"},incoming:{color:"xzsf02u"}};b={action:{marginStart:"x1mh8g0r",marginEnd:"x11i5rnm",width:"xvy4d1p",height:"xxk0z11",display:"x78zum5",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",flexShrink:"x2lah0s",alignContent:"xc26acl",alignItems:"x6s0dn4",justifyContent:"xl56j7k",textAlign:"x2b8uid",cursor:"x1ypdohk",":hover":{backgroundColor:"x15vn3sj"},position:"x1n2onr6"},icon:{height:"x17rw0jw",width:"x17z2i9w",opacity:"x197sbye",":active":{opacity:"x4gyw5p"},":hover":{opacity:"x1o7uuvo"}},svgStroke:{stroke:"xmb71p3",fill:"xbh8q5q"},svgFill:{fill:"x148u3ch"}};c={styles:b};f.styles=a;f.MessageActions=c}),null);
__d("LsActionCategory.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9];f.unknown=a;f.impression=c;f.click=d;f.longClick=e;f.swipe=b;f.scroll=g;f.reactionPlus=h;f.doubleClick=i;f.lock=j;f.raiseDevice=k}),null);
__d("UseMWChatForward.re",["useMWChatForward"],(function(a,b,c,d,e,f){a=b("useMWChatForward");f.useMWChatForwardTypeChecked=a;c=a;f.useMWChatForward=c}),null);
__d("MWChatForwardAction.bs",["CometPressable.react","LsTargetType.bs","MWChatColors.bs","MWLSLogMessageClick.bs","MWTooltip.react","ODS","UseMWChatForward.re","bs_caml_option","bs_curry","gkx","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("MWChatColors.bs").MessageActions.styles,k={icon:{opacity:"x1hc1fzr"}};function l(a){}var m=i.jsx("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36",children:i.jsxs("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:[i.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),i.jsx("path",{className:(h||(h=b("stylex")))(j.svgFill),d:"M22.001,11.0081937 L19,11.0081937 L19,23.007676 C19,23.5599911 18.5525,24.0073413 18,24.0073413 C17.448,24.0073413 17,23.5599911 17,23.007676 L17,11.0081937 L13.998,11.0081937 C13.199,11.0081937 12.7225,10.1169921 13.166,9.45171483 L17.1675,3.44572576 C17.5635,2.85142475 18.436,2.85142475 18.832,3.44572576 L22.8335,9.45171483 C23.2765,10.1169921 22.8,11.0081937 22.001,11.0081937 M24,31 L12,31 C9.791,31 8,29.2105991 8,27.0028383 L8,18.0103492 C8,15.8030883 9.791,14.0131875 12,14.0131875 L14,14.0131875 C14.5525,14.0131875 15,14.4610376 15,15.0128528 C15,15.5646681 14.5525,16.0120183 14,16.0120183 L12,16.0120183 C10.8955,16.0120183 10,16.9067187 10,18.0103492 L10,27.0028383 C10,28.1064688 10.8955,29.0011693 12,29.0011693 L24,29.0011693 C25.1045,29.0011693 26,28.1064688 26,27.0028383 L26,18.0103492 C26,16.9067187 25.1045,16.0120183 24,16.0120183 L22,16.0120183 C21.448,16.0120183 21,15.5646681 21,15.0128528 C21,14.4610376 21.448,14.0131875 22,14.0131875 L24,14.0131875 C26.2095,14.0131875 28,15.8030883 28,18.0103492 L28,27.0028383 C28,29.2105991 26.2095,31 24,31"})]})});function n(a,c){b("ODS").bumpEntityKey(3185,"mwchat_actions","forward");b("MWLSLogMessageClick.bs").logMessageClicked(a,b("LsTargetType.bs").forwardIcon,void 0,void 0);if(c!==void 0)return b("bs_curry")._1(c.onClick,void 0)}function a(a){var c=a.onForward,d=a.label,e=a.messageID,f=a.forwardDialogType;a=a.dropToggle;f=f!==void 0?f:"open_";a=a!==void 0?a:!1;c=b("UseMWChatForward.re").useMWChatForward({onClose:l,onSend:b("bs_curry").__1(c),messageID:e,forwardDialogType:f,dropToggle:a});var g=c==null?void 0:b("bs_caml_option").some(c);return i.jsx(b("MWTooltip.react"),{tooltip:d,align:"middle",position:"above",children:i.jsx("div",{className:(h||(h=b("stylex")))(j.action),children:i.jsx(b("CometPressable.react"),{"aria-label":d,role:b("gkx")("1224637")?"menuitem":"button",expanding:!0,testid:"messenger_forward_menu_button",onPress:function(a){return n(e,g)},overlayDisabled:!0,children:i.jsx("div",{className:h(j.icon,k.icon),children:m})})})})}c=a;f.sharedStyles=j;f.styles=k;f.noop=l;f.icon=m;f.onOpenForwardDialog=n;f.make=c}),null);
__d("MWMessageCellKeyCommands.bs",["CometComponentWithKeyCommands.react","MWV2MessageRowActionsContext.bs","bs_curry","cometGetKeyCommandConfig","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c;a=a.children;var d=h.useContext((c=b("MWV2MessageRowActionsContext.bs")).context),e=d.openReactionsMenu,f=h.useCallback(function(a){return b("bs_curry")._1(e.current,void 0)},[e]);d=h.useContext(c.context);var g=d.replyToMessage,i=h.useCallback(function(a){return b("bs_curry")._1(g.current,void 0)},[g]);d=h.useContext(c.context);var j=d.forwardMessage,k=h.useCallback(function(a){return b("bs_curry")._1(j.current,void 0)},[j]);d=h.useContext(c.context);var l=d.removeMessage,m=h.useCallback(function(a){return b("bs_curry")._1(l.current,void 0)},[l]);c=h.useMemo(function(){var a,c=[],d=(a=b("cometGetKeyCommandConfig")).getCometAndGeminiKeyCommandConfig("chats","likeMessage",f);c.push(d);d=a.getCometAndGeminiKeyCommandConfig("chats","replyToMessage",i);c.push(d);d=a.getCometAndGeminiKeyCommandConfig("chats","forwardMessage",k);c.push(d);d=a.getCometAndGeminiKeyCommandConfig("chats","removeMessage",m);c.push(d);return c},[f,i,k,m]);return h.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:c,xstyle:!1,children:a})}c=a;f.keyCommands=c}),null);
__d("LSMessageContentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,4];e=[0,8];b=[0,16];var g=[0,32],h=[0,64],i=[0,128],j=[0,256],k=[0,512],l=[0,1024],m=[0,2048],n=[0,4096],o=[0,8192],p=[0,16384],q=[0,32768],r=[0,65536],s=[0,131072],t=[0,262144];f.text=a;f.mediaPreview=c;f.audioClip=d;f.xmaFallback=e;f.lwaWave=b;f.admin=g;f.fileAttachment=h;f.glyph=i;f.tombstone=j;f.storyReply=k;f.singleXma=l;f.hscrollXma=m;f.sticker=n;f.forwardIndicator=o;f.animatedImage=p;f.nullState=q;f.encryptionPlaceholder=r;f.futureproofPlaceholder=s;f.unavailablePlaceholder=t}),null);
__d("MWPBaseMessageListRowActions.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{alignItems:"x6s0dn4",width:"x1ll7btr",display:"x78zum5"},outgoing:{flexDirection:"x15zctf7"},incoming:{flexDirection:"x1q0g3np"}};function k(a){var c=a.outgoing;a=a.children;return i.jsx("div",{role:"none",className:(h||(h=b("stylex")))(j.root,c?j.outgoing:j.incoming),children:a})}d={make:k};function a(a){a=a.children;return i.jsx("div",{children:a})}e={make:a};var l={root:{flexShrink:"x2lah0s",display:"x78zum5",flexDirection:"xdt5ytf",width:"x1ll7btr",justifyContent:"xl56j7k",flexGrow:"x1iyjqo2",position:"x1n2onr6",zIndex:"x1n327nk"},moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn"},outgoing:{paddingEnd:"x1mpkggp"},incoming:{paddingStart:"x1t2a60a"}};function c(a){var c=a.children,d=a.hasReactions,e=a.outgoing;a=a.ariaHidden;a=a!==void 0?a:!1;return i.jsx("div",{"aria-hidden":a,className:(h||(h=b("stylex")))(l.root,d?l.moveUpToAccountForReactions:!1,e?l.outgoing:l.incoming),children:i.jsx(k,{outgoing:e,children:c})})}a={styles:l,make:c};f.ActionsList=d;f.ActionsListItem=e;f.Container=a}),null);
__d("MDSContextualMenuIcon.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){return h.jsxs("svg",{width:"22px",height:"22px",viewBox:"0 0 22 22",children:[h.jsx("circle",{cx:"11",cy:"6",r:"2",strokeWidth:"1px",fill:"var(--placeholder-icon)"}),h.jsx("circle",{cx:"11",cy:"11",r:"2",strokeWidth:"1px",fill:"var(--placeholder-icon)"}),h.jsx("circle",{cx:"11",cy:"16",r:"2",strokeWidth:"1px",fill:"var(--placeholder-icon)"})]})}c=a;f.make=c}),null);
__d("MWPCanRemoveMessageGlobally.bs",["LSMessageThreadUnsendabilityStatus.bs","bs_belt_Option","bs_caml"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("bs_belt_Option").mapWithDefault(a.cannotUnsendReason,!0,function(a){return b("bs_caml").i64_eq(a,b("LSMessageThreadUnsendabilityStatus.bs").canUnsend)});c=b("bs_belt_Option").mapWithDefault(c.cannotUnsendReason,!0,function(a){return b("bs_caml").i64_eq(a,b("LSMessageThreadUnsendabilityStatus.bs").canUnsend)});if(a)return c;else return!1}f.make=a}),null);
__d("MWV2LogMessageClick.bs",["LSDatabaseDeferred.bs","LSMessagingThreadTypeUtil.bs","LsActionCategory.bs","Promise","ReQL.bs","UserAgentData","bs_caml_int64","bs_caml_option","bs_int64","promiseDone","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("LsMessageClickFalcoEvent").__setRef("MWV2LogMessageClick.bs");function a(a,c,d,e){var f=d!==void 0?b("bs_caml_option").valFromOption(d):void 0;e=b("LSDatabaseDeferred.bs").db.then(function(d){var e=a.threadKey;d=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:e,tl:0})).then(function(d){d!==void 0&&!b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType)&&g.onReady(function(d){d.log(function(){var d={};f!==void 0&&(d.action=f);d.browserName=b("UserAgentData").browserName;return{click:{category:b("bs_caml_int64").to_int32(b("LsActionCategory.bs").click)},click_target:{type:b("bs_caml_int64").to_int32(c)},thread:{id:b("bs_int64").to_string(a.threadKey),key:void 0,type:void 0},message:{id:a.messageId,sender_id:void 0,sent_time:b("bs_caml_int64").to_float(a.timestampMs)},xma:void 0,extra:JSON.stringify(d)}})});return b("Promise").resolve(void 0)});b("promiseDone")(d,void 0,void 0);return b("Promise").resolve(void 0)});b("promiseDone")(e,void 0,void 0)}f.logger=g;f.log=a}),null);
__d("MWV2MessageRowIsRowFocusedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){}function c(a){}e={setFocused:a,setIsDialogOpened:c,isDialogOpened:!1};var i=h.createContext(e);function d(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{value:a,children:b})}b={make:d};f.emptyValue=e;f.context=i;f.Provider=b}),null);
__d("MWV2ContextualActionsButton.bs",["fbt","CometDeferredPopoverTrigger.react","CometPressable.react","JSResourceForInteraction","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LsTargetType.bs","MAWGating.bs","MDSContextualMenuIcon.bs","MWCMThreadTypes.bs","MWLSFeatureLimitedStatus.bs","MWPActor.bs","MWPCanRemoveMessageGlobally.bs","MWTooltip.react","MWV2LogMessageClick.bs","MWV2MessageRowActionsContext.bs","MWV2MessageRowIsRowFocusedContext.bs","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_obj","bs_caml_option","bs_curry","gkx","qex","react","requireDeferred","stylex","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("requireDeferred")("MWV2ContextualActionsMenuDeferred.react").__setRef("MWV2ContextualActionsButton.bs"),l={action:{marginStart:"x1mh8g0r",marginEnd:"x11i5rnm",width:"xvy4d1p",height:"xxk0z11",display:"x78zum5",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",flexShrink:"x2lah0s",alignContent:"xc26acl",alignItems:"x6s0dn4",justifyContent:"xl56j7k",textAlign:"x2b8uid",cursor:"x1ypdohk",":hover":{backgroundColor:"x15vn3sj"},position:"x1n2onr6"},icon:{height:"x17rw0jw",width:"x17z2i9w",opacity:"x197sbye",":active":{opacity:"x4gyw5p"},":hover":{opacity:"x1o7uuvo"}}};function m(a){}function a(a){var c=a.message,d=a.thread,e=a.showForwardActionInContextualMenu,f=a.showReplyActionInContextualMenu,h=a.canRemoveMessageGlobally,n=a.closeActionsMenu,o=a.setMoreMenuOpen;a=a.extraActions;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var p=b("useReStore")(),q=g._("__JHASH__I1DdCdLzOkz__JHASH__"),r=b("MWPCanRemoveMessageGlobally.bs").make(d,c),s=b("MWCMThreadTypes.bs").isJoinedCMThread(d.threadType),t=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){if(s)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(p.table("participants")),{hd:d.threadKey,tl:{hd:c.senderId,tl:0}});else return b("SortedAsyncIterable.bs").empty(void 0)},[p,JSON.stringify(d.threadKey)])),u=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){if(s)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(p.table("contacts")),{hd:c.senderId,tl:0});else return b("SortedAsyncIterable.bs").empty(void 0)},[JSON.stringify(c.senderId),p])),v=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").adminRecallMessage,d),w=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").reportMessageToAdmin,d),x=b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType),y=(!x||b("MAWGating.bs").isFeatureLimitEnabled(void 0))&&b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(void 0),z=!y&&b("gkx")("1840885"),A=b("MWPActor.bs").useActor(void 0);u=u!==void 0?b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").isCommunityBotPage,u),!1):!1;var B=b("qex")._("898")===!0&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").pinnedMessagesV2,d)&&!c.isUnsent,C=c.isUnsent;C=s?C?!1:r?!0:v:x?!y&&(b("MAWGating.bs").isUnsendGlobalEnabled(void 0)&&b("bs_caml").i64_eq(c.senderId,A)&&!c.isUnsent||b("MAWGating.bs").isUnsendLocallyEnabled(void 0)):z;r=b("useCometLazyDialog")(b("JSResourceForInteraction")("MWV2RemoveMessageDialog").__setRef("MWV2ContextualActionsButton.bs"));var D=r[0];v=t!==void 0?b("bs_belt_Option").getWithDefault(t.isAdmin,!1):!1;x=c.unsentTimestampMs;y=x!==void 0;z=b("MWCMThreadTypes.bs").isJoinedCMThread(d.threadType)&&w&&!v&&b("bs_caml").i64_neq(A,c.senderId)&&!y&&!u;r=b("MWCMThreadTypes.bs").isJoinedCMThread(d.threadType)&&b("bs_caml").i64_neq(A,c.senderId)&&!y;t=j.useCallback(function(a){a={message:c,thread:d,onClose:m};return D(a,m)},[c,D]);x=j.useContext(b("MWV2MessageRowActionsContext.bs").context);var E=x.removeMessage;C?E.current=t:E.current=m;var F=j.useCallback(function(a){if(b("gkx")("3417")){E.current=m;return}},[E]);j.useEffect(function(){return F},[F]);w=j.useContext(b("MWV2MessageRowIsRowFocusedContext.bs").context);if(!(e||f||B||C||r||b("bs_caml_obj").caml_notequal(a,null)))return null;var G=w.setFocused;return j.jsx(b("CometDeferredPopoverTrigger.react"),{onVisibilityChange:function(a){b("bs_curry")._1(o,function(b){return a});return b("bs_curry")._1(G,function(b){return a})},popoverResource:k,popoverProps:{showForwardActionInContextualMenu:e,showReplyActionInContextualMenu:f,showPinMessageActionInContextualMenu:B,showUnsendInContextualMenu:C,showReportCommunityMessageToAdmin:z,showReportCommunityMessageToFacebook:r,canRemoveMessageGlobally:h,closeActionsMenu:n,message:c,extraActions:a},popoverType:"menu",align:"middle",position:"above",children:function(a,d){var e=function(a){b("bs_curry")._1(d,void 0);return b("MWV2LogMessageClick.bs").log(c,b("LsTargetType.bs").moreButton,void 0,void 0)};return j.jsx(b("MWTooltip.react"),{tooltip:q,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":q,expanding:!0,ref:a,testid:"messenger_contextual_actions_button",onPress:e,overlayDisabled:!0,children:j.jsx("div",{className:(i||(i=b("stylex")))(l.action),children:j.jsx("div",{className:i(l.icon),children:j.jsx(b("MDSContextualMenuIcon.bs").make,{})})})})})}})}c=a;f.contextualActionsMenuDeferred=k;f.styles=l;f.noop=m;f.make=c}),null);
__d("MWV2ForwardMessageButton.bs",["fbt","LSBitFlag.bs","LSMessageContentType.bs","LSMessagingThreadTypeUtil.bs","MAWGating.bs","MWChatForwardAction.bs","MWChatMessageId.bs","MWV2ForwardMessage.bs","ReQL.bs","ReQLSubscription.bs","bs_caml_format","bs_caml_obj","bs_int64","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a,c){var d=b("useReStore")();return b("ReQLSubscription.bs").useFirstExn(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:c.threadKey,tl:0})},[d,JSON.stringify(c.threadKey)]))}function a(a){a=a.message;var c=b("useReStore")();c=j(c,a);var d=b("MAWGating.bs").isForwardEnabled(void 0)&&b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType),e=b("MAWGating.bs").isCrossForwardEnabled(void 0);d=d?e?"cross_transport":"secure":e?"cross_transport":"open_";e=b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(a.threadKey),a.messageId,b("bs_int64").to_string(a.timestampMs));var f=b("MWV2ForwardMessage.bs").useForwardMessage(a);c=!b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType);a=b("LSBitFlag.bs").has(b("LSMessageContentType.bs").text,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").animatedImage,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").mediaPreview,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").audioClip,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").storyReply,a.displayedContentTypes)||b("bs_caml_obj").caml_equal(a.stickerId,b("bs_caml_format").caml_int64_of_string("369239263222822"))||b("bs_caml_obj").caml_equal(a.stickerId,b("bs_caml_format").caml_int64_of_string("369239343222814"))||b("bs_caml_obj").caml_equal(a.stickerId,b("bs_caml_format").caml_int64_of_string("369239383222810"));c=c&&!a;return i.jsx(b("MWChatForwardAction.bs").make,{onForward:f,label:g._("__JHASH__GvPr2MwluxY__JHASH__"),messageID:e,forwardDialogType:d,dropToggle:c})}c=a;f.make=c}),null);
__d("MessagingLoggingUtilsAttachmentTypeInt.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29];f.text=a;f.none=c;f.fbVoiceMessage=d;f.like=e;f.sticker=b;f.videoMessage=g;f.gif=h;f.$$location=i;f.image=j;f.application=k;f.video=l;f.audio=m;f.messengerInvite=n;f.share=o;f.liveLocation=p;f.lightweightAction=q;f.fakeNewsLink=r;f.p2pPayment=s;f.montageDirect=t;f.sphericalPhoto=u;f.reaction=v;f.story=w;f.selfieSticker=x;f.soundBite=y;f.armadilloSysPacket=z;f.deleteForMe=A;f.unsend=B;f.unsendReaction=C;f.poll=D;f.avatarLike=E}),null);
__d("MWV2MessageReactionButton.bs",["LSMessagingThreadTypeUtil.bs","MAWGating.bs","MAWPSendOrRemoveReaction.bs","MWCMThreadTypes.bs","MWCMUseFolder.bs","MWChatMessageId.bs","MWChatReactionsAction.bs","MWLSFeatureLimitedStatus.bs","MWPActor.bs","MessagingLoggingUtilsAttachmentTypeInt.bs","ReQL.bs","ReQLSubscription.bs","bs_curry","bs_int64","gkx","react","requireDeferred","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWCMLogCommunityConversion.bs").__setRef("MWV2MessageReactionButton.bs");function j(a){var c=b("useReStore")(),d=b("MWPActor.bs").useActor(void 0),e=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("reactions")),{hd:a.threadKey,tl:{hd:a.messageId,tl:{hd:d,tl:0}}})},[c,a.messageId,JSON.stringify(a.threadKey),d]));if(e!==void 0)return e.reaction}function k(a,c,d){i.onReady(function(e){return b("bs_curry")._4(e.log,a,c,!0,d)})}function a(a){var c=a.message,d=a.thread,e=a.setReactionsMenuOpen;a=a.closeActionsMenu;var f=j(c),g=b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType),i=b("MAWPSendOrRemoveReaction.bs").useSendOrRemoveReaction(c,g,"reaction_tray"),l=b("MWCMUseFolder.bs").useHook(d),m=l!==void 0?b("bs_int64").to_string(l.fbGroupId):"",n=b("MWCMThreadTypes.bs").isAnyCMThread(d.threadType);l=(!g||b("MAWGating.bs").isFeatureLimitEnabled(void 0))&&b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(void 0);var o=b("bs_int64").to_string(d.threadKey),p=h.useMemo(function(){return b("MWChatMessageId.bs").makeSent(o,c.messageId,b("bs_int64").to_string(c.timestampMs))},[o,c.messageId,b("bs_int64").to_string(c.timestampMs)]),q=h.useCallback(function(a){return function(d){n&&!d&&k(b("MessagingLoggingUtilsAttachmentTypeInt.bs").reaction,o,m);return b("bs_curry")._3(i,c.messageId,d?void 0:a,d?"remove_reaction":"reaction")}},[n,k,o,i,c.messageId]),r=h.useCallback(function(a){return b("bs_curry")._1(e,function(b){return a})},[e]);d=b("gkx")("8026")&&b("MWCMThreadTypes.bs").isBroadcastThread(d.threadType);if(l)return null;else return h.jsx(b("MWChatReactionsAction.bs").make,{onVisibilityChange:r,sendReaction:q,selectedReaction:f,closeActionsMenu:a,messageID:p,isSecure:g,disableCustomReactions:d})}c=a;f.$MWCMLogCommunityConversion$Deferred=i;f.make=c}),null);
__d("MWV2OneToOneThreadBlockedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(!1);function a(a){return h.useContext(i)}function c(a){var b=a.children;a=a.blocked;return h.createElement(i.Provider,{value:a,children:b})}d=c;f.context=i;f.useIsBlocked=a;f.make=d}),null);
__d("MDSReplyActionSvgIcon.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={icon:{fill:"x148u3ch"}};function a(a){return i.jsx("svg",{width:"22px",height:"22px",viewBox:"1 1 21 21",children:i.jsx("g",{strokeWidth:"1",fillRule:"evenodd",className:(h||(h=b("stylex")))(j.icon),children:i.jsx("path",{d:"M10.8932368,14.7625445 C10.8932368,15.535432 10.0849567,15.996442 9.48116675,15.5677995 L4.03193175,11.696707 C3.49257425,11.313742 3.49287675,10.4694645 4.03193175,10.0864995 L9.48116675,6.2157095 C10.0849567,5.7867645 10.8932368,6.248077 10.8932368,7.020662 L10.8938418,9.0755445 C15.2129368,9.0755445 18.1517243,11.027577 18.1523293,15.7226795 C18.1523293,16.0820495 17.9036743,16.3349395 17.5273643,16.3349395 C17.2487618,16.3349395 17.0164418,16.1746145 16.8527893,15.680027 C16.1588543,13.584307 14.1063918,12.7049395 10.8938418,12.7049395 L10.8932368,14.7625445 Z"})})})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2MessageListIsRowModalContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){}var i=h.createContext(a);function c(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{value:a,children:b})}d={make:c};f.emptyValue=a;f.context=i;f.Provider=d}),null);
__d("MWV2ReplyButton.bs",["fbt","CometPressable.react","MDSReplyActionSvgIcon.bs","MWPReplyContext.bs","MWTooltip.react","MWV2MessageListIsRowModalContext.bs","MWV2MessageRowActionsContext.bs","bs_curry","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={action:{marginStart:"x1mh8g0r",marginEnd:"x11i5rnm",width:"xvy4d1p",height:"xxk0z11",display:"x78zum5",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",flexShrink:"x2lah0s",alignContent:"xc26acl",alignItems:"x6s0dn4",justifyContent:"xl56j7k",textAlign:"x2b8uid",cursor:"x1ypdohk",":hover":{backgroundColor:"x15vn3sj"},position:"x1n2onr6"},icon:{height:"x17rw0jw",width:"x17z2i9w",opacity:"x197sbye",":active":{opacity:"x4gyw5p"},":hover":{opacity:"x1o7uuvo"}}};function l(a){}function a(a){var c=a.message;a=g._("__JHASH__xFCj85w6vra__JHASH__");var d=j.useContext(b("MWPReplyContext.bs").context),e=d.setReply,f=j.useContext(b("MWV2MessageListIsRowModalContext.bs").context),h=function(a){b("bs_curry")._2(e,{messageId:c.messageId,timestampMs:c.timestampMs,sendStatusV2:c.sendStatusV2,offlineThreadingId:c.offlineThreadingId},c.threadKey);return b("bs_curry")._1(f,function(a){return""})};d=j.useContext(b("MWV2MessageRowActionsContext.bs").context);var m=d.replyToMessage;m.current=h;var n=j.useCallback(function(a){if(b("gkx")("3417")){m.current=l;return}},[m]);j.useEffect(function(){return n},[n]);return j.jsx(b("MWTooltip.react"),{tooltip:a,align:"middle",position:"above",children:j.jsx("div",{className:(i||(i=b("stylex")))(k.action),children:j.jsx(b("CometPressable.react"),{"aria-label":a,expanding:!0,testid:"messenger_reply_menu_button",onPress:function(a){return h(void 0)},overlayDisabled:!0,children:j.jsx("div",{className:i(k.icon),children:j.jsx(b("MDSReplyActionSvgIcon.bs").make,{})})})})})}c=24;d=a;f.minMessageHeight=c;f.styles=k;f.noop=l;f.make=d}),null);
__d("MWV2UseMessageForwardAction.bs",["LSBitFlag.bs","LSMessageContentType.bs","LSMessagingThreadTypeUtil.bs","LsTargetType.bs","MAWGating.bs","MWChatMessageId.bs","MWV2ForwardMessage.bs","MWV2LogMessageClick.bs","MWV2MessageRowIsRowFocusedContext.bs","UseMWChatForward.re","bs_caml_format","bs_caml_obj","bs_curry","bs_int64","gkx","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("gkx")("1224637"),e=!d&&b("MAWGating.bs").isForwardEnabled(void 0)&&b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType);d=!d&&b("MAWGating.bs").isCrossForwardEnabled(void 0);e=e?d?"cross_transport":"secure":d?"cross_transport":"open_";d=b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(c.threadKey),c.messageId,b("bs_int64").to_string(c.timestampMs));var f=b("MWV2ForwardMessage.bs").useForwardMessage(c),g=h.useContext(b("MWV2MessageRowIsRowFocusedContext.bs").context),i=g.setIsDialogOpened,j=g.setFocused;g=!b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType);a=b("LSBitFlag.bs").has(b("LSMessageContentType.bs").text,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").animatedImage,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").mediaPreview,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").audioClip,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").storyReply,c.displayedContentTypes)||b("bs_caml_obj").caml_equal(c.stickerId,b("bs_caml_format").caml_int64_of_string("369239263222822"))||b("bs_caml_obj").caml_equal(c.stickerId,b("bs_caml_format").caml_int64_of_string("369239343222814"))||b("bs_caml_obj").caml_equal(c.stickerId,b("bs_caml_format").caml_int64_of_string("369239383222810"));var k=b("UseMWChatForward.re").useMWChatForward({onClose:function(a){b("bs_curry")._1(i,function(a){return!1});return b("bs_curry")._1(j,function(a){return!0})},onSend:f,messageID:d,forwardDialogType:e,dropToggle:g&&!a});return function(a){b("MWV2LogMessageClick.bs").log(c,b("LsTargetType.bs").forwardButton,void 0,void 0);if(!(k==null)){b("bs_curry")._1(i,function(a){return!0});return b("bs_curry")._1(k.onClick,void 0)}}}f.useHook=a}),null);
__d("MessagingAttachmentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,12];f.none=a;f.sticker=c;f.image=d;f.animatedImage=e;f.video=b;f.audio=g;f.file=h;f.xma=i;f.ephemeralImage=j;f.ephemeralVideo=k;f.selfieSticker=l;f.soundBite=m}),null);
__d("MWMessageRowActions.bs",["LSAuthorityLevel.bs","LSBitFlag.bs","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSMessageContentType.bs","LSMessageSendStatusV2.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWGating.bs","MAWMsg.bs","MWCMThreadTypes.bs","MWLSFeatureLimitedStatus.bs","MWPBaseMessageListRowActions.bs","MWTooltipGroup.react","MWV2ContextualActionsButton.bs","MWV2ForwardMessageButton.bs","MWV2MessageReactionButton.bs","MWV2MessageRowActionsContext.bs","MWV2OneToOneThreadBlockedContext.bs","MWV2ReplyButton.bs","MWV2UseMessageForwardAction.bs","MessagingAttachmentType.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_option","cr:10871","gkx","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){}function j(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirstExn(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:a.threadKey,tl:0})},[c,JSON.stringify(a.threadKey)]))}var k=b("cr:10871")==null?void 0:b("bs_caml_option").some(b("cr:10871"));function l(a){var c=a.message,d=a.outgoing,e=a.setMoreMenuOpen,f=a.setReactionsMenuOpen,g=a.interactedWith,l=a.alwaysShowForwardForMediaMessages,m=a.closeActionsMenu,n=a.canRemoveMessageGlobally;a=a.extraActions;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var o=j(c),p=b("MWV2OneToOneThreadBlockedContext.bs").useIsBlocked(void 0),q=b("useReStore")(),r=o.threadKey,s=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(q.table("contacts")),{hd:r,tl:0})},[JSON.stringify(r),q]));s=s!==void 0?b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").restrictPlaced,s),!1):!1;var t=c.ephemeralDurationInSec;t=t!==void 0?b("bs_caml").i64_gt(t,b("bs_caml_int64").zero):!1;var u=b("LSMessagingThreadTypeUtil.bs").isSecure(o.threadType),v=b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(void 0)&&(!u||b("MAWGating.bs").isFeatureLimitEnabled(void 0)),w=b("bs_caml").i64_eq(c.displayedContentTypes,b("LSMessageContentType.bs").sticker),x=b("bs_caml").i64_eq(c.displayedContentTypes,b("LSMessageContentType.bs").singleXma),y=b("bs_caml").i64_neq(c.displayedContentTypes,b("LSMessageContentType.bs").text),z=b("MWCMThreadTypes.bs").isAnyCMThread(o.threadType)&&b("bs_caml").i64_eq(c.sendStatusV2,b("LSMessageSendStatusV2.bs").nonRetriableError),A=b("ReQLSuspense").useFirst(function(){if(y)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(q.table("attachments")),{hd:c.threadKey,tl:{hd:c.messageId,tl:0}});else return b("SortedAsyncIterable.bs").empty(void 0)},[q,c.messageId,y]);t=(u?b("MAWGating.bs").isForwardEnabled(void 0)&&!t&&!w&&!x:!0)&&b("gkx")("1844772")&&!p&&!s&&!v&&!c.isUnsent&&!z&&!b("MAWMsg.bs").isPlaceholder(c)&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageForward,o)&&b("bs_caml").i64_gt(c.authorityLevel,b("LSAuthorityLevel.bs").optimistic)&&(A!==void 0&&b("bs_caml").i64_eq(A.attachmentType,b("MessagingAttachmentType.bs").xma)&&(A.attachmentCta1Id!==void 0||A.attachmentCta2Id!==void 0||A.attachmentCta3Id!==void 0||A.defaultCtaId!==void 0)?A.isSharable:!0);w=!p&&!s&&!z&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageReply,o)&&!c.isUnsent;x=!p&&!s&&!c.isUnsent&&!z&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").reactions,o)&&(u?b("MAWGating.bs").isReactionsEnabled(void 0):!0);v=b("gkx")("8026")&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").reactionsV2,o);A=w&&!l&&g;p=l&&t;s=g&&(x||v);z=u&&b("bs_caml").i64_eq(c.sendStatusV2,b("LSMessageSendStatusV2.bs").retriableError);l=b("MWV2UseMessageForwardAction.bs").useHook(o,c);x=h.useContext(b("MWV2MessageRowActionsContext.bs").context);var B=x.forwardMessage;t&&(B.current=l);var C=h.useCallback(function(a){if(b("gkx")("3417")){B.current=i;return}},[B]);h.useEffect(function(){return C},[C]);return h.jsxs(b("MWPBaseMessageListRowActions.bs").ActionsList.make,{outgoing:d,children:[p?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2ForwardMessageButton.bs").make,{message:c})}):null,s?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2MessageReactionButton.bs").make,{message:c,thread:o,setReactionsMenuOpen:f,closeActionsMenu:m})}):null,!(b("cr:10871")==null)&&z?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(k.make,{message:c})}):null,A?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2ReplyButton.bs").make,{message:c})}):null,g?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2ContextualActionsButton.bs").make,{message:c,thread:o,showForwardActionInContextualMenu:!p&&t,showReplyActionInContextualMenu:!A&&w,canRemoveMessageGlobally:n,closeActionsMenu:m,setMoreMenuOpen:e,extraActions:a})}):null]})}c={make:l};function a(a){var c=a.message,d=a.focused,e=a.hovered,f=a.hasReactions,g=a.outgoing,j=a.ariaHidden,k=a.canRemoveMessageGlobally;a=a.extraActions;j=j!==void 0?j:!1;k=k!==void 0?k:!0;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var m=h.useState(function(){return!1}),n=h.useState(function(){return!1}),o=b("LSBitFlag.bs").has(b("LSMessageContentType.bs").mediaPreview,c.displayedContentTypes);e=e||d||n[0]||m[0];return h.jsx(b("MWTooltipGroup.react"),{children:h.jsx(b("MWPBaseMessageListRowActions.bs").Container.make,{children:e||o?h.jsx(l,{message:c,outgoing:g,setMoreMenuOpen:n[1],setReactionsMenuOpen:m[1],interactedWith:e,alwaysShowForwardForMediaMessages:o,closeActionsMenu:i,canRemoveMessageGlobally:k,extraActions:a}):null,hasReactions:f,outgoing:g,ariaHidden:j})})}d=a;f.noop=i;f.$MAWMessageRetryButton$requireCond=b("cr:10871");f.ActionsList=c;f.make=d}),null);
__d("MWV2TombstonedMessage.bs",["bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{paddingTop:"x889kno",paddingEnd:"x1iji9kk",paddingBottom:"x1a8lsjc",paddingStart:"x1sln4lm",maxWidth:"x193iq5w",borderTopStartRadius:"x1tlxs6b",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderTop:"x1n2xptk",borderEnd:"xkbpzyx",borderBottom:"xdppsyt",borderStart:"x1rr5fae",color:"x1dntmbh",wordBreak:"x13faqbe"},connectTop:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2"},connectBottom:{borderBottomStartRadius:"xo71vjh",borderBottomEndRadius:"x5pf9jr"}};function a(a){var c=a.children,d=a.ariaLabel,e=a.connectTop,f=a.connectBottom;a=a.xstyle;e=e!==void 0?e:!1;f=f!==void 0?f:!1;a=a!==void 0?b("bs_caml_option").valFromOption(a):!1;return i.jsx("div",{"aria-label":d,className:(h||(h=b("stylex")))(j.root,e?j.connectTop:!1,f?j.connectBottom:!1,a),children:c})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2ChatErrorBubble.bs",["fbt","MWV2TombstonedMessage.bs","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={withBackground:{backgroundColor:"xcrg951"},withRepliedMessage:{zIndex:"x1vjfegm"},vr:{height:"x36qwtl",width:"xh8yej3"}};function a(a){a=a.isReply;return j.jsxs("div",{className:(i||(i=b("stylex")))(a?k.withRepliedMessage:k.withBackground),children:[a?null:j.jsx("div",{className:(i||(i=b("stylex")))(k.vr,k.withBackground)}),j.jsx(b("MWV2TombstonedMessage.bs").make,{children:g._("__JHASH__i7dsmazT6Cf__JHASH__"),xstyle:k.withBackground})]})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2MessageRowSimple.bs",["FocusWithinHandler.react","MWMessageTableFocusTable.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={row:{position:"x1n2onr6"},rowFocusVisible:{zIndex:"x1vjfegm"}};function a(a){var c=a.children;a=a.domElementRef;return i.jsx(b("MWMessageTableFocusTable.bs").Table_.Row.make,{children:i.jsx("div",{role:"row",ref:a,children:i.jsx(b("MWMessageTableFocusTable.bs").Table_.Cell.make,{children:i.jsx(b("FocusWithinHandler.react"),{children:function(a,d){return i.jsx("div",{role:"gridcell",tabIndex:0,"data-scope":b("MWMessageTableFocusTable.bs").scopeID,"data-release-focus-from":"CLICK",className:(h||(h=b("stylex")))(j.row,d?j.rowFocusVisible:!1),children:c})}})})})})}c=a;f.styles=j;f.make=c}),null);
__d("MWAdminTextLayout.bs",["CometTextWithEntities.react","MWChatTextTransform.bs","bs_caml_option","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.message;a=a.cta;c=c.text;if(c!==void 0)if(a!==void 0)return h.jsxs(h.Fragment,{children:[h.jsx(b("CometTextWithEntities.react"),{text:c,transforms:b("MWChatTextTransform.bs").epdTextTransforms})," ",b("bs_caml_option").valFromOption(a)]});else return h.jsx(b("CometTextWithEntities.react"),{text:c,transforms:b("MWChatTextTransform.bs").epdTextTransforms});else if(a!==void 0)return b("bs_caml_option").valFromOption(a);else return null}c=a;f.make=c}),null);
__d("MWPColorUtils.re",["MWPColorUtils.bs"],(function(a,b,c,d,e,f){a=b("MWPColorUtils.bs").int64ToHex;f.int64ToHex=a}),null);
__d("MWPThreadTheme.re",["MWPThreadTheme.bs"],(function(a,b,c,d,e,f){a=b("MWPThreadTheme.bs").make;f.make=a;c=b("MWPThreadTheme.bs").useHook;f.useHook=c;d=b("MWPThreadTheme.bs").useBottom;f.useBottom=d}),null);
__d("MWAdminMsgCtaLink.react",["CometLink.react","MWPColorUtils.re","MWPThreadTheme.re","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","xstyle"]);var f=d("MWPThreadTheme.re").useHook();f=f.threadTheme.fallbackColor;return h.jsx(c("CometLink.react"),babelHelpers["extends"]({style:{color:d("MWPColorUtils.re").int64ToHex(f)},weight:"bold",xstyle:e},a,{children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWAdminMsgCtaLink.bs",["MWAdminMsgCtaLink.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWAdminMsgCtaLink.react");f.make=a}),null);
__d("InstantGameCustomUpdateMuteManagementUserActionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.mute=a;f.unmute=c}),null);
__d("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs",["CometLink.react","InstantGameCustomUpdateMuteManagementUserActionType.bs","LS.bs","LSCustomUpdateMuteManagement","LSTransaction.bs","MWAdminTextLayout.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml_array","bs_caml_format","bs_caml_option","bs_int64","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.message,d=a.shouldMute;a=function(a){var e=b("useReStore")();a=h.useMemo(function(){return b("ReQL.bs").take(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),function(a){return a.messageId===c.messageId}),1)},[e,c.threadKey]);a=b("bs_caml_array").get(b("ReQLSubscription.bs").useArray(a),0).targetId;var f=b("bs_int64").to_string(c.threadKey),g=b("bs_int64").to_string(b("bs_belt_Option").getExn(a)),i=d?b("InstantGameCustomUpdateMuteManagementUserActionType.bs").mute:b("InstantGameCustomUpdateMuteManagementUserActionType.bs").unmute;return h.useCallback(function(a){b("LSTransaction.bs").run(e,function(a){return b("LSCustomUpdateMuteManagement")(b("bs_caml_format").caml_int64_of_string(f),b("bs_caml_format").caml_int64_of_string(g),i,b("LS.bs").make(a))},"readWrite")},[e,f,i])};var e=c.adminMsgCtaTitle,f={message:c};e=e!==void 0?b("bs_caml_option").some(h.jsx(b("CometLink.react"),{color:"blueLink",target:"_blank",children:e,onClick:a(void 0)})):void 0;e!==void 0&&(f.cta=b("bs_caml_option").valFromOption(e));return h.jsx(b("MWAdminTextLayout.bs").make,f)}c=a;f.make=c}),null);
__d("InstantGameBotMessageSubscriptionManagementUserActionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.subscribe=a;f.unsubscribe=c}),null);
__d("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs",["CometLink.react","InstantGameBotMessageSubscriptionManagementUserActionType.bs","LS.bs","LSTransaction.bs","LSUpdateBotSubscription","MWAdminTextLayout.bs","bs_caml_format","bs_caml_option","bs_int64","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.message,d=a.shouldSubscribe;a=function(a){var e=b("useReStore")(),f=b("bs_int64").to_string(c.threadKey),g=d?b("InstantGameBotMessageSubscriptionManagementUserActionType.bs").subscribe:b("InstantGameBotMessageSubscriptionManagementUserActionType.bs").unsubscribe;return h.useCallback(function(a){b("LSTransaction.bs").run(e,function(a){return b("LSUpdateBotSubscription")(b("bs_caml_format").caml_int64_of_string(f),g,b("LS.bs").make(a))},"readWrite")},[e,f,g])};var e=c.adminMsgCtaTitle,f={message:c};e=e!==void 0?b("bs_caml_option").some(h.jsx(b("CometLink.react"),{color:"blueLink",target:"_blank",children:e,onClick:a(void 0)})):void 0;e!==void 0&&(f.cta=b("bs_caml_option").valFromOption(e));return h.jsx(b("MWAdminTextLayout.bs").make,f)}c=a;f.make=c}),null);
__d("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs",["CometLazyDialogTrigger.react","JSResourceForInteraction","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.threadKey,d=a.targetId,e=a.isOptOut,f=a.renderer,g=h.useRef(null);return h.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResourceForInteraction")("MWNotificationMessagesManageNotificationsDialog.react",{name:"MWNotificationMessagesManageNotificationsDialog","class":"fluid"}).__setRef("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs"),dialogProps:{threadKey:c,targetId:d,isOptOut:e},children:function(a){return b("bs_curry")._2(f,a,g)}})}c=a;f.make=c}),null);
__d("MWNotificationMessageManageNotificationsAdminMsgCta.bs",["CometPressable.react","CometTextWithEntities.react","MWNotificationMessageManageNotificationsLazyDialogTrigger.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.threadKey,d=a.title,e=a.targetId;a=a.isOptOut;var f=function(a,c){return h.jsx(b("CometPressable.react"),{onPress:function(c){return b("bs_curry")._1(a,void 0)},children:h.jsx(b("CometTextWithEntities.react"),{text:d})})};return h.jsx(b("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs").make,{threadKey:c,targetId:e,isOptOut:a,renderer:f})}c=a;f.make=c}),null);
__d("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("3008");c=b("FalcoLoggerInternal").create("p2b_differentiation_privacy_disclosure_open_click_web",a);e.exports=c}),null);
__d("MWV2AdminMsgCta.bs",["CometLink.react","JSResource","JSResourceForInteraction","MDSLockSvgIcon.bs","MWAdminMsgCtaLink.bs","MWAdminTextLayout.bs","MWInboxRouteBuilder.bs","MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs","MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs","MWNotificationMessageManageNotificationsAdminMsgCta.bs","MWPBumpEntityKey.bs","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","WALogger.bs","XMessengerDotComHelpContentControllerRouteBuilder","bs_caml_option","bs_curry","bs_int64","cr:928","react","stylex","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("cr:928")==null?void 0:b("bs_caml_option").some(b("cr:928")),k={adminTextCta:{display:"x1rg5ohu",fontWeight:"xo1l8bm",color:"xz94kzr"}};function a(a){a=a.message;var c=a.adminMsgCtaTitle,d={message:a};a=c!==void 0&&!(b("cr:928")==null)?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(k.adminTextCta),children:i.jsx(j.make,{threadKey:a.threadKey,title:c})})):void 0;a!==void 0&&(d.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,d)}a={styles:k,make:a};var l={adminTextCta:{display:"x1rg5ohu",fontWeight:"x1s688f"}};function c(a){var c=a.message;a=a.isOptOut;var d=b("useReStore")(),e=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c])),f=c.adminMsgCtaTitle,g={message:c};f=f!==void 0&&e!==void 0?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(l.adminTextCta),children:i.jsx(b("MWNotificationMessageManageNotificationsAdminMsgCta.bs").make,{threadKey:c.threadKey,title:f,targetId:e.targetId,isOptOut:a})})):void 0;f!==void 0&&(g.cta=b("bs_caml_option").valFromOption(f));return i.jsx(b("MWAdminTextLayout.bs").make,g)}c={styles:l,make:c};function d(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c]));if(a!==void 0){var e=a.title;if(e!==void 0){a=a.actionUrl;a=a!==void 0?b("bs_caml_option").some(i.jsx(b("CometLink.react"),{href:a,color:"blueLink",target:"_blank",children:e})):void 0}else a=void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,e)}d={make:d};function e(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c]));var e=b("useCometLazyDialog")(b("JSResource")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgCta.bs")),f=e[0];if(a!==void 0){e=a.title;a=e!==void 0?b("bs_caml_option").some(i.jsx(b("CometLink.react"),{color:"blueLink",children:e,onClick:function(a){f({entryPoint:"ADMIN_TEXT",onClose:function(a){},threadKey:c.threadKey},function(a){}),b("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(a){return{page_id:b("bs_int64").to_string(c.threadKey),consumer_id:"0",entry_point:"ADMIN_TEXT"}})}})):void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,e)}e={make:e};function m(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c]));var e=b("useCometLazyDialog")(b("JSResource")("MWServicesLegalLiabilityDisclaimer.react").__setRef("MWV2AdminMsgCta.bs")),f=e[0];if(a!==void 0){e=a.title;a=e!==void 0?b("bs_caml_option").some(i.jsx(b("CometLink.react"),{color:"blueLink",children:e,onClick:function(a){return f({entryPoint:"ADMIN_TEXT",onClose:function(a){},threadKey:c.threadKey},function(a){})}})):void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,e)}m={make:m};var n={lockIcon:{display:"x1rg5ohu",position:"x1n2onr6",bottom:"x1o583il",right:"x3lmqil"},adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn"}};function o(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c]));if(a!==void 0){a=a.title;a=a!==void 0?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(n.adminTextCta),children:i.jsx(b("CometLink.react"),{href:b("XMessengerDotComHelpContentControllerRouteBuilder").buildUri({cms_id:"786613221989782"}).toString(),target:"_blank",children:a})})):void 0}else a=void 0;var e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:(h||(h=b("stylex")))(n.lockIcon),children:i.jsx(b("MDSLockSvgIcon.bs").make,{color:"tertiary",size:String(16)})}),i.jsx(b("MWAdminTextLayout.bs").make,e)]})}o={styles:n,make:o};var p={lockIcon:{display:"x1rg5ohu",position:"x1n2onr6",bottom:"x1o583il",right:"x3lmqil"},adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn"}};function q(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("mi_act_mapping_table")),{hd:c.threadKey,tl:0}),function(a){return b("bs_int64").to_string(a.jid)})},[d,JSON.stringify(c.threadKey)]));a=a!==void 0?b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:a}):(b("WALogger.bs").log("Failed to generate the url, thread is missing in mi_act_mapping table for threadKey "+b("bs_int64").to_string(c.threadKey)),b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildHomeURL,{}));var e=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c]));if(e!==void 0){e=e.title;a=e!==void 0?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(p.adminTextCta),children:i.jsx(b("CometLink.react"),{href:a,target:"_self",children:e})})):void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(i.Fragment,{children:i.jsx(b("MWAdminTextLayout.bs").make,e)})}q={styles:p,make:q};function r(a){var c=a.message;a=a.shouldSubscribe;return i.jsx(b("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs").make,{message:c,shouldSubscribe:a})}r={make:r};function s(a){var c=a.message;a=a.shouldMute;return i.jsx(b("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs").make,{message:c,shouldMute:a})}s={make:s};function t(a){var c=a.message,d=b("useReStore")();a=b("useCometLazyDialog")(b("JSResourceForInteraction")("MWPinnedMessagesDialog.react").__setRef("MWV2AdminMsgCta.bs"));var e=a[0];a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,c]));var f=function(a){b("MWPBumpEntityKey.bs").bumpEntityKeyWithAppId("mw_pinned_messages","see_all_admin_msg_cta");return e({onClose:function(a){},threadKey:c.threadKey},function(a){})};if(a!==void 0){a=a.title;f=a!==void 0?b("bs_caml_option").some(i.jsx(b("MWAdminMsgCtaLink.bs").make,{onClick:f,children:a})):void 0}else f=void 0;a={message:c};f!==void 0&&(a.cta=b("bs_caml_option").valFromOption(f));return i.jsx(b("MWAdminTextLayout.bs").make,a)}t={make:t};f.$MAWEphemeralAdminMsgCta$requireCondXplat=b("cr:928");f.AdminMsgArmadilloEphemeralChangeDuration=a;f.AdminMsgNotificationMessageManageNotifications=c;f.AdminMsgWebUrl=d;f.AdminMsgP2bPrivacyDisclosure=e;f.AdminMsgServiceBookingLegalDisclaimer=m;f.AdminMsgE2EEDescription=o;f.AdminMsgCutoverRollback=q;f.AdminMsgInstantGameBotMessageSubscriptionManagement=r;f.AdminMsgInstantGameCustomUpdateMuteManagement=s;f.AdminMsgShowPinnedMessages=t}),null);
__d("MWV2ChatAdminMessage.bs",["MAWGating.bs","MWAdminTextLayout.bs","MWText.react","MWV2AdminMsgCta.bs","bs_curry","cr:2823","cr:3545","cr:4889","gkx","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function j(a){if(a!==void 0)return a.isAdminMessage;else return!1}var k={container:{paddingEnd:"xc73u3c",paddingStart:"x5ib6vp",paddingTop:"xyamay9",paddingBottom:"x1l90r2v"},containerThatPrecedesAdminMessage:{paddingBottom:"x1a8lsjc"},containerThatProceedsAdminMessage:{paddingTop:"x889kno"},content:{maxWidth:"x1ekjcvx",wordBreak:"x13faqbe",textAlign:"x2b8uid",marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu"}};function l(a){var c=a.prevMessage,d=a.nextMessage;a=a.children;return i.jsx("div",{className:(h||(h=b("stylex")))(k.container,j(c)?k.containerThatProceedsAdminMessage:!1,j(d)?k.containerThatPrecedesAdminMessage:!1),children:i.jsx("div",{className:h(k.content),children:a})})}c={styles:k,make:l};function a(a){var c=a.prevMessage,d=a.message;a=a.nextMessage;var e=!(b("cr:2823")==null)&&!(b("cr:4889")==null)?b("bs_curry")._3(b("cr:2823").buildLocalizedString,[],[],b("cr:4889").currentUserAddedDevice):"";e=b("MAWGating.bs").isAdminMsgOptEnabled(void 0)&&d.text===e&&!(b("cr:3545")==null)?i.jsx(b("cr:3545").make,{}):null;var f=d.adminMsgCtaType,g,h=0;f!==void 0?f==="admin_msg_armadillo_ephemeral_change_duration"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgArmadilloEphemeralChangeDuration.make,{message:d}):f==="admin_msg_web_url"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgWebUrl.make,{message:d}):f==="admin_msg_p2b_privacy_disclosure"&&b("gkx")("2386")?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgP2bPrivacyDisclosure.make,{message:d}):f==="admin_notification_messages_opt_out"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgNotificationMessageManageNotifications.make,{message:d,isOptOut:!0}):f==="admin_notification_messages_opt_in"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgNotificationMessageManageNotifications.make,{message:d,isOptOut:!1}):f==="admin_msg_thread_level_cutover"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgE2EEDescription.make,{message:d}):f==="admin_msg_e2ee_thread"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgE2EEDescription.make,{message:d}):f==="admin_msg_cutover_rollback"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgCutoverRollback.make,{message:d}):f==="xmat_instant_game_bot_message_subscribe"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameBotMessageSubscriptionManagement.make,{message:d,shouldSubscribe:!0}):f==="xmat_instant_game_bot_message_unsubscribe"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameBotMessageSubscriptionManagement.make,{message:d,shouldSubscribe:!1}):f==="admin_msg_view_pin_msgs_v2"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgShowPinnedMessages.make,{message:d}):f==="xmat_instant_game_custom_update_message_mute"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameCustomUpdateMuteManagement.make,{message:d,shouldMute:!0}):f==="xmat_instant_game_custom_update_message_unmute"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameCustomUpdateMuteManagement.make,{message:d,shouldMute:!1}):f==="admin_message_service_booking_legal_disclaimer"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgServiceBookingLegalDisclaimer.make,{message:d}):h=1:h=1;h===1&&(g=i.jsxs("div",{children:[i.jsx(b("MWAdminTextLayout.bs").make,{message:d}),e]}));return i.jsx(l,{prevMessage:c,nextMessage:a,children:i.jsx(b("MWText.react"),{color:"tertiary",type:"meta4",children:g})})}d=a;f.Container=c;f.$MAWAdminMsg$requireCondXplat=b("cr:2823");f.$MAWAdminViewLogins$requireCondXplat=b("cr:3545");f.$MAWLocalizationType$requireCondXplat=b("cr:4889");f.make=d}),null);
__d("MWV2MessageStartOfGroupContent.bs",["MWPDateBreak.bs","MWPMessageListColumn.bs","MWV2ChatAdminMessage.bs","MWV2MessageRowSimple.bs","bs_caml_int64","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){if(c!==void 0)return b("bs_int64").compare(b("bs_int64").abs(b("bs_caml_int64").sub(a.timestampMs,c.timestampMs)),[0,9e5])>0;else return!0}function j(a){var c=a.message,d=a.prevMessage;a=a.domElementRef;if(i(c,d))return h.jsx(b("MWV2MessageRowSimple.bs").make,{children:h.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:h.jsx(b("MWV2ChatAdminMessage.bs").Container.make,{prevMessage:d,nextMessage:c,children:h.jsx(b("MWPDateBreak.bs").make,{timestamp:b("bs_caml_int64").to_float(c.timestampMs)})})}),domElementRef:a});else return null}c={make:j};function a(a){var b=a.message,c=a.prevMessage;a=a.domElementRef;return h.jsx(j,{message:b,prevMessage:c,domElementRef:a})}d=a;f.Datebreak=c;f.make=d}),null);
__d("MWV2MessageActionsVisibility.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){return h.useRef(function(a){})}f.useStopHoveringRef=a}),null);
__d("MAWEphemeralMessageTimer.bs",["fbt","CometScreenReaderText.react","MAWEphemeralConsts.bs","MWText.react","WATimeUtils","bs_caml_int32","bs_caml_int64","bs_curry","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){if(a<b("MAWEphemeralConsts.bs").oneMinuteInSeconds)return g._("__JHASH__hRyyGvVfwlZ__JHASH__",[g._param("seconds",String(a).concat("s"))]);else if(a<b("MAWEphemeralConsts.bs").oneHourInSeconds)return g._("__JHASH__ObtD_ZW4dqo__JHASH__",[g._param("minutes",String(b("bs_caml_int32").div(a,b("MAWEphemeralConsts.bs").oneMinuteInSeconds)).concat("m"))]);else if(a<b("MAWEphemeralConsts.bs").oneDayInSeconds)return g._("__JHASH__kfAHv6U0oM7__JHASH__",[g._param("hours",String(b("bs_caml_int32").div(a,b("MAWEphemeralConsts.bs").oneHourInSeconds)).concat("h"))]);else return g._("__JHASH__pQj617aM9Jj__JHASH__",[g._param("days",String(b("bs_caml_int32").div(a,b("MAWEphemeralConsts.bs").oneDayInSeconds)).concat("d"))])}function k(a){return g._("__JHASH__y-wqFg4O-A0__JHASH__",[g._param("time",a)])}function l(a,c){a=b("bs_caml_int64").to_int32(b("bs_caml_int64").sub(a,b("bs_caml_int64").of_float(b("WATimeUtils").unixTime())));if(c!==void 0&&a>b("bs_caml_int64").to_int32(c))return b("bs_caml_int64").to_int32(c);else return a}function a(a){var c=a.expirationTimestamp,d=a.ephemeralDurationInSec;a=i.useState(function(){return l(c,d)});var e=a[1],f=a[0];a=j(f);var g=k(a);i.useEffect(function(){f>0&&b("setTimeout")(function(a){return b("bs_curry")._1(e,function(a){return f-1|0})},b("MAWEphemeralConsts.bs").msPerSec)},[f,c]);return i.jsxs("div",{className:"x2b8uid xbkr7qi",children:[i.jsx(b("CometScreenReaderText.react"),{text:g}),i.jsx("div",{"aria-hidden":!0,children:i.jsx(b("MWText.react"),{type:"meta1",children:a})})]})}c=a;f.getScreenReaderText=k;f.getRemainingTimeInSec=l;f.make=c}),null);
__d("MWPCombineTextRenderers.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";function a(a){var c={};a.forEach(function(a){if(a===void 0)return;var d=a[1];a=a[0];var e=b("bs_js_dict").get(c,a);e!==void 0?c[a]=e.concat([d]):c[a]=[d]});return c}f.useHook=a}),null);
__d("MWPUseLinkRendererFactory.bs",["LSThreadCapabilityBitOffset.bs","MWPThreadCapabilitiesContext.bs","MWTextWithEntities.bs","bs_curry","gkx"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a!==void 0?a:!1;c=b("MWPThreadCapabilitiesContext.bs").useHook(void 0);var e=b("gkx")("1886144")&&b("bs_curry")._1(c,b("LSThreadCapabilityBitOffset.bs").disableLinks);return function(a,c,f){if(e)return;else return[f,b("MWTextWithEntities.bs").linkPlugin(a,void 0,c,d,void 0)]}}f.useHook=a}),null);
__d("MWUseTextRenderers.bs",["CometCardedDialogLoadingState.re","CometEntryPointDialogTrigger.react","CometErrorBoundary.re","CometLink.react","GroupsCometJoinChatDialog.entrypoint","MWCMThreadTypes.bs","MWCMUseFolder.bs","MWCMUseShouldGoToFullScreenChat.bs","MWChatTextFormatting","MWInboxCommunityThreadsRouteBuilder.bs","MWLSThread.bs","MWMessageCellFocusTable.bs","MWPCombineTextRenderers.bs","MWPUseLinkRendererFactory.bs","MWV2OpenTabOrThread.bs","bs_belt_Option","bs_curry","bs_int64","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={underline:{textDecoration:"x1bvjpef",color:"x1heor9g"},bold:{fontWeight:"x1s688f"},highlight:{backgroundColor:"xacajkf",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x1120s5i",paddingStart:"xkhd6sd"}};function k(a){var c=a.node,d=a.folder,e=a.thread;a=b("MWV2OpenTabOrThread.bs").useHook(void 0);var f=b("bs_curry")._1(a.openTabOrInbox,!0);a=b("bs_belt_Option").getWithDefault(e.hasPendingInvitation,!1);var g=b("MWCMUseShouldGoToFullScreenChat.bs").useHook(void 0);return i.jsx(b("MWMessageCellFocusTable.bs").Table_.Cell.make,{children:i.jsx(b("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:b("GroupsCometJoinChatDialog.entrypoint"),otherProps:{shouldGoToMessenger:g,invited:a},preloadParams:{groupID:b("bs_int64").to_string(d.fbGroupId),threadID:b("bs_int64").to_string(e.threadKey)},fallback:function(a){return i.jsx(b("CometCardedDialogLoadingState.re").make,{})},children:function(a){return i.jsx("span",{role:"gridcell",className:(h||(h=b("stylex")))(j.bold),children:i.jsx(b("CometLink.react"),{children:c,onClick:function(c){if(b("MWCMThreadTypes.bs").isUnjoinedCMThread(e.threadType))return b("bs_curry")._1(a,void 0);else return b("bs_curry")._2(f,{threadKey:e.threadKey,clientThreadKey:e.clientThreadKey,threadType:e.threadType},"mention")}})})}},b("bs_int64").to_string(e.threadKey))})}c={make:k};function l(a){var c=a.node,d=a.threadKey;a=a.communityLinkFallback;var e=b("MWLSThread.bs").useThreadExn(d),f=b("MWCMUseFolder.bs").useHook(e);if(f===void 0)return a;d=i.useCallback(function(a){return b("bs_curry")._1(b("MWInboxCommunityThreadsRouteBuilder.bs").buildURL,{folder_id:b("bs_int64").to_string(f.folderId),thread_key:b("bs_int64").to_string(e.threadKey)})},[JSON.stringify(f.folderId)]);return i.jsx(b("MWV2OpenTabOrThread.bs").Provider.make,{children:i.jsx(k,{node:c,folder:f,thread:e}),value:d})}d={make:l};var m=["Command",function(a,c){return i.jsx(b("MWMessageCellFocusTable.bs").Table_.Cell.make,{children:i.jsx("span",{role:"gridcell",className:(h||(h=b("stylex")))(j.bold),children:a})})}],n=["CommunityChannel",function(a,c){var d=i.jsx(b("MWMessageCellFocusTable.bs").Table_.Cell.make,{children:i.jsx("span",{role:"gridcell",className:(h||(h=b("stylex")))(j.bold),children:a})});return i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return d},children:i.jsx(l,{node:a,threadKey:c.threadKey,communityLinkFallback:d})})}];function a(a,c){c=a!==void 0?a:!1;var d=c;a=function(a){return b("MWPUseLinkRendererFactory.bs").useHook(d,a)};return b("MWPCombineTextRenderers.bs").useHook([b("bs_curry")._4(a,void 0,[j.underline],"chat_message_regular_link","Link"),b("bs_curry")._4(a,void 0,[j.bold],"profile_link","Profile"),b("bs_curry")._4(a,void 0,[j.highlight],"highlight","Highlight"),m,n,["MessengerTextFormatting",b("MWChatTextFormatting").messageRenderer]])}f.styles=j;f.CommunityChannelLink=c;f.CommunityChannelLinkContainer=d;f.commandRenderer=m;f.communityChannelRenderer=n;f.useHook=a}),null);
__d("MessageProfileRangeType.bs",["MessageProfileRangeType"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="p")return b("MessageProfileRangeType").PROFILE;else if(a==="thread"||a==="t")return b("MessageProfileRangeType").THREAD;else if(a==="thread_active"||a==="a")return b("MessageProfileRangeType").THREAD_ACTIVE;else if(a==="s")return b("MessageProfileRangeType").SILENT;else if(a==="c")return b("MessageProfileRangeType").COMMUNITY_CHANNEL;else return b("MessageProfileRangeType").NONE}f.ofString=a}),null);
__d("MWV2ChatTextParserUtils.bs",["EmojiRenderer","EmoticonRenderer","FBID.bs","LSContactTypeExact.bs","MWChatTextFormatting","MWLSContactTypeExactUtils.bs","MessageProfileRangeType","MessageProfileRangeType.bs","ReQL.bs","ReQLSuspense","XCometVanityURLControllerRouteBuilder","bs_caml","bs_caml_array","bs_caml_format","getURLRanges","gkx"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("/^[ \\r\\n\\s]*$/");function a(a){var c=b("EmojiRenderer").parse(a).map(function(a){return{length:a.length,offset:a.offset}}),d=b("gkx")("1839834")?b("EmoticonRenderer").parse(a).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];c=c.concat(d).sort(function(a,b){return a.offset-b.offset|0});if(c.length===0)return!1;var e={contents:0},f={contents:0};d=c.some(function(b){e.contents===b.offset?(e.contents=e.contents+b.length|0,f.contents=e.contents):f.contents=b.offset;var c=a.substring(e.contents,f.contents);e.contents=b.offset+b.length|0;return g.test(c)===!1});c=e.contents!==a.length&&!g.test(a.substring(f.contents));if(d)return!1;else return!c}function c(a){var c=b("getURLRanges")(a),d=[];a=b("MWChatTextFormatting").getFormattingRanges(a);c.forEach(function(a){a={offset:a.offset,length:a.length,entity:{__typename:"Link",uri:a.entity.url}};d.push(a)});return d.concat(a)}function h(a){if(b("gkx")("1968579"))return"/t/"+a;else return"/messages/t/"+a}function i(a,c){try{a=b("ReQLSuspense").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(c),tl:0}))}catch(b){a=void 0}if(a===void 0)return h(c);var d=a.contactTypeExact;if(b("bs_caml").i64_eq(d,b("LSContactTypeExact.bs").fbUser))return"https://www.facebook.com"+b("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b("FBID.bs").ofStringExn(c)});if(!b("MWLSContactTypeExactUtils.bs").isIgContact(a))return h(c);d=a.secondaryName;if(d!==void 0)return"https://www.instagram.com/"+d+"/";else return h(c)}function d(a,c,d,e,f){c=c.split(",");var g=d.split(","),j=e.split(","),k=f.split(",");return c.reduce(function(c,d,e){var f=b("MessageProfileRangeType.bs").ofString(b("bs_caml_array").get(k,e));f===b("MessageProfileRangeType").THREAD||f===b("MessageProfileRangeType").THREAD_ACTIVE?c.push({offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e)),length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),entity:{__typename:"Profile",uri:h(d),id:b("FBID.bs").ofStringExn(d)}}):f===b("MessageProfileRangeType").PROFILE?c.push({offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e)),length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),entity:{__typename:"Profile",uri:i(a,d),id:b("FBID.bs").ofStringExn(d)}}):f===b("MessageProfileRangeType").COMMUNITY_CHANNEL?c.push({offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e)),length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),entity:{__typename:"CommunityChannel",threadKey:b("bs_caml_format").caml_int64_of_string(d)}}):f===b("MessageProfileRangeType").SILENT&&c.push({offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e)),length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),entity:{__typename:"Command"}});return c},[])}f.utf16RegexSpaces=g;f.isEmojiOnlyMessage=a;f.findRanges=c;f.createURIForThread=h;f.createProfileURIForMention=i;f.findRangesForMentions=d}),null);
__d("MWPGating.bs",["qex"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("qex")._("105")===!0}f.isDualColumnMessageListEnabled=a}),null);
__d("MWPOpenComposerUtils.bs",["LSRemoveMediaSendJobs","LSResumeMediaSendJob","MWConsole","Promise","bs_caml_int64","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return a.table("media_staging").get({hd:c,tl:0}).then(function(d){if(d!==void 0)return a.table("media_staging")["delete"]({hd:c,tl:0});else return b("Promise").resolve(void 0)})}function c(a,c,d){return a.table("media_staging").get({hd:c,tl:0}).then(function(c){if(c!==void 0)return a.table("media_staging").put(b("bs_curry")._1(d,c));else return b("Promise").resolve(void 0)})}function d(a,c,d,e,f){return a.table("attachments").get({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}}).then(function(g){if(g!==void 0)return a.table("attachments").upsert({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}},b("bs_curry")._1(f,g));else return b("Promise").resolve(void 0)})}function e(a,c,d){return b("LSResumeMediaSendJob")(c,b("bs_caml_int64").zero,d!==void 0?b("bs_caml_option").valFromOption(d):void 0,a).then(function(d){d=d[0];if(d)return b("LSRemoveMediaSendJobs")(c,a);else return b("Promise").resolve(void 0)})}f.deleteMediaStaging=a;f.updateMediaStaging=c;f.updateAttachment=d;f.resumeSendJob=e}),null);
__d("MWPComposerMediaUploadUtil.bs",["MessagingAttachmentType.bs","URI","XComposerPhotoUploader","bs_caml","bs_caml_array","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e,f,h){a=a!==void 0?a:function(a,b){};var i=d!==void 0?d:function(a,b){};d=e!==void 0?e:!1;e=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,c){b("bs_curry")._2(i,a,c);return!0},onUploadProgress:b("bs_curry").__2(a),onUploadStart:function(a){},onUploadSuccess:function(a,d){d=b("bs_caml_array").get(d.response.payload.metadata,0);var e=d.fbid,f=d.video_id,g=d.audio_id,h=d.gif_id;d=d.file_id;e=e!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(e)):f!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(f)):g!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(g)):h!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(h)):d!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(d)):void 0;e!==void 0?b("bs_curry")._2(c,a,e):b("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:new(g||(g=b("URI")))("/ajax/mercury/upload.php")});a=d?{data:{voice_clip:!0}}:void 0;e.getAsyncFileUploadRequest(f,h,a).send()}function c(a){a=a.type;if(b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return b("MessagingAttachmentType.bs").image;else if(a==="audio/wav")return b("MessagingAttachmentType.bs").audio;else if(a==="image/gif")return b("MessagingAttachmentType.bs").animatedImage;else if(b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return b("MessagingAttachmentType.bs").video;else return b("MessagingAttachmentType.bs").file}function d(a,c,d){return{attachment_fbid:a,offline_attachment_id:a,attachment_type:b("MessagingAttachmentType.bs").audio,attachment_index:b("bs_caml_int64").zero,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,playable_duration_ms:b("bs_caml_int64").of_float(d*1e3),preview_url:void 0,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}}function e(a,c){a=a.map(function(a){return{attachment_fbid:a.offlineAttachmentId,offline_attachment_id:a.offlineAttachmentId,attachment_type:a.attachmentType,attachment_index:b("bs_caml_int64").zero,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,playable_duration_ms:void 0,preview_url:a.previewUrl,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:[0,200],preview_height:[0,200],xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}});var d=[],e=[];a.forEach(function(a){b("bs_caml").i64_eq(a.attachment_type,b("MessagingAttachmentType.bs").image)&&!c?e.push(a):d.push([a])});e.length>0&&d.unshift(e);return d.map(function(a){return a.map(function(a,c){a=b("bs_caml_obj").caml_obj_dup(a);a.attachment_index=b("bs_caml_int64").of_int32(c);return a})})}f.startUpload=a;f.getAttachmentType=c;f.getAudioAttachment=d;f.createPartitionedAttachments=e}),null);
__d("MWPAccessibleEyebrowsText.bs",["MWPAccessibleEyebrowsText.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWPAccessibleEyebrowsText.react");f.make=a}),null);
__d("MWPBaseMessageListRowCountdown.bs",["MAWEphemeralMessageTimer.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{backgroundColor:"xcrg951",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",flexGrow:"x1c4vz4f",paddingEnd:"x1sxyh0",paddingStart:"xurb0ha",zIndex:"x1vjfegm"},moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn"}};function a(a){var c=a.expirationTimestamp,d=a.ephemeralDurationInSec,e=a.hasReactions;a=a.ariaHidden;a=a!==void 0?a:!1;return i.jsx("div",{"aria-hidden":a,className:(h||(h=b("stylex")))(j.root,e?j.moveUpToAccountForReactions:!1),children:i.jsx(b("MAWEphemeralMessageTimer.bs").make,{expirationTimestamp:c,ephemeralDurationInSec:d})})}c=a;f.make=c}),null);
__d("MWPBaseMessageListRow.bs",["BaseThemeProvider.react","LSMessageContentType.bs","MWCombineThemeConfigs.bs","MWMessageDeliveryStatus.bs","MWPBaseMessageListRowCountdown.bs","MWPMessageIsReply.bs","MWPMessageListColumn.bs","MWPMessageParsingUtils.bs","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function a(a){var c=a.message,d=a.prevMessage;a=a.children;c=b("MWPMessageParsingUtils.bs").isStartOfGroup(c,d);if(c)return b("bs_curry")._1(a,void 0);else return null}a={make:a};function j(a){return b("bs_caml").i64_eq(b("bs_caml_int64").and_(a.displayedContentTypes,b("LSMessageContentType.bs").hscrollXma),b("bs_caml_int64").zero)}var k={container:{display:"x78zum5"},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli"},innerOutgoing:{flexDirection:"x15zctf7"}};function c(a){var c=a.children,d=a.message,e=a.renderProfile,f=a.renderMessageActions,g=a.renderGutterItem,l=a.hasReactions;a=a.outgoing;var m=b("MWPMessageIsReply.bs").make(d),n=d.ephemeralExpirationTs,o=d.ephemeralDurationInSec,p=d.isUnsent,q=b("MWMessageDeliveryStatus.bs").getFromSendStatus(d.sendStatusV2)===1;return i.jsxs("div",{role:"none",className:(h||(h=b("stylex")))(k.container),children:[i.jsxs(b("MWPMessageListColumn.bs").Profile.make,{children:[a?null:b("bs_curry")._1(e,void 0),l?i.jsx(b("MWPMessageListColumn.bs").VerticalRhythm.make,{height:18}):null]}),i.jsxs("div",{role:"none","data-testid":"message-container",className:h(k.inner,a?k.innerOutgoing:!1),children:[i.jsx(b("MWPMessageListColumn.bs").Bubble.make,{children:c,paint:!a||m,makeSpaceForActions:j(d)}),n!==void 0&&!p?i.jsx(b("MWPBaseMessageListRowCountdown.bs").make,{expirationTimestamp:n,ephemeralDurationInSec:o,hasReactions:l}):null,j(d)?i.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:q?null:b("bs_curry")._1(f,void 0)}):null,i.jsx(b("MWPMessageListColumn.bs").Grow.make,{children:i.jsx(b("MWPMessageListColumn.bs").HorizontalSpacer.make,{})})]}),i.jsxs(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:[b("bs_curry")._1(g,void 0),l?i.jsx(b("MWPMessageListColumn.bs").VerticalRhythm.make,{height:18}):null]})]})}c={styles:k,make:c};function d(a){var c=a.message,d=a.nextMessage,e=a.children;a=a.showContent;a=a!==void 0?a:!1;c=b("MWPMessageParsingUtils.bs").isEndOfGroup(c,d);if(c||a)return b("bs_curry")._1(e,void 0);else return null}d={make:d};var l={"mwp-reply-background-color":"var(--comment-footer-background)"},m={"mwp-reply-background-color":"var(--comment-footer-background)"},n={light:l,dark:m,type:"VARIABLES"};function e(a){var c=a.setHovered,d=a.stopHoveringRef,e=a.domElementRef,f=a.children,g=a.xstyle,j=a.role;a=a.theme;var k=g!==void 0?b("bs_caml_option").valFromOption(g):!1,l=a!==void 0?a:n,m=i.useCallback(function(a){return b("bs_curry")._1(c,function(a){return!1})},[c]);return i.jsx(b("BaseThemeProvider.react"),{config:i.useMemo(function(){return b("MWCombineThemeConfigs.bs").combine(n,l)},[l]),children:function(a,g){return i.jsx("div",{role:j,style:g,className:(h||(h=b("stylex")))(a,k),ref:e,onMouseOver:function(a){b("bs_curry")._1(d.current,void 0),b("bs_curry")._1(c,function(a){return!0}),d.current=m},onMouseLeave:function(a){if(d.current===m){b("bs_curry")._1(m,void 0);d.current=function(a){};return}},children:f})}})}l=e;f.BeforeContent=a;f.Body=c;f.Footer=d;f.defaultTheme=n;f.make=l}),null);
__d("MWPBaseMessageRowHeader.bs",["BaseHeading.react","LSMessageReplySourceTypeV2.bs","MWPAccessibleEyebrowsText.bs","MWPMessageIsReply.bs","MWPMessageListColumn.bs","bs_caml_obj","bs_caml_option","bs_curry","cr:3891","cr:3892","cr:4434","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={header:{display:"x78zum5",flexDirection:"xdt5ytf"},alignEnd:{alignItems:"xuk3077"},spaceBetween:{display:"x78zum5",justifyContent:"x1qughib"},timestamp:{paddingEnd:"x11eofan",marginTop:"x1anpbxc"},timestampWithSnippet:{paddingEnd:"x11eofan",marginTop:"x1ok221b"}};c=b("cr:3891")==null?void 0:b("bs_caml_option").some(b("cr:3891"));d=b("cr:3892")==null?void 0:b("bs_caml_option").some(b("cr:3892"));e=b("cr:4434")==null?void 0:b("bs_caml_option").some(b("cr:4434"));function k(a,c,d,e){var f=a.replySnippet;f=f!==void 0?f!=="":!1;var g=b("bs_caml_obj").caml_equal(a.replySourceTypeV2,b("LSMessageReplySourceTypeV2.bs").forward);if(f){f=b("bs_curry")._2(d,a,e);if(f!==null)return b("bs_caml_option").some(f);else return}if(!g)return;d=b("bs_curry")._2(c,a,e);if(d!==null)return b("bs_caml_option").some(d)}function a(a){var c=a.isFirstMessageInGroup,d=a.message,e=a.outgoing,f=a.renderSenderName,g=a.renderPinnedText,l=a.renderForwardSnippet,m=a.renderReplySnippet,n=a.renderTimestamp,o=a.renderTextWrapper,p=a.isGroupThread;a=a.alwaysRenderSenderName;a=a!==void 0?a:!1;var q=b("MWPMessageIsReply.bs").make(d);l=k(d,l,m,e);m=a||p&&c&&!e&&!q;a=n!==void 0?j.spaceBetween:!1;var r;p=0;var s;l!==void 0?r=i.jsx("div",{role:"none",className:(h||(h=b("stylex")))(j.header,e?j.alignEnd:!1),children:i.jsx(b("MWPMessageListColumn.bs").WithGutters.make,{children:b("bs_caml_option").valFromOption(l),shrinkwrap:!0})}):b("cr:3891")==null?b("cr:4434")==null?r=m?b("bs_curry")._1(f,d):i.jsx(b("MWPAccessibleEyebrowsText.bs").make,{message:d,outgoing:e}):(s=b("cr:4434"),p=1):(s=b("cr:3891"),p=1);p===1&&(r=i.jsx(s.make,{message:d,outgoing:e,renderPinnedText:function(a){return b("bs_curry")._2(g,a.message,a.showDivider)},renderTextWrapper:o,shouldRenderSenderName:m}));q=i.jsx(i.Fragment,{children:r});f=l!==void 0?j.timestampWithSnippet:j.timestamp;p=i.jsx(i.Fragment,{children:!(b("cr:3892")==null)&&n!==void 0?i.jsx(b("cr:3892").make,{message:d,renderText:o,renderTimestamp:n,xstyle:f}):null});if(c)return i.jsxs(b("BaseHeading.react"),{xstyle:a,children:[q,p]});else return q}a=a;f.styles=j;f.mWMessageEyebrows=c;f.$MWPBaseMessageRowHeaderTimestamp$requireCond=b("cr:3892");f.mwpBaseMessageRowHeaderTimestamp=d;f.$MWPMessageEyebrows$requireCond=b("cr:4434");f.mwMessageEyebrowsForCmBot=e;f.useSnippet=k;f.make=a}),null);
__d("MWPMessageListRowWithKeyboardInteractions.bs",["fbt","BaseHeadingContextWrapper.re","CometPressable.react","CometScreenReaderText.react","CometTimestamp.react","FocusInertRegion.react","FocusRegion.react","FocusWithinHandler.react","KeyCommandHandler.react","MDSTextPairing.react","MWMessageCellFocusTable.bs","MWMessageCellKeyCommands.bs","MWMessageTableFocusTable.bs","MWPBaseMessageListRow.bs","MWPGating.bs","MWPMessageAuthor.bs","MWV2MessageListIsRowModalContext.bs","MWV2MessageRowActionsContext.bs","MWV2MessageRowIsRowFocusedContext.bs","ReactDOMComet","StylexHelpers.bs","bs_caml_int64","bs_caml_option","bs_curry","focusScopeQueries","gkx","react","setTimeout","stylex","useCometTheme","useCometUniqueID","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={row:{position:"x1n2onr6"},cell:{display:"x78zum5",flexDirection:"xdt5ytf",position:"x1n2onr6"},cellFocusVisible:{zIndex:"x1vjfegm"},cellModal:{outline:"x1k66dxp","@media (-webkit-min-device-pixel-ratio: 0)":{outline:"x1bkw7pg"},outlineOffset:"x1g40iwv"},enterModalButton:{position:"x10l6tqk",end:"xlr8s2x",top:"x1qiirwl",transform:"x105ttfm",backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x152obne",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",zIndex:"x1vjfegm"},enterModalButtonVisible:{opacity:"x1hc1fzr"}};function l(a){}function m(a){var b=a.key;if(b==="ArrowUp"||b==="ArrowDown"||b==="ArrowLeft"||b==="ArrowRight"||b==="PageUp"||b==="PageDown"||b==="Home"||b==="End"){a.preventDefault();return}}var n=g._("__JHASH__U5V4JiyTDSI__JHASH__"),o=g._("__JHASH__oYKnPpg2Bpz__JHASH__"),p=g._("__JHASH__ctLNxPXr8we__JHASH__"),q=j.forwardRef(function(a,c){var d=a.text,e=a.xstyle,f=a.focusable,g=a.ariaLabel,h=a.onPress;a=b("useCometTheme")("invert");var i=a[1];g={"aria-label":g,onPress:function(a){return b("bs_curry")._1(h,void 0)},xstyle:function(a){return[i,k.enterModalButton,e]},focusable:f,children:j.jsx(b("MDSTextPairing.react"),{body:d,level:4,bodyColor:"primary"})};f=c==null?void 0:b("bs_caml_option").some(c);f!==void 0&&(g.ref=b("bs_caml_option").valFromOption(f));return b("bs_curry")._1(a[0],{children:j.jsx(b("CometPressable.react"),g)})});c={make:q};function a(a){var c=a.message,d=a.prevMessage,e=a.nextMessage,f=a.messageDomID,h=a.outgoing,r=a.stopHoveringRef,s=a.setFocused,t=a.setHovered,u=a.children,v=a.isModal,w=a.isDialogOpened,x=a.setIsDialogOpened,y=a.domElementRef,z=a.isFocused;a=a.theme;var A=j.useContext(b("MWV2MessageListIsRowModalContext.bs").context),B=j.useRef(null),C=b("useCometUniqueID")(),D=j.useCallback(function(a){b("bs_curry")._1(A,function(a){return c.messageId}),b("setTimeout")(function(a){b("FocusRegion.react").focusRegionById(C,b("focusScopeQueries").tabbableScopeQuery)},0)},[A,c.messageId,C]),E=function(a){b("bs_curry")._1(A,function(a){return""});a=B.current;if(!(a==null))return a.focus()},F=b("CometTimestamp.react").getTimestamp(b("useServerTime")(void 0),new Date(b("bs_caml_int64").to_float(c.timestampMs))),G=b("MWPMessageAuthor.bs").useAuthorName(c);G=G[0];h=h?g._("__JHASH__g90cYI08lR4__JHASH__"):G!==void 0?G:g._("__JHASH__I4KHPAQ-RAf__JHASH__");var H=b("useCometUniqueID")(),I=j.jsx(b("CometScreenReaderText.react"),{text:g._("__JHASH__BGN2Md9i0L4__JHASH__",[g._param("Stringified timestamp of the incoming message",F),g._param("Name of the author of the incoming message",h)]),id:H}),J=b("useCometUniqueID")(),K=j.useRef(null),L=b("MWPGating.bs").isDualColumnMessageListEnabled(void 0)||b("gkx")("5093"),M=b("gkx")("3598"),N=j.useRef(l),O=j.useRef(l),P=j.useRef(l),Q=j.useRef(l);G=j.useMemo(function(){return{setFocused:s,setIsDialogOpened:x,isDialogOpened:w}},[s,x,w]);F=j.useMemo(function(){return{forwardMessage:P,openReactionsMenu:N,removeMessage:Q,replyToMessage:O}},[N,O]);h={prevMessage:d,message:c,nextMessage:e,setHovered:t,stopHoveringRef:r,children:j.jsx(b("MWMessageTableFocusTable.bs").Table_.Row.make,{children:j.jsx(b("FocusWithinHandler.react"),{onFocusChange:function(a){if(z!==a){b("bs_curry")._1(s,function(b){return a});return b("bs_curry")._1(A,function(b){if((a||w)&&v)return c.messageId;else return""})}},onFocusVisibleChange:function(c){z!==c&&b("bs_curry")._1(s,function(a){return c});var a=K.current;if(c&&!(a==null)){b("setTimeout")(function(b){try{return a.scrollIntoView({block:"nearest",behavior:"smooth"})}catch(b){return a.scrollIntoView(!1)}},0);return}},children:function(a,d){a=j.jsx(b("MWMessageTableFocusTable.bs").Table_.Cell.make,{children:j.jsx("div",{ref:B,role:"gridcell",tabIndex:0,"data-scope":b("MWMessageTableFocusTable.bs").scopeID,"data-release-focus-from":"CLICK",className:(i||(i=b("stylex")))(k.cell,v?k.cellModal:!1,d?k.cellFocusVisible:!1),children:j.jsx(b("FocusInertRegion.react"),{disabled:v,children:v?j.jsxs(j.Fragment,{children:[j.jsx(b("FocusRegion.react").FocusRegion,{autoFocusQuery:b("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:b("focusScopeQueries").tabbableScopeQuery,recoverFocusQuery:b("focusScopeQueries").tabbableScopeQuery,children:j.jsx(b("KeyCommandHandler.react"),{children:j.jsxs("div",{role:"dialog","aria-describedby":f,"aria-labelledby":H,id:J,children:[u,v?I:null,j.jsx(q,{text:g._("__JHASH__PEyi9JodUw1__JHASH__"),xstyle:k.enterModalButtonVisible,focusable:!0,ariaLabel:o,onPress:E})]}),onKeyDown:m}),id:C}),b("ReactDOMComet").createPortal(j.jsx("div",{"aria-owns":J}),document.body)]}):j.jsxs(j.Fragment,{children:[u,L?null:j.jsx(q,{text:p,xstyle:d?k.enterModalButtonVisible:b("StylexHelpers.bs").styles.visuallyHidden,focusable:!0,ariaLabel:n,onPress:D,ref:K})]}),focusQuery:b("focusScopeQueries").tabbableScopeQuery})})});return j.jsxs(j.Fragment,{children:[j.jsx(b("MWMessageCellFocusTable.bs").keyCommands,{onEscape:v?E:void 0,onEnter:v?void 0:D,onSpace:v?void 0:D,children:M?j.jsx(b("MWMessageCellKeyCommands.bs").keyCommands,{message:c,children:a}):a}),L?j.jsx("div",{role:"gridcell",children:j.jsx(q,{text:v?g._("__JHASH__C-7ahaHTUI7__JHASH__"):p,xstyle:d&&!v?k.enterModalButtonVisible:b("StylexHelpers.bs").styles.visuallyHidden,focusable:v,ariaLabel:v?g._("__JHASH__C-7ahaHTUI7__JHASH__"):n,onPress:D,ref:K})}):null]})}})}),xstyle:k.row,role:"row"};y!==void 0&&(h.domElementRef=b("bs_caml_option").valFromOption(y));a!==void 0&&(h.theme=b("bs_caml_option").valFromOption(a));return j.jsx(b("BaseHeadingContextWrapper.re").make,{children:j.jsx(b("MWV2MessageRowIsRowFocusedContext.bs").Provider.make,{children:j.jsx(b("MWV2MessageRowActionsContext.bs").Provider.make,{children:j.jsx(b("MWPBaseMessageListRow.bs").make,h),value:F}),value:G})})}d=a;f.styles=k;f.noop=l;f.onKeyDown=m;f.enterModalLabel=n;f.exitModalLabel=o;f.enterLabel=p;f.ModalButton=c;f.make=d}),null);
__d("MWPMessageListText.bs",["BaseTheme.react","CometTextWithEntities.react","LSMessageReplySourceTypeV2.bs","MWBaseTheme.bs","MWChatTextTransform.bs","MWPVisibleMessageContext.bs","bs_caml_obj","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={forwardedOutgoing:{color:"xkxfvhb",borderStartColor:"x16b4vue"},forwardedIncoming:{color:"x12scifz",borderStartColor:"xa7jiu"},forwarded:{borderStartStyle:"x26u7qi",borderStartWidth:"x7g060r",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",whiteSpace:"x126k92a",wordWrap:"x1vvkbs",fontSize:"x1nxh6w3",lineHeight:"x1sibtaa",marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r"},regularOutgoing:{color:"x14ctfv"},regularIncoming:{color:"xzsf02u"},regular:{textAlign:"x1yc453h",whiteSpace:"x126k92a",fontSize:"x6prxxf",lineHeight:"x1fc57z9"}};d={"mw-blockquote-border-start-color":"var(--placeholder-text)"};e={"mw-blockquote-border-start-color":"var(--placeholder-text)"};var k={light:d,dark:e,type:"VARIABLES"};function a(a){if(a)return b("MWBaseTheme.bs").empty;else return k}function c(a){var c=a.message,d=a.text,e=a.outgoing,f=a.ranges,g=a.renderers,l=a.transforms,m=a.xstyleForText;a=a.xstyleForForwarded;l=l!==void 0?l:b("MWChatTextTransform.bs").epdTextTransforms;m=m!==void 0?b("bs_caml_option").valFromOption(m):!1;a=a!==void 0?b("bs_caml_option").valFromOption(a):!1;b("MWPVisibleMessageContext.bs").useHook(void 0);c=b("bs_caml_obj").caml_equal(c.replySourceTypeV2,b("LSMessageReplySourceTypeV2.bs").forward);var n=e?b("MWBaseTheme.bs").empty:k;if(d!==void 0)if(c){c={ranges:f,withParagraphs:!1,text:d,transforms:l};g!==void 0&&(c.renderers=b("bs_caml_option").valFromOption(g));a=i.jsx("blockquote",{className:(h||(h=b("stylex")))(j.forwarded,e?j.forwardedOutgoing:j.forwardedIncoming,a),dir:"auto",children:i.jsx(b("CometTextWithEntities.react"),c)})}else{c={ranges:f,withParagraphs:!1,text:d,transforms:l};g!==void 0&&(c.renderers=b("bs_caml_option").valFromOption(g));a=i.jsx("div",{role:"none",className:(h||(h=b("stylex")))(j.regular,e?j.regularOutgoing:j.regularIncoming,m),dir:"auto",children:i.jsx(b("CometTextWithEntities.react"),c)})}else a=null;return i.jsx(b("BaseTheme.react"),{config:n,children:a,role:"none"})}d=b("MWBaseTheme.bs").empty;e=c;f.styles=j;f.ougtoingTheme=d;f.incomingTheme=k;f.getTheme=a;f.make=e}),null);
__d("MWPMessageSenderName.bs",["fbt","MWPMessageAuthor.bs","MWPMessageListColumn.bs","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={container:{fontSize:"x1ncwhqj",color:"xi81zsa",lineHeight:"x15smj1u",paddingStart:"x53iox2",paddingBottom:"x1120s5i",marginTop:"x1k70j0n"}};function l(a){a=a.children;return j.jsx("div",{className:(i||(i=b("stylex")))(k.container),"data-testid":"mw_message_sender_name",children:a})}c={styles:k,make:l};function a(a){a=a.message;var c=b("MWPMessageAuthor.bs").useAuthorName(a);c=c[0];var d=g._("__JHASH__RNW_2o_rk9o__JHASH__"),e=b("gkx")("4365");a=a.takedownState;return a!==void 0&&e?j.jsx(j.Fragment,{children:j.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:j.jsx(l,{children:d})})}):j.jsx(j.Fragment,{children:c!==void 0?j.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:j.jsx(l,{children:c})}):null})}d=a;f.GroupHeading=c;f.make=d}),null);
__d("MWPSolidMessageBubble.bs",["bs_belt_Option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={bubble:{paddingTop:"x1y1aw1k",paddingEnd:"xn6708d",paddingBottom:"xwib8y2",paddingStart:"x1ye3gou",position:"x1n2onr6",overflowX:"x6ikm8r",overflowY:"x10wlt62",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",overflowWrap:"x1mzt3pk",wordBreak:"x13faqbe",color:"x14ctfv",maxWidth:"x1okitfd",zIndex:"x1vjfegm"},incoming_connect_top:{borderTopStartRadius:"x1lcm9me"},incoming_connect_bot:{borderBottomStartRadius:"x10y3i5r"},outgoing_connect_top:{borderTopEndRadius:"x1yr5g0i"},outgoing_connect_bot:{borderBottomEndRadius:"xrt01vj"},precedes_xma:{boxSizing:"x9f619",maxWidth:"x16it46q",width:"xh8yej3",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh"}};function a(a){var c=a.children,d=a.style,e=a.connectTop,f=a.connectBottom,g=a.precedesXMA,k=a.outgoing;a=a.xstyle;g=g!==void 0?g:!1;return i.jsx("div",{role:"none","data-testid":"solid-message-bubble",className:(h||(h=b("stylex")))(j.bubble,e?k?j.outgoing_connect_top:j.incoming_connect_top:!1,!g&&f?k?j.outgoing_connect_bot:j.incoming_connect_bot:!1,g?j.precedes_xma:!1,b("bs_belt_Option").getWithDefault(a,!1)),style:d,children:c})}c=a;f.styles=j;f.make=c}),null);/*FB_PKG_DELIM*/
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[1]=d[0].get("thread_key"),d[0],c.sp(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),[0,389])},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[3]=d[2].get("thread_key"),d[2],d[4]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[3]),[0,389],d[4],f,f,[0,0],[0,0],f,f,[0,0])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[1]),[0,394],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MAWCatQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4877036382414550"}),null);
__d("MAWCatQuery.facebook.graphql",["MAWCatQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:b("MAWCatQuery_facebookRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MAWCatQuery.graphql",["cr:11203"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:11203")}),null);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MAWCatQuery.graphql");c=a;g["default"]=c}),98);
__d("MAWDbBrowserEncryptionMetaTxns",["MAWCryptoConsts","MAWDexieTable","MAWKeychain","MAWKeychainCrypto","WALogger","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Keychain - No Previous Browser Encryption Meta Exists"]);h=function(){return a};return a}function i(a){return a.browserEncryptionMetaV2.orderBy("version").toArray()}function j(a){return a.browserEncryptionMetaV2.orderBy("version").last()}function a(a,b){return a.browserEncryptionMetaV2.where("version").equals(b).first()}function k(a,b){return a.browserEncryptionMetaV2.add(b)}function l(a){return a.browserEncryptionMetaV2.count()}function m(a,b,c){var e=d("MAWKeychainCrypto").genBrowserEncryptionKeyString(),f=d("MAWKeychainCrypto").genDatabaseEncryptionSeed();return d("MAWDexieTable").dexieAll([d("MAWDexieTable").dexieExpensiveAwait(d("MAWKeychainCrypto").importBrowserEncryptionKey(e)),d("MAWDexieTable").dexieExpensiveAwait(d("MAWKeychainCrypto").encryptDataToStringBuffer(b,f))]).then(function(b){var g=b[0];b=b[1];var h=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+d("MAWCryptoConsts").ENC_KEY_TTL);b={expiration:h,key:e,seed:b,version:c};return k(a,b).then(function(){return{expiration:h,key:g,seed:f,version:c}})})}function b(a,b){return j(a).then(function(c){c==null&&d("WALogger").DEV(h());if(c!=null&&!d("WATimeUtils").isInFuture(c.expiration))return m(a,b,c.version+1).then(function(){});return})}function n(a,b,c){return i(a).then(function(a){var e=c==null?a:a.filter(function(a){return a.version<=c});a=e.map(function(a){return d("MAWDexieTable").dexieAll([d("MAWDexieTable").dexieExpensiveAwait(d("MAWKeychainCrypto").importBrowserEncryptionKey(a.key)),d("MAWDexieTable").dexieExpensiveAwait(d("MAWKeychainCrypto").decryptDataToArrayBuffer(b,a.seed))]).then(function(b){var c=b[0];b=b[1];return{expiration:a.expiration,key:c,seed:b,version:a.version}})});return d("MAWDexieTable").dexieAll(a).then(function(a){var b=new Map(),c=d("MAWKeychain").getLatestVersion();a.map(function(a){b.set(a.version,a),c<a.version&&(c=a.version)});d("MAWKeychain").setLatestVersion(c);d("MAWKeychain").setEncryptionKeyEntries(b);return{dbEncMetas:e,encEntriesMap:b,latestVersion:c}})})}function e(a,b){return n(a,b).then(function(e){var f=e.dbEncMetas,g=e.encEntriesMap,h=e.latestVersion;return l(a).then(function(e){if(e!==f.length)throw c("err")("MAWKeychain - EncMeta count does not equal the fetched amount");e===0&&f.length===0?e=m(a,b,d("MAWCryptoConsts").VERSION).then(function(a){var b=new Map(),c=a.version;b.set(c,a);d("MAWKeychain").setEncryptionKeyEntries(b);d("MAWKeychain").setLatestVersion(c);return{encMaterials:b,latestVersion:c}}):e=d("MAWDexieTable").dexieResolve({encMaterials:g,latestVersion:h});return e})})}g.getAllBrowserEncryptionMeta=i;g.getLatestBrowserEncryptionMeta=j;g.getBrowserEncryptionMetaByVersion=a;g.setBrowserEncryptionMeta=k;g.getBrowserEncryptionMetaCount=l;g.generateNewBrowserEncryptionMeta=m;g.maybeRotateBrowserEncryptionMeta=b;g.fetchEncryptionMetas=n;g.fetchOrGenerateEncryptionMetas=e}),98);
__d("MAWEncyptionIndexedDb",["MAWDexieTable","MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","dexie_alpha","err","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={browserEncryptionMetaV2:"++id, &version"};f=babelHelpers["extends"]({},h);var i=null;function j(){if(i==null)throw c("err")("Encryption IndexDB should've been initialized");return i}function a(a){i==null&&(i=new(d("MAWDexieTable").DexieTable)(d("MAWIndexedDbMetadata").encryptionDbName(a),function(a){a.version(1).stores(h),a.on("versionchange",function(){window.location.reload()})}));return b("Promise").resolve()}function e(a,b){var e=Object.keys(a),f=e.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY,g=function(a){return function(){for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];if(c("dexie_alpha").currentTransaction!=null)throw c("unrecoverableViolation")("makeEncryptionMsgrTransactor cannot be called within another transaction","messenger_e2ee_web");var k=b!=null?d("MAWQplProxy").startQplUserFlow(b):null,l=j();return l.transact(f,e,function(){return a.apply(void 0,[l.stores].concat(h)).then(function(a){k==null?void 0:k.endSuccess();return a})["catch"](function(a){k==null?void 0:k.endFail("encryption_transaction_fail");a=d("MAWErrorObject").getErrorObject(a);throw c("unrecoverableViolation")("Error performing transaction in encryption transactor","messenger_e2ee_web",a?{error:a}:{})})})}};return g}g.CURRENT_ENCRYPTION_MAW_STORES=f;g.getEncryptionDB=j;g.makeEncryptionDB=a;g.makeEncryptionMsgrTransactor=e}),98);
__d("MAWKeychain",["MAWCryptoConsts","MAWDbBrowserEncryptionMetaTxns","MAWEncyptionIndexedDb","MAWKeychainCrypto","MAWTransactionMode","Promise","WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWKeychain - Setup Keychain on Worker Thread"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWKeychain - Setup Keychain on Main Thread"]);i=function(){return a};return a}var j={accountKey:null,encryptionMaterials:new Map(),databaseEncryptionKeys:new Map(),latestVersion:d("MAWCryptoConsts").VERSION};function k(){var a=n();if(a==null)return d("MAWKeychainCrypto").genAccountKey().then(function(a){o(a);return a});else return b("Promise").resolve(a)}function a(){return k().then(function(a){return d("MAWEncyptionIndexedDb").makeEncryptionMsgrTransactor({browserEncryptionMetaV2:d("MAWTransactionMode").READWRITE})(d("MAWDbBrowserEncryptionMetaTxns").fetchOrGenerateEncryptionMetas)(a).then(function(a){var b=a.encMaterials,c=a.latestVersion;return m(b).then(function(){d("WALogger").LOG(i());return c})})})}function e(a){return k().then(function(b){return d("MAWEncyptionIndexedDb").makeEncryptionMsgrTransactor({browserEncryptionMetaV2:d("MAWTransactionMode").READWRITE})(d("MAWDbBrowserEncryptionMetaTxns").fetchEncryptionMetas)(b,a).then(function(a){a=a.encEntriesMap;if(a.size===0)throw c("err")("Worker expected EARKeychain to have been setup in Mainworker");d("WALogger").LOG(h());return m(a)})})}function f(){return k().then(function(a){return d("MAWEncyptionIndexedDb").makeEncryptionMsgrTransactor({browserEncryptionMetaV2:d("MAWTransactionMode").READWRITE})(d("MAWDbBrowserEncryptionMetaTxns").maybeRotateBrowserEncryptionMeta)(a)})}function l(a){var b=a==null?p():a,d=s(b);if(d==null)throw c("err")("expected DBEncryptionKey with version "+b+" to exist - isVersionNull : "+(a==null).toString());return{version:b,key:d}}function m(a){var c=[];a.forEach(function(a,b){c.push(d("MAWKeychainCrypto").genDatabaseEncryptionKey(a.key,a.seed).then(function(a){return{version:b,dbEncKey:a}}))});return b("Promise").all(c).then(function(a){a.map(function(a){var b=a.version;a=a.dbEncKey;t(b,a)})})}function n(){return j.accountKey}function o(a){j.accountKey=a}function p(){return j.latestVersion}function q(a){j.latestVersion=a}function r(a){j.encryptionMaterials=a}function s(a){return j.databaseEncryptionKeys.get(a)}function t(a,b){j.databaseEncryptionKeys.set(a,b)}function u(){return j.databaseEncryptionKeys}function v(){return j}function w(){j.accountKey=null,j.encryptionMaterials=new Map(),j.databaseEncryptionKeys=new Map(),j.latestVersion=d("MAWCryptoConsts").VERSION}g.fetchOrGenerateAccountKey=k;g.setupEARKeychain=a;g.fetchEARKeyChainForWorker=e;g.maybeRotateBrowserEncryptionMetaInTxn=f;g.getDbEncryptionKey=l;g.getLatestVersion=p;g.setLatestVersion=q;g.setEncryptionKeyEntries=r;g.getAllDatabaseEncryptionKeys=u;g.getEARKeychainForDebugging=v;g.resetEARKeyChain=w}),98);
__d("MAWCryptoAuthToken",["MAWCatQuery","MAWDbMetaTxns","MAWIndexedDb","MAWTransactionMode","RelayHooks","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(a){return a==null||a.secure_message_over_wa_cat_query==null||a.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||a.secure_message_over_wa_cat_query.expiration_time_in_seconds==null?{error:"Crypto Auth Token was null or incomplete"}:{success:{encrypted_serialized_cat:a.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:a.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function j(a){return d("RelayHooks").fetchQuery(a,c("MAWCatQuery"),{}).toPromise().then(i)["catch"](function(a){d("WALogger").WARN(h(),a);return{error:"Failed to fetch Crypto Auth Token"}})}function a(a){return j(a).then(function(a){if(a.error!==null&&a.error!==void 0)throw c("err")("Unable to rotate Crypto Auth Token");var b=function(b){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE})(b)(a.success)};return b(d("MAWDbMetaTxns").putCAT).then(function(){return a.success})})}g.processCatResponse=i;g.fetchFreshCAT=j;g.fetchAndSaveCAT=a}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){function a(a,c,d){var e,f=d;return new(b("Promise"))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a&&a.addEventListener&&a.addEventListener(c,e)})["finally"](function(){a&&a.removeEventListener&&a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["MessengerWaitForEvent","Promise","QPLUserFlow","err","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=1e3;a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,j=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?i:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";if(!a.includes(c("pageID")))return!0;else return!1};this.$1=d;this.$2=e;this.$5=h;this.$6=j;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(c("qpl")._(1056847375,"584"));this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a!=null&&a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return b("Promise").resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setTakeoverError:a.error,setMutexError:d.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"fail_to_set_takeover_or_mutex");return b("Promise").resolve(!1)}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return b("Promise").resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_init_takeover_failure");return b("Promise").resolve(!1)}var g,h=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var j=(a=this==null?void 0:this._mutexTimeoutMs)!=null?a:i;a=b("Promise").race([f,new(b("Promise"))(function(a){g=setTimeout(function(){a()},j)}),this.$8?this.$8():new(b("Promise"))(function(a){})]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{setTakeoverError:b.error,setMutexError:d.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");b=e.$11(a.newValue);if(!b&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");d=e.$10(c("pageID"));if(!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{setMutexError:d.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_no_takeover_permission");return!1}}).then(function(a){h();return a})["catch"](function(a){h();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_general_failure");return!1});return a};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a==c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";if(!a.includes(c("pageID")))return!0;else return!1};e.$14=function(){if(!h){var a=this.$5();if(!a)throw c("err")("Could not get localStorage");h=a}return h};e.getMutex=function(){h=this.$14();return h.getItem(this.$1)};e.$10=function(a){h=this.$14();return this.$6(h,this.$1,a)};e.$13=function(){h=this.$14(),h.removeItem(this.$1)};e.getTakeover=function(){h=this.$14();return h.getItem(this.$2)};e.$9=function(a){h=this.$14();return this.$6(h,this.$2,a)};e.$12=function(){h=this.$14(),h.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a==c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({mutexKey:h,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},getStorage:d("MAWLocalStorage").getStorage,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("MAWAckLevel.bs",["LSMessageSendStatus.bs","LSMessageSendStatusV2.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==7)if(a>=8)return b("LSMessageSendStatusV2.bs").serverReceived;else if(a<7)return b("LSMessageSendStatusV2.bs").nonRetriableError;else return b("LSMessageSendStatusV2.bs").none;else return b("LSMessageSendStatusV2.bs").sendingToServer}function c(a){if(a!==7)if(a>=8)return b("LSMessageSendStatus.bs").serverReceived;else if(a<7)return b("LSMessageSendStatus.bs").nonRetriableError;else return b("LSMessageSendStatus.bs").none;else return b("LSMessageSendStatus.bs").sendingToServer}d={senderBackFillSent:-7,inactiveReceived:-6,contentUnuploadable:-5,contentTooBig:-4,contentGone:-3,expired:-2,failed:-1,clock:0,sent:1,received:2,read:3,played:4};f.levelToMessagingSendStatusV2=a;f.levelToMessagingSendStatus=c;f.ackVal_DO_NOT_USE=d}),null);
__d("MAWAckLevel",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a;switch(a){case 0:return-7;case 1:return-6;case 2:return-5;case 3:return-4;case 4:return-3;case 5:return-2;case 6:return-1;case 7:return 0;case 8:return 1;case 9:return 2;case 10:return 3;case 11:return 4}}function b(a){var b=null;switch(a){case-7:b=0;break;case-6:b=1;break;case-5:b=2;break;case-4:b=3;break;case-3:b=4;break;case-2:b=5;break;case-1:b=6;break;case 0:b=7;break;case 1:b=8;break;case 2:b=9;break;case 3:b=10;break;case 4:b=11;break}return b}f.ackLevelToJS=a;f.ackLevelToRE=b}),66);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF}g.isEphemeralSettingSetAdminMsg=a}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg.bs",["MAWLocalizationEphemeralSettingSetAdminMsg"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a)}f.isEphemeralSettingSetAdminMsg=a}),null);
__d("MAWAdminMsgCTA.bs",["fbt","MAWLocalizationEphemeralSettingSetAdminMsg.bs","MAWLocalizationType.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";var h=g._("__JHASH__iw7A0LnsmaW__JHASH__").toString(),i=g._("__JHASH__jODYJ2eW1Pa__JHASH__").toString(),j=g._("__JHASH__xAOSvpC7vLN__JHASH__").toString();function k(a){return b("ReQL.bs").first(b("ReQL.bs").fromIndexDescending(a.table("admin_message_ctas").index("ctaId"))).then(function(a){if(a!==void 0)return b("bs_caml_int64").add(a.ctaId,b("bs_caml_int64").one);else return b("bs_caml_int64").zero})}function l(a,c,d){return b("ReQL.bs").first(b("ReQL.bs").bounds(b("ReQL.bs").fromTableDescending(a.table("admin_message_ctas")),{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:c,tl:{hd:d,tl:0}}},{NAME:"lessThanOrEqual",VAL:{hd:c,tl:{hd:d,tl:0}}}]})).then(function(a){return a})}function m(a){if(a!==void 0)if(b("MAWLocalizationEphemeralSettingSetAdminMsg.bs").isEphemeralSettingSetAdminMsg(a))return{adClientToken:void 0,adPreferenceUrl:void 0,adHelpUrl:void 0,showAdChoiceIcon:!1,title:h,actionUrl:void 0,adminMessageNicknameParticipantId:void 0,targetId:void 0,targetTitle:void 0};else if(a===b("MAWLocalizationType.bs").cutoverThreadAdminMessage||a===b("MAWLocalizationType.bs").e2eeThreadAdminMessage)return{adClientToken:void 0,adPreferenceUrl:void 0,adHelpUrl:void 0,showAdChoiceIcon:!1,title:i,actionUrl:void 0,adminMessageNicknameParticipantId:void 0,targetId:void 0,targetTitle:void 0};else if(a===b("MAWLocalizationType.bs").cutoverRollbackAdminMessage)return{adClientToken:void 0,adPreferenceUrl:void 0,adHelpUrl:void 0,showAdChoiceIcon:!1,title:j,actionUrl:void 0,adminMessageNicknameParticipantId:void 0,targetId:void 0,targetTitle:void 0};else return{adClientToken:void 0,adPreferenceUrl:void 0,adHelpUrl:void 0,showAdChoiceIcon:!1,title:void 0,actionUrl:void 0,adminMessageNicknameParticipantId:void 0,targetId:void 0,targetTitle:void 0};else return{adClientToken:void 0,adPreferenceUrl:void 0,adHelpUrl:void 0,showAdChoiceIcon:!1,title:void 0,actionUrl:void 0,adminMessageNicknameParticipantId:void 0,targetId:void 0,targetTitle:void 0}}function n(a){if(a!==void 0)if(b("MAWLocalizationEphemeralSettingSetAdminMsg.bs").isEphemeralSettingSetAdminMsg(a))return"admin_msg_armadillo_ephemeral_change_duration";else if(a===b("MAWLocalizationType.bs").cutoverThreadAdminMessage)return"admin_msg_thread_level_cutover";else if(a===b("MAWLocalizationType.bs").e2eeThreadAdminMessage)return"admin_msg_e2ee_thread";else if(a===b("MAWLocalizationType.bs").cutoverRollbackAdminMessage)return"admin_msg_cutover_rollback";else return}function o(a,c,d,e,f){return a.table("admin_message_ctas").add({threadKey:d,messageId:e.msgId,ctaId:c,timestampMs:b("MAWTimeUtils").toTimestamp(e.ts),adClientToken:f.adClientToken,adPreferenceUrl:f.adPreferenceUrl,adHelpUrl:f.adHelpUrl,showAdChoiceIcon:f.showAdChoiceIcon,title:f.title,actionUrl:f.actionUrl,adminMessageNicknameParticipantId:f.adminMessageNicknameParticipantId,targetId:f.targetId,targetTitle:f.targetTitle})}function p(a,c,d){return b("Promise").all([l(a,c,d.msgId),k(a)]).then(function(e){var f=e[1];e=e[0];var g=m(d.adminType);if(e!==void 0)return b("Promise").resolve({title:e.title,ctaId:e.ctaId,ctaType:n(d.adminType)});else return o(a,f,c,d,g).then(function(a){return{title:g.title,ctaId:f,ctaType:n(d.adminType)}})})}function a(a,c,d){var e=d.adminType;if(e!==void 0&&(b("MAWLocalizationEphemeralSettingSetAdminMsg.bs").isEphemeralSettingSetAdminMsg(e)||e===b("MAWLocalizationType.bs").cutoverThreadAdminMessage||e===b("MAWLocalizationType.bs").e2eeThreadAdminMessage||e===b("MAWLocalizationType.bs").cutoverRollbackAdminMessage))return p(a,c,d).then(function(a){return{result:a,threadKey:c}});else return b("Promise").resolve({result:void 0,threadKey:c})}f.insertAdminMsgCta=o;f.createOrReturnExistingAdminMsgCta=p;f.getAdminMsgCtaStep=a}),null);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWMedia.bs",["MAWDbMedia","MessagingAttachmentType.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a===b("MAWDbMedia").IMAGE)return b("MessagingAttachmentType.bs").image;else if(a===b("MAWDbMedia").VIDEO)return b("MessagingAttachmentType.bs").video;else if(a===b("MAWDbMedia").PTT)return b("MessagingAttachmentType.bs").audio;else if(a===b("MAWDbMedia").GIF)return b("MessagingAttachmentType.bs").animatedImage;else if(a===b("MAWDbMedia").STICKER)return b("MessagingAttachmentType.bs").sticker;else return b("MessagingAttachmentType.bs").none}c=b("bs_caml_int64").of_int32;f.mediaTypeToMessageAttachmentType=a;f.mediaIdToIntExn=c}),null);
__d("bs_js_mapperRt",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)throw{RE_EXN_ID:"Not_found",Error:new Error()};return a}function b(a,b,c){var d=0;while(!0){var e=d;if(e===a)return;var f=b[e];if(f===c)return e;d=e+1|0;continue}}function c(a,b,c){var d=0;while(!0){var e=d;if(e===a)throw{RE_EXN_ID:"Not_found",Error:new Error()};var f=b[e];if(f===c)return e;d=e+1|0;continue}}f.raiseWhenNotFound=a;f.fromInt=b;f.fromIntAssert=c}),null);
__d("MAWXMA.bs",["bs_caml_int64","bs_js_mapperRt"],(function(a,b,c,d,e,f){"use strict";var g=[4,9,10,11,12,13,14,15,16,17,18,1e3,1001,1002,1003,1004,1005];function a(a){return g[a]}function c(a){return b("bs_js_mapperRt").fromInt(17,g,a)}e={tToJs:a,tFromJs:c};function d(a){if(a===11)return"xma_open_native"}a=b("bs_caml_int64").of_int32;f.ExtendedContentTargetType=e;f.extendedContentCTAButtonTypeToLSCTAType=d;f.xmaIdToIntExn=a}),null);
__d("QPLUserCountEvent",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("QPLUserFlow").start(a),c("QPLUserFlow").endSuccess(a)}g.fireQplUserCount=a}),98);
__d("MNLSXMATemplateType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").neg_one;f.genericShare=a;f.default_=c}),null);
__d("MNXMAPreviewImageDecorationType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9];f.default_=a;f.collage=c;f.video=d;f.messengerIcon=e;f.instagramIcon=b;f.shopping=g;f.upcomingEvent=h;f.live=i;f.reel=j;f.igtv=k}),null);
__d("MAWBridgeNewXMAHandler.bs",["MAWDbMsg","MAWThreadId.bs","MAWXMA.bs","MNLSXMALayoutType.bs","MNLSXMATemplateType.bs","MNXMAPreviewImageDecorationType.bs","MessagingAttachmentType.bs","Promise","ReQL.bs","bs_belt_Array","bs_belt_Option","bs_caml_int64","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){if(a===void 0)return;a=b("bs_belt_Array").get(a,c-1|0);if(a===void 0)return;c=a.buttonType;if(c!==void 0)return b("MAWXMA.bs").extendedContentCTAButtonTypeToLSCTAType(c)}function h(a,c){if(a===void 0)return;a=b("bs_belt_Array").get(a,c-1|0);if(a!==void 0)return a.title}function i(a){if(a===0||a!==3)return b("MNLSXMALayoutType.bs").single;else return b("MNLSXMALayoutType.bs").portrait}function j(a){return b("MNLSXMATemplateType.bs").default_}function k(a){switch(a){case 10:return b("MNXMAPreviewImageDecorationType.bs").collage;case 14:return b("MNXMAPreviewImageDecorationType.bs").reel;case 5:case 6:case 7:case 8:case 9:case 11:case 15:case 16:case 17:case 18:case 19:return b("MNXMAPreviewImageDecorationType.bs").default_;case 4:case 12:case 13:case 20:case 21:case 22:case 23:return b("MNXMAPreviewImageDecorationType.bs").instagramIcon;default:return b("MNXMAPreviewImageDecorationType.bs").default_}}function l(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=String(c.xmaId),f=c.msgId;if(f!==void 0)return b("ReQL.bs").first(b("ReQL.bs").fromTableDescending(a.table("attachment_ctas"))).then(function(g){var h=g!==void 0?b("bs_caml_int64").add(g.ctaId,b("bs_caml_int64").one):b("bs_caml_int64").one;g=c.defaultCTA;if(g===void 0)return b("Promise").resolve([void 0,h]);var i=g.actionUrl,j=g.nativeUrl;return a.table("attachment_ctas").add({ctaId:h,attachmentFbid:e,attachmentIndex:b("bs_caml_int64").zero,threadKey:d,messageId:f,title:b("bs_belt_Option").getWithDefault(g.title,""),type_:"xma_web_url",platformToken:void 0,actionUrl:i!==void 0?i:g.nativeUrl,nativeUrl:j!==void 0?j:g.actionUrl,urlWebviewType:void 0,actionContentBlob:void 0,enableExtensions:!1,extensionHeightType:void 0,targetId:void 0}).then(function(a){return b("Promise").resolve([h,h])})}).then(function(g){var h=g[1],i=g[0],j=[];g=c.ctas;if(g===void 0)return b("Promise").resolve([i,[]]);g=g.map(function(c,g){g=b("bs_caml_int64").add(h,b("bs_caml_int64").of_int32(g+1|0));j.push(g);var i=c.actionUrl,k=c.nativeUrl;return a.table("attachment_ctas").add({ctaId:g,attachmentFbid:e,attachmentIndex:b("bs_caml_int64").zero,threadKey:d,messageId:f,title:b("bs_belt_Option").getWithDefault(c.title,"Tap to view status update"),type_:"xma_web_url",platformToken:void 0,actionUrl:i!==void 0?i:c.nativeUrl,nativeUrl:k!==void 0?k:c.actionUrl,urlWebviewType:void 0,actionContentBlob:void 0,enableExtensions:!1,extensionHeightType:void 0,targetId:void 0})});return b("Promise").all(g).then(function(a){return b("Promise").resolve([i,j])})}).then(function(l){var m=l[1],n=b("bs_caml_int64").of_int32(b("MAWDbMsg").getInChatMsgIdFromMsgId(f)),o=b("MAWXMA.bs").ExtendedContentTargetType.tFromJs(c.targetType),p,q=0;o===13?p={width:[0,72],height:[0,108],xmaContentType:"xma_montage_share"}:q=1;q===1&&(p={width:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewWidth),b("bs_caml_int64").of_int32),height:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewHeight),b("bs_caml_int64").of_int32),xmaContentType:"xma_web_url"});return a.table("attachments").add({threadKey:d,timestampMs:n,messageId:f,offlineAttachmentId:e,attachmentFbid:e,attachmentType:b("MessagingAttachmentType.bs").xma,originalPageSenderId:void 0,filename:void 0,filesize:b("bs_belt_Option").map(c.filesize,b("bs_caml_int64").of_int32),hasMedia:!1,isSharable:!0,hasXma:!0,xmaLayoutType:b("bs_belt_Option").map(c.xmaLayoutType,i),xmasTemplateType:b("bs_belt_Option").map(c.xmaLayoutType,j),defaultCtaId:l[0],defaultCtaTitle:b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(c.defaultCTA,function(a){return a.title}),void 0),defaultCtaType:p.xmaContentType,attachmentCta1Id:b("bs_belt_Array").get(m,0),cta1Title:h(c.ctas,1),cta1Type:g(c.ctas,1),attachmentCta2Id:b("bs_belt_Array").get(m,1),cta2Title:h(c.ctas,2),cta2Type:g(c.ctas,2),attachmentCta3Id:b("bs_belt_Array").get(m,2),cta3Title:h(c.ctas,3),cta3Type:g(c.ctas,3),playableUrl:void 0,playableUrlFallback:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlMimeType:void 0,dashManifest:void 0,previewUrl:void 0,previewUrlFallback:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlMimeType:void 0,miniPreview:void 0,previewWidth:p.width,previewHeight:p.height,imageUrl:void 0,imageUrlFallback:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlMimeType:void 0,actionUrl:void 0,titleText:c.titleText,subtitleText:c.subtitleText,maxTitleNumOfLines:b("bs_belt_Option").map(c.maxTitleNumOfLines,b("bs_caml_int64").of_int32),maxSubtitleNumOfLines:b("bs_belt_Option").map(c.maxSubtitleNumOfLines,b("bs_caml_int64").of_int32),descriptionText:void 0,sourceText:void 0,attributionAppId:void 0,attributionAppName:void 0,attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,localPlayableUrl:void 0,playableDurationMs:void 0,attachmentIndex:b("bs_caml_int64").zero,faviconUrl:void 0,faviconUrlFallback:void 0,faviconUrlExpirationTimestampMs:void 0,decryptionKey:void 0,accessibilitySummaryText:void 0,isPreviewImage:void 0,listItemsId:void 0,listItemsDescriptionText:void 0,listItemsSecondaryDescriptionText:void 0,listItemId1:void 0,listItemTitleText1:void 0,listItemContactUrlList1:void 0,listItemProgressBarFilledPercentage1:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlFallbackList1:void 0,listItemAccessibilityText1:void 0,listItemId2:void 0,listItemTitleText2:void 0,listItemContactUrlList2:void 0,listItemProgressBarFilledPercentage2:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlFallbackList2:void 0,listItemAccessibilityText2:void 0,listItemId3:void 0,listItemTitleText3:void 0,listItemContactUrlList3:void 0,listItemProgressBarFilledPercentage3:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList3:void 0,listItemAccessibilityText3:void 0,originalFileHash:void 0,isBorderless:void 0,headerImageUrl:void 0,headerImageUrlFallback:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlMimeType:void 0,headerTitle:c.headerTitle,previewImageDecorationType:k(c.targetType),shouldHighlightHeaderTitleInTitle:void 0,targetId:void 0,shouldRespectServerPreviewSize:void 0,authorityLevel:b("bs_caml_int64").zero,ephemeralMediaState:void 0,viewerSeenTimestampMs:void 0,shouldAutoplayVideo:void 0,previewUrlLarge:void 0,previewWidthLarge:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewWidthLarge),b("bs_caml_int64").of_int32),previewHeightLarge:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewHeightLarge),b("bs_caml_int64").of_int32),subtitleIconUrl:void 0,preheaderText:void 0,listItemsDescriptionSubtitleText:void 0,avatarViewUrlList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewTitleList:void 0,avatarViewAccessibilityLabel:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback3:void 0,attachmentLoggingType:void 0,waveformData:void 0,samplingFrequencyHz:void 0,gatingType:b("bs_belt_Option").map(c.overlayIconGlyph,function(a){return String(a)}),gatingTitle:void 0,avatarViewSize:void 0,avatarCount:void 0})});else return b("Promise").resolve(void 0)})}function a(a,b){return l(a,b).then(function(a){})}f.getCTAType=g;f.getCTATitle=h;f.getLSXMALayoutType=i;f.getLSXMATemplateType=j;f.getLSPreviewImageDecorationType=k;f.call=a}),null);
__d("MAWBridgeTypes.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{TAG:1,_0:a}}function b(a){return{TAG:2,_0:a}}function c(a){return{TAG:0,_0:a}}function d(a){return{TAG:0,_0:a}}function e(a){return{TAG:1,_0:a}}function g(a){return 0}f.makeInitialThreadRange=a;f.makeThreadRangeForLoadBefore=b;f.makeThreadRangeNoThreads=c;f.makeInitialRange=d;f.makeExtendBefore=e;f.makeNoMsg=g}),null);
__d("MAWBridgeTypes.re",["MAWBridgeTypes.bs"],(function(a,b,c,d,e,f){c=(a=b("MAWBridgeTypes.bs")).makeInitialThreadRange;f.makeInitialThreadRange=c;d=a.makeThreadRangeForLoadBefore;f.makeThreadRangeForLoadBefore=d;e=a.makeThreadRangeNoThreads;f.makeThreadRangeNoThreads=e;b=a.makeInitialRange;f.makeInitialRange=b;c=a.makeExtendBefore;f.makeExtendBefore=c;d=a.makeNoMsg;f.makeNoMsg=d}),null);
__d("MAWBridgeTypesWrapper",["MAWAckLevel"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case 0:return"User";case 1:return"Group"}}function i(a){switch(a){case"User":return 0;case"Group":return 1}}function a(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToJS(a.ack)})}function b(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToRE(a.ack)})}function c(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToJS(a.ack),threadType:h(a.threadType)})}function e(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToRE(a.ack),threadType:i(a.threadType)})}g.bridgeMsgToJS=a;g.bridgeMsgToRE=b;g.bridgeStartTraceDataToJS=c;g.bridgeStartTraceDataToRE=e}),98);
__d("MAWBridgeAbPropsUpdatedHandler.bs",["MAWAbPropsClient.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){b("MAWAbPropsClient.bs").rewrite(a);return window.Promise.resolve(void 0)}f.call=a}),null);
__d("MAWBridgeDeleteGroupInviteHandler",["MAWThreadId","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return d("MAWThreadId").toThreadKeyMaybe(a,c.threadId).then(function(c){return c==null?b("Promise").resolve():d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("group_invites")).getKeyRange(c)).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.table("group_invites")["delete"]({hd:c.threadKey,tl:{hd:c.inviterId,tl:{hd:c.inviteeId,tl:0}}})})},b("Promise").resolve(void 0))})})}g["default"]=a}),98);
__d("MAWBridgeDeleteMessageRangesV2Handler.bs",["MAWThreadId.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("messages_ranges_v2__generated")["delete"]({hd:d,tl:{hd:b("bs_caml_int64").of_float(c.minTimestampMs),tl:{hd:c.minMsgId,tl:0}}});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeDeleteMessagesHandler",["MAWThreadId","MAWTimeUtils","ReQL","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c.threadId));case 2:e=k.sent;if(!(e!==void 0)){k.next=20;break}f=c.messages,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 5:if(!g){k.next=11;break}if(!(h>=f.length)){k.next=8;break}return k.abrupt("break",20);case 8:i=f[h++];k.next=15;break;case 11:h=f.next();if(!h.done){k.next=14;break}return k.abrupt("break",20);case 14:i=h.value;case 15:j=i;k.next=18;return b("regeneratorRuntime").awrap(a.table("messages")["delete"](d("ReQL").key(e,d("MAWTimeUtils").toTimestamp(j.ts),j.msgId)));case 18:k.next=5;break;case 20:case"end":return k.stop()}},null,this)}g["default"]=a}),98);
__d("MAWBridgeDeleteReactionHandler.bs",["MAWThreadId.bs","Promise","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("reactions")["delete"]({hd:d,tl:{hd:c.messageId,tl:{hd:b("bs_caml_format").caml_int64_of_string(c.actorId),tl:0}}});else return b("Promise").resolve(void 0)})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeGroupInfoUpdatedHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=c.threadName,f=e==null?void 0:b("bs_caml_option").some(e);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(c){if(c===void 0)return b("Promise").resolve(void 0);c=b("bs_caml_obj").caml_obj_dup(c);return a.table("threads").put((c.threadName=f,c))})})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeGroupInviteUpdateHandler.bs",["MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","bs_caml_format","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(c.inviterId);return a.table("group_invites").put({threadKey:d,inviterId:e,inviteeId:b("bs_caml_format").caml_int64_of_string(c.inviteeId),inviteCode:c.inviteCode,inviteExpirationTimestampMs:b("MAWTimeUtils").toTimestamp(c.inviteExpireTs),caption:b("bs_caml_option").nullable_to_opt(c.caption)}).then(function(c){return b("MAWUpdateLSThreadCapabilities.bs").setGroupInviteTxn(a,d,e)})})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeInitOfflineQueueSyncCompleteHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";var g=[2328,1316134911];function h(a){return a.table("sync_groups").put({groupId:b("MAWInitSyncComplete.bs").id,currentCursor:void 0,syncStatus:b("LSSyncStatus.bs").complete,syncParams:b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),sendSyncParams:!0,minTimeToSyncTimestampMs:g,canIgnoreTimestamp:!1,priority:b("bs_caml_int64").zero,lastSyncRequestTimestampMs:b("bs_caml_int64").zero,regionHint:void 0,lastSyncCompletedTimestampMs:void 0,dataTraceId:void 0,initTraceTimestampMs:void 0,syncChannel:b("LSSyncChannel.bs").mqtt})}function a(a){b("LSLogHistory").log("Init Offline Queue Sync Complete","debug");return window.Promise.resolve([h(a)]).then(function(a){return b("Promise").resolve(void 0)})}f.neverSyncTimestamp=g;f.finishOfflineArmadilloSyncCursor=h;f.call=a}),null);
__d("MAWBridgeInitOfflineQueueSyncProgressHandler.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Promise").resolve(void 0)}f.call=a}),null);
__d("MAWBridgeInitOfflineQueueSyncStartHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";var g=[2328,1316134911];function h(a){return a.table("sync_groups").put({groupId:b("MAWInitSyncComplete.bs").id,currentCursor:void 0,syncStatus:b("LSSyncStatus.bs").paging,syncParams:b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),sendSyncParams:!0,minTimeToSyncTimestampMs:g,canIgnoreTimestamp:!1,priority:b("bs_caml_int64").zero,lastSyncRequestTimestampMs:b("bs_caml_int64").zero,regionHint:void 0,lastSyncCompletedTimestampMs:void 0,dataTraceId:void 0,initTraceTimestampMs:void 0,syncChannel:b("LSSyncChannel.bs").mqtt})}function a(a,c){b("LSLogHistory").log("Init Offline Queue Sync Start","debug");return window.Promise.resolve([h(a)]).then(function(a){return b("Promise").resolve(void 0)})}f.neverSyncTimestamp=g;f.initOfflineArmadilloSyncCursor=h;f.call=a}),null);
__d("MAWBridgeInitSyncCompleteHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInit","MAWInitSyncComplete.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function g(a){return a.table("sync_groups").add({groupId:b("MAWInitSyncComplete.bs").id,currentCursor:void 0,syncStatus:b("LSSyncStatus.bs").complete,syncParams:b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),sendSyncParams:!0,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:!1,priority:b("bs_caml_int64").zero,lastSyncRequestTimestampMs:b("bs_caml_int64").zero,regionHint:void 0,lastSyncCompletedTimestampMs:void 0,dataTraceId:void 0,initTraceTimestampMs:void 0,syncChannel:b("LSSyncChannel.bs").mqtt})}function h(a){return a.table("network_requests").add({taskQueueName:"",syncDatabaseId:b("MAWInitSyncComplete.bs").id,epochId:(a=b("bs_caml_int64")).neg_one,networkTaskIdentifier:void 0,lastSentTimestampMs:a.zero,failureCount:a.zero,lastSyncRequestTimestampMs:a.zero,lastDelayedRequestTimestampMs:void 0})}function a(a){b("LSLogHistory").log("Init Sync Complete","debug");b("MAWInit").logPoint("init_sync_received");b("MAWInit").endSuccess();return window.Promise.all([g(a),h(a)]).then(function(a){return b("Promise").resolve(void 0)})}f.completeLocalArmadilloSyncCursor=g;f.completeLocalArmadilloNetworkRequest=h;f.call=a}),null);
__d("MAWBridgeMediaExpiredHandler.bs",["MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=String(c.mediaId);return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return a.table("attachments")["delete"]({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWEphemeralMessageExpirationStorage.bs",["MAWBridgeDeleteMessagesHandler","bs_belt_Array","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a,c,d){b("bs_belt_Array").forEach(c,function(c){var d=c.ts,e=c.chatId,f=c.msgId;d={ts:d,threadId:e,msgId:f};e=c.chatId;f=[d];c={threadId:e,messages:f};b("promiseDone")(b("MAWBridgeDeleteMessagesHandler")(a,c),void 0,void 0)});return g["delete"](d)}function i(a,c,d,e){return b("setTimeout")(function(b){h(a,c,d)},e)}function a(a,c,d,e){var f=g.get(d);c=f==null?[c]:(b("clearTimeout")(f.timeoutId),f.msgs.map(function(a){return a.msgId}).indexOf(c.msgId)===-1?(f.msgs.push(c),void 0):void 0,f.msgs);f=i(a,c,d,e);g.set(d,{expirationTs:d,msgs:c,timeoutId:f})}function c(a){var b=a.msgId;a=g.get(a.countdownTs);if(a==null)return;b=a.msgs.map(function(a){return a.msgId}).indexOf(b);if(b>-1){a.msgs.splice(b,1);return}}f.setMessageForExpiration=a;f.clearMessageFromExpiration=c}),null);
__d("MAWBridgeMsgClearCountdownHandler.bs",["MAWEphemeralMessageExpirationStorage.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){b("MAWEphemeralMessageExpirationStorage.bs").clearMessageFromExpiration(a);return b("Promise").resolve(void 0)}f.call=a}),null);
__d("LSMessageUnsendabilityStatus.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8];f.canUnsend=a;f.denyLogMessage=c;f.denyTombstoneMessage=d;f.denyForNonSender=e;f.denyP2pPayment=b;f.denyStoryReaction=g;f.denyBlobAttachment=h;f.denyMessageNotFound=i;f.denyMessageInstagramDirectWriteRestriction=j}),null);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("MAWSubscribeToContactNames",["fbt","$InternalEnum","Env","I64","Promise","ReQL","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("$InternalEnum").Mirrored(["FIRST_NAME","FULL_NAME"]),j=new Map(),k=Boolean(c("Env").isMessengerDotComOnComet)?"Messenger":c("gkx")("1902661")?"Instagram":"Facebook";function l(){return h._("__JHASH__9kaBCOd2SjE__JHASH__",[h._param("Platform Name",k)]).toString()}function m(a,c,e,f){var g=d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(c)).subscribe(function(a,c){var d;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:if(!(c.operation!=="delete")){h.next=7;break}a=c.value;d=e===i.FULL_NAME?a.name:a.firstName;if(!(d!=null&&d!=="")){h.next=7;break}h.next=6;return b("regeneratorRuntime").awrap(f(d));case 6:g();case 7:case"end":return h.stop()}},null,this)});return g}function a(a,c){return b("Promise").all(c.map(function(c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(c))));case 2:e=f.sent;return f.abrupt("return",e==null?c:null);case 4:case"end":return f.stop()}},null,this)})).then(function(a){return a.filter(Boolean)})}function n(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(c))));case 2:f=g.sent;return g.abrupt("return",e===i.FULL_NAME?f==null?void 0:f.name:f==null?void 0:f.firstName);case 4:case"end":return g.stop()}},null,this)}function e(a){var c=a.contactIDs,d=a.db,e=a.nameMode,f=e===void 0?i.FIRST_NAME:e,g=a.onResolve,h=a.subscriptionKey,k=a.txn,o=new Map(),p=[],q=function(a,b){return(a=o.get(b))!=null?a:l()};if(j.has(h)){(e=j.get(h))==null?void 0:e.map(function(a){return a()})}j.set(h,p);return b("Promise").all(c.map(function(a,e){var i,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return b("regeneratorRuntime").awrap(n(k,a,f));case 2:i=s.sent;if(!(i!=null&&i!=="")){s.next=6;break}o.set(e,i);return s.abrupt("return",i);case 6:g!=null&&(r=m(d,a,f,function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:r();o.set(e,a);if(!(o.size===c.length)){d.next=6;break}j["delete"](h);d.next=6;return b("regeneratorRuntime").awrap(g(c.map(q)));case 6:case"end":return d.stop()}},null,this)}),p.push(r));return s.abrupt("return",l());case 8:case"end":return s.stop()}},null,this)}))}g.ContactNameMode=i;g.getUnknownUser=l;g.getMissingContactNames=a;g.getContactNameFromContactID=n;g.getContactNamesFromContactIDs=e}),98);
__d("MAWBridgeBuildAdminMsg",["CurrentUser","I64","LS.re","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSVerifyContactRowExists","MAWAdminMsg","MAWAdminMsgNormalized","MAWLocalizationType","MAWSubscribeToContactNames","MAWThreadId","Promise","ReQL","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f,g,i,j,k,l){var m,n,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:l===void 0&&(l=0);m=d("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(k,j),n=m.contactIds,o=m.contents;if(!(l===1)){t.next=15;break}p=k===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP?d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME:d("MAWSubscribeToContactNames").ContactNameMode.FULL_NAME;t.next=6;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getMissingContactNames(e,n));case 6:q=t.sent;if(!(q.length>0)){t.next=10;break}t.next=10;return b("regeneratorRuntime").awrap(b("Promise").all(q.map(function(a){return c("LSVerifyContactRowExists")(d("I64").of_string(a),d("I64").of_int32(c("LSContactIdType").FBID),void 0,void 0,d("I64").of_int32(c("LSContactType").USER),void 0,void 0,void 0,void 0,!1,!1,d("I64").of_int32(c("LSContactBlockedByViewerStatus").UNBLOCKED),void 0,a===c("CurrentUser").getID(),d("I64").of_int32(c("LSAuthorityLevel").OPTIMISTIC),void 0,void 0,d("I64").of_int32(c("LSContactWorkForeignEntityType").UNKNOWN),d("I64").of_int32(c("LSContactGender").UNKNOWN),d("I64").of_int32(c("LSContactViewerRelationship").UNKNOWN),void 0,c("LS.re").make(e))})));case 10:t.next=12;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getContactNamesFromContactIDs({contactIDs:[].concat(n),db:a,nameMode:p,onResolve:function(b){b=d("MAWAdminMsg").buildLocalizedString(o,b,k);return h(a,f,g,i,b)},subscriptionKey:d("I64").to_string(g),txn:e}));case 12:r=t.sent;s=d("MAWAdminMsg").buildLocalizedString(o,r,k);return t.abrupt("return",s);case 15:return t.abrupt("return",d("MAWAdminMsg").buildLocalizedString(o,n,k));case 16:case"end":return t.stop()}},null,this)}function h(a,c,e,f,g){return a.runInTransaction(function(h){var i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c));case 2:i=l.sent;if(!(i==null)){l.next=5;break}return l.abrupt("return");case 5:j=h.table("messages");l.next=8;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(j).getKeyRange(i,e,f)));case 8:k=l.sent;if(!k){l.next=12;break}l.next=12;return b("regeneratorRuntime").awrap(j.put(babelHelpers["extends"]({},k,{text:g})));case 12:case"end":return l.stop()}},null,this)},"readwrite")}g.buildAdminMsgText=a}),98);
__d("MAWBridgeBuildAdminMsg.bs",["MAWBridgeBuildAdminMsg"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("MAWBridgeBuildAdminMsg").buildAdminMsgText(a,c,d,e,f,g,h,i)}f.buildAdminMsgText=a}),null);
__d("LSReplyMessageStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWMsgReply",["fbt","LSReplyMessageStatus","MAWSubscribeToContactNames","MAWThreadId","MAWTimeUtils","ODS","Promise","ReQL","WAMsgType","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=a.isAuthorMe,c=a.isDeletedMsg,d=a.isStoryReply;d=d===void 0?!1:d;var e=a.isStoryShare;e=e===void 0?!1:e;var f=a.recipientName,g=a.replySenderIsMe;g=g===void 0?!1:g;var i=a.replySenderIsRecepient;a=a.senderName;switch(!0){case b&&c:return h._("__JHASH__FzueDOoURT8__JHASH__");case b&&e:return h._("__JHASH__d4DLCdwDC03__JHASH__");case b&&g:return h._("__JHASH__GiGYAtipVIl__JHASH__");case b&&d:return f!=null?h._("__JHASH__ZkkDtvZx-as__JHASH__",[h._param("name",f)]):h._("__JHASH__GEUovmERkjj__JHASH__");case b:return f!=null?h._("__JHASH__eQLjVyXwwuH__JHASH__",[h._param("other_name",f)]):h._("__JHASH__NYU_gsfRGpq__JHASH__");case c:return h._("__JHASH__30kvLEU_B_p__JHASH__",[h._param("name",a)]);case i:return h._("__JHASH__RWi7lW394uo__JHASH__",[h._param("other",a)]);case e:return h._("__JHASH__JQwHPEO2e9j__JHASH__",[h._param("user",a)]);case g&&d:return h._("__JHASH__zc6GoZLyKDZ__JHASH__",[h._param("name",a)]);case g:return h._("__JHASH__uU6-xunUPnp__JHASH__",[h._param("other_name",a)]);default:return f!=null?h._("__JHASH__iOHMd6RP1E7__JHASH__",[h._param("other",a),h._param("other_name",f)]):h._("__JHASH__JL2f9yie2zt__JHASH__",[h._param("other",a)])}}function a(a,e,f){var g,h,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return b("regeneratorRuntime").async(function(C){while(1)switch(C.prev=C.next){case 0:h=f.chatId,l=f.isAuthorMe,m=f.isStoryReply,n=f.isStoryShare,o=n===void 0?!1:n,p=f.msgId,q=f.originalTs,r=f.replySenderIsMe,s=f.replySourceId,t=f.replyToUserId,u=f.sender,v=f.ts,w=f.type_;if(!(s==null&&!o)){C.next=3;break}return C.abrupt("return",b("Promise").resolve());case 3:if(!(t==null||u==null)){C.next=5;break}throw c("err")("Error getting reply snippet without replyToUserId or sender");case 5:x=d("MAWSubscribeToContactNames").getContactNameFromContactID(e,t,d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME)==null;y=d("MAWSubscribeToContactNames").getContactNameFromContactID(e,u,d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME)==null;d("ODS").bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet");x&&y?d("ODS").bumpEntityKey(3185,"armadillo_reply","missing_both"):y?d("ODS").bumpEntityKey(3185,"armadillo_reply","missing_sender"):x&&d("ODS").bumpEntityKey(3185,"armadillo_reply","missing_reply_to");C.next=11;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getContactNamesFromContactIDs({contactIDs:[t,u],db:a,onResolve:function(b){var e,g=b[0];b=b[1];return k(a,h,d("MAWTimeUtils").toTimestamp(w===d("WAMsgType").MSG_TYPE.REVOKED?(e=q)!=null?e:v:v),p,(e=i({isAuthorMe:l,isDeletedMsg:j(f)===c("LSReplyMessageStatus").DELETED,isStoryReply:m,isStoryShare:o,recipientName:g,replySenderIsMe:r,replySenderIsRecepient:u===t,senderName:b}))==null?void 0:e.toString())},subscriptionKey:p,txn:e}));case 11:z=C.sent;A=z[0];B=z[1];return C.abrupt("return",b("Promise").resolve((g=i({isAuthorMe:l,isDeletedMsg:j(f)===c("LSReplyMessageStatus").DELETED,isStoryReply:m,isStoryShare:o,recipientName:x?void 0:A,replySenderIsMe:r,replySenderIsRecepient:u===t,senderName:B}))==null?void 0:g.toString()));case 15:case"end":return C.stop()}},null,this)}function j(a){a=a.replyStatusType;switch(a){case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.REVOKED:return c("LSReplyMessageStatus").DELETED;case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.XMA:return c("LSReplyMessageStatus").VALID;case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return c("LSReplyMessageStatus").UNKNOWN;case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return c("LSReplyMessageStatus").EXPIRED;default:return void 0}}function k(a,c,e,f,g){var h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c));case 2:h=i.sent;if(!(h==null)){i.next=5;break}return i.abrupt("return",b("Promise").resolve());case 5:return i.abrupt("return",a.runInTransaction(function(a){var c,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:c=a.table("messages");j.next=3;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(c).getKeyRange(h,e,f)));case 3:i=j.sent;if(!i){j.next=7;break}j.next=7;return b("regeneratorRuntime").awrap(c.put(babelHelpers["extends"]({},i,{replySnippet:g})));case 7:case"end":return j.stop()}},null,this)},"readwrite"));case 6:case"end":return i.stop()}},null,this)}g.buildLocalizedReplySnippet=i;g.getReplySnippet=a;g.getReplyStatus=j}),98);
__d("MAWMsgReply.bs",["LSMessageReplySourceTypeV2.bs","LSReplyMessageAttachmentType.bs","MAWGating.bs","MAWMedia.bs","MAWXMA.bs","bs_belt_Option","bs_caml_format","bs_caml_int64","bs_caml_option","bs_curry","cr:385"],(function(a,b,c,d,e,f){"use strict";function a(a){return!b("bs_belt_Option").isNone(a.replySourceId)}function c(a){a=a.replyToUserId;if(a!==void 0)return b("bs_caml_format").caml_int64_of_string(b("bs_caml_option").valFromOption(a))}function d(a){var c=a.isForwarded,d=!b("bs_belt_Option").isNone(a.replySourceId),e=a.isStoryReply;a=a.isStoryShare;if(c)return b("LSMessageReplySourceTypeV2.bs").forward;if(a!==void 0&&a)return b("LSMessageReplySourceTypeV2.bs").fbStoryShare;if(d)if(e!==void 0&&e)return b("LSMessageReplySourceTypeV2.bs").story;else return b("LSMessageReplySourceTypeV2.bs").message}function e(a){var c=!b("bs_belt_Option").isNone(a.replySourceId),d=a.isStoryReply;a=a.isStoryShare;if(a!==void 0&&a)return b("LSMessageReplySourceTypeV2.bs").fbStoryShare;if(c)if(d!==void 0&&d)return b("LSMessageReplySourceTypeV2.bs").story;else return b("LSMessageReplySourceTypeV2.bs").message}function g(a){if(!b("bs_belt_Option").isNone(a.replySourceId))return a.replySourceId}function h(a){if(!b("bs_belt_Option").isNone(a.replySourceId))return a.replyMessageText}function i(a){if(b("bs_belt_Option").isNone(a.replySourceId))return!1;else return b("bs_belt_Option").isSome(a.replyMediaUrlMimeType)}function j(a){if(i(a))return a.replyMediaUrlMimeType}function k(a){if(i(a))return b("bs_belt_Option").map(a.replyMediaPreviewHeight,b("bs_caml_int64").of_int32)}function l(a){if(i(a))return b("bs_belt_Option").map(a.replyMediaPreviewWidth,b("bs_caml_int64").of_int32)}function m(a){var c=a.replyMessageText;c=c!==void 0?b("cr:385")==null?c:b("bs_curry")._1(b("cr:385").unvault,c):"";c=c==="\ud83d\udc4d"&&a.replyStatusType==="Sticker"&&b("MAWGating.bs").isHotLikeEnabled(void 0);var d=i(a);a=a.replyStatusType;if(d){if(a===void 0)return;switch(a){case"Gif":if(c)return;else return b("LSReplyMessageAttachmentType.bs").gif;case"Ptt":if(c)return;else return b("LSReplyMessageAttachmentType.bs").other;case"Sticker":if(!c)return b("LSReplyMessageAttachmentType.bs").sticker;break;case"Video":if(c)return;else return b("LSReplyMessageAttachmentType.bs").video;case"Image":case"XMA":if(c)return;else return b("LSReplyMessageAttachmentType.bs").photo;default:}}if(a!==void 0&&a==="Sticker"&&c)return b("LSReplyMessageAttachmentType.bs").sticker}function n(a){var c=i(a),d=a.replyMediaId;a=a.replyXMAId;if(c&&d!==void 0)if(a!==void 0)return;else return b("bs_belt_Option").map(d,b("MAWMedia.bs").mediaIdToIntExn);if(d!==void 0||a===void 0)return;else return b("bs_belt_Option").map(a,b("MAWXMA.bs").xmaIdToIntExn)}function o(a){var c=a.replyStatusType,d=m(a),e=n(a),f=a.replyMessageText;a=a.isStoryReply;if(c!==void 0&&c==="XMA"&&d===void 0){if(e!==void 0)return;if(f===void 0)return b("bs_caml_int64").zero}if(e!==void 0||!(a!==void 0&&a))return;else return b("bs_caml_int64").zero}f.hasReply=a;f.getReplyUserId=c;f.getReplySourceTypeV2=d;f.getReplySourceType=e;f.getReplySourceId=g;f.getReplyMessageText=h;f.hasReplyMedia=i;f.getReplyMediaMimeType=j;f.getReplyMediaHeight=k;f.getReplyMediaWidth=l;f.$MAWVault$requireCond=b("cr:385");f.getReplyAttachmentType=m;f.getReplyAttachmentId=n;f.getReplyMediaExpirationTimestampMs=o}),null);
__d("MAWBridgeNewMsgHandler.bs",["LSAuthorityLevel.bs","LSHotEmojiSize.bs","LSMessageUnsendabilityStatus.bs","LSMessageViewFlag.bs","LSQuickReplyType.bs","MAWAckLevel.bs","MAWAdminMsgCTA.bs","MAWBridgeBuildAdminMsg.bs","MAWMsg.bs","MAWMsgReply","MAWMsgReply.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_belt_Option","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function g(a){a=a.specialTextSize;if(b("bs_caml_obj").caml_equal(a,1))return b("LSHotEmojiSize.bs").small;else if(b("bs_caml_obj").caml_equal(a,2))return b("LSHotEmojiSize.bs").medium;else if(b("bs_caml_obj").caml_equal(a,3))return b("LSHotEmojiSize.bs").large;else return b("LSHotEmojiSize.bs").none}function h(a,c,d,e,f,h){f=f!==void 0?[f.ctaId,f.title,f.ctaType]:[void 0,void 0,void 0];var i=f[2],j=f[1],k=f[0],l=b("MAWTimeUtils").toTimestamp(e.type_===b("MAWMsg.bs").unsent?b("bs_belt_Option").getWithDefault(e.originalTs,e.ts):e.ts);f=function(d){var e=d.isAdminMessage,f=d.adminContent,g=d.adminType;if(e&&f!==void 0&&g!==void 0)return b("MAWBridgeBuildAdminMsg.bs").buildAdminMsgText(a,c,d.chatId,l,d.msgId,f,g,d.adminVersion).then(function(a){return a});else return b("Promise").resolve(d.content)};return f(e).then(function(a){var f=e.ephemeralDurationInSec;return c.table("messages").add({threadKey:d,timestampMs:l,primarySortKey:b("bs_caml_int64").of_float(e.sortOrderMs),secondarySortKey:void 0,messageId:e.msgId,offlineThreadingId:e.msgId,text:a,senderId:b("bs_caml_format").caml_int64_of_string(e.sender),stickerId:void 0,isAdminMessage:e.isAdminMessage,sendStatus:b("MAWAckLevel.bs").levelToMessagingSendStatus(e.ack),sendStatusV2:b("MAWAckLevel.bs").levelToMessagingSendStatusV2(e.ack),isUnsent:e.type_===b("MAWMsg.bs").unsent,mentionOffsets:void 0,mentionLengths:void 0,mentionIds:void 0,mentionTypes:void 0,replySourceId:(a=b("MAWMsgReply.bs")).getReplySourceId(e),replySourceType:a.getReplySourceType(e),replySourceTypeV2:a.getReplySourceTypeV2(e),replyStatus:b("bs_belt_Option").map(b("MAWMsgReply").getReplyStatus(e),b("bs_caml_int64").of_int32),replySnippet:h,replyMessageText:a.getReplyMessageText(e),replyToUserId:a.getReplyUserId(e),replyMediaExpirationTimestampMs:a.getReplyMediaExpirationTimestampMs(e),replyMediaUrl:void 0,replyMediaPreviewWidth:a.getReplyMediaWidth(e),replyMediaPreviewHeight:a.getReplyMediaHeight(e),replyMediaUrlMimeType:a.getReplyMediaMimeType(e),replyMediaUrlFallback:void 0,replyCtaId:void 0,replyCtaTitle:void 0,replyAttachmentType:a.getReplyAttachmentType(e),replyAttachmentId:a.getReplyAttachmentId(e),replyAttachmentExtra:void 0,hasQuickReplies:!1,adminMsgCtaId:k,adminMsgCtaTitle:j,adminMsgCtaType:i,cannotUnsendReason:e.type_===b("MAWMsg.bs").unsent||!e.isAuthorMe?b("LSMessageUnsendabilityStatus.bs").denyForNonSender:void 0,textHasLinks:!1,viewFlags:b("LSMessageViewFlag.bs").uncalculated,displayedContentTypes:b("MAWMsg.bs").getDisplayedContentTypes(e.type_,e.isForwarded,e.isExpiredXmaMsg),viewedPluginKey:void 0,viewedPluginContext:void 0,quickReplyType:b("LSQuickReplyType.bs").none,hotEmojiSize:g(e),authorityLevel:b("LSAuthorityLevel.bs").authoritative,subscriptErrorMessage:void 0,unsentTimestampMs:b("MAWTimeUtils").toTimestamp(e.ts),replySourceTimestampMs:void 0,forwardScore:void 0,ephemeralDurationInSec:f!==void 0?b("bs_caml_int64").of_int32(f):void 0,msUntilExpirationTs:void 0,localDataId:void 0,ephemeralExpirationTs:void 0,replyType:void 0,isForwarded:void 0,takedownState:void 0})})}function i(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.chatId).then(function(e){if(e!==void 0)return b("MAWAdminMsgCTA.bs").getAdminMsgCtaStep(c,e,d).then(function(e){return b("MAWMsgReply").getReplySnippet(a,c,d).then(function(a){return[e,a]})}).then(function(f){var i=f[1];f=f[0];var j=d.offlineMsg;if(j!==void 0){var e=f.threadKey,k=f.result,l=k!==void 0?[k.ctaId,k.title,k.ctaType]:[void 0,void 0,void 0],m=l[2],n=l[1],o=l[0];return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages")),{hd:e,tl:{hd:b("bs_caml_int64").of_float(j.ts),tl:{hd:j.msgId,tl:0}}})).then(function(f){if(f===void 0)return h(a,c,e,d,k,i);f=b("bs_caml_obj").caml_obj_dup(f);var j=d.ephemeralDurationInSec;f.ephemeralDurationInSec=j!==void 0?b("bs_caml_int64").of_int32(j):void 0;return c.table("messages").put((f.replySourceTimestampMs=void 0,f.authorityLevel=b("LSAuthorityLevel.bs").authoritative,f.hotEmojiSize=g(d),f.displayedContentTypes=b("MAWMsg.bs").getDisplayedContentTypes(d.type_,d.isForwarded,d.isExpiredXmaMsg),f.adminMsgCtaType=m,f.adminMsgCtaTitle=n,f.adminMsgCtaId=o,f.replyAttachmentId=b("MAWMsgReply.bs").getReplyAttachmentId(d),f.replyAttachmentType=b("MAWMsgReply.bs").getReplyAttachmentType(d),f.replyMediaUrlMimeType=b("MAWMsgReply.bs").getReplyMediaMimeType(d),f.replyMediaPreviewHeight=b("MAWMsgReply.bs").getReplyMediaHeight(d),f.replyMediaPreviewWidth=b("MAWMsgReply.bs").getReplyMediaWidth(d),f.replyMediaUrl=void 0,f.replyMediaExpirationTimestampMs=b("MAWMsgReply.bs").getReplyMediaExpirationTimestampMs(d),f.replyToUserId=b("MAWMsgReply.bs").getReplyUserId(d),f.replyMessageText=b("MAWMsgReply.bs").getReplyMessageText(d),f.replySnippet=i,f.replyStatus=b("bs_belt_Option").map(b("MAWMsgReply").getReplyStatus(d),b("bs_caml_int64").of_int32),f.replySourceTypeV2=b("MAWMsgReply.bs").getReplySourceTypeV2(d),f.replySourceType=b("MAWMsgReply.bs").getReplySourceType(d),f.replySourceId=b("MAWMsgReply.bs").getReplySourceId(d),f.isUnsent=d.type_===b("MAWMsg.bs").unsent,f.sendStatusV2=b("MAWAckLevel.bs").levelToMessagingSendStatusV2(d.ack),f.sendStatus=b("MAWAckLevel.bs").levelToMessagingSendStatus(d.ack),f.messageId=d.msgId,f.primarySortKey=b("bs_caml_int64").of_float(d.sortOrderMs),f.timestampMs=b("MAWTimeUtils").toTimestamp(d.ts),f))})}else return h(a,c,f.threadKey,d,f.result,i)});else return b("Promise").resolve(void 0)}).then(function(a){})}function a(a,c,d){return b("Promise").all(d.filter(function(a){return!a.isDualSend}).map(function(b){return i(a,c,b)})).then(function(a){})}f.getSpecialTextSize=g;f.call=i;f.bulkCall=a}),null);
__d("MAWBridgeMsgUpdatedHandler.bs",["LSMessageUnsendabilityStatus.bs","MAWAckLevel.bs","MAWAdminMsg.bs","MAWAdminMsgCTA.bs","MAWBridgeNewMsgHandler.bs","MAWMsg.bs","MAWMsgReply","MAWMsgReply.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_belt_Option","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.chatId).then(function(e){if(e!==void 0)return b("MAWAdminMsgCTA.bs").getAdminMsgCtaStep(c,e,d).then(function(e){return b("MAWMsgReply").getReplySnippet(a,c,d).then(function(a){return[e,a]}).then(function(f){var e=f[0],a=e.threadKey;e=e.result;var g=f[1],h=d.type_===b("MAWMsg.bs").unsent;f=e!==void 0?[e.ctaId,e.title,e.ctaType]:[void 0,void 0,void 0];var i=f[2],j=f[1],k=f[0];return b("ReQL.bs").first(b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages")),{hd:a,tl:0}),function(a){return a.messageId===d.msgId})).then(function(a){if(a===void 0)return b("Promise").resolve(void 0);var e=b("MAWAckLevel.bs").levelToMessagingSendStatusV2(d.ack);a=b("bs_caml_obj").caml_obj_dup(a);a.replySourceTimestampMs=void 0;a.unsentTimestampMs=h?b("MAWTimeUtils").toTimestamp(d.ts):void 0;a.hotEmojiSize=b("MAWBridgeNewMsgHandler.bs").getSpecialTextSize(d);a.displayedContentTypes=b("MAWMsg.bs").getDisplayedContentTypes(d.type_,d.isForwarded,d.isExpiredXmaMsg);a.cannotUnsendReason=h||!d.isAuthorMe?b("LSMessageUnsendabilityStatus.bs").denyForNonSender:void 0;a.adminMsgCtaType=i;a.adminMsgCtaTitle=j;a.adminMsgCtaId=k;a.replyAttachmentExtra=void 0;a.replyAttachmentId=b("MAWMsgReply.bs").getReplyAttachmentId(d);a.replyAttachmentType=b("MAWMsgReply.bs").getReplyAttachmentType(d);a.replyMediaUrlMimeType=b("MAWMsgReply.bs").getReplyMediaMimeType(d);a.replyMediaPreviewHeight=b("MAWMsgReply.bs").getReplyMediaHeight(d);a.replyMediaPreviewWidth=b("MAWMsgReply.bs").getReplyMediaWidth(d);a.replyMediaUrl=void 0;a.replyMediaExpirationTimestampMs=b("MAWMsgReply.bs").getReplyMediaExpirationTimestampMs(d);a.replyToUserId=b("MAWMsgReply.bs").getReplyUserId(d);a.replyMessageText=b("MAWMsgReply.bs").getReplyMessageText(d);a.replySnippet=g;a.replyStatus=b("bs_belt_Option").map(b("MAWMsgReply").getReplyStatus(d),b("bs_caml_int64").of_int32);a.replySourceTypeV2=b("MAWMsgReply.bs").getReplySourceTypeV2(d);a.replySourceType=b("MAWMsgReply.bs").getReplySourceType(d);a.replySourceId=b("MAWMsgReply.bs").getReplySourceId(d);a.isUnsent=h;a.sendStatusV2=e;a.sendStatus=b("MAWAckLevel.bs").levelToMessagingSendStatus(d.ack);if(d.isAdminMessage){e=d.adminContent;var f=d.adminType;e=e!==void 0&&f!==void 0?b("MAWAdminMsg.bs").buildLocalizedString(e,[],f):void 0}else e=d.content;a.text=e;return c.table("messages").put((a.primarySortKey=b("bs_caml_int64").of_float(d.sortOrderMs),a.timestampMs=b("MAWTimeUtils").toTimestamp(h?b("bs_belt_Option").getWithDefault(d.originalTs,d.ts):d.ts),a))})})});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeMsgsLoadedHandler.bs",["LS.bs","LSClearMessagePlaceholderRange","LSInsertNewMessageRange","MAWThreadId.bs","MAWTimeUtils.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return b("LSClearMessagePlaceholderRange")(d,"",b("MAWTimeUtils.bs").maxTimestampMs,b("LS.bs").make(a)).then(function(e){e=c.rangeExtensionType;var f;if(typeof e==="number")f=b("MAWTimeUtils.bs").minTimestampMs;else switch(e.TAG|0){case 0:case 1:f=b("bs_caml_int64").of_float(e._0.minMsgTs);break;case 2:f=b("MAWTimeUtils.bs").minTimestampMs;break}e=c.rangeExtensionType;e=typeof e==="number"||e.TAG!==2?b("MAWTimeUtils.bs").maxTimestampMs:b("bs_caml_int64").of_float(e._0.maxMsgTs);var g=c.rangeExtensionType,h;if(typeof g==="number")h="";else switch(g.TAG|0){case 0:case 1:h=g._0.minMsgId;break;case 2:h="";break}g=c.rangeExtensionType;var i;if(typeof g==="number")i="";else switch(g.TAG|0){case 0:i=g._0.maxMsgId;break;case 1:i="";break;case 2:i=g._0.maxMsgId;break}g=c.rangeExtensionType;var j;if(typeof g==="number")j=b("MAWTimeUtils.bs").minTimestampMs;else switch(g.TAG|0){case 0:case 1:j=b("bs_caml_int64").of_float(g._0.minMsgTs);break;case 2:j=b("MAWTimeUtils.bs").minTimestampMs;break}g=c.rangeExtensionType;g=typeof g==="number"||g.TAG!==2?b("MAWTimeUtils.bs").maxTimestampMs:b("bs_caml_int64").of_float(g._0.maxMsgTs);var k=c.rangeExtensionType,l;if(typeof k==="number")l=!1;else switch(k.TAG|0){case 0:l=k._0.hasMoreBefore;break;case 1:l=k._0.hasMoreBefore;break;case 2:l=!1;break}k=c.rangeExtensionType;k=typeof k==="number"||k.TAG!==2?!1:k._0.hasMoreAfter;return b("LSInsertNewMessageRange")(d,f,e,h,i,j,g,l,k,void 0,b("LS.bs").make(a))});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeMsgsStartCountdownHandler.bs",["MAWEphemeralMessageExpirationStorage.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return c.msgs.reduce(function(c,d){return c.then(function(c){b("MAWEphemeralMessageExpirationStorage.bs").setMessageForExpiration(a,d,d.countdownTs,d.millisecondsUntilCountdownTs);b("bs_caml_int64").of_int32(d.millisecondsUntilCountdownTs);return b("MAWThreadId.bs").toThreadKeyMaybe(a,d.chatId).then(function(c){if(c!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("messages")),{hd:c,tl:{hd:b("MAWTimeUtils").toTimestamp(d.ts),tl:{hd:d.msgId,tl:0}}})).then(function(c){if(c===void 0)return b("Promise").resolve(void 0);c=b("bs_caml_obj").caml_obj_dup(c);return a.table("messages").put((c.ephemeralExpirationTs=b("bs_caml_int64").of_float(d.countdownTs),c))});else return b("Promise").resolve(void 0)})})},b("Promise").resolve(void 0))}f.call=a}),null);
__d("MAWBridgeNewMediaHandler.bs",["MAWDbMsg","MAWMedia.bs","MAWThreadId.bs","Promise","ReQLTable.bs","bs_belt_Option","bs_caml_int64","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=String(c.mediaId);return c.msgIds.reduce(function(f,g){return f.then(function(f){var h=b("bs_caml_int64").of_int32(b("MAWDbMsg").getInChatMsgIdFromMsgId(g));return b("ReQLTable.bs").update(a.table("attachments"),{hd:d,tl:{hd:g,tl:{hd:e,tl:0}}},function(a){if(a===void 0){var f,i,j;return{threadKey:d,timestampMs:h,messageId:g,offlineAttachmentId:e,attachmentFbid:e,attachmentType:b("MAWMedia.bs").mediaTypeToMessageAttachmentType(c.mediaType),originalPageSenderId:void 0,filename:void 0,filesize:(f=b("bs_belt_Option")).map(c.filesize,(i=b("bs_caml_int64")).of_int32),hasMedia:c.hasMedia,isSharable:!1,hasXma:!1,xmaLayoutType:void 0,xmasTemplateType:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,defaultCtaType:void 0,attachmentCta1Id:void 0,cta1Title:void 0,cta1Type:void 0,attachmentCta2Id:void 0,cta2Title:void 0,cta2Type:void 0,attachmentCta3Id:void 0,cta3Title:void 0,cta3Type:void 0,playableUrl:void 0,playableUrlFallback:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlMimeType:void 0,dashManifest:void 0,previewUrl:void 0,previewUrlFallback:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlMimeType:void 0,miniPreview:void 0,previewWidth:f.map((j=b("bs_caml_option")).nullable_to_opt(c.previewWidth),i.of_int32),previewHeight:f.map(j.nullable_to_opt(c.previewHeight),i.of_int32),imageUrl:void 0,imageUrlFallback:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlMimeType:void 0,actionUrl:void 0,titleText:void 0,subtitleText:void 0,maxTitleNumOfLines:void 0,maxSubtitleNumOfLines:void 0,descriptionText:void 0,sourceText:void 0,attributionAppId:void 0,attributionAppName:void 0,attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,localPlayableUrl:void 0,playableDurationMs:f.map(j.nullable_to_opt(c.duration),i.of_int32),attachmentIndex:i.zero,faviconUrl:void 0,faviconUrlFallback:void 0,faviconUrlExpirationTimestampMs:void 0,decryptionKey:void 0,accessibilitySummaryText:void 0,isPreviewImage:void 0,listItemsId:void 0,listItemsDescriptionText:void 0,listItemsSecondaryDescriptionText:void 0,listItemId1:void 0,listItemTitleText1:void 0,listItemContactUrlList1:void 0,listItemProgressBarFilledPercentage1:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlFallbackList1:void 0,listItemAccessibilityText1:void 0,listItemId2:void 0,listItemTitleText2:void 0,listItemContactUrlList2:void 0,listItemProgressBarFilledPercentage2:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlFallbackList2:void 0,listItemAccessibilityText2:void 0,listItemId3:void 0,listItemTitleText3:void 0,listItemContactUrlList3:void 0,listItemProgressBarFilledPercentage3:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList3:void 0,listItemAccessibilityText3:void 0,originalFileHash:void 0,isBorderless:void 0,headerImageUrl:void 0,headerImageUrlFallback:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlMimeType:void 0,headerTitle:void 0,previewImageDecorationType:void 0,shouldHighlightHeaderTitleInTitle:void 0,targetId:void 0,shouldRespectServerPreviewSize:void 0,authorityLevel:i.zero,ephemeralMediaState:void 0,viewerSeenTimestampMs:void 0,shouldAutoplayVideo:void 0,previewUrlLarge:void 0,previewWidthLarge:f.map(j.nullable_to_opt(c.previewWidthLarge),i.of_int32),previewHeightLarge:f.map(j.nullable_to_opt(c.previewHeightLarge),i.of_int32),subtitleIconUrl:void 0,preheaderText:void 0,listItemsDescriptionSubtitleText:void 0,avatarViewUrlList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewTitleList:void 0,avatarViewAccessibilityLabel:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback3:void 0,attachmentLoggingType:void 0,waveformData:void 0,samplingFrequencyHz:void 0,gatingType:void 0,gatingTitle:void 0,avatarViewSize:void 0,avatarCount:void 0}}f=b("bs_caml_obj").caml_obj_dup(a);f.hasMedia=c.hasMedia;return f})})},b("Promise").resolve(void 0))})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeNewMediaRangeHandler.bs",["LS.bs","LSThreadMediaGalleryGroup.bs","LSUpsertAttachmentRange","MAWThreadId.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_int64").of_int32(c.minMsgRowId),f=c.hasMoreBefore;return b("LSUpsertAttachmentRange")(d,b("LSThreadMediaGalleryGroup.bs").photosAndVideos,e,f,b("LS.bs").make(a))})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeOneToOneMessageRequestLoadedHandler.bs",["fbt","LSAuthorityLevel.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","MAWContact.bs","MAWGating.bs","MAWMessageRequestUtil.bs","MAWThreadId.bs","Promise","ReQL.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(d){if(d===void 0)return b("Promise").resolve([void 0,void 0,void 0,!1]);var e=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(c.fbid),tl:0}));return b("Promise").all([b("Promise").resolve(d),e,b("Promise").resolve(c.relationship),b("Promise").resolve(b("LSMessagingThreadTypeUtil.bs").isOneToOne(d.threadType))])}).then(function(c){var d=c[0];if(d===void 0)return b("Promise").resolve(void 0);var e=c[1];if(e===void 0)return b("Promise").resolve(void 0);var f=c[2];if(f===void 0)return b("Promise").resolve(void 0);if(!c[3])return b("Promise").resolve(void 0);c=b("bs_caml").i64_neq(e.authorityLevel,b("LSAuthorityLevel.bs").authoritative)?f:b("MAWContact.bs").lsContactToContactRelationshipType(e);if(d.folderName==="pending"||d.folderName==="other"||d.folderName==="inbox"&&c!==b("MAWContact.bs").twoWayContact&&c!==b("MAWContact.bs").oneWayContact&&b("bs_caml").i64_neq(d.lastActivityTimestampMs,b("bs_caml_int64").zero)){f=b("LSThreadBitOffset.bs").clear(b("MAWMessageRequestUtil.bs").disabledThreadCapabilitiesForIncomingRequest,d.capabilities,d.capabilities2,d.capabilities3);e=b("MAWGating.bs").isEyebrowTextEnabled(void 0)&&d.folderName==="inbox"?g._("__JHASH__4F6x7gUU1-S__JHASH__").toString():void 0;c=[b("LSThreadBitOffset.bs").set(b("MAWMessageRequestUtil.bs").enabledThreadCapabilitiesForIncomingRequest,f[0],f[1],f[2]),e]}else c=[[d.capabilities,d.capabilities2,d.capabilities3],void 0];f=c[0];e=b("bs_caml_obj").caml_obj_dup(d);return a.table("threads").put((e.capabilities3=f[2],e.capabilities2=f[1],e.additionalThreadContext=c[1],e.capabilities=f[0],e)).then(function(a){})});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeParticipantRemovedHandler.bs",["MAWThreadId.bs","Promise","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(c.fbid);return a.table("participants")["delete"]({hd:d,tl:{hd:e,tl:0}}).then(function(a){})})}f.call=a}),null);
__d("MAWBridgeParticipantUpdatedHandler.bs",["fbt","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSGroupParticipantJoinState.bs","LSVerifyContactRowExists","MAWCurrentUser","MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","ReQLTable.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MAWCurrentUser").getID(),i=b("bs_caml_format").caml_int64_of_string(h);function a(a){return a.startsWith("shadow_")}function c(a,c){if(c.fbid.startsWith("shadow_"))return b("Promise").resolve(void 0);else return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(c.fbid),f=b("MAWTimeUtils").toTimestamp(c.readWatermarkTs),j=b("MAWTimeUtils").toTimestamp(c.deliveredWatermarkTs),k=b("MAWTimeUtils").toTimestamp(c.lastReadActionTs),l=c.isSuperAdmin?g._("__JHASH__SYYL6HsMICm__JHASH__").toString():void 0,m={contents:!1},n={contents:!1};return b("ReQLTable.bs").update(a.table("participants"),{hd:d,tl:{hd:e,tl:0}},function(a){if(a!==void 0){n.contents=!0;return{threadKey:d,contactId:e,readWatermarkTimestampMs:f,deliveredWatermarkTimestampMs:j,nickname:a.nickname,isAdmin:c.isAdmin,subscribeSource:l,normalizedSearchTerms:a.normalizedSearchTerms,participantCapabilities:a.participantCapabilities,authorityLevel:a.authorityLevel,readActionTimestampMs:k,isSuperAdmin:a.isSuperAdmin,isModerator:!1,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member}}else{n.contents=!0;m.contents=!0;return{threadKey:d,contactId:e,readWatermarkTimestampMs:f,deliveredWatermarkTimestampMs:j,nickname:void 0,isAdmin:c.isAdmin,subscribeSource:l,normalizedSearchTerms:void 0,participantCapabilities:void 0,authorityLevel:b("bs_caml_int64").zero,readActionTimestampMs:b("bs_caml_int64").zero,isSuperAdmin:c.isSuperAdmin,isModerator:!1,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member}}}).then(function(f){if(n.contents)return b("MAWUpdateLSThreadCapabilities.bs").disableBlockerCapabilitiesTxn(a,d).then(function(f){f=b("bs_caml").i64_eq(i,e);var g=c.isAdmin;if(f)if(g)return b("MAWUpdateLSThreadCapabilities.bs").enableAddMembersTxn(a,d);else return b("MAWUpdateLSThreadCapabilities.bs").disableAddMembersTxn(a,d);else return window.Promise.resolve(void 0)});else return b("Promise").resolve(void 0)}).then(function(d){if(m.contents)return b("LSVerifyContactRowExists")(e,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,b("bs_caml_obj").caml_equal(h,c.fbid),b("LSAuthorityLevel.bs").optimistic,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(a));else return b("Promise").resolve(void 0)})})}f.currentUserId=h;f.currentUserIdAsInt64=i;f.checkIfDualSendUser=a;f.call=c}),null);
__d("MAWBridgeParticipantsUpdatedHandler.bs",["fbt","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSGroupParticipantJoinState.bs","LSVerifyContactRowExists","MAWCurrentUser","MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","ReQLTable.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MAWCurrentUser").getID(),i=b("bs_caml_format").caml_int64_of_string(h);function a(a){return a.startsWith("shadow_")}function c(a,c){c=c.participants.filter(function(a){return!a.fbid.startsWith("shadow_")});return b("Promise").all(c.map(function(c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(c.fbid),f=b("MAWTimeUtils").toTimestamp(c.readWatermarkTs),j=b("MAWTimeUtils").toTimestamp(c.deliveredWatermarkTs),k=b("MAWTimeUtils").toTimestamp(c.lastReadActionTs),l=c.isSuperAdmin?g._("__JHASH__SYYL6HsMICm__JHASH__").toString():void 0,m={contents:!1},n={contents:!1};return b("ReQLTable.bs").update(a.table("participants"),{hd:d,tl:{hd:e,tl:0}},function(a){if(a!==void 0){n.contents=!0;return{threadKey:d,contactId:e,readWatermarkTimestampMs:f,deliveredWatermarkTimestampMs:j,nickname:a.nickname,isAdmin:c.isAdmin,subscribeSource:l,normalizedSearchTerms:a.normalizedSearchTerms,participantCapabilities:a.participantCapabilities,authorityLevel:a.authorityLevel,readActionTimestampMs:k,isSuperAdmin:a.isSuperAdmin,isModerator:!1,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member}}else{n.contents=!0;m.contents=!0;return{threadKey:d,contactId:e,readWatermarkTimestampMs:f,deliveredWatermarkTimestampMs:j,nickname:void 0,isAdmin:c.isAdmin,subscribeSource:l,normalizedSearchTerms:void 0,participantCapabilities:void 0,authorityLevel:b("bs_caml_int64").zero,readActionTimestampMs:b("bs_caml_int64").zero,isSuperAdmin:c.isSuperAdmin,isModerator:!1,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member}}}).then(function(f){if(n.contents)return b("MAWUpdateLSThreadCapabilities.bs").disableBlockerCapabilitiesTxn(a,d).then(function(f){f=b("bs_caml").i64_eq(i,e);var g=c.isAdmin;if(f)if(g)return b("MAWUpdateLSThreadCapabilities.bs").enableAddMembersTxn(a,d);else return b("MAWUpdateLSThreadCapabilities.bs").disableAddMembersTxn(a,d);else return window.Promise.resolve(void 0)});else return b("Promise").resolve(void 0)}).then(function(d){if(m.contents)return b("LSVerifyContactRowExists")(e,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,b("bs_caml_obj").caml_equal(h,c.fbid),b("LSAuthorityLevel.bs").optimistic,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(a));else return b("Promise").resolve(void 0)})})})).then(function(a){})}f.currentUserId=h;f.currentUserIdAsInt64=i;f.checkIfDualSendUser=a;f.call=c}),null);
__d("MAWBridgeReactionUpsertHandler.bs",["LSAuthorityLevel.bs","MAWThreadId.bs","MAWTimeUtils","Promise","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("reactions").upsert({hd:d,tl:{hd:c.messageId,tl:{hd:b("bs_caml_format").caml_int64_of_string(c.actorId),tl:0}}},{threadKey:d,timestampMs:b("MAWTimeUtils").toTimestamp(c.ts),messageId:c.messageId,actorId:b("bs_caml_format").caml_int64_of_string(c.actorId),reaction:c.reaction,authorityLevel:b("LSAuthorityLevel.bs").authoritative});else return b("Promise").resolve(void 0)})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeReceivedChatStateHandler.bs",["MAWThreadId.bs","Promise","ServerTime","WAChatState","bs_caml_format","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(c.senderId),f=b("bs_caml_int64").of_float(3e3+b("ServerTime").getMillis());if(c.state===b("WAChatState").TYPING)return a.table("typing_indicator").upsert({hd:d,tl:{hd:e,tl:0}},{threadKey:d,senderId:e,expirationTimestampMs:f}).then(function(a){});else if(c.state===b("WAChatState").IDLE)return a.table("typing_indicator")["delete"]({hd:d,tl:{hd:e,tl:0}}).then(function(a){});else return window.Promise.resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeReceivedReceiptHandler.bs",["MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(c.fbid),f=b("MAWTimeUtils").toTimestamp(c.lastReadWatermarkTs),g=b("MAWTimeUtils").toTimestamp(c.deliveredWatermarkTs),h=b("MAWTimeUtils").toTimestamp(c.lastReadActionTs);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("participants")),{hd:d,tl:{hd:e,tl:0}})).then(function(c){if(c!==void 0)return a.table("participants").put({threadKey:c.threadKey,contactId:c.contactId,readWatermarkTimestampMs:f,deliveredWatermarkTimestampMs:g,nickname:c.nickname,isAdmin:c.isAdmin,subscribeSource:c.subscribeSource,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,authorityLevel:c.authorityLevel,readActionTimestampMs:h,isSuperAdmin:c.isSuperAdmin,isModerator:c.isModerator,groupParticipantJoinState:c.groupParticipantJoinState});else return b("Promise").resolve(void 0)}).then(function(a){})})}f.call=a}),null);
__d("MAWBridgeSyncContacts.bs",["CurrentUser","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSVerifyContactRowExists","Promise","bs_caml_format","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";var g=b("CurrentUser").getID();function a(a,c){return c.reduce(function(c,d){var e=b("bs_caml_format").caml_int64_of_string(d);return c.then(function(c){return b("LSVerifyContactRowExists")(e,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,b("bs_caml_obj").caml_equal(g,d),b("LSAuthorityLevel.bs").optimistic,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(a))}).then(function(a){})},b("Promise").resolve(void 0))}f.currentUserFbid=g;f.call=a}),null);
__d("MAWBridgeBuildThreadSnippet",["MAWAdminMsg","MAWSubscribeToContactNames","MAWThreadId","ReQL","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e,f){var g,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:g=e.snippetContactIDs,i=e.snippetParams,j=e.snippetType,k=e.threadId;if(!(i==null||j==null||g==null)){m.next=3;break}return m.abrupt("return",f);case 3:m.next=5;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getContactNamesFromContactIDs({contactIDs:g,db:a,onResolve:function(b){return h(a,k,d("MAWAdminMsg").buildLocalizedString(i,b,j))},subscriptionKey:k,txn:c}));case 5:l=m.sent;return m.abrupt("return",d("MAWAdminMsg").buildLocalizedString(i,l,j));case 7:case"end":return m.stop()}},null,this)}function h(a,c,e){return a.runInTransaction(function(f){var g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c));case 2:g=j.sent;if(!(g==null)){j.next=5;break}return j.abrupt("return");case 5:h=f.table("threads");j.next=8;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(h).getKeyRange(g)));case 8:i=j.sent;if(!i){j.next=12;break}j.next=12;return b("regeneratorRuntime").awrap(h.put(babelHelpers["extends"]({},i,{snippet:e})));case 12:case"end":return j.stop()}},null,this)},"readwrite")}g.buildBridgeThreadSnippet=a;g.mutateThreadSnippet=h}),98);
__d("MAWBridgeBuildThreadSnippet.bs",["MAWBridgeBuildThreadSnippet"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(a,c,d,e)}function c(a,c,d){b("MAWBridgeBuildThreadSnippet").mutateThreadSnippet(a,c,d)}f.buildBridgeThreadSnippet=a;f.mutateThreadSnippet=c}),null);
__d("MWV2DualSendMessageContent.bs",["MAWVault.bs"],(function(a,b,c,d,e,f){"use strict";var g="8031ded1058446aa93ccf8dace0eaf876dd5e32771904d5eb0058a0afdc724ce120dcba542d84548ac3f4a2741c45c0d",h="9031ded1058446aa93ccf8dace0eaf876dd5e32771904d5eb0058a0afdc724ce120dcba542d84548ac3f4a2741c45c0d";function a(a){if(a===void 0)return!1;a=b("MAWVault.bs").unvault(a);if(a.endsWith(g))return!0;else return a.endsWith(h)}f.messageText=g;f.messageTextV2=h;f.isDualSend=a}),null);
__d("MAWBridgeThreadBumpedHandler.bs",["MAWBridgeBuildThreadSnippet.bs","MAWBumpThread.bs","MAWThreadId.bs","MAWTimeUtils","MWV2DualSendMessageContent.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml_format","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.threadId).then(function(e){if(e!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:e,tl:0})).then(function(f){if(f!==void 0)return b("MAWBridgeBuildThreadSnippet.bs").buildBridgeThreadSnippet(a,c,d,void 0).then(function(a){var f=b("MWV2DualSendMessageContent.bs").isDualSend(a),g=b("MAWTimeUtils").millisTimeToTimestamp(d.lastActivityTs);g=b("MAWBumpThread.bs").threadMutation(c,e,g,b("MAWTimeUtils").millisTimeToTimestamp(d.lastReadTs),a,b("bs_belt_Option").mapWithDefault(b("bs_caml_option").nullable_to_opt(d.snippetSenderContactId),void 0,function(a){return b("bs_caml_format").caml_int64_of_string(a)}));if(f)return b("Promise").resolve(void 0);else return g.then(function(a){})});else return b("Promise").resolve(void 0)});else return b("Promise").resolve(void 0)}).then(function(a){})}f.call=a}),null);
__d("MAWBridgeThreadBumpedServerHandler",["I64","LS.re","LSBumpE2EEMetadataThread","MAWGating.re","MAWThreadId","MAWTimeUtils","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Bumping thread on server. threadKey: ",", bumpTimestampMs: ",", isLocalDeviceSend: ",""]);h=function(){return a};return a}var i=c("requireDeferred")("WALogger").__setRef("MAWBridgeThreadBumpedServerHandler");function a(a,e){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:if(!(!d("MAWGating.re").isOccamadillo()||e.isDualSend)){b.next=2;break}return b.abrupt("return");case 2:return b.abrupt("return",d("MAWThreadId").toThreadKeyMaybe(a,e.threadId).then(function(b){if(b==null)return;var f=e.lastActivityTs,g=d("MAWTimeUtils").millisTimeToTimestamp(f);i.loadImmediately(function(a){a.LOG(h(),d("I64").to_string(b),d("I64").to_string(g),e.isCurrentDeviceSendingMsg)});return c("LSBumpE2EEMetadataThread")(b,g,e.isCurrentDeviceSendingMsg,c("LS.re").make(a))}));case 3:case"end":return b.stop()}},null,this)}g.call=a}),98);
__d("MAWBridgeThreadHiddenHandler.bs",["LS.bs","LSOptimisticRemoveThread","LSThreadRemoveType.bs","MAWGating.bs","MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c).then(function(c){if(c===void 0)return b("Promise").resolve(void 0);if(!b("MAWGating.bs").isOccamadillo(void 0))return a.table("threads")["delete"]({hd:c,tl:0}).then(function(a){});var d=b("LS.bs").make(a);return b("LSOptimisticRemoveThread")(c,b("LSThreadRemoveType.bs").deleteThread,d)})}f.call=a}),null);
__d("MAWBridgeThreadTimestampsHandler.bs",["CurrentUser","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_format","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);d=b("bs_caml_obj").caml_obj_dup(d);return a.table("threads").put((d.lastReadWatermarkTimestampMs=b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs),d))});else return b("Promise").resolve(void 0)})}function a(a,c){return g(a,c).then(function(d){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);var e=b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID());return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("participants")),{hd:d,tl:{hd:e,tl:0}})).then(function(d){if(d!==void 0)return a.table("participants").put({threadKey:d.threadKey,contactId:d.contactId,readWatermarkTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs),deliveredWatermarkTimestampMs:d.deliveredWatermarkTimestampMs,nickname:d.nickname,isAdmin:d.isAdmin,subscribeSource:d.subscribeSource,normalizedSearchTerms:d.normalizedSearchTerms,participantCapabilities:d.participantCapabilities,authorityLevel:d.authorityLevel,readActionTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTimestampMs),isSuperAdmin:d.isSuperAdmin,isModerator:d.isModerator,groupParticipantJoinState:d.groupParticipantJoinState});else return b("Promise").resolve(void 0)})})}).then(function(a){})}f.call=a}),null);
__d("MAWBridgeThreadUpdatedHandler.bs",["LSBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWBridgeBuildThreadSnippet.bs","MAWFolder.bs","MAWFolderTypes","MAWGating.bs","MAWThreadId.bs","MWV2DualSendMessageContent.bs","MessengerThreadCannotReplyReason","Promise","ReQL.bs","bs_caml_format","bs_caml_int64","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){var d=b("MAWGating.bs").isOccamadillo(void 0);if(c!==void 0&&!(d||c!==b("MAWFolderTypes").ARCHIVED))return b("LSBitOffset.bs").clear(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").archiveThread,[0,64]),b("LSBitOffset.bs").set(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").unarchiveThread,[0,64]),a));else return a}function h(a,c){var d=b("MAWGating.bs").isOccamadillo(void 0);if(c!==void 0&&!(d||c!==b("MAWFolderTypes").INBOX))return b("LSBitOffset.bs").clear(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").unarchiveThread,[0,64]),b("LSBitOffset.bs").set(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").archiveThread,[0,64]),a));else return a}function i(a,c){if(c!==void 0&&c===b("MessengerThreadCannotReplyReason").VIEWER_NOT_SUBSCRIBED)return b("LSBitOffset.bs").clear(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").leaveThread,[0,64]),a);else return a}function j(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.threadId).then(function(e){if(e!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:e,tl:0})).then(function(e){if(e!==void 0)return b("MAWBridgeBuildThreadSnippet.bs").buildBridgeThreadSnippet(a,c,d,e.snippet).then(function(a){var f=b("MWV2DualSendMessageContent.bs").isDualSend(a),j=d.snippetSenderContactId;j=j==null?e.snippetSenderContactId:b("bs_caml_format").caml_int64_of_string(j);var k=d.muteExpireTimeMs,l=b("MAWGating.bs").isOccamadillo(void 0);l=!(k==null)&&!l?b("bs_caml_int64").of_float(k):e.muteExpireTimeMs;k=d.folder;var m=b("MAWGating.bs").isOccamadillo(void 0);k=!(k==null)&&!m?b("MAWFolder.bs").messagingFolderTag(d.folder):e.folderName;m=d.folder;var n=b("MAWGating.bs").isOccamadillo(void 0);m=!(m==null)&&!n?b("MAWFolder.bs").systemFolder(d.folder):e.parentThreadKey;n=d.cannotReplyReason;n=n==null?k==="inbox"?void 0:e.cannotReplyReason:n;var o=i(g(h(e.capabilities2,b("bs_caml_option").nullable_to_opt(d.folder)),b("bs_caml_option").nullable_to_opt(d.folder)),n),p=b("bs_caml_obj").caml_obj_dup(e);return c.table("threads").put((p.capabilities2=o,p.parentThreadKey=m,p.cannotReplyReason=n,p.snippetSenderContactId=j,p.snippet=f?e.snippet:a,p.muteExpireTimeMs=l,p.folderName=b("MAWGating.bs").isOccamadillo(void 0)?e.folderName:k,p))});else return b("Promise").resolve(void 0)});else return b("Promise").resolve(void 0)})}function a(a,b,c){return j(a,b,c).then(function(a){})}f.call=a}),null);
__d("MAWBridgeThreadsLoadedHandler.bs",["MAWFolder.bs","MAWThreadId.bs","MAWTimeUtils","MAWTimeUtils.bs","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d;switch(c.TAG|0){case 0:d=b("MAWFolder.bs").clientSystemFolder(c._0.folderId);break;case 1:d=b("MAWFolder.bs").clientSystemFolder(c._0.folderId);break;case 2:d=b("MAWFolder.bs").clientSystemFolder(c._0.folderId);break}return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),{hd:d,tl:0})).then(function(e){if(e!==void 0)return a.table("threads_ranges_v2__generated")["delete"]({hd:e.parentThreadKey,tl:{hd:e.minThreadKey,tl:{hd:e.minLastActivityTimestampMs,tl:0}}}).then(function(f){switch(c.TAG|0){case 0:case 1:break;case 2:var d=c._0;return b("MAWThreadId.bs").toThreadKeyMaybe(a,d.minThreadId).then(function(c){if(c!==void 0)return a.table("threads_ranges_v2__generated").put({parentThreadKey:e.parentThreadKey,minThreadKey:c,minLastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(d.minLastActivityTs),maxThreadKey:e.maxThreadKey,maxLastActivityTimestampMs:e.maxLastActivityTimestampMs,isLoadingBefore:!1,isLoadingAfter:e.isLoadingAfter,hasMoreBefore:d.hasMore,hasMoreAfter:e.hasMoreAfter});else return b("Promise").resolve(void 0)})}return a.table("threads_ranges_v2__generated").put({parentThreadKey:e.parentThreadKey,minThreadKey:e.minThreadKey,minLastActivityTimestampMs:e.minLastActivityTimestampMs,maxThreadKey:e.maxThreadKey,maxLastActivityTimestampMs:e.maxLastActivityTimestampMs,isLoadingBefore:!1,isLoadingAfter:e.isLoadingAfter,hasMoreBefore:e.hasMoreBefore,hasMoreAfter:e.hasMoreAfter})});switch(c.TAG|0){case 0:return a.table("threads_ranges_v2__generated").put({parentThreadKey:d,minThreadKey:b("bs_caml_int64").zero,minLastActivityTimestampMs:b("MAWTimeUtils.bs").maxTimestampMs,maxThreadKey:b("bs_caml_int64").zero,maxLastActivityTimestampMs:b("MAWTimeUtils.bs").maxTimestampMs,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1});case 1:var f=c._0;return b("Promise").all([b("MAWThreadId.bs").toThreadKeyMaybe(a,f.minThreadId),b("MAWThreadId.bs").toThreadKeyMaybe(a,f.maxThreadId)]).then(function(c){var e=c[1];c=c[0];if(c!==void 0&&e!==void 0)return a.table("threads_ranges_v2__generated").add({parentThreadKey:d,minThreadKey:c,minLastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(f.minLastActivityTs),maxThreadKey:e,maxLastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(f.maxLastActivityTs),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:f.hasMore,hasMoreAfter:!1});else return b("Promise").resolve(void 0)});case 2:return b("Promise").resolve(void 0)}})}f.call=a}),null);
__d("MAWUpdateClientRestoreStatusOperationType.bs",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.removeClientRestoreStatus=b}),null);
__d("MAWBridgeUpdateClientRestoreStatus.bs",["MAWUpdateClientRestoreStatusOperationType.bs","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("ReQL.bs").first(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(a.table("encrypted_backups_client_restore_status")),function(a){return a.threadId===c})).then(function(c){if(c!==void 0)return a.table("encrypted_backups_client_restore_status")["delete"]({hd:c.threadId,tl:0}).then(function(a){});else return b("Promise").resolve(void 0)})}function a(a){return b("ReQL.bs").toArray(b("ReQL.bs").fromTableAscending(a.table("encrypted_backups_client_restore_status"))).then(function(c){return c.reduce(function(b,c){return b.then(function(b){return g(a,c.threadId)})},b("Promise").resolve(void 0))})}function c(a,c){var d=c.action;if(d===b("MAWUpdateClientRestoreStatusOperationType.bs").upsertClientRestoreStatus){d=c.threadId;return a.table("encrypted_backups_client_restore_status").put({threadId:d,lastUpdated:b("bs_caml_int64").of_float(Date.now())})}else return g(a,c.threadId)}f.truncateClientRestoreStatusTable=a;f.call=c}),null);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs",["LS.bs","LSUpdateE2EEMetadataParticipants","MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(c){if(c!==void 0)return b("LSUpdateE2EEMetadataParticipants")(c,b("LS.bs").make(a));else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeUpdateMinMessageHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","ReQLTable.bs","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=b("bs_caml_int64").of_float(c.minTimestampMs),e=c.minMessageId;return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(f){if(f!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("messages_ranges_v2__generated")),{hd:f,tl:0})).then(function(g){if(g===void 0)return;var h=c.hasMoreBefore,i=h!==void 0?h:g.hasMoreBefore;return b("ReQLTable.bs").update(a.table("messages_ranges_v2__generated"),{hd:f,tl:{hd:g.minTimestampMs,tl:{hd:g.minMessageId,tl:0}}},function(a){if(a!==void 0)return{threadKey:a.threadKey,minTimestampMs:d,minMessageId:e,maxTimestampMs:a.maxTimestampMs,maxMessageId:a.maxMessageId,isLoadingBefore:a.isLoadingBefore,isLoadingAfter:a.isLoadingAfter,hasMoreBefore:i,hasMoreAfter:a.hasMoreAfter};else return b("unrecoverableViolation")("Thread is missing in updating the min message in message range","messenger_e2ee_web")})});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeXMAShareExpiredHandler.bs",["MAWThreadId.bs","Promise","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=String(c.xmaId);return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return a.table("attachments").get({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}}).then(function(f){if(f===void 0)return b("Promise").resolve(void 0);f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(b("bs_belt_Option").isSome).map(function(a){return a});f=f.map(function(b){return a.table("attachment_ctas")["delete"]({hd:b,tl:0})});return b("Promise").all(f).then(function(b){return a.table("attachments")["delete"]({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}})})});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeXMAShareTombstonedHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml_obj","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=String(c.xmaId);return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return a.table("attachments").get({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}}).then(function(f){if(f===void 0)return b("Promise").resolve(void 0);f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(b("bs_belt_Option").isSome).map(function(a){return a});f=f.map(function(b){return a.table("attachment_ctas")["delete"]({hd:b,tl:0})});return b("Promise").all(f).then(function(f){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("attachments")),{hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}})).then(function(c){if(c!==void 0){c=b("bs_caml_obj").caml_obj_dup(c);return a.table("attachments").put((c.previewHeightLarge=void 0,c.previewWidthLarge=void 0,c.maxSubtitleNumOfLines=void 0,c.maxTitleNumOfLines=void 0,c.subtitleText=void 0,c.titleText=void 0,c.previewHeight=void 0,c.previewWidth=void 0,c.cta3Type=void 0,c.cta3Title=void 0,c.attachmentCta3Id=void 0,c.cta2Type=void 0,c.cta2Title=void 0,c.attachmentCta2Id=void 0,c.cta1Type=void 0,c.cta1Title=void 0,c.attachmentCta1Id=void 0,c.defaultCtaTitle=void 0,c.defaultCtaId=void 0,c))}b("recoverableViolation")("Trying to tombstone a secure xma attachment but no existing attachment","messenger_e2ee_web");return b("Promise").resolve(void 0)})})});else return b("Promise").resolve(void 0)})}f.call=a}),null);
__d("MAWBridgeUIEventHandler.bs",["FBLogger","JSResource","LSTransaction.bs","MAWBridgeAbPropsUpdatedHandler.bs","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessageRangesV2Handler.bs","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteReactionHandler.bs","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeGroupInfoUpdatedHandler.bs","MAWBridgeGroupInviteUpdateHandler.bs","MAWBridgeInitOfflineQueueSyncCompleteHandler.bs","MAWBridgeInitOfflineQueueSyncProgressHandler.bs","MAWBridgeInitOfflineQueueSyncStartHandler.bs","MAWBridgeInitSyncCompleteHandler.bs","MAWBridgeMediaExpiredHandler.bs","MAWBridgeMsgClearCountdownHandler.bs","MAWBridgeMsgUpdatedHandler.bs","MAWBridgeMsgsLoadedHandler.bs","MAWBridgeMsgsStartCountdownHandler.bs","MAWBridgeNewMediaHandler.bs","MAWBridgeNewMediaRangeHandler.bs","MAWBridgeNewMsgHandler.bs","MAWBridgeNewXMAHandler.bs","MAWBridgeOneToOneMessageRequestLoadedHandler.bs","MAWBridgeParticipantRemovedHandler.bs","MAWBridgeParticipantUpdatedHandler.bs","MAWBridgeParticipantsUpdatedHandler.bs","MAWBridgeReactionUpsertHandler.bs","MAWBridgeReceivedChatStateHandler.bs","MAWBridgeReceivedReceiptHandler.bs","MAWBridgeSyncContacts.bs","MAWBridgeThreadBumpedHandler.bs","MAWBridgeThreadBumpedServerHandler","MAWBridgeThreadHiddenHandler.bs","MAWBridgeThreadTimestampsHandler.bs","MAWBridgeThreadUpdatedHandler.bs","MAWBridgeThreadsLoadedHandler.bs","MAWBridgeUpdateClientRestoreStatus.bs","MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs","MAWBridgeUpdateMinMessageHandler.bs","MAWBridgeXMAShareExpiredHandler.bs","MAWBridgeXMAShareTombstonedHandler.bs","MAWDualSendSimplePermissionsManager.bs","MAWGating.bs","Promise","Promise.bs","WATimeUtils","bs_caml_option","bs_curry","bs_js_exn","cr:5035","cr:9875","promiseDone","recoverableViolation","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g=(c=b("requireDeferred"))("MAWBridgeIssuePointQueryHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),h=c("MAWBridgeStartTraceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),i=c("MAWBridgeStartTraceWithTraceIdHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),j=c("MAWBridgeTraceRecordCheckpointHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),k=c("MAWBridgeUpdateDyiStatus.bs").__setRef("MAWBridgeUIEventHandler.bs"),l=c("MAWBridgeUpdateTraceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),m=c("MAWBridgeUploadMessageHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),n=c("MAWBridgeUploadThreadHandler.bs").__setRef("MAWBridgeUIEventHandler.bs");function a(a,c){a=a.then(function(a){return b("LSTransaction.bs").run(a,function(d){var e=b("MAWGating.bs").isArmadillo(void 0),f=b("MAWDualSendSimplePermissionsManager.bs").isDualSendUser(void 0),o=e||f?function(c){switch(c.TAG|0){case 0:var e=c._0;if(e.isDualSend)return b("Promise").resolve(void 0);else return b("MAWBridgeNewMsgHandler.bs").call(a,d,e);case 1:return b("MAWBridgeMsgsStartCountdownHandler.bs").call(d,c._0);case 2:return b("MAWBridgeMsgClearCountdownHandler.bs").call(c._0);case 3:return b("MAWBridgeDropAllSecureThreadsHandler").call(d);case 4:e=c._0;if(b("cr:5035")==null)return b("bs_curry")._2(b("cr:9875").call,d,e);else return b("bs_curry")._2(b("cr:5035").call,d,e);case 5:e=c._0;if(e.isDualSend)return b("Promise").resolve(void 0);else return b("MAWBridgeMsgUpdatedHandler.bs").call(a,d,e);case 6:return b("MAWBridgeNewMediaHandler.bs").call(d,c._0);case 7:return b("MAWBridgeNewMediaRangeHandler.bs").call(d,c._0);case 8:return b("MAWBridgeMediaExpiredHandler.bs").call(d,c._0);case 9:return b("MAWBridgeXMAShareExpiredHandler.bs").call(d,c._0);case 10:return b("MAWBridgeNewXMAHandler.bs").call(d,c._0);case 11:return b("MAWBridgeXMAShareTombstonedHandler.bs").call(d,c._0);case 12:return b("MAWBridgeParticipantUpdatedHandler.bs").call(d,c._0);case 13:return b("MAWBridgeParticipantRemovedHandler.bs").call(d,c._0);case 14:return b("MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs").call(d,c._0);case 15:return b("MAWBridgeReceivedReceiptHandler.bs").call(d,c._0);case 16:return b("MAWBridgeThreadUpdatedHandler.bs").call(a,d,c._0);case 17:return b("MAWBridgeGroupInfoUpdatedHandler.bs").call(d,c._0);case 18:return b("MAWBridgeThreadBumpedHandler.bs").call(a,d,c._0);case 19:return b("MAWBridgeThreadsLoadedHandler.bs").call(d,c._0);case 20:return b("MAWBridgeThreadTimestampsHandler.bs").call(d,c._0);case 21:return b("MAWBridgeMsgsLoadedHandler.bs").call(d,c._0);case 22:return b("MAWBridgeInitSyncCompleteHandler.bs").call(d);case 23:var f=c._0;return h.load().then(function(a){return b("bs_curry")._2(a.call,d,f)});case 24:var o=c._0;return l.load().then(function(a){return b("bs_curry")._2(a.call,d,o)});case 25:return b("MAWBridgeThreadHiddenHandler.bs").call(d,c._0);case 26:return b("MAWBridgeSyncContacts.bs").call(d,c._0);case 27:return b("MAWBridgeReceivedChatStateHandler.bs").call(d,c._0);case 28:return window.Promise.resolve((b("WATimeUtils").setClockSkew(c._0),void 0));case 29:return b("MAWBridgeAbPropsUpdatedHandler.bs").call(c._0);case 30:return b("MAWBridgeReactionUpsertHandler.bs").call(d,c._0);case 31:return b("MAWBridgeDeleteReactionHandler.bs").call(d,c._0);case 32:var p=c._0;return m.load().then(function(a){return b("bs_curry")._2(a.call,d,p)});case 33:var q=c._0;return n.load().then(function(a){return b("bs_curry")._2(a.call,d,q)});case 34:var r=c._0;return b("JSResource")("MAWBridgeCallFinishAddDeviceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,r)});case 35:var s=c._0;return b("JSResource")("MAWBridgeUploadAttachmentHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,s)});case 36:var t=c._0;return b("JSResource")("MAWBridgeResignAttachmentCDNUrlHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,t)});case 37:return b("MAWBridgeDeleteMessagesHandler")(d,c._0);case 38:var u=c._0;return b("JSResource")("MAWBridgeRestoreMessageBatchHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,u)});case 39:return b("MAWBridgeOneToOneMessageRequestLoadedHandler.bs").call(d,c._0);case 40:return b("MAWBridgeGroupInviteUpdateHandler.bs").call(d,c._0);case 41:return b("MAWBridgeInitOfflineQueueSyncStartHandler.bs").call(d,c._0);case 42:return b("MAWBridgeInitOfflineQueueSyncCompleteHandler.bs").call(d);case 43:return b("MAWBridgeInitOfflineQueueSyncProgressHandler.bs").call(d,c._0);case 44:var v=c._0;return k.load().then(function(a){return b("bs_curry")._2(a.call,d,v)});case 45:return b("MAWBridgeDeleteGroupInviteHandler")(d,c._0);case 46:var w=c._0;return j.load().then(function(a){return b("bs_curry")._2(a.call,d,w)});case 47:return b("MAWBridgeDeleteMessageRangesV2Handler.bs").call(d,c._0);case 48:return b("MAWBridgeUpdateMinMessageHandler.bs").call(d,c._0);case 49:var x=c._0;return g.load().then(function(a){return b("bs_curry")._2(a.call,d,x)});case 50:return b("MAWBridgeThreadBumpedServerHandler").call(d,c._0);case 51:return b("MAWBridgeParticipantsUpdatedHandler.bs").call(d,c._0);case 52:var y=c._0;return i.load().then(function(a){return b("bs_curry")._2(a.call,d,y)});case 53:return b("MAWBridgeUpdateClientRestoreStatus.bs").call(d,c._0);case 54:return b("MAWBridgeNewMsgHandler.bs").bulkCall(a,d,c._0.msgs)}}:(b("recoverableViolation")("User is neither part of armadillo QE and dual send QE but somehow loaded this handler","messenger_web_product"),function(a){return b("Promise").resolve(void 0)});return c.reduce(function(a,c){return a.then(function(a){return b("bs_curry")._1(o,c)})},b("Promise").resolve(void 0))},"readWrite")});b("promiseDone")(a,void 0,function(a){a=a.RE_EXN_ID===b("Promise.bs").JsError||a.RE_EXN_ID===b("bs_js_exn").$$Error?b("bs_caml_option").some(a._1):a;b("FBLogger")("messenger_e2ee_web").catching(a).warn("Error handling UI Event")})}f.$MAWBridgeIssuePointQueryHandler$Deferred=g;f.$MAWBridgeOccamadilloVerifyThreadExistsHandler$OR$MAWBridgeVerifyThreadExistsHandler$requireCond=b("cr:9875");f.$MAWBridgeOccamadilloVerifyThreadExistsHandler$requireCondXplat=b("cr:5035");f.$MAWBridgeStartTraceHandler$Deferred=h;f.$MAWBridgeStartTraceWithTraceIdHandler$Deferred=i;f.$MAWBridgeTraceRecordCheckpointHandler$Deferred=j;f.$MAWBridgeUpdateDyiStatus$Deferred=k;f.$MAWBridgeUpdateTraceHandler$Deferred=l;f.$MAWBridgeUploadMessageHandler$Deferred=m;f.$MAWBridgeUploadThreadHandler$Deferred=n;f.handleEvents=a}),null);
__d("MAWBridgeUIEventHandler.re",["MAWBridgeUIEventHandler.bs"],(function(a,b,c,d,e,f){a=b("MAWBridgeUIEventHandler.bs").handleEvents;f.handleEvents=a}),null);
__d("MAWBridgeUIEventsWrapper",["MAWBridgeTypesWrapper"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.TAG){case 0:return{tag:"NewMsg",value:d("MAWBridgeTypesWrapper").bridgeMsgToJS(a._0)};case 1:return{tag:"MsgsStartCountdown",value:a._0};case 2:return{tag:"MsgClearCountdown",value:a._0};case 3:return{tag:"DropAllSecureThreads",value:a._0};case 4:return{tag:"VerifyThreadExists",value:a._0};case 5:return{tag:"MsgUpdated",value:d("MAWBridgeTypesWrapper").bridgeMsgToJS(a._0)};case 6:return{tag:"NewMedia",value:a._0};case 7:return{tag:"NewMediaRange",value:a._0};case 8:return{tag:"MediaExpired",value:a._0};case 9:return{tag:"XMAShareExpired",value:a._0};case 10:return{tag:"NewXMA",value:a._0};case 11:return{tag:"XMAShareTombstoned",value:a._0};case 12:return{tag:"ParticipantUpdated",value:a._0};case 13:return{tag:"ParticipantRemoved",value:a._0};case 14:return{tag:"UpdateE2EEMetadataParticipants",value:a._0};case 15:return{tag:"ReceivedReceipt",value:a._0};case 16:return{tag:"ThreadUpdated",value:a._0};case 17:return{tag:"GroupInfoUpdated",value:a._0};case 18:return{tag:"ThreadBumped",value:a._0};case 19:return{tag:"ThreadsLoaded",value:a._0};case 20:return{tag:"ThreadTimestampsUpdated",value:a._0};case 21:return{tag:"MsgsLoaded",value:a._0};case 22:return{tag:"InitSyncComplete",value:a._0};case 23:return{tag:"StartTrace",value:d("MAWBridgeTypesWrapper").bridgeStartTraceDataToJS(a._0)};case 24:return{tag:"UpdateTrace",value:a._0};case 25:return{tag:"ThreadHidden",value:a._0};case 26:return{tag:"SyncContacts",value:a._0};case 27:return{tag:"ReceivedChatState",value:a._0};case 28:return{tag:"ClockSkewUpdated",value:a._0};case 29:return{tag:"ABPropsUpdated",value:a._0};case 30:return{tag:"UpsertReaction",value:a._0};case 31:return{tag:"DeleteReaction",value:a._0};case 32:return{tag:"UploadMessage",value:a._0};case 33:return{tag:"UploadThread",value:a._0};case 34:return{tag:"CallFinishAddDevice",value:a._0};case 35:return{tag:"UploadAttachment",value:a._0};case 36:return{tag:"ResignAttachmentCDNUrl",value:a._0};case 37:return{tag:"DeleteMessages",value:a._0};case 38:return{tag:"RestoreMessageBatch",value:a._0};case 39:return{tag:"OneToOneMessageRequestLoaded",value:a._0};case 40:return{tag:"GroupInviteUpdate",value:a._0};case 41:return{tag:"InitOfflineQueueSyncStart",value:a._0};case 42:return{tag:"InitOfflineQueueSyncComplete",value:a._0};case 43:return{tag:"InitOfflineQueueSyncProgress",value:a._0};case 44:return{tag:"UpdateDyiStatus",value:a._0};case 45:return{tag:"DeleteGroupInvite",value:a._0};case 46:return{tag:"TraceRecordCheckpoint",value:a._0};case 47:return{tag:"DeleteMessageRangesV2",value:a._0};case 48:return{tag:"UpdateMinMessage",value:a._0};case 49:return{tag:"IssuePointQuery",value:a._0};case 50:return{tag:"ThreadBumpedServer",value:a._0};case 51:return{tag:"ParticipantsUpdated",value:a._0};case 52:return{tag:"StartTraceWithTraceId",value:a._0};case 53:return{tag:"UpdateClientRestoreStatus",value:a._0};case 54:return{tag:"NewMsgs",value:{msgs:a._0.msgs.map(d("MAWBridgeTypesWrapper").bridgeMsgToJS)}}}}function b(a){switch(a.tag){case"NewMsg":return{_0:d("MAWBridgeTypesWrapper").bridgeMsgToRE(a.value),TAG:0};case"MsgsStartCountdown":return{_0:a.value,TAG:1};case"MsgClearCountdown":return{_0:a.value,TAG:2};case"DropAllSecureThreads":return{_0:a.value,TAG:3};case"VerifyThreadExists":return{_0:a.value,TAG:4};case"MsgUpdated":return{_0:d("MAWBridgeTypesWrapper").bridgeMsgToRE(a.value),TAG:5};case"NewMedia":return{_0:a.value,TAG:6};case"NewMediaRange":return{_0:a.value,TAG:7};case"MediaExpired":return{_0:a.value,TAG:8};case"XMAShareExpired":return{_0:a.value,TAG:9};case"NewXMA":return{_0:a.value,TAG:10};case"XMAShareTombstoned":return{_0:a.value,TAG:11};case"ParticipantUpdated":return{_0:a.value,TAG:12};case"ParticipantRemoved":return{_0:a.value,TAG:13};case"UpdateE2EEMetadataParticipants":return{_0:a.value,TAG:14};case"ReceivedReceipt":return{_0:a.value,TAG:15};case"ThreadUpdated":return{_0:a.value,TAG:16};case"GroupInfoUpdated":return{_0:a.value,TAG:17};case"ThreadBumped":return{_0:a.value,TAG:18};case"ThreadsLoaded":return{_0:a.value,TAG:19};case"ThreadTimestampsUpdated":return{_0:a.value,TAG:20};case"MsgsLoaded":return{_0:a.value,TAG:21};case"InitSyncComplete":return{_0:a.value,TAG:22};case"StartTrace":return{_0:d("MAWBridgeTypesWrapper").bridgeStartTraceDataToRE(a.value),TAG:23};case"UpdateTrace":return{_0:a.value,TAG:24};case"ThreadHidden":return{_0:a.value,TAG:25};case"SyncContacts":return{_0:a.value,TAG:26};case"ReceivedChatState":return{_0:a.value,TAG:27};case"ClockSkewUpdated":return{_0:a.value,TAG:28};case"ABPropsUpdated":return{_0:a.value,TAG:29};case"UpsertReaction":return{_0:a.value,TAG:30};case"DeleteReaction":return{_0:a.value,TAG:31};case"UploadMessage":return{_0:a.value,TAG:32};case"UploadThread":return{_0:a.value,TAG:33};case"CallFinishAddDevice":return{_0:a.value,TAG:34};case"UploadAttachment":return{_0:a.value,TAG:35};case"ResignAttachmentCDNUrl":return{_0:a.value,TAG:36};case"DeleteMessages":return{_0:a.value,TAG:37};case"RestoreMessageBatch":return{_0:a.value,TAG:38};case"OneToOneMessageRequestLoaded":return{_0:a.value,TAG:39};case"GroupInviteUpdate":return{_0:a.value,TAG:40};case"InitOfflineQueueSyncStart":return{_0:a.value,TAG:41};case"InitOfflineQueueSyncComplete":return{_0:a.value,TAG:42};case"InitOfflineQueueSyncProgress":return{_0:a.value,TAG:43};case"UpdateDyiStatus":return{_0:a.value,TAG:44};case"DeleteGroupInvite":return{_0:a.value,TAG:45};case"TraceRecordCheckpoint":return{_0:a.value,TAG:46};case"DeleteMessageRangesV2":return{_0:a.value,TAG:47};case"UpdateMinMessage":return{_0:a.value,TAG:48};case"IssuePointQuery":return{_0:a.value,TAG:49};case"ThreadBumpedServer":return{_0:a.value,TAG:50};case"ParticipantsUpdated":return{_0:a.value,TAG:51};case"StartTraceWithTraceId":return{_0:a.value,TAG:52};case"UpdateClientRestoreStatus":return{_0:a.value,TAG:53};case"NewMsgs":return{_0:{msgs:a.value.msgs.map(d("MAWBridgeTypesWrapper").bridgeMsgToRE)},TAG:54}}}g.UIEventToJS=a;g.UIEventToRE=b}),98);
__d("MAWOccamadilloOnMutexChange",["LSDatabaseType.bs","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","MAWGating.re","Promise","WALogger","bs_caml_int64","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]);h=function(){return a};return a}function i(a){var e=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(c("MAWGating.re").isOccamadillo()&&e!=null)return a.table("sync_groups").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:d("LSIntEnum").ofNumber(e.groupId)}));else return b("Promise").resolve()}function j(a){if(c("MAWGating.re").isOccamadillo())return a.table("network_requests").put({epochId:void 0,failureCount:c("bs_caml_int64").zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:c("bs_caml_int64").zero,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,networkTaskIdentifier:void 0,syncDatabaseId:d("LSDatabaseType.bs").e2eeMessagingMetadataMailbox,taskQueueName:""});else return b("Promise").resolve()}function a(a){d("WALogger").LOG(h()),c("promiseDone")(a.runInTransaction(function(a){return b("Promise").all([i(a),j(a)])},"readwrite"))}g.onOccamadilloMutexChange=a}),98);
__d("LSInitSyncCompleteSubscription.re",["LSInitSyncCompleteSubscription.bs"],(function(a,b,c,d,e,f){a=b("LSInitSyncCompleteSubscription.bs").waitForSyncGroup;f.waitForSyncGroup=a;c=b("LSInitSyncCompleteSubscription.bs").use;f.use=c}),null);
__d("LSMessagingThreadAttributionType.re",["LSMessagingThreadAttributionType.bs"],(function(a,b,c,d,e,f){c=(a=b("LSMessagingThreadAttributionType.bs")).unknown;f.unknown=c;d=a.unknownTest;f.unknownTest=d;e=a.unknownFailureRetry;f.unknownFailureRetry=e;b=a.messengerInbox;f.messengerInbox=b;c=a.messengerInboxInThread;f.messengerInboxInThread=c;d=a.messengerInboxThreadList;f.messengerInboxThreadList=d;e=a.messengerInboxNestedFolder;f.messengerInboxNestedFolder=e;b=a.messengerInboxRecentThreads;f.messengerInboxRecentThreads=b;c=a.messengerInboxRemainingThreads;f.messengerInboxRemainingThreads=c;d=a.messengerInboxMessageSearch;f.messengerInboxMessageSearch=d;e=a.messengerInboxImageSending;f.messengerInboxImageSending=e;b=a.messengerInboxForward;f.messengerInboxForward=b;c=a.messengerInboxArchivedThreads;f.messengerInboxArchivedThreads=c;d=a.messengerInboxPendingRequests;f.messengerInboxPendingRequests=d;e=a.messengerInboxActiveContacts;f.messengerInboxActiveContacts=e;b=a.messengerUniversalSearch;f.messengerUniversalSearch=b;c=a.messengerUniversalSearchNullState;f.messengerUniversalSearchNullState=c;d=a.messengerUniversalSearchKeyPressed;f.messengerUniversalSearchKeyPressed=d;e=a.messengerUniversalSearchMessageSearch;f.messengerUniversalSearchMessageSearch=e;b=a.messengerUniversalSearchAdvancedContentSearch;f.messengerUniversalSearchAdvancedContentSearch=b;c=a.montageAndActiveNow;f.montageAndActiveNow=c;d=a.montageAndActiveNowMontageInboxUnit;f.montageAndActiveNowMontageInboxUnit=d;e=a.montageAndActiveNowActiveNow;f.montageAndActiveNowActiveNow=e;b=a.montageAndActiveNowInboxComposer;f.montageAndActiveNowInboxComposer=b;c=a.montageAndActiveNowActiveAndHasStory;f.montageAndActiveNowActiveAndHasStory=c;d=a.messengerActiveNowFriendsTab;f.messengerActiveNowFriendsTab=d;e=a.messengerActiveNowFriendsTabFriendsTab;f.messengerActiveNowFriendsTabFriendsTab=e;b=a.messengerActiveNowFriendsTabPlaceHolder;f.messengerActiveNowFriendsTabPlaceHolder=b;c=a.messengerActiveNowFriendsTabRecentActive;f.messengerActiveNowFriendsTabRecentActive=c;d=a.messengerActiveNowFriendsTabRecentActiveAndStory;f.messengerActiveNowFriendsTabRecentActiveAndStory=d;e=a.messengerActiveNowFriendsTabContentDiscovery;f.messengerActiveNowFriendsTabContentDiscovery=e;b=a.messengerPendingRequests;f.messengerPendingRequests=b;c=a.messengerPendingRequestsInboxThreadList;f.messengerPendingRequestsInboxThreadList=c;d=a.messengerPendingRequestsPendingRequestsPage;f.messengerPendingRequestsPendingRequestsPage=d;e=a.messengerBroadcastFlow;f.messengerBroadcastFlow=e;b=a.messengerBroadcastFlowFromMessenger;f.messengerBroadcastFlowFromMessenger=b;c=a.messengerBroadcastFlowFromFb;f.messengerBroadcastFlowFromFb=c;d=a.messengerBroadcastFlowFromExternal;f.messengerBroadcastFlowFromExternal=d;e=a.messengerBroadcastFlowFromFbNewsfeedSharesheet;f.messengerBroadcastFlowFromFbNewsfeedSharesheet=e;b=a.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer;f.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer=b;c=a.messengerBroadcastFlowFromFbShortsViewer;f.messengerBroadcastFlowFromFbShortsViewer=c;d=a.messengerBroadcastFlowForwardGutter;f.messengerBroadcastFlowForwardGutter=d;e=a.messengerBroadcastFlowForwardLongclick;f.messengerBroadcastFlowForwardLongclick=e;b=a.messengerBroadcastFlowMessengerPhotoView;f.messengerBroadcastFlowMessengerPhotoView=b;c=a.messengerOmnipicker;f.messengerOmnipicker=c;d=a.messengerOmnipickerNullState;f.messengerOmnipickerNullState=d;e=a.messengerOmnipickerKeyPressed;f.messengerOmnipickerKeyPressed=e;b=a.messengerNotification;f.messengerNotification=b;c=a.messengerNotificationInThreadReply;f.messengerNotificationInThreadReply=c;d=a.messengerNotificationLongpressReply;f.messengerNotificationLongpressReply=d;e=a.messengerNotificationLongpressReaction;f.messengerNotificationLongpressReaction=e;b=a.clickToMessengerAd;f.clickToMessengerAd=b;c=a.clickToMessengerAdFromNewsfeed;f.clickToMessengerAdFromNewsfeed=c;d=a.clickToMessengerAdSendMessageCta;f.clickToMessengerAdSendMessageCta=d;e=a.clickToMessengerAdViewAndMessage;f.clickToMessengerAdViewAndMessage=e;b=a.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta;f.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta=b;c=a.payments;f.payments=c;d=a.paymentsBubbleClick;f.paymentsBubbleClick=d;e=a.rtc;f.rtc=e;b=a.rtcVoipIncall;f.rtcVoipIncall=b;c=a.fbPage;f.fbPage=c;d=a.fbPageAboutCard;f.fbPageAboutCard=d;e=a.fbPageProfileHeaderMessageButton;f.fbPageProfileHeaderMessageButton=e;b=a.fbPageProfileFooterMessageButton;f.fbPageProfileFooterMessageButton=b;c=a.fbPageProfileMoreDrawer;f.fbPageProfileMoreDrawer=c;d=a.fbPageResponsivenessContextCard;f.fbPageResponsivenessContextCard=d;e=a.fbProfile;f.fbProfile=e;b=a.fbProfileTimelineMessageButton;f.fbProfileTimelineMessageButton=b;c=a.fbProfileFacebookProfile;f.fbProfileFacebookProfile=c;d=a.fbProfileMessageButton;f.fbProfileMessageButton=d;e=a.fbSearch;f.fbSearch=e;b=a.fbSearchContextualProfileActionBarFromSearch;f.fbSearchContextualProfileActionBarFromSearch=b;c=a.fbSearchSearchMessageButton;f.fbSearchSearchMessageButton=c;d=a.fbSearchFbMessageSearchResults;f.fbSearchFbMessageSearchResults=d;e=a.fbSearchHighConfidenceCard;f.fbSearchHighConfidenceCard=e;b=a.fbSearchMentions;f.fbSearchMentions=b;c=a.fbSearchNullstateCta;f.fbSearchNullstateCta=c;d=a.crypto;f.crypto=d;e=a.messengerMontageComposer;f.messengerMontageComposer=e;b=a.messengerMontageComposerFriendsTab;f.messengerMontageComposerFriendsTab=b;c=a.messengerMontageComposerFriendsTabStoryAndActiveNow;f.messengerMontageComposerFriendsTabStoryAndActiveNow=c;d=a.messengerMontageReply;f.messengerMontageReply=d;e=a.messengerMontageReplyInboxThreadListProfile;f.messengerMontageReplyInboxThreadListProfile=e;b=a.messengerMontageReplyReplyContext;f.messengerMontageReplyReplyContext=b;c=a.messengerMontageReplyThreadNavBar;f.messengerMontageReplyThreadNavBar=c;d=a.messengerMontageReplyInboxThreadListProfileAuthorProfile;f.messengerMontageReplyInboxThreadListProfileAuthorProfile=d;e=a.messengerMontageReplyReplyContextAuthorProfile;f.messengerMontageReplyReplyContextAuthorProfile=e;b=a.messengerMontageReplyThreadNavBarAuthorProfile;f.messengerMontageReplyThreadNavBarAuthorProfile=b;c=a.messengerMontageReplyOneToOneChatThreadStoryBubble;f.messengerMontageReplyOneToOneChatThreadStoryBubble=c;d=a.messengerThreadMembersList;f.messengerThreadMembersList=d;e=a.marketplace;f.marketplace=e;b=a.marketplaceActivityBanner;f.marketplaceActivityBanner=b;c=a.marketplaceSendMessage;f.marketplaceSendMessage=c;d=a.fbStory;f.fbStory=d;e=a.fbStoryViewerSheetMenu;f.fbStoryViewerSheetMenu=e;b=a.fbStoryViewerSheetRow;f.fbStoryViewerSheetRow=b;c=a.fbStoryStoriesJewelNotification;f.fbStoryStoriesJewelNotification=c;d=a.fbStoryStoriesPushNotification;f.fbStoryStoriesPushNotification=d;e=a.fbStoryStoriesViewerConsumerReply;f.fbStoryStoriesViewerConsumerReply=e;b=a.fbStoryStoriesViewerConsumerArtifact;f.fbStoryStoriesViewerConsumerArtifact=b;c=a.fbStoryStoriesPageStoryConversations;f.fbStoryStoriesPageStoryConversations=c;d=a.fbStorySocialContextConversations;f.fbStorySocialContextConversations=d;e=a.workspeed;f.workspeed=e;b=a.workspeedComposerLikeButton;f.workspeedComposerLikeButton=b;c=a.workspeedComposerGifPicker;f.workspeedComposerGifPicker=c;d=a.mdotme;f.mdotme=d;e=a.mdotmeOrganicPost;f.mdotmeOrganicPost=e;b=a.mdotmeMarketingEmail;f.mdotmeMarketingEmail=b;c=a.mdotmeMbsOffsiteEmail;f.mdotmeMbsOffsiteEmail=c;d=a.customerChatPlugin;f.customerChatPlugin=d;e=a.customerChatPluginMobileRedirect;f.customerChatPluginMobileRedirect=e;b=a.customerChatPluginUpgradeFlow;f.customerChatPluginUpgradeFlow=b;c=a.customerChatPluginReEngagement;f.customerChatPluginReEngagement=c;d=a.fbFeed;f.fbFeed=d;e=a.fbFeedOrganicPost;f.fbFeedOrganicPost=e;b=a.fbFeedOrganicPostViewAndMessage;f.fbFeedOrganicPostViewAndMessage=b;c=a.fbFeedQuestionTriggeredConvo;f.fbFeedQuestionTriggeredConvo=c;d=a.fbFeedDynamicHoverCard;f.fbFeedDynamicHoverCard=d;e=a.fbFeedOrganicPostNewsfeedPagePostCta;f.fbFeedOrganicPostNewsfeedPagePostCta=e;b=a.fbFeedOrganicPostNewsfeedBumperSmcta;f.fbFeedOrganicPostNewsfeedBumperSmcta=b;c=a.fbFeedBcfOpenChatButton;f.fbFeedBcfOpenChatButton=c;d=a.fbFeedReactorsListMessageButton;f.fbFeedReactorsListMessageButton=d;e=a.fbFeedReplyToAuthor;f.fbFeedReplyToAuthor=e;b=a.fbFeedUfiSendSuggestions;f.fbFeedUfiSendSuggestions=b;c=a.fbNotification;f.fbNotification=c;d=a.fbNotificationJewelNotif;f.fbNotificationJewelNotif=d;e=a.fbNotificationPushNotif;f.fbNotificationPushNotif=e;b=a.fbEvent;f.fbEvent=b;c=a.fbEventMessageHost;f.fbEventMessageHost=c;d=a.fbEventShareClassMaterials;f.fbEventShareClassMaterials=d;e=a.supportResources;f.supportResources=e;b=a.supportResourcesFrxAction;f.supportResourcesFrxAction=b;c=a.leadGenMessaging;f.leadGenMessaging=c;d=a.leadGenMessagingPreSubmission;f.leadGenMessagingPreSubmission=d;e=a.leadGenMessagingPostSubmission;f.leadGenMessagingPostSubmission=e;b=a.leadGenMessagingCrossChannelVerticalPresentAndroid;f.leadGenMessagingCrossChannelVerticalPresentAndroid=b;c=a.leadGenMessagingCrossChannelHscrollAndroid;f.leadGenMessagingCrossChannelHscrollAndroid=c;d=a.messengerGraph;f.messengerGraph=d;e=a.messengerGraphSelectContact;f.messengerGraphSelectContact=e;b=a.messengerChat;f.messengerChat=b;c=a.messengerChatFromJewelThreadList;f.messengerChatFromJewelThreadList=c;d=a.messengerChatInThread;f.messengerChatInThread=d;e=a.messengerChatForward;f.messengerChatForward=e;b=a.messengerArchivedThreads;f.messengerArchivedThreads=b;c=a.messengerArchivedThreadsArchivedThreadsFolder;f.messengerArchivedThreadsArchivedThreadsFolder=c;d=a.jewel;f.jewel=d;e=a.jewelThreadList;f.jewelThreadList=e;b=a.jewelSearch;f.jewelSearch=b;c=a.jewelNewMessage;f.jewelNewMessage=c;d=a.jewelNestedFolder;f.jewelNestedFolder=d;e=a.chatheads;f.chatheads=e;b=a.chatheadsRecentThreads;f.chatheadsRecentThreads=b;c=a.chatheadsOverflow;f.chatheadsOverflow=c;d=a.chatheadsNewMessage;f.chatheadsNewMessage=d;e=a.sidebar;f.sidebar=e;b=a.sidebarContactsList;f.sidebarContactsList=b;c=a.sidebarContactsSearch;f.sidebarContactsSearch=c;d=a.sidebarContactsGroups;f.sidebarContactsGroups=d;e=a.messengerCommunityMessaging;f.messengerCommunityMessaging=e;b=a.messengerCommunityMessagingCommunityChannel;f.messengerCommunityMessagingCommunityChannel=b;c=a.messengerCommunityMessagingFullscreenChat;f.messengerCommunityMessagingFullscreenChat=c;d=a.fbPlatformLogin;f.fbPlatformLogin=d;e=a.fbPlatformLoginLoginConnectWithMessenger;f.fbPlatformLoginLoginConnectWithMessenger=e;b=a.contactManager;f.contactManager=b;c=a.contactManagerContactShare;f.contactManagerContactShare=c;d=a.contactManagerPeopleTabContactList;f.contactManagerPeopleTabContactList=d;e=a.contactManagerPeopleTabContactSearch;f.contactManagerPeopleTabContactSearch=e;b=a.contactManagerIconContactList;f.contactManagerIconContactList=b;c=a.contactManagerIconContactSearch;f.contactManagerIconContactSearch=c;d=a.messagingInboxInBlue;f.messagingInboxInBlue=d;e=a.messagingInboxInBlueThreadList;f.messagingInboxInBlueThreadList=e;b=a.messagingInboxInBluePeoplePicker;f.messagingInboxInBluePeoplePicker=b;c=a.messagingInboxInBlueInboxIcon;f.messagingInboxInBlueInboxIcon=c;d=a.messagingInboxInBlueSwipeFromRight;f.messagingInboxInBlueSwipeFromRight=d;e=a.messagingInboxInBlueMibNotification;f.messagingInboxInBlueMibNotification=e;b=a.messagingInboxInBlueActiveNow;f.messagingInboxInBlueActiveNow=b;c=a.messagingInboxInBlueSuggestedChats;f.messagingInboxInBlueSuggestedChats=c;d=a.messagingInboxInBlueChatPreviewBanner;f.messagingInboxInBlueChatPreviewBanner=d;e=a.messagingInboxInBlueThreadViewCoreNullState;f.messagingInboxInBlueThreadViewCoreNullState=e;b=a.messagingInboxInBlueMessageRequests;f.messagingInboxInBlueMessageRequests=b;c=a.messagingInboxInBlueSpam;f.messagingInboxInBlueSpam=c;d=a.messagingInboxInBlueFbGroups;f.messagingInboxInBlueFbGroups=d;e=a.messagingInboxInBlueMessengerPeekStateButton;f.messagingInboxInBlueMessengerPeekStateButton=e;b=a.messagingInboxInBlueMessengerPeekStateTooltip;f.messagingInboxInBlueMessengerPeekStateTooltip=b;c=a.messagingInboxInBlueBroadcastFlow;f.messagingInboxInBlueBroadcastFlow=c;d=a.messagingInboxInBlueThreadViewHeader;f.messagingInboxInBlueThreadViewHeader=d;e=a.mibNotification;f.mibNotification=e;b=a.mibNotificationPushNotification;f.mibNotificationPushNotification=b;c=a.mibNotificationJewelNotification;f.mibNotificationJewelNotification=c;d=a.mibNotificationDirectPushNotif;f.mibNotificationDirectPushNotif=d;e=a.mibNotificationDirectJewelNotif;f.mibNotificationDirectJewelNotif=e;b=a.messengerRestrictedAccounts;f.messengerRestrictedAccounts=b;c=a.armadilloCutoverThreadLinkingMessage;f.armadilloCutoverThreadLinkingMessage=c;d=a.callsTab;f.callsTab=d;e=a.miniShopViewMenuButton;f.miniShopViewMenuButton=e;b=a.sharesheet;f.sharesheet=b;c=a.sharesheetGeneralizedBroadcastFlow;f.sharesheetGeneralizedBroadcastFlow=c;d=a.sharesheetOffPlatformSharingHScroll;f.sharesheetOffPlatformSharingHScroll=d;e=a.ufi;f.ufi=e;b=a.ufiGeneralizedBroadcastFlow;f.ufiGeneralizedBroadcastFlow=b;c=a.chatheadClickCollapsed;f.chatheadClickCollapsed=c;d=a.timelineMessageButton;f.timelineMessageButton=d;e=a.directReplyIntent;f.directReplyIntent=e;b=a.fbGroups;f.fbGroups=b;c=a.fbGroupsInbox;f.fbGroupsInbox=c;d=a.fbGroupsPickerExistingChat;f.fbGroupsPickerExistingChat=d;e=a.fbGroupsPickerJoinChat;f.fbGroupsPickerJoinChat=e;b=a.devices;f.devices=b;c=a.devicesStella;f.devicesStella=c;d=a.fbWellbeing;f.fbWellbeing=d;e=a.fbWellbeingIncallUnblockingNotification;f.fbWellbeingIncallUnblockingNotification=e;b=a.messengerDeepLinking;f.messengerDeepLinking=b;c=a.readOnlyCutoverThread;f.readOnlyCutoverThread=c;d=a.readOnlyCutoverThreadArmadilloThread;f.readOnlyCutoverThreadArmadilloThread=d;e=a.armadilloThread;f.armadilloThread=e;b=a.armadilloThreadReadOnlyCutoverThread;f.armadilloThreadReadOnlyCutoverThread=b;c=a.fbShorts;f.fbShorts=c;d=a.fbShortsProfile;f.fbShortsProfile=d;e=a.fbShortsReactorsListMessageButton;f.fbShortsReactorsListMessageButton=e;b=a.sendPlugin;f.sendPlugin=b;c=a.sendAsMessageFromNt;f.sendAsMessageFromNt=c;d=a.messengerPublicChatsMessaging;f.messengerPublicChatsMessaging=d}),null);
__d("MAWDBUsageMetrics",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=30*1e3,i=0,j=null;function a(){if(Date.now()>i+h){var a=navigator.storage;a==null?void 0:a.estimate==null?void 0:a.estimate().then(function(a){j=a});i=Date.now()}return j}c("gkx")("5444")&&a();g.getMAWDBUsageMetrics=a}),98);
__d("MWLogSend.re",["MWLogSend.bs"],(function(a,b,c,d,e,f){a=b("MWLogSend.bs").log;f.log=a}),null);
__d("MessagingBackend.re",["MessagingBackend.bs"],(function(a,b,c,d,e,f){a=b("MessagingBackend.bs").messengerInfra;f.messengerInfra=a;c=b("MessagingBackend.bs").whatsappInfra;f.whatsappInfra=c}),null);
__d("MessagingLoggingUtilsAttachmentTypeInt.re",["MessagingLoggingUtilsAttachmentTypeInt.bs"],(function(a,b,c,d,e,f){c=(a=b("MessagingLoggingUtilsAttachmentTypeInt.bs")).text;f.text=c;d=a.none;f.none=d;e=a.fbVoiceMessage;f.fbVoiceMessage=e;b=a.like;f.like=b;c=a.sticker;f.sticker=c;d=a.videoMessage;f.videoMessage=d;e=a.gif;f.gif=e;b=a.location;f.location=b;c=a.image;f.image=c;d=a.application;f.application=d;e=a.video;f.video=e;b=a.audio;f.audio=b;c=a.messengerInvite;f.messengerInvite=c;d=a.share;f.share=d;e=a.liveLocation;f.liveLocation=e;b=a.lightweightAction;f.lightweightAction=b;c=a.fakeNewsLink;f.fakeNewsLink=c;d=a.p2pPayment;f.p2pPayment=d;e=a.montageDirect;f.montageDirect=e;b=a.sphericalPhoto;f.sphericalPhoto=b;c=a.reaction;f.reaction=c;d=a.story;f.story=d;e=a.selfieSticker;f.selfieSticker=e;b=a.soundBite;f.soundBite=b;c=a.armadilloSysPacket;f.armadilloSysPacket=c;d=a.deleteForMe;f.deleteForMe=d;e=a.unsend;f.unsend=e;b=a.unsendReaction;f.unsendReaction=b;c=a.poll;f.poll=c;d=a.avatarLike;f.avatarLike=d}),null);
__d("ReStore.re",["ReStore.bs"],(function(a,b,c,d,e,f){a=b("ReStore.bs").toGenericStorage;f.toGenericStorage=a}),null);
__d("SendEventType.re",["SendEventType.bs"],(function(a,b,c,d,e,f){c=(a=b("SendEventType.bs")).sendAttempt;f.sendAttempt=c;d=a.sendAcknowledgement;f.sendAcknowledgement=d;e=a.appdataAttempt;f.appdataAttempt=e;b=a.appdataAcknowledgement;f.appdataAcknowledgement=b}),null);
__d("WAShiftTimer",[],(function(a,b,c,d,e,f){a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){g(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){g(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){g(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){g(a);g(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function g(a){if(!(a>=0))throw new Error("ShiftTimer must be given delay >= 0")}f.ShiftTimer=a}),66);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){var h=20,i=1e3;a=function(){function a(a,b){var c=this;this.$1=null;this.$4=h;this.$5=Date.now();this.$6=new(d("WAShiftTimer").ShiftTimer)(function(){var a=c.$1;if(a==null)return;c.$1=null;c.$2(a)});this.$2=b;this.$3=a}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$6.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$5,0)/i;b=Math.min(b+c,h);this.$4=b;this.$5=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$6.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$6.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return b("Promise").resolve(a.apply(c,e))}catch(a){return b("Promise").reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["Promise","WAPromiseCallSync"],(function(a,b,c,d,e,f,g){function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function c(a,c){var d=new Map();return function(e){var f=a(e),g=d.get(f);if(g)return g;try{g=b("Promise").resolve(c(e))}catch(a){g=b("Promise").reject(a)}e=g["finally"](function(){return void d["delete"](f)});d.set(f,e);return e}}var h=new Set();function e(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=c;g.preventGarbageCollection=e}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WALogger","WAPromiseManagement"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected non-result to call"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]);q=function(){return a};return a}var r=function(){function a(a,b,c){var e=this;this.port=null;this.$2=1;this.openRequests=new Map();this.$1=a;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){e.$3(a)});c.forEach(function(b){a.setNamespaceHandler(b,e.$4(b))})}var c=a.prototype;c.setPort=function(a){var b=this;d("WALogger").LOG(q());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(p()).devConsole(c.data);return}c=c.data;if(!c)return;c.forEach(function(c){return b.$5(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").LOG(o(),a.name);b.sendStream.addEvent({type:"request",content:a})})};c.getBridge=function(){return this.$1};c.$4=function(a){var b=this;return function(c,d,e,f){b.$6(a,c,d,e,f)}};c.$6=function(a,b,c,d,e){var f=this.$2++;a={requestId:f,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e};this.openRequests.set(f,{request:a,resolver:d});this.sendStream.addEvent({type:"request",content:a})};c.$7=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};c.$3=function(a){var b=this.port;if(!b){d("WALogger").LOG(n(),a.length);return}b.postMessage(a)};c.$5=function(a,c){var e=this;if(c.type==="request"){var f=c.content,g=f.namespace,h=f.name,n=f.requestId,o=f.arg,p=f.expectsResponse,q=f.silentLog;q||d("WALogger").LOG(m(),n,h);f=this.$1;if(p){p=f.sendAndReceive(g,h,o,q).then(function(b){e.$7(a,{requestId:n,type:"success",result:b,silentLog:q})},function(b){e.$7(a,{requestId:n,type:"error",result:String(b),silentLog:q})});d("WAPromiseManagement").preventGarbageCollection(p)}else f.fireAndForget(g,h,o,q),a.postMessage([{type:"result",content:{requestId:n,type:"handled",silentLog:q}}])}else{c.type;p=c.content;f=p.requestId;g=p.type;h=p.result;o=p.silentLog;o||d("WALogger").LOG(l(),f,g);c=this.openRequests.get(f);if(!c){d("WALogger").WARN(k(),f);return}switch(g){case"success":case"error":this.openRequests["delete"](f);p=c.resolver;p?p(g==="success"?h:b("Promise").reject(new Error(h))):d("WALogger").ERROR(j());break;case"handled":c.resolver?d("WALogger").ERROR(i()):this.openRequests["delete"](f);break}}};return a}();function a(a,b,c){a=new r(a,c,b);return a}function c(a){var b;(b=a.port)==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,i=b.silentLog;d("WALogger").LOG(h(),b.requestId);a?a(c.sendAndReceive(e,f,g,i)):c.fireAndForget(e,f,g,i)})}g.CrossWorkerPortal=r;g.attachPortal=a;g.killPortalAndSendPendingToBridge=c}),98);
__d("MAWCommonSetupBridge",["CurrentUser","ErrorTransport","I64","LSDatabaseDeferred.re","LSMessagingThreadAttributionType.re","MAWBridge","MAWChatJid.re","MAWCurrentUser","MAWDBUsageMetrics","MAWDbMedia","MAWEBSwitch","MAWGating.re","MAWJobActions","MAWMediaUtils","MWLogSend.re","MessagingBackend.re","MessagingLoggingUtilsAttachmentTypeInt.re","MessagingThreadType.re","ODS","Promise","QPLEvent","QPLUserFlow","ReStore.re","SendEventType.re","WACrossWorkerPortal","WADualSendMsgUtils","WAJids","err","gkx","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),i=c("gkx")("6746"),j=c("gkx")("5444"),k=new Set();k.add(25312111);k.add(25299391);k.add(25311870);var l=new Map(),m=new Map();m.set(d("MAWDbMedia").MEDIA_TYPE.IMAGE,c("MessagingLoggingUtilsAttachmentTypeInt.re").image);m.set(d("MAWDbMedia").MEDIA_TYPE.VIDEO,c("MessagingLoggingUtilsAttachmentTypeInt.re").video);m.set(d("MAWDbMedia").MEDIA_TYPE.GIF,c("MessagingLoggingUtilsAttachmentTypeInt.re").gif);m.set(d("MAWDbMedia").MEDIA_TYPE.STICKER,c("MessagingLoggingUtilsAttachmentTypeInt.re").sticker);m.set(d("MAWDbMedia").MEDIA_TYPE.PTT,c("MessagingLoggingUtilsAttachmentTypeInt.re").audio);function n(a,b){return a+"_"+b}var o={fbErrorProxy:function(a){d("ErrorTransport").log(a)},log:function(a){var b=a.logLevel,c=a.logString;switch(b){case"log":h.onReadyImmediately(function(a){a=a.info;return a(c)});return;case"warn":h.onReadyImmediately(function(a){a=a.warn;return a(c)});return;case"logRestricted":h.onReadyImmediately(function(a){a=a.logRestricted;return a(c)});return;case"debug":break;case"error":break;default:break}},logError:function(a){var b=a.entriesToReport,c=a.framesToPop,d=a.logString,e=a.message,f=a.stack;h.onReadyImmediately(function(a){a=a.logError;return a(d,e,f,c,b)})},odsBumpEntityKey:function(a){var b=a.amount,e=a.entity;a=a.key;d("ODS").bumpEntityKey(3185,e,a+"."+(c("CurrentUser").getAppID()||"unknown"),b)},onJobFinished:function(a){a.type==="createGroup"&&a.originalArgs.key!=null&&d("MAWJobActions").recentFinishedJobsCache.set(a.originalArgs.key,a.result);switch(a.type){case"sendMsg":case"sendMediaMsg":case"sendReactionMsg":case"sendXMAShareMsg":var b=a.originalArgs.chatJid,e=a.type==="sendXMAShareMsg"?a.originalArgs.xmaMsgExternalId:a.originalArgs.externalId;l.set(n(b,e),a.originalArgs)}if(a.type==="sendWrittenMsg"){b=a.originalArgs.protocolMsgId;e=b.chat;var f=b.externalId;b=n(e,f);e=l.get(b);l["delete"](b);if(a.result.type==="success"&&e!=null){var g=e.args,h=e.chatJid;b=e.file;a=g.reactToAuthor!=null;var i;a&&(i=g.reaction!=null?c("MessagingLoggingUtilsAttachmentTypeInt.re").reaction:c("MessagingLoggingUtilsAttachmentTypeInt.re").unsendReaction);e=g.specialTextSize!=null;b=b!=null?d("MAWMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(b.type).mediaType:null;var j=(b=m.get(b))!=null?b:e?c("MessagingLoggingUtilsAttachmentTypeInt.re").like:a?i:c("MessagingLoggingUtilsAttachmentTypeInt.re").text,k=d("WAJids").switchOnMsgrChatJidType(h,{group:function(){return d("MessagingThreadType.re").secureMessageOverWaGroup},user:function(){return d("MessagingThreadType.re").secureMessageOverWaOneToOne}});c("promiseDone")(d("LSDatabaseDeferred.re").db.then(function(a){var b=d("ReStore.re").toGenericStorage(a);c("promiseDone")(c("MAWChatJid.re").toThreadKey(b,h).then(function(a){d("MWLogSend.re").log(b,a,k,f,[],d("I64").of_string(d("MAWCurrentUser").getID()),d("LSMessagingThreadAttributionType.re").unknown,j,g.quote!=null,d("SendEventType.re").sendAcknowledgement,d("MessagingBackend.re").whatsappInfra,d("I64").to_string(a),g==null?void 0:(a=g.ephemeralSetting)==null?void 0:a.ephemeralExpirationInSec,d("WADualSendMsgUtils").isDualSendJid(h)?["dst:8"]:void 0,void 0)}))}))}}},qplEvent:function(a){var b=a.action,e=a.annotations,f=a.event,g=a.instanceKey;a=a.timestamp;if(!c("CurrentUser").isEmployee()&&k.has(d("QPLEvent").getMarkerId(f)))return;g=g||0;switch(b.type){case"start":c("QPLUserFlow").start(f,{annotations:babelHelpers["extends"]({},e||{},{bool:babelHelpers["extends"]({},(e==null?void 0:e.bool)||{},{isDev:0,isEBEnabled:c("MAWEBSwitch").isEnabled(),isOccamadillo:d("MAWGating.re").isOccamadillo(),isTlcPublicUser:d("MAWGating.re").isTlcPublicUser()})}),instanceKey:g,timestamp:a});break;case"success":if(j){var h,l=d("MAWDBUsageMetrics").getMAWDBUsageMetrics();h=(h=l==null?void 0:(h=l.usageDetails)==null?void 0:h.indexedDB)!=null?h:l==null?void 0:l.usage;h!=null&&c("QPLUserFlow").addAnnotations(f,{"int":{indexedDbSizeInBytes:h}},{instanceKey:g})}c("QPLUserFlow").addAnnotations(f,{bool:{isRelaxedDurability:i}},{instanceKey:g});c("QPLUserFlow").endSuccess(f,{annotations:e,instanceKey:g,timestamp:a});break;case"point":c("QPLUserFlow").addPoint(f,b.name,{data:e,instanceKey:g,timestamp:a});break;case"failure":c("QPLUserFlow").addAnnotations(f,{bool:{isRelaxedDurability:i}},{instanceKey:g});c("QPLUserFlow").endFailure(f,b.name,{annotations:e,instanceKey:g,timestamp:a});break;default:throw c("err")("Bridge sends unreachable qplEvent action type")}}};a=function(a){var c=a.customizeEventHandlers;a=a.worker;var e=d("MAWBridge").getBridge();e.setHandlers("event",babelHelpers["extends"]({},o,c));c=d("WACrossWorkerPortal").attachPortal(e,["backend"],function(a,b){a.push(b);return a});c.setPort(a);return b("Promise").resolve(e)};g.commonBridgeEventHandlers=o;g.initBridge=a}),98);
__d("MAWSetupBridge",["LSDatabaseDeferred.re","LSInitSyncCompleteSubscription.re","MAWBridgeUIEventHandler.re","MAWBridgeUIEventsWrapper","MAWCommonSetupBridge","MAWCryptoAuthToken","cr:1265","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["presenceUpdated updated for ",": type: ",", last: ",""]);h=function(){return a};return a}var i=c("requireDeferred")("ArmadilloCutoverClientFalcoEvent").__setRef("MAWSetupBridge"),j=c("requireDeferred")("MAWSetupBridgeOfflineSnapshot").__setRef("MAWSetupBridge"),k=c("requireDeferred")("WALogger").__setRef("MAWSetupBridge"),l=d("LSDatabaseDeferred.re").db.then(d("LSInitSyncCompleteSubscription.re").use).then(function(){return d("LSDatabaseDeferred.re").db}),m=function(a){i.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})};function a(a){var c=a.dispatch,e=a.environment,f=a.logout;a=a.worker;return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{logCutoverEvent:m,logout:f,offlineSnapshot:function(){var a=arguments;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(j.load());case 2:c.t0=void 0;c.t1=a;return c.abrupt("return",c.sent.apply(c.t0,c.t1));case 5:case"end":return c.stop()}},null,this)},receivePresence:function(a){var b=a.jid,c=a.last,d=a.type;k.loadImmediately(function(a){a.DEV(h(),b,d,c)});return},rotateCryptoAuthToken:function(){return d("MAWCryptoAuthToken").fetchAndSaveCAT(e)},uiUpdate:function(a){a=a.events;c&&a.forEach(function(a){return c(a)});b("cr:1265")==null?void 0:b("cr:1265").recordBridgeUIEvent(a);d("MAWBridgeUIEventHandler.re").handleEvents(l,a.map(d("MAWBridgeUIEventsWrapper").UIEventToRE))}},worker:a})}g.setupBridge=a}),98);
__d("WADevToolMessageChannel",[],(function(a,b,c,d,e,f){a=new MessageChannel();b=a.port1;c=a.port2;f.devToolMessageChannelPort1=b;f.devToolMessageChannelPort2=c}),66);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=c("performanceAbsoluteNow")());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:c("performanceAbsoluteNow")()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=c("performanceAbsoluteNow")());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){h.setMessagePort(a)}function b(a){h.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),d("WorkerQPLChannel").setMessagePort(a),e(["QuickPerformanceLogger"],function(a){return d("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("MAWCommonSetupWorker",["Promise","WADevToolMessageChannel","WALogger","WorkerClient","WorkerMessagePort","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker receive invalid message: ",""]);h=function(){return a};return a}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.onmessage=null;e.$BridgeAdapter1=b;d("WorkerClient").init(babelHelpers.assertThisInitialized(e));e.onUnhandledMessage.add(function(a){e.onmessage&&e.onmessage({data:a})});return e}var c=b.prototype;c.getBridgePort=function(){return this};return b}(d("WorkerMessagePort").WorkerSyncedMessagePort);function a(a,e,f,g){return new(b("Promise"))(function(b,i){a.addMessageListener("worker-setup",function(e){if(e==null||e.type!=="worker-setup"){d("WALogger").WARN(h(),e);return}if(e.status==="success")b(a.getBridgePort());else if(e.status==="failure"){i(c("err")((e=e.msg)!=null?e:"Encountered an error setting up the armadillo web worker"))}else throw c("err")("received invalid message for worker")}),c("gkx")("5147")?a.postMessage({content:{devToolMessageChannelPort2:d("WADevToolMessageChannel").devToolMessageChannelPort2,fbId:e,latestKeyVersionForEAR:f,vaultMaterials:g},type:"worker-setup"}):a.postMessage({content:{fbId:e,latestKeyVersionForEAR:f,vaultMaterials:g},type:"worker-setup"})})}g.BridgeAdapter=e;g.initWorker=a}),98);
__d("MAWSetupWorker",["MAWCommonSetupWorker","MAWInit","MAWMainWebWorkerResource","Promise","WALogger","WorkerBundleResource","cr:3087","err","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker terminating"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker doesn't exist, no need to terminate"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker setting up"]);j=function(){return a};return a}var k=null,l=n(),m=null;function n(){if(!l){var a=c("shouldUseMAWSharedWorker")();a?l=d("WorkerBundleResource").createSharedWebWorker(c("MAWMainWebWorkerResource")).port:l=d("WorkerBundleResource").createDedicatedWebWorker(c("MAWMainWebWorkerResource"))}return l}function o(a,b,e){d("MAWInit").logPoint("create_worker_start");var f=n();d("MAWInit").logPoint("create_worker_end");if(f===null)throw c("err")("Client is starting bridge without a worker.");d("WALogger").LOG(j());var g=new(d("MAWCommonSetupWorker").BridgeAdapter)(f,"MAWMainWorker");k=g;return d("MAWInit").measurePerformance("maw_init_worker",function(){return d("MAWCommonSetupWorker").initWorker(g,a,b,e)})}function a(a,c,d,e){if(!k){a=o(a,c,d);b("cr:3087")!=null&&(m=b("cr:3087")(e));return a}return b("Promise").resolve(k.getBridgePort())}function e(){return l!=null}function f(){if(!k){d("WALogger").LOG(i());return}d("WALogger").LOG(h());k.close();k=null;l=null;m!=null&&m();m=null;return}g.createWorkerIfNone=n;g.setupWorker=o;g.getOrSetupWorker=a;g.doesWorkerExist=e;g.terminateWorker=f}),98);
__d("MAWSetup.react",["BaseHeadingContext","CometPlaceholder.react","CometRelay","CurrentUser","MAWCommonSetup","MAWSetupBridge","MAWSetupWorker","MAWStateContext.react","cr:1232","cr:2808","cr:2809","cr:3487","cr:5015","cr:590","cr:591","deferredLoadComponent","promiseDone","react","requireDeferredForDisplay","shouldUseMAWSharedWorker","useCometLogout","useReStore","useSecretConversationsLogOut"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useMemo,k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWLoadingStateSpinner.react").__setRef("MAWSetup.react"));window.XPlatTesting=b("cr:2808");window.XPlatTestingGroups=b("cr:2809");var l=c("CurrentUser").getID();function m(a){var e=d("CometRelay").useRelayEnvironment(),f=c("useReStore")(),g=c("useSecretConversationsLogOut")(),i=j(function(){return function(){return c("promiseDone")(g())}},[g]),k=j(function(){return{doesWorkerExist:d("MAWSetupWorker").doesWorkerExist,getOrSetupWorker:d("MAWSetupWorker").getOrSetupWorker,logout:i,setupBridge:d("MAWSetupBridge").setupBridge,terminateWorker:d("MAWSetupWorker").terminateWorker}},[i]);d("MAWCommonSetup").useArmadillo(l,k);b("cr:590")!=null?b("cr:590")==null?void 0:b("cr:590").makeAll(f):b("cr:591")==null?void 0:b("cr:591").useMAWContactSync();b("cr:1232")(f);return h.jsxs(h.Fragment,{children:[a.children,!c("shouldUseMAWSharedWorker")()&&b("cr:5015")?h.jsx(b("cr:5015"),{environment:e,fbId:l,platformSetupUtils:k}):null]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e=i(c("BaseHeadingContext"));return h.jsx(d("useCometLogout").CometLogoutProvider,{children:h.jsx(d("MAWStateContext.react").MAWStateContextProvider,{children:h.jsxs(c("BaseHeadingContext").Provider,{value:e+1,children:[h.jsx(m,babelHelpers["extends"]({},a)),h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(k,{})}),b("cr:3487")&&h.jsx(b("cr:3487"),{})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSetupMutex.react",["cr:2671","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a){var c=a.environment,d=a.fbId;a=a.platformSetupUtils;b("cr:2671").useMutex(c,d,a);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSetupMutexV2",["FBLogger","LSPersistedDbGating","LocalStorageMutex","MAWAppMutex","MAWBridge","MAWGating.re","MAWIndexedDb","MAWKeychainInit","MAWLocalStorage","MAWOccamadilloOnMutexChange","MAWVaultMaterials","MWChatBadgeCountUpdates.re","QPLUserCountEvent","QPLUserFlow","Run","WALogger","cr:1230","cr:863","cr:917","qpl","react","regeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Reinitializing"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Shouldn't reinitialize, worker already exists"]);i=function(){return a};return a}a=d("react");var j=a.useCallback,k=a.useEffect,l=a.useMemo,m=c("FBLogger")("messenger_e2ee_web"),n=!1,o=0;function p(a){if(document.visibilityState!=="visible")return!1;a=a();var b=window.indexedDB!=null,e=d("MAWLocalStorage").isLocalStorageAvailable();if(a){d("WALogger").DEV(i());return!1}if(!b){d("QPLUserCountEvent").fireQplUserCount(c("qpl")._(25299354,"201"));return!1}if(!e){d("QPLUserCountEvent").fireQplUserCount(c("qpl")._(25309925,"203"));return!1}return!0}function q(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(b("cr:917").makeEncryptionDB(a));case 2:return c.abrupt("return",d("MAWKeychainInit").initSetupKeychain());case 3:case"end":return c.stop()}},null,this)}function r(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=null;if(!(b("cr:863")!=null&&d("LSPersistedDbGating").allTablesPersisted)){c.next=7;break}c.next=4;return b("regeneratorRuntime").awrap(b("cr:863").setupVaultForPersistedLSDB());case 4:a=c.sent;c.next=8;break;case 7:a=d("MAWVaultMaterials").initializeVaultMaterials();case 8:return c.abrupt("return",a);case 9:case"end":return c.stop()}},null,this)}e=function(a,e,f){var g=f.doesWorkerExist,i=f.getOrSetupWorker,s=f.logout,t=f.setupBridge,u=f.terminateWorker,v=l(function(){return d("MAWAppMutex").use()},[]),w=c("useReStore")(),x=d("LSPersistedDbGating").allTablesPersisted,y=j(function(a){var b=v.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;x||d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});u();v.onMutexDeath()},[v,u,x]),z=j(function(){u(),v.onMutexDeath()},[v,u]),A=j(function(){var f,j,k,l,u,y;return b("regeneratorRuntime").async(function(z){while(1)switch(z.prev=z.next){case 0:f=p(g);if(!(!f||n)){z.next=3;break}return z.abrupt("return");case 3:n=!0;o++;z.prev=5;d("WALogger").LOG(h());c("QPLUserFlow").start(c("qpl")._(25310984,"169"),{instanceKey:o});c("QPLUserFlow").addAnnotations(c("qpl")._(25310984,"169"),{"int":{version:2}},{instanceKey:o});z.next=11;return b("regeneratorRuntime").awrap(v.init());case 11:j=z.sent;if(j){z.next=15;break}c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"mutex_no_premission_on_reinit",{instanceKey:o});return z.abrupt("return");case 15:z.next=17;return b("regeneratorRuntime").awrap(q(e));case 17:k=z.sent;if(k.success){z.next=21;break}c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"mutex_keychain_setup_failure_on_reinit",{instanceKey:o});return z.abrupt("return");case 21:z.next=23;return b("regeneratorRuntime").awrap(d("MAWIndexedDb").makeDB(e,b("cr:1230").getDbEncryptionKey));case 23:c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"db_init",{instanceKey:o});z.next=26;return b("regeneratorRuntime").awrap(r());case 26:l=z.sent;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"vaulting_setup",{instanceKey:o});c("QPLUserFlow").addAnnotations(c("qpl")._(25310984,"169"),{bool:{will_vault:l!=null}},{instanceKey:o});z.next=31;return b("regeneratorRuntime").awrap(i(e,k.value,l,w));case 31:u=z.sent;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"worker_setup",{instanceKey:o});z.next=35;return b("regeneratorRuntime").awrap(t({environment:a,logout:s,worker:u}));case 35:y=z.sent;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"bridge_setup",{instanceKey:o});if(!(!x&&d("MAWGating.re").isOccamadillo())){z.next=41;break}d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(w);z.next=44;break;case 41:if(x){z.next=44;break}z.next=44;return b("regeneratorRuntime").awrap(y.sendAndReceive("backend","initSync",{numMsgsPerThread:10,numThreads:d("MWChatBadgeCountUpdates.re").minSyncedThreads}));case 44:c("QPLUserFlow").endSuccess(c("qpl")._(25310984,"169"),{instanceKey:o});z.next=52;break;case 47:z.prev=47,z.t0=z["catch"](5),m.mustfix("AppMutex - failed to reinitialize worker"),m.catching(z.t0),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{error:z.t0,instanceKey:o});case 52:z.prev=52;n=!1;return z.finish(52);case 55:case"end":return z.stop()}},null,this,[[5,47,52,55]])},[a,e,v,g,i,t,w,s,x]);k(function(){window.addEventListener("storage",y);var a=d("Run").onBeforeUnload(z,!1),b=d("Run").onUnload(z);window.addEventListener("visibilitychange",A);return function(){window.removeEventListener("storage",y),a.remove(),b.remove(),window.removeEventListener("visibilitychange",A)}},[y,z,A])};g.useMutex=e}),98);
__d("useLegacyUserWatchdogNoop",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("CometToast.react",["fbt","ix","CometCircleButton.react","CometPressable.react","CometRow.react","CometRowItem.react","CometTheme.react","TetraText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useMemo,l={icon:{minWidth:"xnei2rj"},pressable:{display:"x1lliihq"},root:{backgroundColor:"x1jx94hy",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"xdy0x9s",maxWidth:"x193iq5w",minWidth:"xp33xtk"}};function a(a){var b=a.action,e=a.href,f=a.icon,g=a.impressionLoggingRef,m=a.message,n=a.onDismiss,o=a.supressCloseButton;o=o===void 0?!1:o;var p=a.target,q=a.testid;q=a.truncateText;q=q===void 0?!0:q;a=babelHelpers.objectWithoutPropertiesLoose(a,["action","href","icon","impressionLoggingRef","message","onDismiss","supressCloseButton","target","testid","truncateText"]);var r=k(function(){return e!=null?{target:p,url:e}:void 0},[e,p]);g=j.jsxs(c("CometRow.react"),{paddingHorizontal:16,paddingVertical:16,ref:g,spacing:12,testid:void 0,verticalAlign:"center",children:[f!=null?j.jsx(c("CometRowItem.react"),{xstyle:l.icon,children:f}):null,j.jsx(c("CometRowItem.react"),{"aria-atomic":!0,expanding:!0,role:"alert",children:j.jsx(c("TetraText.react"),{color:"primary",numberOfLines:q?4:void 0,type:"body3",children:m})}),b!=null?j.jsx(c("CometRowItem.react"),{children:j.jsx(c("CometPressable.react"),{onPress:function(a){n(),b.onPress(a)},testid:void 0,children:j.jsx(c("TetraText.react"),{color:"blueLink",numberOfLines:1,type:"body3",children:b.label})})}):null,o!==!0&&j.jsx(c("CometRowItem.react"),{children:j.jsx(c("CometCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._("__JHASH__cCrSTii9yXy__JHASH__"),onPress:n,size:24})})]});(a.onPress!=null||r!=null)&&(g=j.jsx(c("CometPressable.react"),babelHelpers["extends"]({},a,{expanding:!0,linkProps:r,xstyle:l.pressable,children:g})));return j.jsx(c("CometTheme.react"),{testid:void 0,theme:"invert",xstyle:l.root,children:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedUnitLoadingIndicatorMask.react",["CometProgressIndicator.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsx("div",{className:"x1vjfegm x13vifvy x17qophe x10l6tqk xl56j7k xdt5ytf xds687c x78zum5 x1ey2m1c x1h0vfkc x6s0dn4",children:h.jsx(c("CometProgressIndicator.react"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("EventListenerImplForCacheStorage",["cr:1351741"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1351741")}),98);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;f["default"]=b}),66);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();a.DEFAULT_BYTE_BUFFER_SIZE=16;f["default"]=a}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(c("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)b.writeByte(d);else if(d<2048)b.writeByte(d>>6|192),b.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);b.writeByte(d>>18|240);b.writeByte(d>>12&63|128);b.writeByte(d>>6&63|128);b.writeByte(d&63|128)}else b.writeByte(d>>12|224),b.writeByte(d>>6&63|128),b.writeByte(d&63|128)}return b.toByteArray()};g.StringToUtf8=a}),98);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),66);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b;return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map:void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(var l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(var c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(var j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(var f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(var l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(var n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(var f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(a,b,c,d,e,f,g){var h=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),i=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:h.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:h.CT_BOOLEAN_FALSE}),j=[h.CT_STOP,0,h.CT_BOOLEAN_TRUE,h.CT_BYTE,h.CT_DOUBLE,0,h.CT_I16,0,h.CT_I32,0,h.CT_I64,h.CT_BINARY,h.CT_STRUCT,h.CT_MAP,h.CT_SET,h.CT_LIST,0,0,0,h.CT_FLOAT],k=Math.pow(2,7)-1,l=-1*Math.pow(2,7),m=Math.pow(2,15)-1,n=-1*Math.pow(2,15),o=Math.pow(2,31)-1,p=-1*Math.pow(2,31),q=Math.pow(2,32)-1,r=c("jsbi").BigInt("9223372036854775807"),s=c("jsbi").BigInt("-9223372036854775808"),t=c("jsbi").BigInt("18446744073709551615"),u=c("jsbi").BigInt(63),v=c("jsbi").BigInt(1),w=c("jsbi").BigInt(0),x=c("jsbi").BigInt(7),y=c("jsbi").BigInt(70),z=c("jsbi").BigInt(127),A=c("jsbi").BigInt(128),B=Math.pow(2,4);a=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===c("ThriftTypes").BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,i.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===i.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=B-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=B-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===c("ThriftTypes").STOP)return{ftype:c("ThriftTypes").STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===h.CT_BOOLEAN_TRUE||b===h.CT_BOOLEAN_FALSE)&&(this.$5=b===h.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<l||a>k)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case c("ThriftTypes").STOP:return;case c("ThriftTypes").BOOL:this.readBool();break;case c("ThriftTypes").BYTE:this.readByte();break;case c("ThriftTypes").DOUBLE:this.readDouble();break;case c("ThriftTypes").I16:this.readI16();break;case c("ThriftTypes").I32:this.readI32();break;case c("ThriftTypes").I64:this.readI64();break;case c("ThriftTypes").STRING:this.readString();break;case c("ThriftTypes").STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===c("ThriftTypes").STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case c("ThriftTypes").MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case c("ThriftTypes").SET:case c("ThriftTypes").LIST:f=this.$11();for(var d=0;d<f.size;d++)this.skip(f.etype);break;case c("ThriftTypes").FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte(c("ThriftTypes").STOP)};b.writeI16=function(a){if(a<n||a>m)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<n||a>m)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<p||a>o)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===h.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?h.CT_BOOLEAN_TRUE:h.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<p||a>o)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>q)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(c("jsbi").greaterThan(a,r)||c("jsbi").lessThan(a,s))throw new Error("i64 out of range: "+a.toString());return c("jsbi").bitwiseXor(c("jsbi").signedRightShift(a,u),c("jsbi").leftShift(a,v))};b.zigzagToI64=function(a){if(c("jsbi").lessThan(a,0)||c("jsbi").greaterThan(a,t))throw new Error("invalid uint64: "+a.toString());return c("jsbi").equal(c("jsbi").bitwiseAnd(a,v),v)?c("jsbi").bitwiseNot(c("jsbi").signedRightShift(a,v)):c("jsbi").signedRightShift(a,v)};b.writeVarint32=function(a){if(a<0||a>q)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(c("jsbi").lessThan(a,w)||c("jsbi").greaterThan(a,t))throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(c("jsbi").equal(c("jsbi").signedRightShift(a,x),w)){this.$1.writeByte(c("jsbi").toNumber(a));b++;break}else{var d=c("jsbi").toNumber(c("jsbi").bitwiseOr(c("jsbi").bitwiseAnd(a,z),A));this.$1.writeByte(d);b++;a=c("jsbi").signedRightShift(a,x)}return b};b.readVarint64=function(){var a=w,b=w,d;while(!0){d=c("jsbi").BigInt(this.$1.readByte());a=c("jsbi").bitwiseOr(a,c("jsbi").leftShift(c("jsbi").bitwiseAnd(d,z),b));b=c("jsbi").add(b,x);if(c("jsbi").equal(c("jsbi").bitwiseAnd(d,A),w)){if(c("jsbi").equal(b,y)&&c("jsbi").notEqual(d,v))throw new Error("result exceeded 64 bit limit");break}if(c("jsbi").greaterThan(b,u))throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return j[a]};b.$10=function(a){switch(a){case h.CT_STOP:return c("ThriftTypes").STOP;case h.CT_BOOLEAN_FALSE:case h.CT_BOOLEAN_TRUE:return c("ThriftTypes").BOOL;case h.CT_BYTE:return c("ThriftTypes").BYTE;case h.CT_I16:return c("ThriftTypes").I16;case h.CT_I32:return c("ThriftTypes").I32;case h.CT_I64:return c("ThriftTypes").I64;case h.CT_DOUBLE:return c("ThriftTypes").DOUBLE;case h.CT_FLOAT:return c("ThriftTypes").FLOAT;case h.CT_BINARY:return c("ThriftTypes").STRING;case h.CT_LIST:return c("ThriftTypes").LIST;case h.CT_SET:return c("ThriftTypes").SET;case h.CT_MAP:return c("ThriftTypes").MAP;case h.CT_STRUCT:return c("ThriftTypes").STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=a}),98);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocolPolyfill"))(a);return b(a)}function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocolPolyfill"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocolPolyfill"))(e);b(a,d);return d.toByteArray()}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}g.deserialize=h;g.deserializeNoThrow=a;g.serialize=i;g.serializeNoThrow=b}),98);
__d("CacheStorage",["ErrorGuard","EventListenerImplForCacheStorage","ExecutionEnvironment","FBJSON","WebStorage","emptyFunction","err","killswitch"],(function(a,b,c,d,e,f,g){var h="_@_",i="3b",j="CacheStorageVersion",k={length:0,getItem:c("emptyFunction"),setItem:c("emptyFunction"),clear:c("emptyFunction"),removeItem:c("emptyFunction"),key:c("emptyFunction")};a=function(){function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=c("WebStorage").getLocalStorage())!=null?b:k)||this}b.available=function(){return!!c("WebStorage").getLocalStorage()};return b}(a);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=c("WebStorage").getSessionStorage())!=null?b:k)||this}b.available=function(){return!!c("WebStorage").getSessionStorage()};return b}(a);var l=function(){function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),m={memory:l,localstorage:b,sessionstorage:e};g=function(){function a(a,b){this._changeCallbacks=[];this._key_prefix="_cs_";this._exception=null;b&&(this._key_prefix=b);a==="AUTO"||!a?b="memory":b=a;b&&(!m[b]||!m[b].available()?(c("ExecutionEnvironment").canUseDOM,this._backend=new l()):this._backend=new m[b]());a=this.useBrowserStorage();a&&c("EventListenerImplForCacheStorage").listen(window,"storage",this._onBrowserValueChanged.bind(this));b=a?this._backend.getStore().getItem(j):this._backend.getStore()[j];b!==i&&(c("killswitch")("CACHE_STORAGE_MODULE_CLEAR_OWN_KEYS")?this.clear():this.clearOwnKeys())}var b=a.prototype;b.useBrowserStorage=function(){return this._backend.getStore()===c("WebStorage").getLocalStorage()||this._backend.getStore()===c("WebStorage").getSessionStorage()};b.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};b._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};b.keys=function(){var a=this,b=[];c("ErrorGuard").guard(function(){if(a._backend){var c=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<c.length;e++)c[e].substr(0,d)==a._key_prefix&&b.push(c[e].substr(d))}},{name:"CacheStorage"})();return b};b.set=function(b,e,f){if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exception=c("err")("writes disabled");return!1}var g;typeof e==="string"?g=h+e:!f?(g={__t:Date.now(),__v:e},g=d("FBJSON").stringify(g)):g=d("FBJSON").stringify(e);f=this._backend;e=this._key_prefix+b;b=!0;var i=null;while(b)try{i=null,f.set(e,g),b=!1}catch(a){i=a;var j=f.keys().length;this._evictCacheEntries();b=f.keys().length<j}if(i!==null){this._exception=i;return!1}else{this._exception=null;return!0}}this._exception=c("err")("no back end");return!1};b.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null};b.getLastSetException=function(){return this._exception};b.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};b._evictCacheEntries=function(){var b=[],c=this._backend;c.keys().forEach(function(e){if(e===j)return;var g=c.get(e);if(g===void 0){c.remove(e);return}if(a._hasMagicPrefix(g))return;try{g=d("FBJSON").parse(g,f.id)}catch(a){c.remove(e);return}g&&g.__t!==void 0&&g.__v!==void 0&&b.push([e,g.__t])});b.sort(function(a,b){return a[1]-b[1]});for(var e=0;e<Math.ceil(b.length/2);e++)c.remove(b[e][0])};b.get=function(b,e){var g;if(this._backend){c("ErrorGuard").applyWithGuard(function(){g=this._backend.get(this._key_prefix+b)},this,[],{onError:function(){g=null},name:"CacheStorage:get"});if(g!=null)if(a._hasMagicPrefix(g))g=g.substr(h.length);else try{g=d("FBJSON").parse(g,f.id),g&&g.__t!==void 0&&g.__v!==void 0&&(g=g.__v)}catch(a){g=void 0}else g=void 0}g===void 0&&e!==void 0&&(g=e,this.set(b,g));return g};b.remove=function(a){this._backend&&c("ErrorGuard").applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};b._setVersion=function(){var a=this;c("ErrorGuard").applyWithGuard(function(){a.useBrowserStorage()?a._backend.getStore().setItem(j,i):a._backend.getStore()[j]=i},this,[],{name:"CacheStorage:setVersion"})};b.clear=function(){this._backend&&(c("ErrorGuard").applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};b.clearOwnKeys=function(){this._backend&&(c("ErrorGuard").applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(m)};a._hasMagicPrefix=function(a){return a.substr(0,h.length)===h};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();g._persistentWritesDisabled=!1;f.exports=g}),34);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","FBJSON"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$CrossWindowEventEmitter2=b;e.$CrossWindowEventEmitter1=new(c("CacheStorage"))("localstorage",b+":");e.$CrossWindowEventEmitter1.addValueChangeCallback(function(b,c,f){c=b.split(":")[1];try{b=d("FBJSON").parse(f)}catch(a){b=void 0}if(b&&b.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(e),c].concat(b.__v))}});return e}var e=b.prototype;e.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};e.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter1.set(a,c)};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744057");c=b("FalcoLoggerInternal").create("mqtt_unified_client_connect",a);e.exports=c}),null);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744058");c=b("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",a);e.exports=c}),null);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744059");c=b("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",a);e.exports=c}),null);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744060");c=b("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",a);e.exports=c}),null);
__d("CometFeedStoriesStrategyErrorsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometFeedStoriesStrategyErrorsLoggerConfig")}),null);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(var c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("MqttEnv",["killswitch"],(function(a,b,c,d,e,f,g){"use strict";b=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15});d=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.setIsUserLoggedInNow=function(a){this.$2=a};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}window.clearTimeout(a)};a.setTimeout=function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return this.$4!=null?this.$4.apply(null,arguments):window.setTimeout.apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():h.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.killswitch=function(a){return this.$7!=null?this.$7(a):c("killswitch")(a)};a.createSocket=function(a,b){return this.$8!=null?this.$8(a,b):new WebSocket(a)};a.scheduleCallback=function(a){return this.$9!=null?this.$9(a):a()};a.scheduleLoggingCallback=function(a){return this.$10!=null?this.$10(a):a()};a.configRead=function(a,b){return this.$11!=null?this.$11(a,b):b};a.configWrite=function(a,b){this.$12!=null&&this.$12(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null,this.$12=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k,l){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=l,this.$8=g,this.$9=h,this.$10=i,this.$11=j,this.$12=k};return b}();var h=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};b.getBrowserConnectivity=function(){return!0};return a}(),i=new d();function a(a){i.setIsUserLoggedInNow(a)}g.MqttGkNames=b;g.Env=i;g.setIsUserLoggedInNow=a}),98);
__d("IrisSubscribeChecker",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=d("MqttEnv").Env.getLoggerInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;if(typeof window!=="undefined"){a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1)}}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=d("MqttEnv").Env.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onConnectionDisconnect=function(){};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(d("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();f.exports=a}),34);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onConnectionDisconnect=function(){this.$1.forEach(function(a){a.onConnectionDisconnect()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={totalConnectionStreams:0};this.broadcastChannel=new(c("CrossWindowEventEmitter"))("MqttGlobalStreamCounter");this.broadcastChannel.addListener("count-updated",function(b){b=JSON.parse(String(b));var c=!1;a.otherTabs.has(b.key)||(c=!0);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$1())});this.tabID=c("uuid")()}var b=a.prototype;b.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()};b.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.getGlobalState=function(){var a={totalConnectionStreams:this.thisTab.totalConnectionStreams};this.otherTabs.forEach(function(b){a.totalConnectionStreams+=b.totalConnectionStreams});return a};b.$1=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.isEnabled=function(){return!0};return a}();var h=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}};b=function(){return h};g.getInstance=b}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=d("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),d("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()};b.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onConnectionDisconnect=function(){this.$2.streamClosed()};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onPollShutdownAbort=function(){this.$2.streamClosed()};b.onTabClose=function(){this.$2.tabClosed()};return a}();g["default"]=a}),98);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function b(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{value:c,offset:b}}function c(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function e(a,b){return 256*a[b]+a[b+1]}function f(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function i(a,b,c,d){d=h(b,c,d);j(a,c,d);return d+b}function j(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function k(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}var l=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$5=c,this.$6=d,this.$4=!1}var b=a.prototype;b.$7=function(){var a=this;this.$4?(this.$4=!1,this.$5(),this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},this.$2()*1e3)):this.$6()};b.reset=function(){var a=this;this.$4=!0;this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var b=this.$1()*1e3;b>0&&(this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},b))};b.cancel=function(){this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)};return a}();g.UTF8Length=f;g.convertStringToUTF8=j;g.concatBuffers=a;g.decodeMultiByteInt=b;g.convertUTF8ToString=k;g.encodeMultiByteInt=c;g.writeUInt16BE=h;g.readUInt16BE=e;g.writeString=i;g.Pinger=l}),98);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";var h={endpointWithSessionId:function(a,b){return h.endpointWithExtraParameter(a,"sid",b.toString())},endpointWithExtraParameters:function(a,b){var c=a;b.forEach(function(a,b,d){c=h.endpointWithExtraParameter(c,b,a)});return c},endpointWithExtraParameter:function(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c},generateSessionId:function(){return Math.floor(d("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)},promiseDone:function(a,b,c){var e=arguments.length>1?a.then(b,c):a;e.then(null,function(a){d("MqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})},promiseDoneWithTimeout:function(a,b,c,e){var f=!1;d("MqttEnv").Env.setTimeout(function(){f||(f=!0,c(new Error("promise timeout")))},e);h.promiseDone(a,function(a){f||(f=!0,b(a))},function(a){f||(f=!0,c(a))})},sprintf:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})},hasWSSupport:function(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype},getWSAvailability:function(){var b="";if("WebSocket"in a&&a.WebSocket!==null)b+="W";else return"none";"CLOSING"in a.WebSocket.prototype&&(b+="C");return b}};f.exports=h}),34);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(a,b,c,d,e,f,g){var h=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),i=[0,6,77,81,73,115,100,112,3];function j(a,b){b=b;var e=b,f=a[b],g=f>>4;b+=1;var i=d("MqttProtocolUtils").decodeMultiByteInt(a,b);if(i==null)return{wireMessage:null,position:e};b=i.offset;i=b+i.value;if(i>a.length)return{wireMessage:null,position:e};var j;switch(g){case h.CONNACK:e=a[b++];e=!!(e&1);var o=a[b++];j=new m(e,o);break;case h.PUBLISH:e=f&15;o=e>>1&3;f=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;var r=d("MqttProtocolUtils").convertUTF8ToString(a,b,f);b+=f;f=null;o===1&&(f=d("MqttProtocolUtils").readUInt16BE(a,b),b+=2);var s=p.createWithBytes(a.subarray(b,i)),t=(e&1)===1;e=(e&8)===8;j=new q(r,s,o,f,t,e);break;case h.PINGREQ:j=new k("PINGREQ");break;case h.PINGRESP:j=new k("PINGRESP");break;case h.PUBACK:case h.UNSUBACK:r=d("MqttProtocolUtils").readUInt16BE(a,b);j=new n(g===h.PUBACK?"PUBACK":"UNSUBACK",r);break;case h.SUBACK:s=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;o=a.subarray(b,i);j=new l(s,o);break;default:throw c("err")(d("MqttUtils").sprintf("Invalid MQTT message type %s.",g))}return{wireMessage:j,position:i}}function a(a){var b=[],c=0;while(c<a.length){var d=j(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}b=function(){function a(a){this.messageType=h[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(b);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(d("MqttProtocolUtils").encodeMultiByteInt(0),1);return b};return b}(b);var l=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(b),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(b),n=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=d("MqttProtocolUtils").encodeMultiByteInt(b),e=c.length+1;b=new ArrayBuffer(b+e);var f=new Uint8Array(b);f[0]=a;f.set(c,1);e=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,e);return b};return a}(b);f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=i.length+3;b+=d("MqttProtocolUtils").UTF8Length(this.clientId)+2;b+=d("MqttProtocolUtils").UTF8Length(this.connectOptions.userName)+2;var c=d("MqttProtocolUtils").encodeMultiByteInt(b);b=new ArrayBuffer(1+c.length+b);var e=new Uint8Array(b);e[0]=a;a=1;e.set(c,1);a+=c.length;e.set(i,a);a+=i.length;c=2|128;e[a++]=c;a=d("MqttProtocolUtils").writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),e,a);a=d("MqttProtocolUtils").writeString(this.clientId,d("MqttProtocolUtils").UTF8Length(this.clientId),e,a);a=d("MqttProtocolUtils").writeString(this.connectOptions.userName,d("MqttProtocolUtils").UTF8Length(this.connectOptions.userName),e,a);return b};return b}(b);var o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;g=b.call(this,a)||this;g.topic=c;if(e<0&&e>1||e===1&&f==null)throw new TypeError(d("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",e,a));g.qos=e;g.messageIdentifier=f;return g}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=2+b+2;this.messageType===h.SUBSCRIBE&&(c+=1);var e=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;a=1;f.set(e,1);a+=e.length;this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,a));a=d("MqttProtocolUtils").writeString(this.topic,b,f,a);this.messageType===h.SUBSCRIBE&&this.qos!=null&&(f[a++]=this.qos);return c};return a}(b),p=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(d("MqttProtocolUtils").UTF8Length(b)));d("MqttProtocolUtils").convertStringToUTF8(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=d("MqttProtocolUtils").convertUTF8ToString(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=b+2,e=this.qos===0?0:2;c+=e;e=this.payloadMessage.bytes();c+=e.byteLength;var f=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+f.length+c);var g=new Uint8Array(c);g[0]=a;g.set(f,1);a=1+f.length;a=d("MqttProtocolUtils").writeString(this.topic,b,g,a);this.qos!==0&&this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,g,a));g.set(e,a);return c};return a}(b),r=p.createWithString;b={Base:b,PubAckUnsubAck:n,Ping:k,ConnAck:m,Connect:f,Disconnect:e,Subscription:o,Publish:q};g.MESSAGE_TYPE=h;g.decodeMessage=j;g.decodeByteMessages=a;g.Message=p;g.createMessageWithString=r;g.WireMessage=b}),98);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){this.errorCode=a,this.errorName=b,this.errorMessage=c};b=Object.freeze({SOCKET_ERROR:new a(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new a(2,"SOCKET_MESSAGE","Unable to parse invalid socket message"),INVALID_DATA_TYPE:new a(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new a(4,"CONNECT_TIMEOUT","Connect timed out"),CONNACK_FAILURE:new a(5,"CONNACK_FAILURE","Connection failure due to connack"),PING_TIMEOUT:new a(6,"PING_TIMEOUT","Ping timeout"),APP_DISCONNECT:new a(7,"APP_DISCONNECT","Disconnect initiated by app"),SERVER_DISCONNECT:new a(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"SOCKET_CLOSE","Socket connection closed"),RECONNECT:new a(10,"RECONNECT","Reconnecting"),BROWSER_CLOSE:new a(11,"BROWSER_CLOSE","Browser closed")});c=function(a,b){this.mqttError=a,this.connAck=b};d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.MqttError=a;f.MqttErrors=b;f.ConnectFailure=c;f.MqttChannelError=d}),66);
__d("MqttProtocolClient",["MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=30,i=6e4;a=function(){function a(a){var b=this;this.$12=function(a,c,e){c===void 0&&(c=null);b.$9.bumpCounter("protocol.debug.disconnect.internal."+a.errorName);b.$9.bumpCounter("protocol.debug.disconnect.internal");var f=b.$5,g=b.$2,h=g.onConnectionLost,i=g.onConnectFailure;b.setConnected(!1);b.$14();f?d("MqttEnv").Env.scheduleCallback(function(){h(a,c)}):d("MqttEnv").Env.scheduleCallback(function(){i(b.$11,new(d("MqttTypes").ConnectFailure)(a,e!=null?e:-1),c)})};this.$13=function(a){var c=b.$6;if(c==null){b.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>");return 0}if(c.readyState!==c.OPEN){b.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>");return 0}a=a.encode();var d=a.byteLength;c.send(a);return d};this.$3=a;this.$2={userName:"",mqttVersion:3,getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,onConnectSuccess:function(a){},onConnectFailure:function(a,b,c){},onConnection:function(){},onConnectionLost:function(a,b){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a,b){}};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=d("MqttEnv").Env.getLoggerInstance();this.$11=0}var b=a.prototype;b.connect=function(a){var b,e=this;if(this.$5)throw c("err")("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);b=(b=c("qex")._("660"))!=null?b:h;this.$7=d("MqttEnv").Env.setTimeout(function(){e.$9.bumpCounter("protocol.error.connect.timeout"),e.$12(d("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},b*1e3);this.$6=d("MqttEnv").Env.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){e.setConnected(!0),e.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),e.$11=e.$13(new(d("MqttProtocolCodec").WireMessage.Connect)(e.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){e.$9.bumpCounter("protocol.error.onmessage.type");e.$12(d("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);e.$10!=null&&(a=d("MqttProtocolUtils").concatBuffers(e.$10,a),e.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete e.$10,e.$10=null);a=d("MqttProtocolCodec").decodeByteMessages(a);var b=a.messages;e.$10=a.remaining;for(var a=0;a<b.length;a++)e.handleMessage(b[a])}catch(a){e.$10=null,e.$9.logError(a,d("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),e.$9.bumpCounter("protocol.error.onmessage.parse"),e.$12(d("MqttTypes").MqttErrors.SOCKET_MESSAGE,a.message)}};this.$6.onerror=function(a){e.$9.bumpCounter("protocol.error.socket"),e.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error"),e.$12(d("MqttTypes").MqttErrors.SOCKET_ERROR)};this.$6.onclose=function(a){e.$9.bumpCounter("protocol.socket.close"),a.wasClean||e.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+a.code+" reason: "+a.reason),e.$12(d("MqttTypes").MqttErrors.SOCKET_CLOSE,a.code+" : "+a.reason)};this.$8!=null&&this.$8.cancel();this.$8=new(d("MqttProtocolUtils").Pinger)(a.getKeepAliveIntervalSeconds,a.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(d("MqttProtocolCodec").WireMessage.Ping)("PINGREQ")),function(a,b){return e.$12(d("MqttTypes").MqttErrors.PING_TIMEOUT,a,b)})};b.$14=function(){var a=this;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(b){a.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(b){a.$9.debugTrace("Socket Close After Teardown","code: "+b.code+", reason: "+b.reason)},this.$6.close(),this.$6=null);this.$2.onConnectSuccess=function(a){};this.$2.onConnectFailure=function(a,b){};this.$2.onConnection=function(){};this.$2.onConnectionLost=function(a){};this.$2.onMessageArrived=function(a,b,c){};this.$2.onMessageDelivered=function(a,b){}};b.disconnect=function(a){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(d("MqttProtocolCodec").WireMessage.Disconnect)());this.$9.bumpCounter("protocol.debug.disconnect");this.$12(a)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw c("err")("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("SUBSCRIBE",a,0,this.$15());this.$13(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw c("err")("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("UNSUBSCRIBE",a,0,this.$15());this.$13(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var e=this.$15();a=new(d("MqttProtocolCodec").WireMessage.Publish)(a,d("MqttProtocolCodec").createMessageWithString(b),c,e);this.$13(a);return e};b.$15=function(){++this.$4===i&&(this.$4=1);return this.$4};b.handleMessage=function(a){var b=this;switch(a.messageType){case d("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);if(a instanceof d("MqttProtocolCodec").WireMessage.ConnAck){var e=a;if(e.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$12(d("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+e.returnCode,e.returnCode);return}d("MqttEnv").Env.scheduleCallback(function(){b.$2.onConnectSuccess(b.$11)});this.$8!=null&&this.$8.reset()}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){var f=a;d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageArrived(f.topic,f.payloadMessage,f.qos)});e=f.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(f.qos===1&&e!=null){e=new(d("MqttProtocolCodec").WireMessage.PubAckUnsubAck)("PUBACK",e);this.$13(e)}}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(a instanceof d("MqttProtocolCodec").WireMessage.PubAckUnsubAck){e=a;var g=e.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageDelivered("",g)})}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case d("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(d("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case d("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case d("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(c("err")("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();g["default"]=a}),98);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});f.MqttPublishEvent=a}),66);
__d("MqttUserName",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k){h===void 0&&(h=null),i===void 0&&(i=""),j===void 0&&(j="websocket"),k===void 0&&(k=null),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f,this.$6=g,this.$7=c("gkx")("1166607")?!1:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus(),this.$8=h,this.$9=i,this.$10=j,this.$11=k}var b=a.prototype;b.gen=function(a,b,d,e){e===void 0&&(e=[]);var f=c("gkx")("1166607")?!1:this.$7;a={u:this.$1,s:a,cp:this.$3,ecp:this.$2,chat_on:this.$6,fg:f,d:this.$4,ct:this.$10,mqtt_sid:"",aid:this.$5,st:b,pm:d,dc:"",no_auto_fg:!0,gas:this.$8,pack:e,php_override:this.$9,p:this.$11};return JSON.stringify(a)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};b.getEndpointCapabilities=function(){return this.$2};b.getDeviceId=function(){return this.$4};b.setEndpointCapabilities=function(a){this.$2=a};b.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();g["default"]=a}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=1,j=1,k=64,l="publish",m="subscribe",n="unsubscribe",o=function(a){},p=18e4,q=5*1e3,r=15,s=21;a=function(){function a(){var a=this;this.$37=function(){return a.$20};this.$38=function(){return a.$21};this.$8=!1;this.$10=d("MqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$17=new Set();this.$24=new Map();this.$12=0;this.$13=0;this.$14=0;this.$15=0;this.$16=0;this.$8=!1;this.$5="";this.$6=new(c("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$18=0;this.$19=!1;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$25=!1;this.$26=!1;this.$27=new(c("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$20=h;this.$21=h;this.$22=null;this.$23=0}var e=a.prototype;e.run=function(a){var b=this,d=a.onStateChange,e=a.onJSError,f=a.onMessageReceived,g=a.endpoint,i=a.mqttUserName,j=a.subscribedTopics;a=a.extraConnectMessageProvider;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=d;this.$3=f;this.$5=g;this.$6=i;this.$8=!0;this.$18=Date.now();this.$12=0;this.$13=0;this.$2=e||o;j&&j.forEach(function(a){return b.$17.add(a)});this.$4=a;this.$20=(d=c("qex")._("656"))!=null?d:h;this.$21=(f=c("qex")._("657"))!=null?f:h;this.$28()};e.shutdown=function(a){this.$29(a),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};e.subscribe=function(a){this.$17.add(a);this.ensureConnected(m)&&this.$31(a);return!0};e.publish=function(a,e,f,g){var h={resolve:function(){},reject:function(a){}};g!=null&&(h.listener=g);var i=new(b("Promise"))(function(a,b){h.resolve=a,h.reject=b}),j=this.ensureConnected(l);!j?(g==null?void 0:g.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),h.reject(c("err")("Client disconnected"))):this.$32(a,e,f,h);return i};e.unsubscribe=function(a){this.$17["delete"](a);this.ensureConnected(n)&&this.$33(a);return!0};e.addHook=function(a){this.$27.addHook(a)};e.removeHook=function(a){this.$27.removeHook(a)};e.isRunning=function(){return this.$8};e.getSessionId=function(){return this.$9};e.hasFatal=function(){return this.$25};e.hasConnectSuccess=function(){return this.$26};e.canPublish=function(){return this.ensureConnected("canPublish")};e.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};e.connectionState=function(){return this.$11};e.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("err")("Unknown state "+a)};e.testOnlyGetSubscribedTopics=function(){return this.$17};e.onWindowUnload=function(){var a=this;this.publish("/browser_close","{}",0)["catch"](function(){a.$10.bumpCounter("on_window_unload.browser_close_publish_failed")})};e.getDisconnectCount=function(){return this.$23};e.$29=function(a){this.$8&&this.$7!=null&&(this.$34("Disconnected"),this.$7!=null&&(this.$7.disconnect(a),this.$27.onConnectionDisconnect()),this.$7=null)};e.$35=function(a){if(this.$11==="Connected"&&a==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(a==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted");this.$19=!0;return}if(a==="Connected"&&this.$18!==0){a=Date.now()-this.$18;switch(Math.floor(a/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0;this.$19=!1;return}};e.$34=function(a){a!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+a),this.$35(a),this.$11=a,this.$1(a))};e.$28=function(){var a=this;if(!this.$8)return;this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11);this.$34("Connecting");var b=Date.now(),e=this.$10.getBrowserConnectivity();this.$9=c("MqttUtils").generateSessionId();var f=Array.from(this.$17),g=c("MqttUtils").endpointWithSessionId(this.$5,this.$9);g=c("MqttUtils").endpointWithExtraParameter(g,"cid",this.$6.getDeviceId());try{this.$7=new(c("MqttProtocolClient"))(g);var h=this.$36(),i=h.map(function(a){return a.topic});g=this.$6.gen(this.$9,f,h);this.$7!=null&&(this.$13+=1,this.$7.connect({userName:g,mqttVersion:3,getKeepAliveIntervalSeconds:this.$37,getKeepAliveTimeoutSeconds:this.$38,ignoreSubProtocol:!0,onConnectFailure:function(c,d,g){return a.$39(d,b,a.$18,f,i,e,c,g)},onConnectSuccess:function(c){return a.$40(b,a.$18,f,i,e,c)},onConnection:function(){return a.$41(h,f)},onConnectionLost:function(b,c){return a.$42(b,c)},onMessageArrived:function(b,c,d){return a.$43(b,c,d)},onMessageDelivered:function(b,c){return a.$44(b,c)}}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$34("Disconnected"),this.$45(!1,!1,b,this.$18,f,[],e,null,14,"init error - "+a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$27.onWSFatal(),this.$46(new(d("MqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};e.$36=function(){var a=this.$4(),b=65536;a=a.map(function(a){a.messageId=b--;return a});return a};e.$31=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("_doSubscribe","Subscribing to "+a);this.$27.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};e.$33=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("_doUnsubscribe","Unsubscribing to "+a);this.$27.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};e.$32=function(a,b,c,e){if(this.$7!=null)try{b=this.$7.publish(a,b,c);this.$10.bumpCounter("protocol.publish");var f=b!=null?b:"null";this.$10.debugTrace("_doPublish","publish "+a+" with messageId:"+f+" qos:"+c);this.$27.onPublish(a);(f=e.listener)==null?void 0:f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT);b!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(b,e)):e.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);e.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};e.$47=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$29(d("MqttTypes").MqttErrors.RECONNECT);this.$30("reconnect");this.$48();this.$9=-1;this.$16=0;a=a;if(a==null){var e;e=(e=c("qex")._("130"))!=null?e:i;a=e*Math.pow(2,this.$12)}a=Math.max(a,j);e=(e=c("qex")._("131"))!=null?e:k;a=Math.min(a,e);e=a*(1e3+d("MqttEnv").Env.random()*200);this.$10.debugTrace("_scheduleReconnect","Reconnect in "+e+" ms");this.$22=d("MqttEnv").Env.setTimeout(function(){b.$28()},e);this.$12+=1};e.$48=function(){var a=Date.now()-this.$16,b=this.$16!==0&&a>q,c=this.$12>r;(b||c)&&(this.$12=0);this.$16!==0&&a<=q&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};e.$45=function(a,b,c,d,e,f,g,h,i,j){a?this.$14++:this.$15++;var k=Date.now();this.$10.eventLogConnect({sessionID:this.$9,connectionStatus:a,connectionState:this.mqttStateFromConnectionState(this.$11),ackReceived:b,duration:k-c,total_duration:k-d,hostname:this.$5,attemptNumber:this.$13,successTotal:this.$14,failTotal:this.$15,subscribedTopics:e,publishes:f,errorCode:i,errorMessage:j,osConnectivity:g,messageSizeBytes:h,disconnectCount:this.$23});a&&(this.$13=0)};e.$39=function(a,b,c,d,e,f,g,h){var i=a.mqttError;h=h!=null?i.errorMessage+" - "+h:i.errorMessage;this.$10.debugTrace("connect","Connect failed "+h);this.$10.bumpCounter("protocol.onconnectfailure");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$27.onConnectFailure();this.$45(!1,a.connAck!==-1,b,c,d,e,f,g,i.errorCode,h);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===s){this.$47(p);return}}this.$47()};e.$41=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$27.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$27.onSubscribe(a)});a.forEach(function(a){c.$27.onPublish(a.topic)});this.$34("TransportConnected")};e.$40=function(a,b,c,d,e,f){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$34("Connected"),this.$45(!0,!0,a,b,c,d,e,f),this.$49(c),this.$16=Date.now()};e.$42=function(a,b){this.$10.bumpCounter("protocol.onconnectionlost");this.$23++;if(a.errorCode){b=b!=null?a.errorMessage+" - "+b:a.errorMessage;this.$10.eventLogDisconnect({sessionID:this.$9,errorCode:a.errorCode,errorMessage:b,duration:Date.now()-this.$16,disconnectCount:this.$23})}this.$10.debugTrace("connect","connection lost");this.$27.onConnectionLost();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost");this.$47()};e.$43=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$27.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};e.$44=function(a,b){this.$10.bumpCounter("protocol.onmessagedelivered");a=b!=null?b:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$24.get(b);if(a==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24["delete"](b);(b=a.listener)==null?void 0:b.onEvent(d("MqttPublishListener").MqttPublishEvent.ACKED);a.resolve();this.$10.bumpCounter("publish.ack_received")};e.$30=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$24.forEach(function(b,e,f){(e=b.listener)==null?void 0:e.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_ACKED);b.reject(c("err")(a))}),this.$24.clear()};e.$49=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$17.has(a)||b.unsubscribe(a)});a=new Set(this.$17);a.forEach(function(a){c.has(a)||b.subscribe(a)})};e.$46=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$25=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};return a}();g["default"]=a}),98);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttPublishTimeoutConfig","MqttTypes","MqttUserName","MqttUtils","Promise","Run","err","isFastRefreshEnabledForCurrentDomain","promiseDone","qex","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("MqttPublishTimeoutConfig").mqttPublishTimeoutMs||60*1e3;a=function(){function a(a){var b=this,e=a.endpoint,f=a.pollingEndpoint,g=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;var m=a.guestAuthString;m=m===void 0?null:m;var n=a.phpOverride;n=n===void 0?"":n;var o=a.clientType;o=o===void 0?"websocket":o;var p=a.deviceId;p=p===void 0?c("ChannelClientID").getID():p;a=a.pageId;a=a===void 0?null:a;this.$11=d("MqttEnv").Env.getLoggerInstance();this.$11.setAppId(h);this.$12=new(c("MqttUserName"))(g,j,k,p,h,l,m,n,o,a);this.$1=e;this.$2=f;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new Map();this.$10=new(c("MqttConnection"))();this.$13=null;this.$16=new(c("MqttAnalyticsHook"))();this.$15=new Map();this.$14=[];if(!d("MqttEnv").Env.isUserLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()&&(m==null||m=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16);this.$10.addHook(new(c("IrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$17(i);this.$18()}var e=a.prototype;e.$17=function(a){var b=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){var e=d("MqttEnv").Env.killswitch("MQTT_WS_FORCE_LONG_POLLING");if(e){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!c("MqttUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$11.bumpCounter("ws_unavailable_polling");return}}this.$10.run({onStateChange:function(a){b.$20(a)},onJSError:function(a){b.$21(a)},onMessageReceived:function(a,c,d){b.$22(a,c,d)},endpoint:this.$1,mqttUserName:this.$12,subscribedTopics:a,extraConnectMessageProvider:function(){return b.$23()}});this.$24()};e.$24=function(){var a=this;d("Run").onUnload(function(){a.$10.onWindowUnload(),a.$25(d("MqttTypes").MqttErrors.BROWSER_CLOSE)})};e.shutdown=function(){this.$25(d("MqttTypes").MqttErrors.APP_DISCONNECT)};e.$25=function(a){this.$10&&this.$10.shutdown(a),this.$13&&this.$13.shutdown(),this.$16.onTabClose()};e.publish=function(a,b,e){e===void 0&&(e={qos:1,skipBuffer:!1});var f;e.qos===0?f=this.$26(a,b,e.listener):f=this.$27(a,b,e);c("MqttUtils").promiseDone(f,function(){},function(a){(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)});return f};e.$26=function(a,b,c){return this.$28(a,b,0,c,1,null)};e.$27=function(a,c,e){var f={resolve:function(){},reject:function(a){}},g=new(b("Promise"))(function(a,b){f.resolve=a,f.reject=b}),h=d("MqttEnv").Env.random();a={topic:a,payload:c,options:e,ack:f,publishToken:h,timeoutId:null,attempt:0,startTime:Date.now()};if(e.skipBuffer)if(this.$10.connectionState()==="Connecting"){this.$14.push(a);(c=e.listener)==null?void 0:c.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$29(a);else{a.timeoutId=this.$30(h);this.$15.set(h,a);(c=e.listener)==null?void 0:c.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED);this.$31(a)}return g};e.$29=function(a){a.attempt+=1,c("MqttUtils").promiseDone(this.$28(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};e.$31=function(a){var b=this;a.attempt+=1;c("MqttUtils").promiseDone(this.$28(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){return b.$32(a)},function(a){})};e.$28=function(a,b,e,f,g,h){var i=this,j,k,l=this.getConnectionState(),m=Date.now();!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(j=this.$13.publish(a,b,e),k="lp",f!=null&&(j=j.then(function(){return f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(j=this.$10.publish(a,b,e,f),k="ws",this.$11.bumpCounter("try_publish_ws"));c("promiseDone")(j,function(){i.$11.eventLogOutgoingPublish({sessionID:i.$10.getSessionId(),topic:a,qos:e,payloadSizeBytes:b.length*2,success:!0,protocol:k,errorMessage:null,connectionState:l,thisAttemptStartTime:m,firstAttemptStartTime:h,attempt:g,disconnectCount:i.$10.getDisconnectCount()})},function(c){i.$11.eventLogOutgoingPublish({sessionID:i.$10.getSessionId(),topic:a,qos:e,payloadSizeBytes:b.length*2,success:!1,protocol:k,errorMessage:c!=null?c.toString():null,connectionState:l,thisAttemptStartTime:m,firstAttemptStartTime:h,attempt:g,disconnectCount:i.$10.getDisconnectCount()})});return j};e.subscribe=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeBinary=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$9.get(a);!d?(d=[b],this.$9.set(a,d)):d.push(b);return function(){var d=c.$9.get(a)||[];d=d.filter(function(a){return a!==b});c.$9.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeChannelEvents=function(a){this.$3.push(a)};e.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.registerExtraConnectPayloadProvider=function(a){var b=this;this.$19("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$10.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};e.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};e.unsubscribeAll=function(a){this.$10.unsubscribe(a),this.$8["delete"](a),this.$9["delete"](a)};e.getConnectionState=function(){return this.$5};e.getLongPollingStatus=function(){return this.$7};e.getEndpoint=function(){return this.$1};e.addHook=function(a){this.$10.addHook(a)};e.removeHook=function(a){this.$10.removeHook(a)};e.testOnlyMessageReceived=function(a,b){this.$22(a,b,-1)};e.$33=function(a){var b=this.$15.get(a);b!=null&&b.timeoutId!=null&&d("MqttEnv").Env.clearTimeout(b.timeoutId);this.$15["delete"](a)};e.$30=function(a){var b,e=this;b=(b=c("qex")._("37"))!=null?b:h;b=d("MqttEnv").Env.setTimeout(function(a){var b=e.$15.get(a);if(!b)return;var d=b.topic;e.$11.bumpCounter("publish_timeout."+d);e.$11.debugTrace("publish_timeout","Timeout publishing topic: "+d+" publishToken: "+a);e.$33(a);b.ack.reject(c("err")("Publish Timed Out"))},b,a);return b};e.$32=function(a){var b=a.publishToken,c=this.$15.get(b);if(!c)return;this.$33(b);a.ack.resolve();this.$11.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$11.bumpCounter("publish_success."+a.topic)};e.$22=function(a,b,c){var d=this.$8.get(a);this.$11.eventLogIncomingPublish({sessionID:this.$10.getSessionId(),topic:a,connectionState:this.getConnectionState(),qos:c,payloadSizeBytes:b.payloadString.length*2,disconnectCount:this.$10.getDisconnectCount()});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;try{g(b.payloadString)}catch(a){this.$11.logError(a,"Listener exception"),this.$11.bumpCounter("listener_error")}}g=this.$9.get(a);this.$11.eventLogIncomingPublish({sessionID:this.$10.getSessionId(),topic:a,connectionState:this.getConnectionState(),qos:c,payloadSizeBytes:b.payloadBytes.length,disconnectCount:this.$10.getDisconnectCount()});if(!g)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no binary listeners");else for(var f=g,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;c=f[d++]}else{d=f.next();if(d.done)break;c=d.value}a=c;try{a(b.payloadBytes)}catch(a){this.$11.logError(a,"Binary Listener exception"),this.$11.bumpCounter("listener_error")}}};e.$21=function(a){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped");this.$34(a)};e.$35=function(a){this.$34(a)};e.$34=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};e.$36=function(){var a=this;this.$14.forEach(function(b){a.$29(b),a.$11.bumpCounter("publish_from_temp_buffer."+b.topic)});this.$14=[];this.$15.forEach(function(b,c,d){a.$31(b),a.$11.bumpCounter("publish_from_buffer."+b.topic)})};e.$20=function(a){a==="Connecting"?(this.$14.forEach(function(a){a.ack.reject(c("err")("Client Reconnecting - "+a.topic))}),this.$14=[]):a==="TransportConnected"&&this.$36(),this.$19("_changeState","Connection state = "+a),this.$37(a,this.$7)};e.$38=function(a,b){this.$13&&this.$13.canPublish()&&this.$36(),this.$19("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$37(this.$6,a)};e.$37=function(a,b){var c=this.$10.mqttStateFromConnectionState(a);this.$13&&this.$13.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$39(c))};e.$39=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};e.$23=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$11.logError(b,"ConnectPayload provider exception"),a.$11.bumpCounter("connectPayloadProvider_error")}});return b};e.$18=function(){var a=this;d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&c("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(b){b=new b(a.$2,a.$12,a.$10.hasFatal(),a.$10.hasConnectSuccess(),function(b,c,d){return a.$22(b,c,d)},function(){var b=Array.from(a.$8.keys()),c=Array.from(a.$9.keys());return Array.from(new Set(b.concat(c)))},function(){return a.$23()},function(b){a.$35(b)},function(b,c){a.$38(b,c)});b.start();a.$10.addHook(b);b.addHook(a.$16);a.$13=b;a.$11.debugTrace("MqttChannel","longPollingRunner loaded")})};e.$19=function(a,b){this.$11.debugTrace(a,"Mqtt channel: "+b)};e.setForegroundState=function(a){this.$12&&this.$12.setForegroundState(a)};e.setChatVisibility=function(a){this.$12&&this.$12.setChatVisibility(a)};e.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()};e.setEndpointCapabilities=function(a){this.$12.setEndpointCapabilities(a)};return a}();f.exports=a}),34);
__d("MqttLogger",["ChannelClientID","FBLogger","Log","LogHistory","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt_client",i=100,j="WEBSOCKET",k=null,l={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},m={CONNECT:"connect",DISCONNECT:"disconnect",OUTGOING_PUBLISH:"outgoing_publish",INCOMING_PUBLISH:"incoming_publish"};a=function(){a.getInstance=function(){k||(k=new a());return k};function a(){this.$1=d("LogHistory").getInstance(h),this.$2=0,this.$3=c("gkx")("778292"),this.$4=Date.now(),this.$5=c("ChannelClientID").getID(),this.$7(),this.$6=d("MqttGlobalStreamCounter").getInstance(),this.$6.isEnabled()||(this.$6=null)}var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.eventLogConnect=function(a){var b=a.sessionID,d=a.connectionStatus,e=a.connectionState,f=a.ackReceived,g=a.duration,h=a.total_duration,i=a.hostname,k=a.attemptNumber,n=a.successTotal,o=a.failTotal;a.subscribedTopics;a.publishes;var p=a.osConnectivity;a.errorCode;var q=a.errorMessage,r=a.messageSizeBytes;a=a.disconnectCount;d=d?"success":"failed";this.bumpCounter(l.CONNECT+"."+d);d=n/(n+o);n=p&&this.getBrowserConnectivity();var s={event_type:m.CONNECT,acked:f,attempt_number:k.toString(),connection_state:e,client_type:j,duration:g.toString(),total_duration:h.toString(),error:q,session_id:b.toString(),os_connectivity:n,payload_size:r==null?void 0:r.toString(),extra_data:{device_id:this.$5,connect_success_rate:d.toString(),hostname:i},ws_count:(o=this.$6)==null?void 0:o.getGlobalState().totalConnectionStreams.toString(),disconnect_count:a.toString()};this.$8(function(){c("MqttUnifiedClientConnectFalcoEvent").log(function(){return s})})};b.eventLogPull=function(a){var b=a.pullEventName,c=a.sessionID,e=a.status,f=a.duration,g=a.hostname;a=a.errorMessage;c={device_id:this.$5,session_id:c,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,connection_status:e,duration:f,hostname:g,error_message:a};this.$9(b,c)};b.eventLogPullFinish=function(a){var b=a.pullEventName,c=a.sessionID,e=a.duration,f=a.errorMessage,g=a.publishReceived;a=a.publishSent;c={device_id:this.$5,session_id:c,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,duration:e,error_message:f,publish_received:g,publish_sent:a};this.$9(b,c)};b.eventLogDisconnect=function(a){var b=a.sessionID;a.errorCode;var d=a.errorMessage,e=a.duration;a=a.disconnectCount;this.bumpCounter(l.DISCONNECT);var f={event_type:m.DISCONNECT,connection_state:"Disconnected",client_type:j,duration:e.toString(),error:d,session_id:b.toString(),os_connectivity:this.getBrowserConnectivity(),extra_data:{device_id:this.$5},ws_count:(e=this.$6)==null?void 0:e.getGlobalState().totalConnectionStreams.toString(),disconnect_count:a.toString()};this.$8(function(){c("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return f})})};b.eventLogOutgoingPublish=function(a){var b=a.sessionID,d=a.topic,e=a.qos,f=a.payloadSizeBytes,g=a.success,h=a.protocol,i=a.errorMessage,k=a.connectionState,n=a.thisAttemptStartTime,o=a.firstAttemptStartTime,p=a.attempt;a=a.disconnectCount;this.bumpCounter(l.PUBLISH+"."+d);var q=Date.now(),r={event_type:m.OUTGOING_PUBLISH,session_id:b.toString(),topic:d,client_type:j,connection_state:k,qos:e.toString(),acked:e===1?g:null,duration:(q-n).toString(),total_duration:o!=null?(q-o).toString():null,error:i,payload_size:f.toString(),attempt_number:p.toString(),os_connectivity:this.getBrowserConnectivity(),extra_data:{device_id:this.$5,protocol:h},disconnect_count:a.toString()};this.$8(function(){c("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return r})})};b.eventLogIncomingPublish=function(a){var b=a.sessionID,d=a.topic,e=a.connectionState,f=a.qos,g=a.payloadSizeBytes;a=a.disconnectCount;var h={event_type:m.INCOMING_PUBLISH,session_id:b.toString(),topic:d,client_type:j,connection_state:e,qos:f.toString(),payload_size:g.toString(),os_connectivity:this.getBrowserConnectivity(),extra_data:{device_id:this.$5},disconnect_count:a.toString()};b=d=="/webrtc"||d=="/rtc_multi";this.$10(function(){c("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return h})},50,b)};b.logError=function(a,b){var e=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(h).catching(a).mustfix(b)}catch(a){}})};b.logErrorWarn=function(a,b){var e=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(h).catching(a).warn(b)}catch(a){}})};b.logWarn=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.warn(a,b)}catch(a){}})};b.debugTrace=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.debug(a,b)}catch(a){}})};b.bumpCounter=function(a){var b=this;if(!d("Random").coinflip(i))return;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.$2!==0&&d("ODS").bumpEntityKey(2966,"mqtt_ws_client",b.$2+"."+a,i),d("ODS").bumpEntityKey(2966,"mqtt_ws_client",a,i)})};b.$9=function(a,b,e){var f=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a;b.app_id=f.$2;b.online=f.$11();var d=JSON.stringify(b);f.$1.log(a,d,{weight:e});a!==l.DISCONNECT&&c("MqttWsClientTypedLoggerLite").log(b)})};b.$10=function(a,b,e){c("gkx")("762")&&b!==0?e=e||d("Random").coinflip(b):e=!0;e&&d("MqttEnv").Env.scheduleCallback(a)};b.$8=function(a){this.$10(a,0,!1)};b.$11=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};b.getBrowserConnectivity=function(){return c("NetworkStatus").isOnline()};b.$7=function(){var a=this;if(window.navigator&&window.navigator.onLine!==void 0){var b=function(b){b=b.online;b||a.bumpCounter("browser_disconnect")};c("NetworkStatus").onChange(b)}};return a}();g["default"]=a}),98);
__d("MqttEnvInitializer",["CurrentUser","MqttEnv","MqttLogger","Random","WebStorage","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt:",i={genGk:function(a){switch(a){case d("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return c("gkx")("832242");case d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return c("gkx")("4984");case d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return c("gkx")("945829");case d("MqttEnv").MqttGkNames.mqtt_fast_lp:return c("gkx")("1001007");case d("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return c("gkx")("1066746");case d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return c("gkx")("968609");case d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return c("gkx")("2795");default:c("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}},initialize:function(){d("MqttEnv").Env.initialize(c("Random").random,c("CurrentUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance()},i.genGk,null,null,null,function(a,b){var d=c("WebStorage").getLocalStorage();if(d){d=d.getItem(h+a);if(d!=null)return d}return b},function(a,b){var d=c("WebStorage").getLocalStorage();d&&(b==null?d.removeItem(h+a):c("WebStorage").setItemGuarded(d,h+a,b))})}};f.exports=i}),34);
__d("FBMqttChannel",["MqttChannel","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();a=new(c("MqttChannel"))({endpoint:c("MqttWebConfig").endpoint,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("MqttWebConfig").fbid,appId:c("MqttWebConfig").appID,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,capabilities:c("MqttWebConfig").capabilities,clientCapabilities:c("MqttWebConfig").clientCapabilities,chatVisibility:!1,phpOverride:c("MqttWebConfig").hostNameOverride});g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometProgressRingDeterminate.react",["BaseLoadingStateElement.react","react","useCometProgressRingSvg.react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect,j={rootDiv:{position:"x1n2onr6"}};function a(a){var b=a.color,d=a.percentage;a=a.size;b=c("useCometProgressRingSvg.react")({color:b,isHidden:!1,size:a});var e=b.leftCircleRef,f=b.progressRing,g=b.rightCircleRef;i(function(){var a=g.current,b=e.current;if(a==null||b==null)return;if(!(a instanceof SVGSVGElement)||!(b instanceof SVGSVGElement))return;var c=Math.max(0,Math.min(100,d))/100*360;a.style.transform="rotate("+Math.min(c,180)+"deg)";b.style.transform="rotate("+Math.max(c-180,0)+"deg)"},[e,d,g]);return h.jsx(c("BaseLoadingStateElement.react"),{progress:d,style:{height:a,width:a},xstyle:j.rootDiv,children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWDbMetaTxns",["SignalDbTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.meta.put({key:d("SignalDbTypes").MetaKeysEnum.cat,value:{cat:b}}).then(function(){})}function b(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.deviceId).then(function(a){return a==null?void 0:a.value.deviceId})}function c(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.deviceUUID).then(function(a){return{deviceUUID:a==null?void 0:a.value.deviceUUID}})}function e(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.clockSkew).then(function(a){return a==null?void 0:a.value.clockSkew})}function f(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.edgeInfo).then(function(a){return a==null?void 0:a.value.edgeInfo})}function h(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId).then(function(a){return a==null?void 0:a.value.lastSignedPrekeyId})}function i(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.lastPrekeyId).then(function(a){return a==null?void 0:a.value.lastPrekeyId})}function j(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.lastPrekeyGenerationId).then(function(a){return a==null?void 0:a.value.lastPrekeyGenerationId})}function k(a){return a.meta.toArray()}g.putCAT=a;g.maybeGetDeviceId=b;g.getPushMetaData=c;g.maybeGetClockSkew=e;g.maybeGetEdgeInfo=f;g.maybeGetLastSignedPrekeyId=h;g.maybeGetLastPrekeyId=i;g.maybeGetLastPrekeyGenerationId=j;g.getAllMeta=k}),98);
__d("MAWCryptoAuthTokenWrapper",["MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("MessengerWebInitData").cryptoAuthToken}g.getCryptoAuthToken=a}),98);
__d("MAWClearSignalAndTempStores",["MAWDexieTable","MAWIndexedDb","MAWLLAMigrationUtils","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor.apply(void 0,[{jobs:d("MAWTransactionMode").READWRITE,meta:d("MAWTransactionMode").READWRITE,personalSenderKeyStatuses:d("MAWTransactionMode").READWRITE,prekey:d("MAWTransactionMode").READWRITE,prekeyGeneration:d("MAWTransactionMode").READWRITE,senderKeySessions:d("MAWTransactionMode").READWRITE,session:d("MAWTransactionMode").READWRITE,signedPrekey:d("MAWTransactionMode").READWRITE,tasks:d("MAWTransactionMode").READWRITE}].concat(d("MAWLLAMigrationUtils").getTransactorQPLParam("clearSignalAndTempStores",!1)))(function(a){return d("MAWDexieTable").dexieAll([a.jobs.clear(),a.meta.clear(),a.prekey.clear(),a.prekeyGeneration.clear(),a.session.clear(),a.signedPrekey.clear(),a.tasks.clear(),a.senderKeySessions.clear(),a.personalSenderKeyStatuses.clear()]).then(function(){})});g.clearSignalAndTempStores=a}),98);
__d("MAWDeviceRegistrationActions",["MAWCurrentUser","MAWDexieTable","MessengerWebInitData","SignalDbTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": signedPrekey}"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Device Registration Meta Check] Device Id should be a number"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWDeviceRegistrationActions: sessionId is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);o=function(){return a};return a}var p="Device registration meta is incomplete: ";function q(a,b,c,e,f){(a!=null||b!=null||c!=null||e!=null||f!=null)&&(a==null&&d("WALogger").ERROR(o(),p,d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId),b==null&&d("WALogger").ERROR(n(),p,d("SignalDbTypes").MetaKeysEnum.deviceUUID),c==null&&d("WALogger").ERROR(m(),p,d("SignalDbTypes").MetaKeysEnum.regId),e==null&&d("WALogger").ERROR(l(),p,d("SignalDbTypes").MetaKeysEnum.identityKeyPair),f==null&&d("WALogger").ERROR(k(),p,d("SignalDbTypes").MetaKeysEnum.fbid))}function a(a){return a.meta.bulkGet([d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId,d("SignalDbTypes").MetaKeysEnum.deviceUUID,d("SignalDbTypes").MetaKeysEnum.regId,d("SignalDbTypes").MetaKeysEnum.identityKeyPair,d("SignalDbTypes").MetaKeysEnum.fbid,d("SignalDbTypes").MetaKeysEnum.deviceId]).then(function(b){var e=b[0],f=b[1],g=b[2],k=b[3],l=b[4];b=b[5];var m=e==null?void 0:(e=e.value)==null?void 0:e.lastSignedPrekeyId,n=f==null?void 0:(e=f.value)==null?void 0:e.deviceUUID,o=g==null?void 0:(f=g.value)==null?void 0:f.regId,r=k==null?void 0:(e=k.value)==null?void 0:e.identityKeyPair;f=l==null?void 0:(g=l.value)==null?void 0:g.fbid;var s=b==null?void 0:(k=b.value)==null?void 0:k.deviceId;if(m==null||n==null||o==null||r==null||f==null){q(m,n,o,r,f);return null}c("MessengerWebInitData").sessionId==null&&d("WALogger").ERROR(j());if(s!=null&&typeof s!=="number"){d("WALogger").ERROR(i());return null}return a.signedPrekey.get(m).then(function(a){if(a==null){d("WALogger").ERROR(h(),p);return null}return{deviceId:s,deviceUUID:n,lastSignedPrekeyId:m,signalRegInfo:{identityKeyPair:r,regId:o,signedPreKey:a}}})})}function b(a,b){return d("MAWDexieTable").dexieAll([a.meta.bulkPut([{key:d("SignalDbTypes").MetaKeysEnum.deviceUUID,value:{deviceUUID:b.deviceUUID}},{key:d("SignalDbTypes").MetaKeysEnum.fbid,value:{fbid:d("MAWCurrentUser").getID()}},{key:d("SignalDbTypes").MetaKeysEnum.regId,value:{regId:b.signalRegInfo.regId}},{key:d("SignalDbTypes").MetaKeysEnum.identityKeyPair,value:{identityKeyPair:b.signalRegInfo.identityKeyPair}},{key:d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:b.signalRegInfo.signedPreKey.keyId}}]),a.signedPrekey.put(b.signalRegInfo.signedPreKey)])}function e(a,b){return a.meta.put({key:d("SignalDbTypes").MetaKeysEnum.deviceId,value:{deviceId:b}})}function f(a,b,c){return a.contacts.get(b).then(function(d){if(d!=null)return a.contacts.put(babelHelpers["extends"]({},d,{icdcInfo:c}));else return a.contacts.put({contactJid:b,devices:[],dhash:null,icdcInfo:c})}).then(function(){})}g.logErrorOnIncompleteRegistrationMeta=q;g.getRegistrationMeta=a;g.saveUnsentRegistrationMeta=b;g.saveDeviceId=e;g.saveICDC=f}),98);
__d("MAWDeviceRegistrationTypes",[],(function(a,b,c,d,e,f){"use strict";a=25;b=7;c=100;d="https://reg-e2ee.facebook.com/v2/fb_icdc_fetch";e="https://reg-e2ee.instagram.com/v2/fb_icdc_fetch";var g="https://reg-e2ee.facebook.com/v2/fb_register_v2",h="https://reg-e2ee.instagram.com/v2/fb_register_v2",i="Device has already been registered to WA servers",j="Device registration finished successfully",k="Failed to register device on WA Servers",l="Device registration retries failed "+b+" times. No longer attempting registration to WA Server.",m="Device registration response was null",n={failed:"failed",finished:"finished"};f.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=a;f.MAX_DEVICE_REGISTRATION_RETRIES=b;f.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=c;f.ICDC_ENDPOINT=d;f.IGD_ICDC_ENDPOINT=e;f.REGISTRATION_ENDPOINT=g;f.IGD_REGISTRATION_ENDPOINT=h;f.DEVICE_ALREADY_REGISTERED=i;f.DEVICE_SUCCESSFULLY_REGISTERED=j;f.FAILED_TO_REGISTER=k;f.FAILED_REGISTRATION_RETRIES=l;f.NULL_RESPONSE_FROM_SERVER=m;f.RegistrationStatesEnum=n}),66);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){a={scalarbase:d("tweetnacl").lowlevel.scalarbase,crypto_hash:d("tweetnacl").lowlevel.crypto_hash,modL:d("tweetnacl").lowlevel.modL,pack25519:d("tweetnacl").lowlevel.pack25519,S:d("tweetnacl").lowlevel.S,M:d("tweetnacl").lowlevel.M,A:d("tweetnacl").lowlevel.A,Z:d("tweetnacl").lowlevel.Z,D:d("tweetnacl").lowlevel.D,unpack25519:d("tweetnacl").lowlevel.unpack25519,pow2523:d("tweetnacl").lowlevel.pow2523,crypto_verify_32:d("tweetnacl").lowlevel.crypto_verify_32,set25519:d("tweetnacl").lowlevel.set25519,add:d("tweetnacl").lowlevel.add,scalarmult:d("tweetnacl").lowlevel.scalarmult};g.hash=d("tweetnacl").hash;g.scalarMult=d("tweetnacl").scalarMult;g.verify=d("tweetnacl").verify;g.lowlevel=a;g.keypairFromSecretKey=d("tweetnacl").box.keyPair.fromSecretKey;g.keyPair=d("tweetnacl").box.keyPair;g.signDetachedVerify=d("tweetnacl").sign.detached.verify}),98);
__d("WACryptoUtils",["WACryptoPrimitives"],(function(a,b,c,d,e,f,g){function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function b(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function c(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a){if(a!==(a|0))throw new Error("bound must be int32");if(a<=0)throw new Error("bound must not be positive");var b=new Int32Array(1),c=-1>>>1;c=a*Math.floor(c/a);var d=-1;while(d===-1){self.crypto.getRandomValues(b);var e=b[0]>>>1;e<c&&(d=e%a)}return d}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.rawKeysEqual=b;g.serializedPubKeysEqual=c;g.randomNumberLessThan=e}),98);
__d("WAResultOrError",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){function g(a){return{success:!1,error:a}}function h(a){return{success:!0,value:a}}function a(a,b){return!a.success?g(a.error):h(b(a.value))}function i(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(a.success){e.next=2;break}return e.abrupt("return",g(a.error));case 2:e.next=4;return b("regeneratorRuntime").awrap(c(a.value));case 4:d=e.sent;return e.abrupt("return",h(d));case 6:case"end":return e.stop()}},null,this)}function c(a,b){return a.success?h(a.value):g(b(a.error))}function j(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.success){e.next=2;break}return e.abrupt("return",h(a.value));case 2:e.next=4;return b("regeneratorRuntime").awrap(c(a.error));case 4:d=e.sent;return e.abrupt("return",g(d));case 6:case"end":return e.stop()}},null,this)}function d(a,b){return a.success?b(a.value):g(a.error)}function e(a,c){return a.success?c(a.value):b("Promise").resolve(g(a.error))}function k(a){return function(b){return i(b,a)}}function l(a){return function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(j(c,a));case 2:case"end":return d.stop()}},null,this)}}f.makeError=g;f.makeResult=h;f.mapResult=a;f.asyncMapResult=i;f.mapError=c;f.asyncMapError=j;f.chain=d;f.asyncChain=e;f.onResult=k;f.catchError=l}),66);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,d("WAProtoConst").TYPES.UINT32],localIdentityPublic:[2,d("WAProtoConst").TYPES.BYTES],remoteIdentityPublic:[3,d("WAProtoConst").TYPES.BYTES],rootKey:[4,d("WAProtoConst").TYPES.BYTES],previousCounter:[5,d("WAProtoConst").TYPES.UINT32],senderChain:[6,d("WAProtoConst").TYPES.MESSAGE,e],receiverChains:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,e],pendingKeyExchange:[8,d("WAProtoConst").TYPES.MESSAGE,c],pendingPreKey:[9,d("WAProtoConst").TYPES.MESSAGE,b],remoteRegistrationId:[10,d("WAProtoConst").TYPES.UINT32],localRegistrationId:[11,d("WAProtoConst").TYPES.UINT32],needsRefresh:[12,d("WAProtoConst").TYPES.BOOL],aliceBaseKey:[13,d("WAProtoConst").TYPES.BYTES]};b.internalSpec={preKeyId:[1,d("WAProtoConst").TYPES.UINT32],signedPreKeyId:[3,d("WAProtoConst").TYPES.INT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={sequence:[1,d("WAProtoConst").TYPES.UINT32],localBaseKey:[2,d("WAProtoConst").TYPES.BYTES],localBaseKeyPrivate:[3,d("WAProtoConst").TYPES.BYTES],localRatchetKey:[4,d("WAProtoConst").TYPES.BYTES],localRatchetKeyPrivate:[5,d("WAProtoConst").TYPES.BYTES],localIdentityKey:[7,d("WAProtoConst").TYPES.BYTES],localIdentityKeyPrivate:[8,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d("WAProtoConst").TYPES.BYTES],senderRatchetKeyPrivate:[2,d("WAProtoConst").TYPES.BYTES],chainKey:[3,d("WAProtoConst").TYPES.MESSAGE,h],messageKeys:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,f]};f.internalSpec={index:[1,d("WAProtoConst").TYPES.UINT32],cipherKey:[2,d("WAProtoConst").TYPES.BYTES],macKey:[3,d("WAProtoConst").TYPES.BYTES],iv:[4,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={index:[1,d("WAProtoConst").TYPES.UINT32],key:[2,d("WAProtoConst").TYPES.BYTES]};i.internalSpec={currentSession:[1,d("WAProtoConst").TYPES.MESSAGE,a],previousSessions:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,a]};j.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],publicKey:[2,d("WAProtoConst").TYPES.BYTES],privateKey:[3,d("WAProtoConst").TYPES.BYTES]};k.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],publicKey:[2,d("WAProtoConst").TYPES.BYTES],privateKey:[3,d("WAProtoConst").TYPES.BYTES],signature:[4,d("WAProtoConst").TYPES.BYTES],timestamp:[5,d("WAProtoConst").TYPES.FIXED64]};l.internalSpec={publicKey:[1,d("WAProtoConst").TYPES.BYTES],privateKey:[2,d("WAProtoConst").TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d("WAProtoConst").TYPES.UINT32],senderChainKey:[2,d("WAProtoConst").TYPES.MESSAGE,p],senderSigningKey:[3,d("WAProtoConst").TYPES.MESSAGE,n],senderMessageKeys:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,o]};n.internalSpec={"public":[1,d("WAProtoConst").TYPES.BYTES],"private":[2,d("WAProtoConst").TYPES.BYTES]};o.internalSpec={iteration:[1,d("WAProtoConst").TYPES.UINT32],seed:[2,d("WAProtoConst").TYPES.BYTES]};p.internalSpec={iteration:[1,d("WAProtoConst").TYPES.UINT32],seed:[2,d("WAProtoConst").TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.PendingPreKeySpec=b;g.PendingKeyExchangeSpec=c;g.ChainSpec=e;g.MessageKeySpec=f;g.ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderSigningKeySpec=n;g.SenderMessageKeySpec=o;g.SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac"],(function(a,b,c,d,e,f,g){var h=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function i(a,c,e){if(e<0||e>h)return b("Promise").reject(new Error("HKDF::expand given bad length "+e));var f,g=Math.ceil(e/d("WACryptoHmac").SHA256_BYTE_LENGTH),i=d("WABinary").Binary.build(c).readByteArray(),j=new(d("WABinary").Binary)(),k=d("WACryptoHmac").encodeKeySha256(a).then(function(a){f=a;return new Uint8Array(0)});c=function(a){k=k.then(function(b){return d("WACryptoHmac").sign(f,d("WABinary").Binary.build(b,i,a).readByteArray())}).then(function(a){a=new Uint8Array(a);j.writeByteArray(a);return a})};for(var a=1;a<=g;a++)c(a);return k.then(function(){return j.readBuffer(e)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return i(new Uint8Array(a),b,c)})}function c(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return i(new Uint8Array(a),c,e)})}g.expand=i;g.extractAndExpand=a;g.extractWithSaltAndExpand=c}),98);
__d("WASignalOther",["WACryptoHkdf","WACryptoUtils","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){var h={name:"AES-CBC"},i={name:"HMAC",hash:"SHA-256"};function j(a,b){if(a.length!==b)throw new Error("Signal expected "+b+" bytes, given "+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function c(a,b){return a.readByteArray(b)}function e(a){return new Uint8Array(a)}function f(a,b,c){if(a.length-b<c)throw new Error("Can not split off "+c+" bytes from index "+b+" of "+a.length+" bytes");return a.slice(b,b+c)}function k(a){a=a==="extendedRange"?(-1>>>1)-1:16380;return d("WACryptoUtils").randomNumberLessThan(a)+1}function l(a){return o(a)}function m(){var a=-1>>>1;return d("WACryptoUtils").randomNumberLessThan(a)+1}function n(a){return o(a)}function o(a,b,c){b===void 0&&(b=0);c===void 0&&(c=4294967296);if(typeof a==="number"&&b<=a&&a<c&&Math.floor(a)===a)return a;else throw new Error("Expected integer in range ["+b+", "+c+"), given "+String(a))}function p(a,b){return d("encodeProtobuf").encodeProtobuf(a,b).readByteArray()}function q(a,b,c){return c(d("decodeProtobuf").decodeProtobuf(a,b))}function r(a,b,c,e){return d("WACryptoHkdf").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function s(a,b){var c,d;b==="hmac-sha256"?(c=i,d=["sign"]):(b,c=h,d=["encrypt","decrypt"]);return self.crypto.subtle.importKey("raw",a,c,!1,d)}function t(a){return a}function u(a){return a}function v(a,b){return d("WACryptoUtils").arrayBuffersEqual(a,b)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=c;g.makeBytes=e;g.sliceBytes=f;g.makeRegistrationId=k;g.castRegistrationId=l;g.makeSenderKeyId=m;g.castSenderKeyId=n;g.ensureIntInRange=o;g.encodeSignalProto=p;g.decodeSignalProto=q;g.hkdf=r;g.makeCryptoKey=s;g.castToByteEncoded=t;g.castToSessionHash=u;g.areSessionHashesEqual=v}),98);
__d("WASignalKeys",["WACryptoPrimitives","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h=5,i=16777215;function j(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d("WACryptoPrimitives").keypairFromSecretKey(a);var b=a.publicKey;a=a.secretKey;return j(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function b(a,b){return{publicKey:d("WASignalOther").toBytes(a,32),privateKey:d("WASignalOther").toBytes(b,32)}}function k(){var a=d("WACryptoPrimitives").keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return j(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function l(a,b){return j(d("WASignalOther").sliceBytes(b,1,32),a)}function m(a,b){return{serializedPubKey:b,privateKey:a}}function c(){var a=k();return m(a.privateKey,n(a))}function n(a){var b=d("WASignalOther").makeBytes(33);b[0]=h;b.set(a.publicKey,1);return b}function e(a){var b=d("WASignalOther").makeBytes(33);b[0]=h;b.set(d("WASignalOther").ensureSize(a,32),1);return b}function f(a){return m(a.privateKey,n(a))}function o(a,b){a=(a-1)%i;a<=0&&(a+=i);var c=[];for(var e=0;e<b;e++){var f=a===i?1:a+1,g=k(),h=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:f,publicKey:n(g),privateKey:g.privateKey});c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function p(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:q(b),keyPair:l(d("WASignalOther").toBytes(a,32),r(new Uint8Array(c)))}}catch(a){return null}}function q(a){return d("WASignalOther").ensureIntInRange(a,1,i)}function r(a){if(a.length===0||a[0]!==h)throw new Error("Unrecognized public key type");return d("WASignalOther").ensureSize(a,33)}function s(){var a=d("WASignalOther").makeBytes(32);self.crypto.getRandomValues(a);return a}function t(a,b){return d("WACryptoPrimitives").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=h;g.makeKeyPairFrom=a;g.makeKeyPairFromArrayBuffers=b;g.makeKeyPair=k;g.makeKeyPairFromSerialized=l;g.makeSerializedKeyPairFrom=m;g.makeSerializedKeyPair=c;g.serializePubKey=n;g.serializeIdentity=e;g.toSerializedKeyPair=f;g.makePreKeys=o;g.deserializePreKey=p;g.castToPreKeyId=q;g.castToSerializedPubKey=r;g.makeRawSenderKey=s;g.ecdh=t}),98);
__d("WASignalSessions",["WABinary","WASignalKeys","WASignalOther"],(function(a,b,c,d,e,f,g){var h=3;function a(a,b){return i(a,0,b,[])}function i(a,b,c,d){return{ratchetPubKey:a,nextMsgIndex:b,chainKey:c,unusedMsgKeys:d}}function b(a,b){return j(a,0,b)}function j(a,b,c){return{ratchetKey:a,nextMsgIndex:b,chainKey:c}}function k(a,b,c){return{remoteOneTimeId:a,remoteSignedId:b,localOneTimePubKey:c}}function c(a,b){return m(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,a.initialExchangeInfo,a.prevSendChainHighestIndex,b,a.aliceBaseKey)}function e(a,b,c){return m(a.local,a.remote,a.rootKey,b,c,a.initialExchangeInfo,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function f(a,b,c,d){c===void 0&&(c=a.sendChain);return m(a.local,a.remote,d,b,c,null,Math.max(a.sendChain.nextMsgIndex-1,0),a.prevSessions,a.aliceBaseKey)}function l(a,b,c,d,e,f,g){return m(a,b,c,d,e,f,0,[],g)}function m(a,b,c,d,e,f,g,h,i){return{local:a,remote:b,rootKey:c,sendChain:e,recvChains:d,initialExchangeInfo:f,prevSendChainHighestIndex:g,prevSessions:h,aliceBaseKey:i}}function n(a,b){b=new(d("WABinary").Binary)(b);var c=d("WASignalOther").readBytes(b,32),e=d("WASignalOther").readBytes(b,32);b=d("WASignalOther").readBytes(b,16);return o(a,c,e,b)}function o(a,b,c,d){return{index:a,cipherKey:b,macKey:c,iv:d}}function p(a){return{senderRatchetKey:a.ratchetPubKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey},messageKeys:a.unusedMsgKeys}}function q(a){var b=a.ratchetKey;return{senderRatchetKey:b.serializedPubKey,senderRatchetKeyPrivate:b.privateKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey}}}function r(a){var b=a.local,c=a.remote,d=a.initialExchangeInfo,e=void 0;if(d){var f=d.remoteOneTimeId;e={preKeyId:f!=null?f:void 0,signedPreKeyId:d.remoteSignedId,baseKey:d.localOneTimePubKey}}return{currentSession:{sessionVersion:h,localIdentityPublic:b.pubKey,remoteIdentityPublic:c.pubKey,rootKey:a.rootKey,previousCounter:a.prevSendChainHighestIndex,senderChain:q(a.sendChain),receiverChains:a.recvChains.map(p),pendingPreKey:e,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey},previousSessions:a.prevSessions}}function s(a){var b=a.local,c=a.remote,e=a.sendChain,f=a.initialExchangeInfo,g=void 0;if(f){var i=f.remoteOneTimeId;g={preKeyId:i!=null?i:void 0,signedPreKeyId:f.remoteSignedId,baseKey:d("WASignalOther").toBuffer(f.localOneTimePubKey)}}return{sessionVersion:h,localIdentityPublic:d("WASignalOther").toBuffer(b.pubKey),remoteIdentityPublic:d("WASignalOther").toBuffer(c.pubKey),rootKey:d("WASignalOther").toBuffer(a.rootKey),previousCounter:a.prevSendChainHighestIndex,senderChain:{senderRatchetKey:d("WASignalOther").toBuffer(e.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:d("WASignalOther").toBuffer(e.ratchetKey.privateKey),chainKey:{index:e.nextMsgIndex,key:d("WASignalOther").toBuffer(e.chainKey)},messageKeys:[]},receiverChains:a.recvChains.map(function(a){return{senderRatchetKey:d("WASignalOther").toBuffer(a.ratchetPubKey),chainKey:{index:a.nextMsgIndex,key:d("WASignalOther").toBuffer(a.chainKey)},messageKeys:a.unusedMsgKeys.map(function(a){return{index:a.index,cipherKey:d("WASignalOther").toBuffer(a.cipherKey),macKey:d("WASignalOther").toBuffer(a.macKey),iv:d("WASignalOther").toBuffer(a.iv)}})}}),pendingPreKey:g,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey==null?void 0:d("WASignalOther").toBuffer(a.aliceBaseKey)}}function t(a){var b=z(a.currentSession,"currentSession");return v(b,a.previousSessions)}function u(a){return v(a,[])}function v(a,b){var c=z(a.sessionVersion,"sessionVersion");if(c!==h)throw new Error("Signal: bad session version "+c);c=z(a.senderChain,"senderChain");var e=z(c.chainKey,"senderChain.chainKey");c=j(d("WASignalKeys").makeSerializedKeyPairFrom(y(c.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),x(c.senderRatchetKey,"senderRatchetKey")),z(e.index,"senderChain.chainKey.index"),y(e.key,32,"senderChain.chainKey.key"));e=z(a.receiverChains,"receiverChains").map(function(a){var b=z(a.chainKey,"receiverChains[].chainKey");return i(x(a.senderRatchetKey,"receiverChains[].senderRatchetKey"),z(b.index,"receiverChains[].chainKey.index"),y(b.key,32,"receiverChains[].chainKey.key"),w(a.messageKeys))});var f={regId:d("WASignalOther").castRegistrationId(z(a.localRegistrationId,"localRegistrationId")),pubKey:x(a.localIdentityPublic,"localIdentityPublic")},g={regId:d("WASignalOther").castRegistrationId(z(a.remoteRegistrationId,"remoteRegistrationId")),pubKey:x(a.remoteIdentityPublic,"remoteIdentityPublic")},l=a.pendingPreKey,n=null;if(l){var o=l.preKeyId;n=k(o!=null?d("WASignalKeys").castToPreKeyId(o):null,d("WASignalKeys").castToPreKeyId(z(l.signedPreKeyId,"pendingPreKey.signedPreKeyId")),x(l.baseKey,"pendingPreKey.baseKey"))}o=a.aliceBaseKey==null?null:x(a.aliceBaseKey,"aliceBaseKey");return m(f,g,y(a.rootKey,32,"rootKey"),e,c,n,a.previousCounter||0,b,o)}function w(a){return a.map(function(a){return{index:z(a.index,"messageKeys[].index"),cipherKey:y(a.cipherKey,32,"messageKeys[].cipherKey"),macKey:y(a.macKey,32,"messageKeys[].macKey"),iv:y(a.iv,16,"messageKeys[].iv")}})}function x(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(z(a,b)))}function y(a,b,c){return d("WASignalOther").toBytes(z(a,c),b)}function z(a,b){if(a==null)throw new Error("Signal: protobuf is missing "+b);return a}g.FORMAT_VERSION=h;g.makeFreshRecvChain=a;g.makeRecvChain=i;g.makeFreshSendChain=b;g.makeSendChain=j;g.makeInitialExchangeInfo=k;g.setPrevSessions=c;g.updateChains=e;g.ratchetSession=f;g.makeFreshSession=l;g.makeSession=m;g.splitMsgKey=n;g.serializeSession=r;g.detachSession=s;g.parseSessionFromRecord=t;g.parseSession=u;g._parseSession=v;g.bytesOrThrow=y;g.definedOrThrow=z}),98);
__d("WACryptoEd25519",["WACryptoPrimitives"],(function(a,b,c,d,e,f,g){var h=null;function i(a){var b=h;h=[];try{return a()}finally{((a=h)!=null?a:[]).forEach(function(a){return void a.fill(0)});h=b}}function j(a,b){if(h==null)throw new Error("allocate called outside of active scope");return new a(b)}function a(a,b,c){d("WACryptoPrimitives").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function c(a,b){var c=[k(),k(),k(),k()];d("WACryptoPrimitives").lowlevel.scalarbase(c,b);Q(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw new Error("Incorrect initialiser array provided to the fieldElement");for(var c=0;c<a.length;c++)b[c]=a[c]}return b}function l(a,b){d("WACryptoPrimitives").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)/65536;c++}}function u(a,b){return S(a,b)?0:1}function v(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c=d("WACryptoPrimitives").lowlevel.unpack25519,e=d("WACryptoPrimitives").lowlevel.pow2523,f=d("WACryptoPrimitives").lowlevel.M,g=d("WACryptoPrimitives").lowlevel.S,h=k();c(h,z);c=k();e(c,b);e=k();f(e,b,c);c=k();g(c,e);g=k();f(g,e,h);y(e,g,1^u(c,b));a.set(e)}function B(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);R(j,i);f(a,h,j)}function C(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d("WACryptoPrimitives").lowlevel.unpack25519,f=d("WACryptoPrimitives").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();R(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b=d("WACryptoPrimitives").lowlevel.S,c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.pow2523,f=d("WACryptoPrimitives").lowlevel.pack25519,g=k(),h=k(),i=k(),j=k(),l=k();e(g,a);b(h,g);b(i,h);c(j,i,a);c(l,j,a);e=new Uint8Array(32);f(e,l);return 1&e[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function e(a,b){var c=q();b=T(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();R(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d("WACryptoPrimitives").lowlevel.unpack25519;a=d("WACryptoPrimitives").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function f(a){return i(function(){return O(a)})}function Q(a,b){var c=k(),e=k(),f=k(),g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.pack25519;R(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function R(a,b){var c=k();c.set(b);var e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function S(a,b){var c=d("WACryptoPrimitives").lowlevel.pack25519,e=d("WACryptoPrimitives").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function T(a,b){var c=d("WACryptoPrimitives").lowlevel.set25519,e=d("WACryptoPrimitives").lowlevel.S,f=d("WACryptoPrimitives").lowlevel.M,g=d("WACryptoPrimitives").lowlevel.Z,h=d("WACryptoPrimitives").lowlevel.A,i=d("WACryptoPrimitives").lowlevel.D,j=d("WACryptoPrimitives").lowlevel.unpack25519,l=d("WACryptoPrimitives").lowlevel.pow2523,o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();c(a[2],n());j(a[1],b);e(r,a[1]);f(s,r,i);g(r,r,a[2]);h(s,a[2],s);e(t,s);e(u,t);f(v,u,t);f(o,v,r);f(o,o,s);l(o,o);f(o,o,r);f(o,o,s);f(o,o,s);f(a[0],o,s);e(q,a[0]);f(q,q,s);S(q,r)&&f(a[0],a[0],p());e(q,a[0]);f(q,q,s);if(S(q,r))return-1;U(a[0])===b[31]>>7&&g(a[0],m(),a[0]);f(a[3],a[0],a[1]);return 0}function U(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=c;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=e;g.elligator=P;g.hashToPoint=f;g.pack=Q;g.inv25519=R;g.unpackneg=T}),98);
__d("WASignalSignatures",["Promise","WACryptoEd25519","WACryptoPrimitives","WAHex","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e=b.length,f=a.privateKey,g=new Uint8Array(32);d("WACryptoEd25519").scalarmultBase(g,f);var h=g[31]&128,i=new Uint8Array(e+128);i[0]=254;i.fill(255,1,32);i.set(f,32);i.set(b,64);i.set(c,e+64);var j=d("WACryptoEd25519").allocate(Uint8Array,64);d("WACryptoEd25519").hashSha512(j,i,e+128);i.set(g,32);g=d("WACryptoEd25519").allocate(Float64Array,64);d("WACryptoEd25519").reduce(j,g);d("WACryptoEd25519").scalarmultBase(i,j);var k=d("WACryptoEd25519").allocate(Uint8Array,64);d("WACryptoEd25519").hashSha512(k,i,e+64);d("WACryptoEd25519").reduce(k,g);for(e=0;e<32;++e)g[e]=j[e];for(e=0;e<32;++e)for(j=0;j<32;++j)g[e+j]+=k[e]*f[j];d("WACryptoEd25519").modL(i.subarray(32,64),g);return{pubKeyNegative:h!==0,signedMsg:i}})}function a(a,c){return b("Promise").resolve().then(function(){var b=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(b);return i(a,c,b)})}function c(a,b,c){var e=c[63];return e&96?!1:d("WACryptoEd25519").runInAllocationScope(function(){var f=d("WACryptoPrimitives").lowlevel.A,g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.Z,i=d("WACryptoPrimitives").lowlevel.pack25519,j=d("WACryptoPrimitives").lowlevel.unpack25519,k=d("WACryptoEd25519").allocate(Uint8Array,64);k.set(c);k[63]=e&127;var l=d("WACryptoEd25519").fieldElement(),m=d("WACryptoEd25519").fieldElement(),n=d("WACryptoEd25519").fieldElement(),o=d("WACryptoEd25519").fieldElement(),p=d("WACryptoEd25519").fieldElement(),q=d("WACryptoEd25519").allocate(Uint8Array,32),r=d("WACryptoEd25519").fieldElement();r[0]=1;j(l,a.subarray(1));h(m,l,r);f(n,l,r);d("WACryptoEd25519").inv25519(o,n);g(p,m,o);i(q,p);q[31]=q[31]&127|e&128;return d("WACryptoPrimitives").signDetachedVerify(b,k,q)})}function i(a,b,c){a=h(a,b,c);b=d("WASignalOther").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function j(a,b,c){var e=d("WASignalKeys").makeKeyPair(),f=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(f);c=i(c,d("WASignalKeys").serializePubKey(e),f);if(!Number.isSafeInteger(b))throw new Error("Expected timestamp to be a safe integer, given "+String(b));return{id:d("WASignalKeys").castToPreKeyId(a),ts:b,keyPair:e,signature:c}}function e(a,b){var c=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(c);a=i(a,b,c);return a}function k(a){var b=a.id,c=a.keyPair;return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts})}function f(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d("WASignalKeys").castToPreKeyId(b),ts:a,keyPair:d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalOther").toBytes(e,32),d("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))),signature:d("WASignalOther").toBytes(f,64)}}catch(a){return null}}function l(a){return new Uint8Array(d("WAHex").parseHex(a))}function m(a){if(a.length===33)return d("WASignalKeys").castToSerializedPubKey(a);else if(a.length===32)return d("WASignalKeys").serializeIdentity(a);else throw new Error("verifyCertificate publicKey incorrect length")}function n(a,c,d){return b("Promise").resolve().then(function(){var b=j(a,c,d),e=k(b);return{plainObject:b,record:e}})}g.signMsg=a;g.verifyMsgSignalVariant=c;g.makeSignature=i;g.makeSignedPreKey=j;g.signSenderKeyMessage=e;g.serializeSignedPreKeyForPrivateStorage=k;g.deserializeSignedPreKey=f;g.convertPublicKeyHexToUint8Array=l;g.convertPublicKeyToSerializedPubKey=m;g.generateSignedPreKey=n}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={ratchetKey:[1,d("WAProtoConst").TYPES.BYTES],counter:[2,d("WAProtoConst").TYPES.UINT32],previousCounter:[3,d("WAProtoConst").TYPES.UINT32],ciphertext:[4,d("WAProtoConst").TYPES.BYTES]};b.internalSpec={registrationId:[5,d("WAProtoConst").TYPES.UINT32],preKeyId:[1,d("WAProtoConst").TYPES.UINT32],signedPreKeyId:[6,d("WAProtoConst").TYPES.UINT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES],identityKey:[3,d("WAProtoConst").TYPES.BYTES],message:[4,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES],ratchetKey:[3,d("WAProtoConst").TYPES.BYTES],identityKey:[4,d("WAProtoConst").TYPES.BYTES],baseKeySignature:[5,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],iteration:[2,d("WAProtoConst").TYPES.UINT32],ciphertext:[3,d("WAProtoConst").TYPES.BYTES]};f.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],iteration:[2,d("WAProtoConst").TYPES.UINT32],chainKey:[3,d("WAProtoConst").TYPES.BYTES],signingKey:[4,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={generation:[1,d("WAProtoConst").TYPES.UINT32],signature:[2,d("WAProtoConst").TYPES.BYTES]};g.SignalMessageSpec=a;g.PreKeySignalMessageSpec=b;g.KeyExchangeMessageSpec=c;g.SenderKeyMessageSpec=e;g.SenderKeyDistributionMessageSpec=f;g.DeviceConsistencyCodeMessageSpec=h}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(a,b,c,d,e,f,g){var h=5,i=3;function j(a){var b=d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey"),c=d("WASignalSessions").definedOrThrow(a.senderMessageKeys,"senderMessageKeys"),e=d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey");b={senderSigningKeyPublic:r(b["public"],"public"),senderSigningKeyPrivate:b["private"]?d("WASignalSessions").bytesOrThrow(b["private"],32,"private"):void 0,senderKeyId:d("WASignalSessions").definedOrThrow(a.senderKeyId,"senderKeyId"),unusedMsgKeys:c.map(function(a){return k(d("WASignalSessions").definedOrThrow(a.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(a.seed,50,"seed"))}),senderKeyChainKey:l(d("WASignalSessions").definedOrThrow(e.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(e.seed,32,"seed"))};return b}function a(a,b,c,d,e){return{senderSigningKeyPublic:a,senderSigningKeyPrivate:b,senderKeyChainKey:c,senderKeyId:d,unusedMsgKeys:e==null?[]:e}}function b(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b.senderKeyId});return{senderKeyStates:a.senderKeyStates.map(function(a,d){return d===c?b:a})}}function c(a,b){a=a.senderKeyStates.slice(a.senderKeyStates.length>h-1?1:0);a.push(b);return{senderKeyStates:a}}function e(a){return{senderKeyStates:[a]}}function k(a,b){return{iteration:a,seed:b}}function l(a,b){return{nextMsgIndex:a,chainKey:b}}function f(a){a=d("WASignalSessions").definedOrThrow(a.senderKeyStates,"senderKeyStates");return m(a)}function m(a){return n(a)}function n(a){a=a.map(function(a){return j(a)});return{senderKeyStates:a}}function o(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b});if(c===-1)return void 0;a=a.senderKeyStates[c];return a}function p(a){return{senderKeyStates:a.senderKeyStates.map(function(a){return q(a)})}}function q(a){return{senderKeyId:a.senderKeyId,senderChainKey:{iteration:a.senderKeyChainKey.nextMsgIndex,seed:a.senderKeyChainKey.chainKey},senderSigningKey:{"public":a.senderSigningKeyPublic,"private":a.senderSigningKeyPrivate},senderMessageKeys:a.unusedMsgKeys.map(function(a){var b=a.iteration;a=a.seed;return{iteration:b,seed:a}})}}function r(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(d("WASignalSessions").definedOrThrow(a,b)))}function s(a){return a}g.FORMAT_VERSION=i;g.makeSenderKeyState=a;g.updateSessionWithUpdatedSenderKeyState=b;g.updateSessionWithNewSenderKeyState=c;g.makeNewSenderKeySession=e;g.makeSenderKeyMsgKey=k;g.makeSenderKeyChainKey=l;g.parseSessionFromRecord=f;g._parseSession=m;g.makeSenderKeySessionFromRecord=n;g.findSenderKeyState=o;g.serializeSession=p;g.serializeSenderKeyState=q;g.convertFromRawToSenderKeyState=s}),98);
__d("WASignalWhitepaper",["Promise","WABinary","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","regeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new Uint8Array(32);h.fill(255);var i=new Uint8Array([1]),j=new Uint8Array([2]);function a(a,c,e){var f,g,i,j,k,l,p,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").async(function(A){while(1)switch(A.prev=A.next){case 0:g=a.regId,i=a.staticKeyPair;j=c.identity;k=c.signedKey.publicKey;l=e.privateKey;p=i.privateKey;q=(f=c.oneTimeKey)==null?void 0:f.publicKey;r=d("WABinary").Binary.build(h,o(p,k),o(l,j),o(l,k),q&&o(l,q)).readByteArray();A.next=9;return b("regeneratorRuntime").awrap(n(r,"WhisperText"));case 9:s=A.sent;t=s[0];u=s[1];v=c.ratchetKey;w=d("WASignalSessions").makeFreshRecvChain(v,u);x=d("WASignalKeys").makeSerializedKeyPair();A.next=17;return b("regeneratorRuntime").awrap(m(t,x,v));case 17:y=A.sent;z=d("WASignalSessions").makeInitialExchangeInfo(c.oneTimeKey==null?null:c.oneTimeKey.id,c.signedKey.id,d("WASignalKeys").serializePubKey(e));return A.abrupt("return",d("WASignalSessions").makeFreshSession({regId:g,pubKey:d("WASignalKeys").serializePubKey(i)},{regId:c.regId,pubKey:j},y.rootKey,[w],d("WASignalSessions").makeFreshSendChain(x,y.chainKey),z,d("WASignalKeys").serializePubKey(e)));case 20:case"end":return A.stop()}},null,this)}function c(a,c,e,f){var g,i,j,k,l,m,o,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:i=a.regId,j=a.staticKeyPair;k=j.privateKey;l=f.signed.privateKey;m=e;o=c.pubKey;q=(g=f.oneTime)==null?void 0:g.privateKey;r=d("WABinary").Binary.build(h,p(o,l),p(m,k),p(m,l),q&&p(m,q)).readByteArray();x.next=9;return b("regeneratorRuntime").awrap(n(r,"WhisperText"));case 9:s=x.sent;t=s[0];u=s[1];v=f.ratchet;w=d("WASignalSessions").makeFreshSendChain(v,u);return x.abrupt("return",d("WASignalSessions").makeSession({regId:i,pubKey:d("WASignalKeys").serializePubKey(j)},c,t,[],w,null,0,[],e));case 15:case"end":return x.stop()}},null,this)}function e(a){a=d("WASignalGroupSession").makeSenderKeyState(d("WASignalKeys").serializePubKey(a),a.privateKey,d("WASignalGroupSession").makeSenderKeyChainKey(0,d("WASignalKeys").makeRawSenderKey()),d("WASignalOther").makeSenderKeyId(),[]);return b("Promise").resolve(d("WASignalGroupSession").makeNewSenderKeySession(a))}function f(a,c,e,f,g){e=d("WASignalGroupSession").makeSenderKeyState(e,void 0,d("WASignalGroupSession").makeSenderKeyChainKey(c,f),a,[]);c=null;g?c=d("WASignalGroupSession").updateSessionWithNewSenderKeyState(g,e):c=d("WASignalGroupSession").makeNewSenderKeySession(e);return b("Promise").resolve(c)}function k(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));case 2:e=k.sent;f=function(a){return self.crypto.subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};g=f(i).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperMessageKeys",80)}).then(function(b){return d("WASignalSessions").splitMsgKey(a,b)});h=f(j).then(function(a){return d("WASignalOther").toBytes(a,32)});return k.abrupt("return",b("Promise").all([h,g]));case 7:case"end":return k.stop()}},null,this)}function l(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));case 2:e=k.sent;f=function(a){return self.crypto.subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};g=f(i).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperGroup",50)}).then(function(b){return d("WASignalGroupSession").makeSenderKeyMsgKey(a,b)});h=f(j).then(function(a){return d("WASignalOther").toBytes(a,32)});return k.abrupt("return",b("Promise").all([h,g]));case 7:case"end":return k.stop()}},null,this)}function m(a,c,e){var f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:f=c.privateKey;g=e;l.next=4;return b("regeneratorRuntime").awrap(d("WASignalKeys").ecdh(f,g));case 4:h=l.sent;l.next=7;return b("regeneratorRuntime").awrap(n(new Uint8Array(h),"WhisperRatchet",a));case 7:i=l.sent;j=i[0];k=i[1];return l.abrupt("return",{rootKey:j,chainKey:k});case 11:case"end":return l.stop()}},null,this)}function n(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e===void 0&&(e=null);g.next=3;return b("regeneratorRuntime").awrap(d("WASignalOther").hkdf(a,e,c,64));case 3:f=g.sent;return g.abrupt("return",[d("WASignalOther").sliceBytes(f,0,32),d("WASignalOther").sliceBytes(f,32,32)]);case 5:case"end":return g.stop()}},null,this)}function o(a,b){return new Uint8Array(d("WASignalKeys").ecdh(a,b))}function p(a,b){return o(b,a)}g.initiateSessionOutgoing=a;g.initiateSessionIncoming=c;g.initiateSenderKeySessionOutgoing=e;g.initiateSenderKeySessionIncoming=f;g.deriveMsgKey=k;g.deriveSenderKeyMsgKey=l;g.calculateRatchet=m}),98);
__d("WASignalCipher",["Promise","WABinary","WACryptoUtils","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","decodeProtobuf","encodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=40,i=8,j=2e3;function a(a,c){var e,f,g,h,j,k,l,m,n,o,q,t,u,v,w,x,y,z,A,B,C;return b("regeneratorRuntime").async(function(D){while(1)switch(D.prev=D.next){case 0:e=a.sendChain;D.next=3;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(e.nextMsgIndex,e.chainKey));case 3:f=D.sent;g=f[0];h=f[1];D.next=8;return b("regeneratorRuntime").awrap(s(h));case 8:j=D.sent;k=j.cipherKey;l=j.macKey;D.next=13;return b("regeneratorRuntime").awrap(self.crypto.subtle.encrypt({name:"AES-CBC",iv:h.iv},k,c));case 13:m=D.sent;n=new(d("WABinary").Binary)();n.writeByteArray(a.local.pubKey);n.writeByteArray(a.remote.pubKey);o=n.size();n.writeUint8(p(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:e.ratchetKey.serializedPubKey,counter:h.index,previousCounter:a.prevSendChainHighestIndex,ciphertext:m},n);q=n.readByteArray();D.next=23;return b("regeneratorRuntime").awrap(r(l,q));case 23:t=D.sent;u=q.subarray(o);v=d("WABinary").Binary.build(u,new Uint8Array(t,0,i)).readByteArray();y=a.initialExchangeInfo;y!=null?(A=new(d("WABinary").Binary)(),A.writeUint8(p(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION)),d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:a.local.regId,preKeyId:(z=y.remoteOneTimeId)!=null?z:void 0,signedPreKeyId:y.remoteSignedId,baseKey:y.localOneTimePubKey,identityKey:a.local.pubKey,message:v},A),w="pkmsg",x=A.readByteArray()):(w="msg",x=v);B=d("WASignalSessions").makeSendChain(e.ratchetKey,h.index+1,g);C=d("WASignalSessions").updateChains(a,a.recvChains,B);return D.abrupt("return",[C,{type:w,ciphertext:x}]);case 31:case"end":return D.stop()}},null,this)}function c(a,c){var e,f,g,h,i,j,k,l,n,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:if(!(a==null)){t.next=2;break}return t.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 2:t.next=4;return b("regeneratorRuntime").awrap(m(a,c));case 4:e=t.sent;if(!e.success){t.next=10;break}f=e.value,g=f[0],h=f[1];return t.abrupt("return",d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:g,plaintext:h}));case 10:i=a.prevSessions,j=e,k=0;case 13:if(!(!j.success&&k<i.length)){t.next=22;break}l=d("WASignalSessions").parseSession(i[k]);t.next=17;return b("regeneratorRuntime").awrap(m(l,c));case 17:n=t.sent,n.success?((o=n.value,p=o[0],q=o[1]),r=d("WASignalSessions").setPrevSessions(p,[d("WASignalSessions").detachSession(a)].concat(i.slice(0,k),i.slice(k+1))),s=!a||!d("WACryptoUtils").serializedPubKeysEqual(r.remote.pubKey,a.remote.pubKey)?r.remote.pubKey:null,j=d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:s,baseSession:l,usedPreKey:null},updatedSession:r,plaintext:q})):j=n;case 19:k++;t.next=13;break;case 22:return t.abrupt("return",j);case 23:case"end":return t.stop()}},null,this)}function e(a,b){if(t(a,b))return a;var c=a.prevSessions;for(var e=0;e<c.length;e++){var f=d("WASignalSessions").parseSession(c[e]);if(t(f,b))return d("WASignalSessions").setPrevSessions(f,[d("WASignalSessions").detachSession(a)].concat(c.slice(0,e),c.slice(e+1)))}return null}function f(a,c,e,f){var g,i,j,k,l,n,o,p,q,r,s,t;return b("regeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:i=f.localSignedPreKey;if(!(i==null)){u.next=3;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidSignedPreKey"));case 3:j=d("WASignalSignatures").deserializeSignedPreKey(i);if(!(j==null)){u.next=6;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalSignedPreKeyDeserialization"));case 6:if(!(j.id!==e.localSignedPreKeyId)){u.next=8;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalSignedPreKeyIdMismatch"));case 8:k=null;if(!(e.localOneTimeKeyId!=null)){u.next=18;break}l=f.localOneTimeKey;if(!(l==null)){u.next=13;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidOneTimeKey"));case 13:k=d("WASignalKeys").deserializePreKey(l);if(!(k==null)){u.next=16;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalOneTimeKeyDeserialization"));case 16:if(!(k.id!==e.localOneTimeKeyId)){u.next=18;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalOneTimeKeyMismatch"));case 18:u.next=20;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSessionIncoming(a,e.remote,e.sessionBaseKey,{signed:j.keyPair,oneTime:(g=k)==null?void 0:g.keyPair,ratchet:d("WASignalKeys").toSerializedKeyPair(j.keyPair)}));case 20:n=u.sent;o=n.remote.pubKey;p=!c||!d("WACryptoUtils").serializedPubKeysEqual(o,c.remote.pubKey)?o:null;c&&!p&&(n=d("WASignalSessions").setPrevSessions(n,[d("WASignalSessions").detachSession(c)].concat(c.prevSessions.slice(0,h-1))));u.next=26;return b("regeneratorRuntime").awrap(m(n,e));case 26:q=u.sent;if(q.success){u.next=29;break}return u.abrupt("return",q);case 29:r=q.value,s=r[0],t=r[1];return u.abrupt("return",d("WAResultOrError").makeResult({newIdentity:p,baseSession:n,updatedSession:s,plaintext:t}));case 31:case"end":return u.stop()}},null,this)}function k(a){var b,c,e=null;try{var f=o(a,d("WASignalSessions").FORMAT_VERSION,i);if(!f.success)return f;f=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,f.value);var g=f.ratchetKey;e=f.counter;c=f.ciphertext;if(g==null||e==null||c==null)return d("WAResultOrError").makeError("errSignalDeserializeInvalidProtoFormat");b=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(g))}catch(a){return d("WAResultOrError").makeError("errSignalDeserializeRatchetKeyBadFormat")}f={ratchetPubKey:b,counter:e,ciphertext:new Uint8Array(c),versionContentMac:a};return d("WAResultOrError").makeResult(f)}function l(a){a=o(a,d("WASignalSessions").FORMAT_VERSION,0);if(!a.success)return a;var b,c,e,f,g;try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,a.value);var h=a.registrationId,i=a.preKeyId,j=a.signedPreKeyId,l=a.baseKey,m=a.identityKey;a=a.message;if(h==null||j==null||l==null||m==null||a==null)return d("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");f=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(l));b={regId:d("WASignalOther").castRegistrationId(h),pubKey:d("WASignalKeys").castToSerializedPubKey(new Uint8Array(m))};e=i!=null?d("WASignalKeys").castToPreKeyId(i):null;c=d("WASignalKeys").castToPreKeyId(j);g=new Uint8Array(a)}catch(a){return d("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}l=k(g);return!l.success?l:d("WAResultOrError").makeResult(babelHelpers["extends"]({},l.value,{remote:b,sessionBaseKey:f,localSignedPreKeyId:c,localOneTimeKeyId:e}))}function m(a,c){var e,f,g,h,j,k,l,m,o,p,q,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;return b("regeneratorRuntime").async(function(I){while(1)switch(I.prev=I.next){case 0:e=c.ratchetPubKey,f=c.counter,g=c.ciphertext,h=c.versionContentMac;j=a.recvChains;k=a.recvChains.findIndex(function(a){return d("WACryptoUtils").serializedPubKeysEqual(a.ratchetPubKey,e)});if(!(k===-1)){I.next=24;break}I.next=6;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").calculateRatchet(a.rootKey,a.sendChain.ratchetKey,e));case 6:o=I.sent;p=d("WASignalSessions").makeFreshRecvChain(e,o.chainKey);I.next=10;return b("regeneratorRuntime").awrap(n(p,f));case 10:q=I.sent;if(q.success){I.next=13;break}return I.abrupt("return",q);case 13:t=q.value;u=d("WASignalKeys").makeSerializedKeyPair();I.next=17;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").calculateRatchet(o.rootKey,u,e));case 17:v=I.sent;w=j.slice(-4);w.push(t.updatedChain);m=t.msgKey;l=d("WASignalSessions").ratchetSession(a,w,d("WASignalSessions").makeFreshSendChain(u,v.chainKey),v.rootKey);I.next=34;break;case 24:I.next=26;return b("regeneratorRuntime").awrap(n(j[k],f));case 26:x=I.sent;if(x.success){I.next=29;break}return I.abrupt("return",x);case 29:y=x.value,z=j.slice(),z[k]=y.updatedChain,m=y.msgKey,l=d("WASignalSessions").updateChains(a,z,a.sendChain);case 34:I.next=36;return b("regeneratorRuntime").awrap(s(m));case 36:A=I.sent;B=A.cipherKey;C=A.macKey;D=d("WABinary").Binary.build(a.remote.pubKey,a.local.pubKey,h.subarray(0,-i)).readByteArray();I.next=42;return b("regeneratorRuntime").awrap(r(C,D));case 42:E=I.sent;F=h.subarray(-i);G=!d("WACryptoUtils").uint8ArraysEqual(new Uint8Array(E,0,i),F);H=null;I.prev=46;I.next=49;return b("regeneratorRuntime").awrap(self.crypto.subtle.decrypt({name:"AES-CBC",iv:m.iv},B,g));case 49:H=I.sent;I.next=54;break;case 52:I.prev=52,I.t0=I["catch"](46);case 54:if(!(G&&H==null)){I.next=58;break}if(!(k===-1)){I.next=57;break}return I.abrupt("return",d("WAResultOrError").makeError("errInvalidMacInvalidCipherKeyNewChain"));case 57:return I.abrupt("return",d("WAResultOrError").makeError("errInvalidMacInvalidCipherKey"));case 58:if(!G){I.next=60;break}return I.abrupt("return",d("WAResultOrError").makeError("errInvalidMacWithDecryptedPlaintext"));case 60:if(!(H==null)){I.next=62;break}return I.abrupt("return",d("WAResultOrError").makeError("errUnknownInvalidCipherKey"));case 62:return I.abrupt("return",d("WAResultOrError").makeResult([l,H]));case 63:case"end":return I.stop()}},null,this,[[46,52]])}function n(a,c){var e,f,g,h,i,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:e=c-a.nextMsgIndex;if(!(e>2e3)){r.next=3;break}return r.abrupt("return",d("WAResultOrError").makeError("errSignalTooManyMessagesInFuture"));case 3:f=a.unusedMsgKeys;if(!(e<0)){r.next=9;break}g=f.findIndex(function(a){return a.index===c});if(!(g===-1)){r.next=8;break}return r.abrupt("return",d("WAResultOrError").makeError("errDuplicateMsg"));case 8:return r.abrupt("return",d("WAResultOrError").makeResult({msgKey:f[g],updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,a.nextMsgIndex,a.chainKey,q(f,g))}));case 9:h=a.nextMsgIndex;r.next=12;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(h,a.chainKey));case 12:i=r.sent;k=i[0];l=i[1];m=null;if(!(e>0)){r.next=30;break}n=e+f.length-j;n>0?(m=f.slice(n),n-=f.length):m=f.slice();o=h+1;case 20:if(!(o<=c)){r.next=30;break}n>0?n--:m.push(l);r.next=24;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(o,k));case 24:p=r.sent,k=p[0],l=p[1];case 27:o++;r.next=20;break;case 30:return r.abrupt("return",d("WAResultOrError").makeResult({msgKey:l,updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,c+1,k,m||f)}));case 31:case"end":return r.stop()}},null,this)}function o(a,b,c){if(a.length<1)return d("WAResultOrError").makeError("errSignalEmptyVersionContentSuffix");var e=a[0]>>>4;if(e!==b)return e<b?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");e=a.length-c;return e<1?d("WAResultOrError").makeError("errSignalContentExceededExpectedLength"):d("WAResultOrError").makeResult(a.subarray(1,e))}function p(a,b){return(a<<4|b)&255}function q(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}function r(a,b){return self.crypto.subtle.sign(d("WASignalOther").HMAC_SHA256,a,b)}function s(a){return b("Promise").all([d("WASignalOther").makeCryptoKey(a.cipherKey,"aes-cbc"),d("WASignalOther").makeCryptoKey(a.macKey,"hmac-sha256")]).then(function(a){var b=a[0];a=a[1];return{cipherKey:b,macKey:a}})}function t(a,b){a=a.aliceBaseKey;return!a?!1:d("WACryptoUtils").serializedPubKeysEqual(a,b)}g.MAX_UNUSED_KEYS=j;g.encryptMsg=a;g.decryptMsg=c;g.findMatchingSession=e;g.decryptPkMsgWithNewSession=f;g.deserializeMsg=k;g.deserializePkMsg=l;g.decryptMsgFromSession=m;g.readContent=o;g.versionByte=p}),98);
__d("WASignalGroupCipher",["WABinary","WALogger","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","decodeProtobuf","encodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Exception caught during SenderKeyMessageSpec Proto: ",""]);h=function(){return a};return a}var i=64;function a(a,c){var e,f,g,h,i,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:e=j(a);if(e.success){m.next=3;break}return m.abrupt("return",e);case 3:f=e.value,g=f.senderKeyId,h=f.iteration,i=f.signingKeyPublic,k=f.chainKey;m.next=6;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSenderKeySessionIncoming(g,h,i,k,c));case 6:l=m.sent;return m.abrupt("return",d("WAResultOrError").makeResult(l));case 8:case"end":return m.stop()}},null,this)}function c(a){a=d("WASignalGroupSession").serializeSenderKeyState(a);var b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,{id:a.senderKeyId,iteration:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").iteration,chainKey:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").seed,signingKey:d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey")["public"]},b);a=b.readByteArray();return a}function e(a,c){var e,f,g,h,i,j,k,m,n,o,p,q,r,s,t;return b("regeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:if(!(!a.senderKeyStates||a.senderKeyStates.length===0)){u.next=2;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 2:e=a.senderKeyStates[a.senderKeyStates.length-1];u.next=5;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveSenderKeyMsgKey(e.senderKeyChainKey.nextMsgIndex,e.senderKeyChainKey.chainKey));case 5:f=u.sent;g=f[0];h=f[1];u.next=10;return b("regeneratorRuntime").awrap(l(h.seed));case 10:i=u.sent;j=i[0];k=i[1];u.next=15;return b("regeneratorRuntime").awrap(self.crypto.subtle.encrypt({name:"AES-CBC",iv:k},j,c));case 15:m=u.sent;n=new(d("WABinary").Binary)();d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,{id:e.senderKeyId,iteration:h.iteration,ciphertext:m},n);o=new(d("WABinary").Binary)();o.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));o.writeBinary(n);p=d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalSessions").definedOrThrow(e.senderSigningKeyPrivate,"senderSigningKeyPrivate"),e.senderSigningKeyPublic);q=d("WASignalSignatures").signSenderKeyMessage(p,o.readByteArray());r=new(d("WABinary").Binary)();r.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));r.writeBinary(n);r.writeByteArray(q);s=d("WASignalGroupSession").makeSenderKeyChainKey(h.iteration+1,g);t=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,d("WASignalGroupSession").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,s,e.senderKeyId,e.unusedMsgKeys));return u.abrupt("return",d("WAResultOrError").makeResult([t,r.readByteArray()]));case 30:case"end":return u.stop()}},null,this)}function f(a,c){var e,f,g,h,i,j,k,o,p,q,r,s,t,u,v;return b("regeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:e=c.senderKeyMessageId,f=c.iteration,g=c.ciphertext,h=c.versionContentMac;i=d("WASignalGroupSession").findSenderKeyState(a,e);if(!(i==null)){w.next=4;break}return w.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 4:j=i.senderSigningKeyPublic;w.next=7;return b("regeneratorRuntime").awrap(m(h,j));case 7:k=w.sent;if(k){w.next=10;break}return w.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 10:w.next=12;return b("regeneratorRuntime").awrap(n(i,f));case 12:o=w.sent;if(o.success){w.next=15;break}return w.abrupt("return",o);case 15:p=o.value;q=p.msgKey;r=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,p.updatedSenderKeyState);w.next=20;return b("regeneratorRuntime").awrap(l(q.seed));case 20:s=w.sent;t=s[0];u=s[1];w.next=25;return b("regeneratorRuntime").awrap(self.crypto.subtle.decrypt({name:"AES-CBC",iv:u},t,g));case 25:v=w.sent;return w.abrupt("return",d("WAResultOrError").makeResult([r,v]));case 27:case"end":return w.stop()}},null,this)}function j(a){var b,c,e,f;try{a=d("WASignalCipher").readContent(a,d("WASignalGroupSession").FORMAT_VERSION,0);if(!a.success)return a;a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,a.value);b=a.id;c=a.iteration;var g=d("WASignalSessions").bytesOrThrow(a.signingKey,33,"signingKey");e=d("WASignalKeys").castToSerializedPubKey(g);f=d("WASignalSessions").bytesOrThrow(a.chainKey,32,"chainKey");if(b==null||c==null)return d("WAResultOrError").makeError("errSignalGrpInvalidProtoFormat")}catch(a){return d("WAResultOrError").makeError("errSignalGrpInvalidKeyFormat")}return d("WAResultOrError").makeResult({senderKeyId:b,iteration:c,signingKeyPublic:e,chainKey:f})}function k(a){if(a.length<1)return d("WAResultOrError").makeError("errSignalGrpVersionContentEmpty");var b=a[0]>>>4;if(b!==d("WASignalGroupSession").FORMAT_VERSION)return b<d("WASignalGroupSession").FORMAT_VERSION?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");if(a.length<1+i)return d("WAResultOrError").makeError("errSignalGrpInvalidVersionContentLength");var c,e,f;try{b=a.subarray(1,-i);b=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,b);c=b.id;e=b.iteration;f=b.ciphertext;if(c==null||e==null||f==null)return d("WAResultOrError").makeError("errSignalGrpSenderKeyInvalidProtoFormat")}catch(a){d("WALogger").ERROR(h(),a);return d("WAResultOrError").makeError("errSignalGrpSenderKeyProtoError")}return d("WAResultOrError").makeResult({senderKeyMessageId:c,iteration:e,ciphertext:new Uint8Array(f),versionContentMac:a})}function l(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=new(d("WABinary").Binary)(a);e=d("WASignalOther").readBytes(c,16);f=d("WASignalOther").readBytes(c,32);g.next=5;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(f,"aes-cbc"));case 5:g.t0=g.sent;g.t1=e;return g.abrupt("return",[g.t0,g.t1]);case 8:case"end":return g.stop()}},null,this)}function m(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:e=a.subarray(a.length-i);f=a.subarray(0,a.length-i);h.next=4;return b("regeneratorRuntime").awrap(d("WASignalSignatures").verifyMsgSignalVariant(c,f,d("WASignalOther").toBytes(d("WASignalOther").toBuffer(e),64)));case 4:g=h.sent;return h.abrupt("return",g);case 6:case"end":return h.stop()}},null,this)}function n(a,c){var e,f,g,h,i,j,k,l,m,n,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:e=a;f=c-e.senderKeyChainKey.nextMsgIndex;if(!(f>2e3)){r.next=4;break}return r.abrupt("return",d("WAResultOrError").makeError("errSignalGrpTooManyMessagesInFuture"));case 4:g=a.unusedMsgKeys||[];if(!(f<0)){r.next=10;break}h=g.findIndex(function(a){return a.iteration===c});if(!(h===-1)){r.next=9;break}return r.abrupt("return",d("WAResultOrError").makeError("errDuplicateMsg"));case 9:return r.abrupt("return",d("WAResultOrError").makeResult({msgKey:g[h],updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,e.senderKeyChainKey,e.senderKeyId,o(g,h))}));case 10:i=e.senderKeyChainKey.nextMsgIndex;r.next=13;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveSenderKeyMsgKey(i,e.senderKeyChainKey.chainKey));case 13:j=r.sent;k=j[0];l=j[1];m=null;if(!(f>0)){r.next=31;break}n=f+g.length-d("WASignalCipher").MAX_UNUSED_KEYS;n>0?(m=g.slice(n),n-=g.length):m=g.slice();p=i+1;case 21:if(!(p<=c)){r.next=31;break}n>0?n--:m.push(l);r.next=25;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveSenderKeyMsgKey(p,k));case 25:q=r.sent,k=q[0],l=q[1];case 28:p++;r.next=21;break;case 31:return r.abrupt("return",d("WAResultOrError").makeResult({msgKey:l,updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,d("WASignalGroupSession").makeSenderKeyChainKey(c+1,k),a.senderKeyId,m||g)}));case 32:case"end":return r.stop()}},null,this)}function o(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}g.processSenderKeyDistributionMsg=a;g.createSenderKeyDistributionProto=c;g.encryptSenderKeyMsgWithSession=e;g.decryptSenderKeyMsgFromSession=f;g.deserializeSenderKeyMsg=k}),98);
__d("WACryptoLibrary",["WACryptoUtils","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSessionForRecipient pkmsg signature verification result: ",""]);h=function(){return a};return a}var i=5;function j(a,c){var e,f,g,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=o(c);f=e.signedKey;j.next=4;return b("regeneratorRuntime").awrap(d("WASignalSignatures").verifyMsgSignalVariant(e.identity,f.publicKey,f.signature));case 4:g=j.sent;d("WALogger").DEV(h(),g);if(g){j.next=8;break}return j.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 8:j.next=10;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSessionOutgoing(a,e,d("WASignalKeys").makeKeyPair()));case 10:i=j.sent;return j.abrupt("return",d("WAResultOrError").makeResult(i));case 12:case"end":return j.stop()}},null,this)}function a(a,c,e,f,g){var h,i,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:h=a.handleNewSessionIfMatches;n.next=3;return b("regeneratorRuntime").awrap(j(c,f));case 3:i=n.sent;if(i.success){n.next=6;break}return n.abrupt("return",i);case 6:k=null;l=i.value;n.next=10;return b("regeneratorRuntime").awrap(h(e,k,l,l.remote.pubKey,null,g));case 10:m=n.sent;if(!(m.success===!1&&m.error==="errSignalInvalidKey")){n.next=15;break}return n.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 15:if(!(m.success===!1)){n.next=17;break}return n.abrupt("return",d("WAResultOrError").makeError("errSessionExists"));case 17:return n.abrupt("return",m);case 18:case"end":return n.stop()}},null,this)}function c(a,c,e,f){var g,h,i,j,k,l,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:(g=a.loadSession,h=a.handleNewSessionIfMatches),i=null;case 2:r.next=4;return b("regeneratorRuntime").awrap(g(c));case 4:k=r.sent;if(!(k==null)){r.next=7;break}return r.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 7:l=k.session;if(!(f!=null&&!d("WACryptoUtils").uint8ArraysEqual(f,l.remote.pubKey))){r.next=10;break}return r.abrupt("return",d("WAResultOrError").makeError("identity-mismatch"));case 10:m=k.hash;r.next=13;return b("regeneratorRuntime").awrap(d("WASignalCipher").encryptMsg(l,e));case 13:n=r.sent;o=n[0];p=n[1];r.next=18;return b("regeneratorRuntime").awrap(h(c,(j=m)!=null?j:null,o,o.remote.pubKey));case 18:q=r.sent,q.success?i=d("WAResultOrError").makeResult(babelHelpers["extends"]({},p,{baseKey:o.aliceBaseKey})):q.error;case 20:if(i==null){r.next=2;break}case 21:return r.abrupt("return",i);case 22:case"end":return r.stop()}},null,this)}function e(a,c,e,f,g){var h,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;return b("regeneratorRuntime").async(function(H){while(1)switch(H.prev=H.next){case 0:(h=a.loadSession,j=a.handleNewSessionIfMatches,l=a.loadSignedPreKey,m=a.loadOneTimePreKey),n=!1,o=null,p=0;case 4:p++;H.next=7;return b("regeneratorRuntime").awrap(h(e));case 7:r=H.sent;s=r==null?void 0:r.hash;t=r?r.session:null;u=void 0;if(!(f.type==="pkmsg")){H.next=24;break}v=d("WASignalCipher").deserializePkMsg(f.ciphertext);if(v.success){H.next=15;break}return H.abrupt("return",d("WAResultOrError").makeError("errCryptoDeserialization"));case 15:w=v.value;H.next=18;return b("regeneratorRuntime").awrap(k({loadSignedPreKey:l,loadOneTimePreKey:m},c,w,t));case 18:x=H.sent;if(x.success){H.next=21;break}return H.abrupt("return",x);case 21:u=x.value;H.next=35;break;case 24:f.type;y=d("WASignalCipher").deserializeMsg(f.ciphertext);if(y.success){H.next=28;break}return H.abrupt("return",d("WAResultOrError").makeError("errCryptoDeserialization"));case 28:z=y.value;H.next=31;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptMsg(t,z));case 31:A=H.sent;if(A.success){H.next=34;break}return H.abrupt("return",A);case 34:u=A.value;case 35:B=u,C=B.newSessionInfo;if(!(C&&(C.newIdentity!=null||C.usedPreKey!=null))){H.next=43;break}H.next=39;return b("regeneratorRuntime").awrap(j(e,(D=s)!=null?D:null,C.baseSession,C.newIdentity,C.usedPreKey));case 39:E=H.sent;if(E.success){H.next=43;break}E.error;return H.abrupt("continue",52);case 43:if(n){H.next=48;break}F=C==null?void 0:C.baseSession.remote.pubKey;H.next=47;return b("regeneratorRuntime").awrap(g(new Uint8Array(u.plaintext),F));case 47:n=!0;case 48:H.next=50;return b("regeneratorRuntime").awrap(j(e,(q=s)!=null?q:null,u.updatedSession,u.updatedSession.remote.pubKey));case 50:G=H.sent,G.success?o=G:G.error;case 52:if(o==null&&p<=i){H.next=4;break}case 53:if(!(o==null)){H.next=55;break}return H.abrupt("return",d("WAResultOrError").makeError("errTooManySessionSaveRetries"));case 55:return H.abrupt("return",d("WAResultOrError").makeResult({attempts:p}));case 56:case"end":return H.stop()}},null,this)}function k(a,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return b("regeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:g=a.loadSignedPreKey,h=a.loadOneTimePreKey;i=f&&d("WASignalCipher").findMatchingSession(f,e.sessionBaseKey);if(!i){w.next=12;break}w.next=5;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptMsgFromSession(i,e));case 5:j=w.sent;if(j.success){w.next=8;break}return w.abrupt("return",j);case 8:k=j.value,l=k[0],m=k[1];return w.abrupt("return",d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:l,plaintext:m}));case 12:n=e.localOneTimeKeyId;w.next=15;return b("regeneratorRuntime").awrap(g(e.localSignedPreKeyId));case 15:o=w.sent;if(!(n==null)){w.next=20;break}w.t0=null;w.next=23;break;case 20:w.next=22;return b("regeneratorRuntime").awrap(h(n));case 22:w.t0=w.sent;case 23:p=w.t0;w.next=26;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptPkMsgWithNewSession(c,f,e,{localSignedPreKey:o,localOneTimeKey:p}));case 26:q=w.sent;if(q.success){w.next=29;break}return w.abrupt("return",q);case 29:r=q.value,s=r.newIdentity,t=r.baseSession,u=r.updatedSession,v=r.plaintext;return w.abrupt("return",d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:s,baseSession:t,usedPreKey:n},updatedSession:u,plaintext:v}));case 31:case"end":return w.stop()}},null,this)}function f(a,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:(g=a.loadSenderKeySession,h=a.saveSenderKeySessionIfMatches),i=null;case 2:t.next=4;return b("regeneratorRuntime").awrap(g(c,e));case 4:j=t.sent;if(j.success){t.next=7;break}return t.abrupt("return",d("WAResultOrError").makeError(j.error));case 7:k=j.value,l=k.hash,m=k.session;t.next=10;return b("regeneratorRuntime").awrap(d("WASignalGroupCipher").encryptSenderKeyMsgWithSession(m,f));case 10:n=t.sent;if(!n.success){t.next=19;break}o=n.value,p=o[0],q=o[1];t.next=15;return b("regeneratorRuntime").awrap(h(c,e,l,p));case 15:r=t.sent;r.success?(s=m.senderKeyStates[m.senderKeyStates.length-1],i=d("WAResultOrError").makeResult({ciphertext:{ciphertext:q,type:"skmsg"},senderKeyId:s.senderKeyId,senderKeyDistributionProto:d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(s))})):r.error;t.next=20;break;case 19:return t.abrupt("return",d("WAResultOrError").makeError("sender-key-no-session"));case 20:if(i==null){t.next=2;break}case 21:return t.abrupt("return",i);case 22:case"end":return t.stop()}},null,this)}function l(a,c,e,f,g){var h,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:(h=a.loadSenderKeySession,j=a.saveSenderKeySessionIfMatches),k=!1,l=null,m=0;case 4:m++;x.next=7;return b("regeneratorRuntime").awrap(h(c,e));case 7:n=x.sent;if(n.success){x.next=10;break}return x.abrupt("return",d("WAResultOrError").makeError(n.error));case 10:o=d("WASignalGroupCipher").deserializeSenderKeyMsg(f);if(o.success){x.next=13;break}return x.abrupt("return",d("WAResultOrError").makeError("errCryptoDeserialization"));case 13:p=n.value,q=p.hash,r=p.session;x.next=16;return b("regeneratorRuntime").awrap(d("WASignalGroupCipher").decryptSenderKeyMsgFromSession(r,o.value));case 16:s=x.sent;if(s.success){x.next=19;break}return x.abrupt("return",s);case 19:t=s.value,u=t[0],v=t[1];if(k){x.next=24;break}x.next=23;return b("regeneratorRuntime").awrap(g(new Uint8Array(v)));case 23:k=!0;case 24:x.next=26;return b("regeneratorRuntime").awrap(j(c,e,q,u));case 26:w=x.sent,w.success?l=d("WAResultOrError").makeResult({}):w.error;case 28:if(l==null&&m<=i){x.next=4;break}case 29:if(!(l==null)){x.next=31;break}return x.abrupt("return",d("WAResultOrError").makeError("errTooManySessionSaveRetries"));case 31:return x.abrupt("return",d("WAResultOrError").makeResult({attempts:m}));case 32:case"end":return x.stop()}},null,this)}function m(c,e,f,g){var a,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:a=c.saveSenderKeySession;j.next=3;return b("regeneratorRuntime").awrap(d("WASignalGroupCipher").processSenderKeyDistributionMsg(g));case 3:h=j.sent;if(h.success){j.next=6;break}return j.abrupt("return",h);case 6:i=h.value;j.next=9;return b("regeneratorRuntime").awrap(a(e,f,i));case 9:return j.abrupt("return",d("WAResultOrError").makeResult());case 10:case"end":return j.stop()}},null,this)}function n(c,e,f,g){var a,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:a=c.saveSenderKeySession;j.next=3;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSenderKeySessionOutgoing(g));case 3:h=j.sent;i=h.senderKeyStates[0].senderKeyId;j.next=7;return b("regeneratorRuntime").awrap(a(e,f,h));case 7:return j.abrupt("return",{senderKeyId:i});case 8:case"end":return j.stop()}},null,this)}function o(a){var b=a.regId,c=a.identity,e=a.signedKey;a=a.oneTimeKey;var f=d("WASignalKeys").castToSerializedPubKey(e.publicKey);return{regId:d("WASignalOther").castRegistrationId(b),identity:d("WASignalKeys").castToSerializedPubKey(c),signedKey:{id:d("WASignalKeys").castToPreKeyId(e.id),publicKey:f,signature:d("WASignalOther").ensureSize(e.signature,64)},oneTimeKey:a&&{id:d("WASignalKeys").castToPreKeyId(a.id),publicKey:d("WASignalKeys").castToSerializedPubKey(a.publicKey)},ratchetKey:f}}g.MAX_SAVE_SIGNAL_KEYS_RETRIES=i;g.createOutgoingSession=j;g.establishOutgoingSession=a;g.encryptContent=c;g.decryptContent=e;g.encryptGroupContent=f;g.decryptGroupContent=l;g.saveSenderKeySession=m;g.rotateGroupSenderKey=n}),98);
__d("WAResolvable",["Promise"],(function(a,b,c,d,e,f){a=function(){function a(){var a=this;this.$2=!1;this.promise=new(b("Promise"))(function(b){a.$1=b})}var c=a.prototype;c.resolve=function(a){this.$2=!0,this.$1(a)};c.reject=function(a){this.resolve(b("Promise").reject(a))};c.resolveWasCalled=function(){return this.$2};return a}();f.Resolvable=a}),66);
__d("WACryptoManager",["Promise","WABaseGlobals","WACryptoLibrary","WACryptoUtils","WALogger","WAPromiseQueue","WAResolvable","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","WASignalSessions","WASignalSignatures","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] end encryption"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] start encryption"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] sendWrittenMsg bulkEncryptContent"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Failed to create a session"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Received keys ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sessions] fail during key requesting"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Missing sessions: ",". Requesting keys"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sessions] No need to establish outgoing sessions"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Establish outgoing sessions"]);p=function(){return a};return a}var q={type:"default"};function a(a){return{regInfo:a.regInfo,sessionLocks:new(d("WAPromiseQueue").PromiseQueueMap)(),network:a.network,storage:a.storage}}function r(a,c,e){var f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.loadSession;return a(c).then(function(a){return d("WAResultOrError").makeResult(a)})}));case 2:g=n.sent;if(!(g.success===!0&&g.value!=null&&e.type!=="requestNewSession")){n.next=13;break}h=g.value,i=h.session,j=h.hash;if(!(e.type==="default")){n.next=9;break}return n.abrupt("return",d("WAResultOrError").makeResult({hash:j,session:i}));case 9:if(!(i.aliceBaseKey!=null&&e.session.baseKey!=null)){n.next=13;break}e.type;if(d("WACryptoUtils").uint8ArraysEqual(e.session.baseKey,i.aliceBaseKey)){n.next=13;break}return n.abrupt("return",d("WAResultOrError").makeResult({hash:j,session:i}));case 13:if(!(e.type==="useSession")){n.next=17;break}k=e.session.keys;n.next=25;break;case 17:e.type;n.next=20;return b("regeneratorRuntime").awrap(a.network.requestKeys(c));case 20:l=n.sent;if(l.success){n.next=23;break}return n.abrupt("return",l);case 23:k=l.value.keys,e.type==="compareTSAndUseSession"&&e.session.timestamp>=l.value.timestamp&&(k=e.session.keys);case 25:n.next=27;return b("regeneratorRuntime").awrap(d("WACryptoLibrary").createOutgoingSession(a.regInfo,k));case 27:m=n.sent;if(m.success){n.next=30;break}return n.abrupt("return",m);case 30:return n.abrupt("return",d("WAResultOrError").makeResult({hash:(f=g.value)==null?void 0:f.hash,session:m.value}));case 31:case"end":return n.stop()}},null,this)}function c(a,b,c,e){return a.storage.runStorageCallback(function(f){f=f.handleNewSessionIfMatches;return d("WACryptoLibrary").establishOutgoingSession({handleNewSessionIfMatches:f},a.regInfo,b,c,e)})}function s(a,c){var e,f,g,h,i,j,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:d("WALogger").DEV(p());x.next=3;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.loadSessions;return a(c).then(function(a){return d("WAResultOrError").makeResult(a)})}));case 3:e=x.sent;f=e.success===!0?e.value:new Map();g=c.filter(function(a){return!f.has(a)});if(!(g.length===0)){x.next=9;break}d("WALogger").DEV(o());return x.abrupt("return",f);case 9:d("WALogger").DEV(n(),g.length);x.next=12;return b("regeneratorRuntime").awrap(a.network.bulkRequestKeys(g));case 12:h=x.sent;if(h.success){x.next=16;break}d("WALogger").ERROR(m());return x.abrupt("return",f);case 16:i=h.value,d("WALogger").DEV(l(),i.size),(j=i.entries(),q=Array.isArray(j),r=0,j=q?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 19:if(!q){x.next=25;break}if(!(r>=j.length)){x.next=22;break}return x.abrupt("break",38);case 22:s=j[r++];x.next=29;break;case 25:r=j.next();if(!r.done){x.next=28;break}return x.abrupt("break",38);case 28:s=r.value;case 29:t=s;u=t[0];v=t[1];x.next=34;return b("regeneratorRuntime").awrap(d("WACryptoLibrary").createOutgoingSession(a.regInfo,v.keys));case 34:w=x.sent,w.success===!1?d("WALogger").ERROR(k()):f.set(u,{session:w.value});case 36:x.next=19;break;case 38:return x.abrupt("return",f);case 39:case"end":return x.stop()}},null,this)}function t(a,c,e){var f=new(d("WAResolvable").Resolvable)(),g=new Array(c.length),h=function(b){var d=c[b];g[b]=a.sessionLocks.wait(d).then(function(){a.sessionLocks.enqueueHandlers(d,f.promise)})};for(var i=0;i<c.length;i++)h(i);return b("Promise").all(g).then(e)["finally"](function(){return f.resolve()})}function e(a,c,e){return t(a,c,function(){var f,g,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:d("WALogger").LOG(j());l.next=3;return b("regeneratorRuntime").awrap(s(a,c));case 3:f=l.sent;g={sessionUpdate:[],identityUpdate:[],senderKeySessionUpdate:[],preKeyRemove:[]};k=new Map();d("WALogger").DEV(i());l.next=9;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){var c=a.bulkSaveSignalData;return b("Promise").all(Array.from(f.entries()).map(function(a){var c,f,h,i,j,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:c=a[0],f=a[1],h=f.hash,i=f.session;n.next=3;return b("regeneratorRuntime").awrap(d("WASignalCipher").encryptMsg(i,e));case 3:j=n.sent,l=j[0],m=j[1],k.set(c,babelHelpers["extends"]({},m,{baseKey:null})),g.sessionUpdate.push({id:c,updated:l,original:h});case 8:case"end":return n.stop()}},null,this)})).then(function(){return c(g)}).then(d("WAResultOrError").makeResult)}));case 9:d("WALogger").DEV(h());return l.abrupt("return",d("WAResultOrError").makeResult(k));case 11:case"end":return l.stop()}},null,this)})}function f(a,b,c,e,f){return a.sessionLocks.enqueue(b,function(){return a.storage.runStorageCallback(function(g){g=g.handleNewSessionIfMatches;return d("WACryptoLibrary").encryptContent({loadSession:function(b){return r(a,b,e).then(function(a){if(a.success===!0)return a.value;else return null})},handleNewSessionIfMatches:g},b,c,f)})})}function u(a,b,c,e){return a.sessionLocks.enqueue(b,function(){return a.storage.runStorageCallback(function(f){var g=f.loadSession,h=f.handleNewSessionIfMatches,i=f.loadSignedPreKey;f=f.loadOneTimePreKey;return d("WACryptoLibrary").decryptContent({loadSession:g,handleNewSessionIfMatches:h,loadSignedPreKey:i,loadOneTimePreKey:f},a.regInfo,b,c,e)})})}function v(a,c){return a.sessionLocks.enqueue(c,function(){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.loadSession;return a(c).then(function(a){return d("WAResultOrError").makeResult(a)})}));case 2:e=h.sent;if(!(e.success===!0)){h.next=5;break}return h.abrupt("return",(f=e.value)==null?void 0:(g=f.session)==null?void 0:g.remote);case 5:case"end":return h.stop()}},null,this)})}function w(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=null,e=function(){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=null;f=void 0;k.next=4;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.getLastPreKeyGenerationId;return a().then(function(a){return d("WAResultOrError").makeResult(a)})}));case 4:g=k.sent;h=g.success===!0?g.value:null;h!=null?(e=h.lastPreKeyId,f=h.lastPreKeyId+1):f=1;i=d("WASignalKeys").makePreKeys(f,1)[0];k.next=10;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.saveOneTimePreKeyIfMatches;return a(e,{keyId:i.plainObject.id,encoded:i.record})}));case 10:j=k.sent,j.success?c=i.plainObject:j.error;case 12:case"end":return k.stop()}},null,this)};case 2:f.next=4;return b("regeneratorRuntime").awrap(e());case 4:if(c==null){f.next=2;break}case 5:return f.abrupt("return",c);case 6:case"end":return f.stop()}},null,this)}function x(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=null,e=function(){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.getLastPreKeyGenerationId;return a().then(function(a){return d("WAResultOrError").makeResult(a)})}));case 2:e=k.sent;f=e.success===!0?e.value:null;g=void 0;h=void 0;f!=null?(g=f.lastGenerationId+1,h=f.lastPreKeyId+1):(g=1,h=1);i=d("WASignalKeys").makePreKeys(h,d("WABaseGlobals").getConfig().maxPrekeysToUpload());k.next=10;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.savePreKeysGenerationIfMatches;return a(f==null?void 0:f.lastGenerationId,J(g),i.map(function(a){var b=a.plainObject;a=a.record;return{keyId:b.id,encoded:a}}))}));case 10:j=k.sent,j.success?c=J(g):j.error;case 12:case"end":return k.stop()}},null,this)};case 2:f.next=4;return b("regeneratorRuntime").awrap(e());case 4:if(c==null){f.next=2;break}case 5:return f.abrupt("return",c);case 6:case"end":return f.stop()}},null,this)}function y(a){return a.storage.runStorageCallback(function(a){a=a.loadLatestSignedPreKey;return a().then(function(a){return d("WAResultOrError").makeResult(a)})}).then(function(b){if(b.success===!1)throw new Error("failed to load signed prekey");b=b.value;b=d("WASignalSignatures").deserializeSignedPreKey(b);if(b==null)throw new Error("failed to deserialize signed prekey");return z(a,b.id+1)})}function z(a,b){var c=d("WASignalSignatures").makeSignedPreKey(b,d("WATimeUtils").unixTimeMs(),a.regInfo.staticKeyPair),e=d("WASignalSignatures").serializeSignedPreKeyForPrivateStorage(c);return a.storage.runStorageCallback(function(a){a=a.saveSignedPreKeyIfNew;return a(c.id,e).then(function(a){if(a.type==="success")return d("WAResultOrError").makeResult(c);else{a.type;return d("WAResultOrError").makeResult(a.key)}})}).then(function(a){if(a.success===!1)throw new Error("Unexpected error when generateSignedPreKeyWithId: "+a.error);return a.value})}function A(a,b,c,e){return a.sessionLocks.enqueue(b,function(){return a.storage.runStorageCallback(function(a){var f=a.loadSenderKeySession;a=a.saveSenderKeySessionIfMatches;return d("WACryptoLibrary").encryptGroupContent({loadSenderKeySession:f,saveSenderKeySessionIfMatches:a},b,c,e)})})}function B(a,b,c,e,f){return a.sessionLocks.enqueue(b,function(){return a.storage.runStorageCallback(function(a){var g=a.loadSenderKeySession;a=a.saveSenderKeySessionIfMatches;return d("WACryptoLibrary").decryptGroupContent({loadSenderKeySession:g,saveSenderKeySessionIfMatches:a},b,c,e,f)})})}function C(a,b,c,e){return a.sessionLocks.enqueue(b,function(){return a.storage.runStorageCallback(function(a){a=a.saveSenderKeySession;return d("WACryptoLibrary").saveSenderKeySession({saveSenderKeySession:a},b,c,e)})})}function D(a,c,e){return a.sessionLocks.enqueue(c,function(){var f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(w(a));case 2:f=h.sent;h.next=5;return b("regeneratorRuntime").awrap(a.storage.runStorageCallback(function(a){a=a.saveSenderKeySession;return d("WACryptoLibrary").rotateGroupSenderKey({saveSenderKeySession:a},c,e,f.keyPair).then(d("WAResultOrError").makeResult)}));case 5:g=h.sent;if(!g.success){h.next=10;break}return h.abrupt("return",b("Promise").resolve(g.value));case 10:return h.abrupt("return",b("Promise").reject(g.error));case 11:case"end":return h.stop()}},null,this)})}function E(a){return b("Promise").resolve().then(function(){return{regId:d("WASignalOther").makeRegistrationId(a),staticKeyPair:d("WASignalKeys").makeKeyPair()}})}function F(a){return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,d("WASignalSessions").serializeSession(a))}function G(a){return d("WASignalOther").decodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,a,d("WASignalSessions").parseSessionFromRecord)}function H(a){return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SenderKeyRecordStructureSpec,d("WASignalGroupSession").serializeSession(a))}function I(a){return d("WASignalOther").decodeSignalProto(d("WASignalLocalStorageProtocol.pb").SenderKeyRecordStructureSpec,a,d("WASignalGroupSession").parseSessionFromRecord)}function J(a){return a}g.DEFAULT_SESSION_REQUEST=q;g.initCryptoManager=a;g.getSessionForRecipient=r;g.establishOutgoingSession=c;g.ensureSessionsExists=s;g.acquireSessionLocks=t;g.bulkEncryptContent=e;g.encryptContent=f;g.decryptContent=u;g.getParticipantInfo=v;g.generateOneTimePreKey=w;g.generatePreKeys=x;g.generateSignedPreKey=y;g.generateSignedPreKeyWithId=z;g.encryptGroupContent=A;g.decryptGroupContent=B;g.saveSenderKeySession=C;g.rotateGroupSenderKey=D;g.generateRegistrationInfo=E;g.encodeSession=F;g.decodeSession=G;g.encodeSenderKeySession=H;g.decodeSenderKeySession=I;g.castToPreKeyGenerationId=J}),98);
__d("WAPreRegistrationCrypto",["WACryptoManager","WAErr","WASignalSignatures","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,c,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WACryptoManager").generateRegistrationInfo());case 2:a=j.sent;c=a.regId;e=a.staticKeyPair;f=Date.now();j.next=8;return b("regeneratorRuntime").awrap(d("WASignalSignatures").generateSignedPreKey(1,f,e));case 8:g=j.sent;h=g.plainObject;i=g.record;return j.abrupt("return",{regId:c,identityKeyPair:e,signedPreKey:{keyId:h.id,encoded:i}});case 12:case"end":return j.stop()}},null,this)}function e(a){var b=d("WASignalSignatures").deserializeSignedPreKey(a.signedPreKey.encoded);if(b==null||b.id!==a.signedPreKey.keyId)throw c("WAErr")("Badly formatted signed prekey");return{regId:a.regId,identityPubKeyType:5,identityPubKey:a.identityKeyPair.publicKey,signedPreKey:b}}g.makeRegistrationData=a;g.serializeRegistrationData=e}),98);
__d("MAWDeviceRegistrationUtil",["CurrentUser","MAWDeviceRegistrationTypes","MAWGating.re","MessengerWebInitData","URI","WABase64","WALogger","WAPreRegistrationCrypto","err","regeneratorRuntime","uuid"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Registration fetch failed url:",". error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ICDC failed to fetch url:",". error: ",""]);i=function(){return a};return a}function j(a,b){var c=new Uint8Array(b);a=a;for(var b=b-1|0;b>=0;--b)c[b]=a&255,a=a>>>8;return c}function k(a,b,c,e,f,g,h,i,k){f=d("WABase64").encodeB64(j(f,4));g=d("WABase64").encodeB64(j(g,1));h=d("WABase64").encodeB64(h);var l=d("WABase64").encodeB64(j(i.id,3)),m=d("WABase64").encodeB64(i.keyPair.publicKey);i=d("WABase64").encodeB64(i.signature);a=new Map().set("fbid",a).set("fb_cat",b).set("app_id",c).set("device_id",e).set("e_regid",f).set("e_keytype",g).set("e_ident",h).set("e_skey_id",l).set("e_skey_val",m).set("e_skey_sig",i);if(k){b=d("WABase64").encodeB64(k.signedICDCIdentityList);c=d("WABase64").encodeB64(k.ihash);a.set("icdc_list",b).set("icdc_ts",k.ts).set("icdc_seq",k.seq).set("ihash",c)}return a}function l(a){var b=[];a.forEach(function(a,c,d){b.push(encodeURIComponent(c)+("="+encodeURIComponent(a.toString())))});return b.join("&")}function m(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.prev=0;g.next=3;return b("regeneratorRuntime").awrap(window.fetch(c,{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"}));case 3:e=g.sent;g.next=6;return b("regeneratorRuntime").awrap(e.json());case 6:f=g.sent;return g.abrupt("return",f);case 10:g.prev=10;g.t0=g["catch"](0);d("WALogger").ERROR(i(),c,g.t0);throw g.t0;case 14:case"end":return g.stop()}},null,this,[[0,10]])}function n(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(window.fetch(c,{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"}));case 2:d=f.sent;f.next=5;return b("regeneratorRuntime").awrap(d.json());case 5:e=f.sent;return f.abrupt("return",e);case 7:case"end":return f.stop()}},null,this)}function o(){var a=Number(c("CurrentUser").getAppID()),b=d("MAWDeviceRegistrationTypes").ICDC_ENDPOINT;(a===1217981644879628||a===936619743392459)&&(b=d("MAWDeviceRegistrationTypes").IGD_ICDC_ENDPOINT);a=new(c("URI"))(b);return a.toString()}function p(a){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=o();g.next=3;return b("regeneratorRuntime").awrap(m(a,e));case 3:f=g.sent;if(!(f==null)){g.next=6;break}throw c("err")(d("MAWDeviceRegistrationTypes").NULL_RESPONSE_FROM_SERVER);case 6:if(!(f.status!==200)){g.next=8;break}throw c("err")("WA Server returned status code "+f.status+" while attempting device registration");case 8:return g.abrupt("return",f);case 9:case"end":return g.stop()}},null,this)}function q(){var a=Number(c("CurrentUser").getAppID()),b=d("MAWDeviceRegistrationTypes").REGISTRATION_ENDPOINT;(a===1217981644879628||a===936619743392459)&&(b=d("MAWDeviceRegistrationTypes").IGD_REGISTRATION_ENDPOINT);a=new(c("URI"))(b);return a.toString()}function r(a){var e,f,g,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:f=q();k.prev=1;k.next=4;return b("regeneratorRuntime").awrap(n(a,f));case 4:g=k.sent;k.next=11;break;case 7:k.prev=7;k.t0=k["catch"](1);d("WALogger").ERROR(h(),f,k.t0);throw k.t0;case 11:if(!(g==null)){k.next=13;break}throw c("err")(d("MAWDeviceRegistrationTypes").NULL_RESPONSE_FROM_SERVER);case 13:if(!(g.wa_device_id==null||g.status!==200)){k.next=17;break}i=g.message!=null?': "'+g.message+'"':"";j="WA Server returned status code "+g.status+i+" while attempting device registration";throw c("err")(j);case 17:if(!(typeof g.wa_device_id!=="number")){k.next=19;break}throw c("err")("Device ID from WA Server was not a number");case 19:return k.abrupt("return",{deviceId:g.wa_device_id,icdcSuccess:(e=g.icdc_success)!=null?e:!1});case 20:case"end":return k.stop()}},null,this,[[1,7]])}function a(a,b,c,d){a=new Map().set("fbid",a).set("fb_cat",b).set("app_id",c).set("device_id",d);b=l(a);return p(b)}function e(a,b,c,d,e,f,g,h,i){a=k(a,b,c,d,e,f,g,h,i);b=l(a);return r(b)}function f(){var a,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a=!1;e=c("MessengerWebInitData").sessionId!=null&&!a?c("MessengerWebInitData").sessionId:c("uuid")();g.next=5;return b("regeneratorRuntime").awrap(d("WAPreRegistrationCrypto").makeRegistrationData());case 5:f=g.sent;return g.abrupt("return",{deviceUUID:e,lastSignedPrekeyId:f.signedPreKey.keyId,signalRegInfo:f});case 7:case"end":return g.stop()}},null,this)}g.getRegistrationEndpoint=q;g.fetchICDC=a;g.register=e;g.createNewRegistrationMeta=f}),98);
__d("MAWLoadRecentParticipantsApi",["MAWIndexedDb","MAWLLAMigrationUtils","MAWTransactionMode","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor.apply(void 0,[{threads:d("MAWTransactionMode").READONLY}].concat(d("MAWLLAMigrationUtils").getTransactorQPLParam("loadRecentParticipants",!1)))(function(a,b,c){return a.threads.orderBy("threadOrder").filter(function(a){return d("WAJids").interpretAsGroupJid(a.jid)==null}).reverse().limit(b).toArray().then(function(a){var b=[];a.forEach(function(a){a=d("WAJids").interpretAsUserJid(a.jid);a!=null&&a!==c&&b.push(a)});return new Set(b)})});g.loadRecentParticipants=a}),98);
__d("WAArmadilloICDC.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);a.internalSpec={seq:[1,d("WAProtoConst").TYPES.INT32],timestamp:[2,d("WAProtoConst").TYPES.INT64],devices:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.BYTES],signingDeviceIndex:[4,d("WAProtoConst").TYPES.INT32]};b.internalSpec={details:[1,d("WAProtoConst").TYPES.BYTES],signature:[2,d("WAProtoConst").TYPES.BYTES]};g.ICDCIdentityListSpec=a;g.SignedICDCIdentityListSpec=b}),98);
__d("WAIdentityUtils",["WABinary","WASignalOther"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.length===33&&a[0]===5;return b?a.slice(1):a}function i(a,b){for(var c=0;c<a.length&&c<b.length;++c)if(a[c]!==b[c])return a[c]-b[c];return a.length-b.length}function a(a){a=a.map(function(a){return h(a)});var b=new(d("WABinary").Binary)();a.sort(i).forEach(function(a){return b.writeByteArray(a)});a=self.crypto.subtle.digest("SHA-256",b.readByteArray());return a.then(function(a){a=new Uint8Array(a);return d("WASignalOther").sliceBytes(a,0,10)})}g.removeKeyTypeIfNeeded=h;g.computeIdentitiesHash=a}),98);
__d("WAICDCUtils",["WAArmadilloICDC.pb","WABase64","WABinary","WACryptoEd25519","WACryptoUtils","WAErr","WAIdentityUtils","WAJids","WALogger","WASignalKeys","WASignalOther","WASignalSignatures","WATimeUtils","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["signingDeviceIndex not found. This should never happen."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched missed signingDeviceIndex"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched timestamp between XML node and byte structure"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched sequence between XML node and byte structure"]);k=function(){return a};return a}function a(a,b,c,e){if(a!==e.details.seq){d("WALogger").ERROR(k());return null}if(c!==e.details.timestamp){d("WALogger").ERROR(j());return null}if(e.details.signingDeviceIndex==null){d("WALogger").ERROR(i());return null}var f=e.details.signingDeviceIndex;return{dirty:b,sequence:a,timestamp:c,signingDeviceIndex:f,devices:e.details.devices.map(function(a){return new Uint8Array(a)})}}function l(a){return a.signingDeviceIndex<0||a.signingDeviceIndex>=a.devices.length}function m(a,b){if(l(b))return null;var c=new Set(),e=new Set();b.devices.forEach(function(a){c.add(a.id),e.add(a.identity.toString())});var f=new Set(),g=new Set();a.devicesInfo.forEach(function(a){var b=d("WAJids").extractDeviceId(a.jid);a=d("WAIdentityUtils").removeKeyTypeIfNeeded(a.identity);(!c.has(b)||!e.has(a.toString()))&&(f.add(b),g.add(a.buffer))});return{seq:b.sequence,signingDevice:d("WAIdentityUtils").removeKeyTypeIfNeeded(b.devices[b.signingDeviceIndex].identity).buffer,unknownDevices:Array.from(g),unknownDeviceIds:Array.from(f)}}function b(a,b,c){var d=new Map();c.forEach(function(a){d.set(a.user,a)});c=d.get(a.user);var e=void 0;c!=null&&(e=m(a,c));var f=[],g=[];b.forEach(function(a){var b=d.get(a.user);if(b!=null){b=m(a,b);b!=null&&f.push(b)}g.push(a.user)});return{senderIdentity:(a=e)!=null?a:void 0,recipientIdentities:f,recipientUserJids:g}}function e(a,b,c){if(a==null||a.seq==null||a.signingDevice==null)return{action:"none"};else if(b==null)return{action:"error",failureTs:d("WATimeUtils").unixTime(),sync:!0};var e=a.seq,f=a.signingDevice;if(e===b.sequence){var g=new Set();c.forEach(function(a){return g.add(d("WAIdentityUtils").removeKeyTypeIfNeeded(a).toString())});e=!g.has(new Uint8Array(f).toString());b=a.unknownDevices.find(function(a){return!g.has(new Uint8Array(a).toString())})!=null;if(e||b)return{action:"error",failureTs:d("WATimeUtils").unixTime(),sync:!0}}else return{action:"error",failureTs:d("WATimeUtils").unixTime(),sync:!0};return{action:"none"}}function f(a){a=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloICDC.pb").SignedICDCIdentityListSpec,a);var b=a.signature;a=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloICDC.pb").ICDCIdentityListSpec,a.details);return{signature:b,details:a}}function n(a){return a.map(function(a){return d("WASignalKeys").serializeIdentity(new Uint8Array(d("WABase64").decodeB64UrlSafe(a)))})}function o(a,b,e){var f=d("WAIdentityUtils").removeKeyTypeIfNeeded(a.publicKey);e=e.map(function(a){return d("WAIdentityUtils").removeKeyTypeIfNeeded(a)});var g=e.findIndex(function(a){return d("WACryptoUtils").uint8ArraysEqual(a,f)});if(g===-1){d("WALogger").ERROR(h());throw c("WAErr")("signingDeviceIndex not found")}b=b==null?1:b.sequence+1;var i=d("WATimeUtils").unixTime();b={seq:b,timestamp:i,devices:e,signingDeviceIndex:g};i=d("encodeProtobuf").encodeProtobuf(d("WAArmadilloICDC.pb").ICDCIdentityListSpec,b).readBuffer();e=p(a,d("WABinary").Binary.build(i).readByteArray());g={details:i,signature:e};a=d("encodeProtobuf").encodeProtobuf(d("WAArmadilloICDC.pb").SignedICDCIdentityListSpec,g).readBuffer();return{icdcInfo:b,encodedSignedICDC:a}}function p(a,b){var c=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(c);var e=new Uint8Array(64);d("WACryptoEd25519").hashSha512(e,b,b.length);e=d("WASignalSignatures").makeSignature(a,b,c);return d("WABinary").Binary.build(e).readBuffer()}g.validateAndPrepareICDCFromNotification=a;g.isICDCIndexInvalid=l;g.computeICDCParticipantDevices=b;g.validateICDCInfo=e;g.decodeICDCInfo=f;g.base64DeviceIdentitiesToSerializedPubKeys=n;g.computeICDCInfoForUpload=o}),98);
__d("MAWDeviceRegistration",["CurrentUser","MAWClearSignalAndTempStores","MAWCryptoAuthTokenWrapper","MAWCurrentUser","MAWDbMetaTxns","MAWDeviceRegistrationActions","MAWDeviceRegistrationTypes","MAWDeviceRegistrationUtil","MAWGating.re","MAWIndexedDb","MAWJids","MAWJobDefinitions","MAWLoadRecentParticipantsApi","MAWTransactionMode","MAWUIJob","ODS","QPLUserFlow","WAICDCUtils","WAIdentityUtils","WALogger","WAPreRegistrationCrypto","WASignalKeys","WATimeUtils","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Device registration failure - ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping device registration"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crypto Auth Token was null or incomplete"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to notify "," contacts of device change"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notified "," contacts of device change"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot process ICDC payload during registration: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([""," ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Beginning device registration"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);s=function(){return a};return a}var t=!1;function u(){t||(c("QPLUserFlow").start(c("qpl")._(25302457,"311")),t=!0)}function v(){t&&c("QPLUserFlow").endFailure(c("qpl")._(25302457,"311"),"failure_during_device_registration")}function a(){t&&c("QPLUserFlow").endSuccess(c("qpl")._(25302457,"311"))}function w(a){d("WALogger").WARN(s(),a);return{message:a,registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.failed}}var x=function(a){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE,signedPrekey:d("MAWTransactionMode").READWRITE})(a)},y=function(a){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE})(a)};function z(a){var e,f,g,h,i,j,k,s,t,u,v,z,A,B,C,D,E,F,G,H,I;return b("regeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:d("WALogger").LOG(r());J.next=3;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationUtil").createNewRegistrationMeta());case 3:f=J.sent;J.next=6;return b("regeneratorRuntime").awrap(x(d("MAWDeviceRegistrationActions").saveUnsentRegistrationMeta)(f));case 6:g=d("MAWCurrentUser").getID();h=f.signalRegInfo;i=f.deviceUUID;j=d("WAPreRegistrationCrypto").serializeRegistrationData(h);k=null;s=!1;t=(e=s?1019394685547802:c("CurrentUser").getAppID())==null?void 0:e.toString();d("WALogger").WARN(q(),t,s);if(!(t==null)){J.next=17;break}return J.abrupt("return",w("appId is null, cannot register to WhatsApp"));case 17:u=null;v=null;if(!d("MAWGating.re").isICDCHTTPRegEnabled()){J.next=36;break}J.prev=20;J.next=23;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationUtil").fetchICDC(g,a,t,i));case 23:z=J.sent;A={devices:[],dirty:!0,sequence:z.icdc_seq,signingDeviceIndex:-1,timestamp:d("WATimeUtils").unixTime()};B=[].concat(d("WAICDCUtils").base64DeviceIdentitiesToSerializedPubKeys(z.device_identities));z.curr_identity_idx!=null?(C=z.curr_identity_idx,B[C]=d("WASignalKeys").serializeIdentity(j.identityPubKey)):B.push(d("WASignalKeys").serializeIdentity(j.identityPubKey));u=d("WAICDCUtils").computeICDCInfoForUpload(f.signalRegInfo.identityKeyPair,A,B);J.next=30;return b("regeneratorRuntime").awrap(d("WAIdentityUtils").computeIdentitiesHash(B));case 30:v=J.sent;J.next=36;break;case 33:J.prev=33,J.t0=J["catch"](20),d("WALogger").ERROR(p(),J.t0);case 36:D=!1;J.prev=37;J.next=40;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationUtil").register(g,a,t,i,j.regId,j.identityPubKeyType,j.identityPubKey,j.signedPreKey,u&&v?{ihash:v,seq:u.icdcInfo.seq,signedICDCIdentityList:u.encodedSignedICDC,ts:u.icdcInfo.timestamp}:null));case 40:F=J.sent;k=F==null?void 0:F.deviceId;D=(E=F==null?void 0:F.icdcSuccess)!=null?E:!1;J.next=49;break;case 45:J.prev=45;J.t1=J["catch"](37);d("WALogger").WARN(o(),J.t1);return J.abrupt("return",w(J.t1));case 49:if(!(k==null)){J.next=51;break}return J.abrupt("return",w(d("MAWDeviceRegistrationTypes").NULL_RESPONSE_FROM_SERVER));case 51:G=d("MAWJids").toUserJid(g);if(!(d("MAWGating.re").isICDCHTTPRegEnabled()&&u!=null&&D)){J.next=57;break}H=u.icdcInfo;I=function(a){return d("MAWIndexedDb").makeMsgrTransactor({contacts:d("MAWTransactionMode").READWRITE})(a)};J.next=57;return b("regeneratorRuntime").awrap(I(d("MAWDeviceRegistrationActions").saveICDC)(G,{devices:H.devices,dirty:!0,sequence:H.seq,signingDeviceIndex:H.signingDeviceIndex,timestamp:H.timestamp}));case 57:J.next=59;return b("regeneratorRuntime").awrap(y(d("MAWDeviceRegistrationActions").saveDeviceId)(k));case 59:J.next=61;return b("regeneratorRuntime").awrap(d("MAWLoadRecentParticipantsApi").loadRecentParticipants(d("MAWDeviceRegistrationTypes").MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE,G).then(function(a){return d("MAWUIJob").UIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.notifyDeviceChange(a)).then(function(){d("WALogger").LOG(n(),a.size)})["catch"](function(b){d("WALogger").LOG(m(),a.size),d("WALogger").ERROR(l(),b)})}));case 61:return J.abrupt("return",{message:d("MAWDeviceRegistrationTypes").DEVICE_SUCCESSFULLY_REGISTERED,registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.finished});case 62:case"end":return J.stop()}},null,this,[[20,33],[37,45]])}var A=d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE})(d("MAWDbMetaTxns").putCAT),B=function(a){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READONLY,signedPrekey:d("MAWTransactionMode").READONLY})(a)()};function e(){var a,c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a=d("MAWCryptoAuthTokenWrapper").getCryptoAuthToken();if(!(a==null)){e.next=4;break}d("WALogger").ERROR(k());return e.abrupt("return",{message:"Crypto Auth Token was null or incomplete",registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.failed});case 4:e.next=6;return b("regeneratorRuntime").awrap(B(d("MAWDeviceRegistrationActions").getRegistrationMeta));case 6:c=e.sent;if(!(a==null||c==null||c.deviceId==null)){e.next=14;break}e.next=10;return b("regeneratorRuntime").awrap(d("MAWClearSignalAndTempStores").clearSignalAndTempStores());case 10:e.next=12;return b("regeneratorRuntime").awrap(A(a));case 12:u();return e.abrupt("return",z(a.encrypted_serialized_cat));case 14:d("WALogger").LOG(j());return e.abrupt("return",{message:d("MAWDeviceRegistrationTypes").DEVICE_ALREADY_REGISTERED,registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.finished});case 16:case"end":return e.stop()}},null,this)}function f(a){d("ODS").bumpEntityKey(3185,"armadillo_device_registration","fail"),c("CurrentUser").isEmployee()||d("ODS").bumpEntityKey(3185,"armadillo_device_registration_non_employee_non_employee","fail"),d("WALogger").ERROR(i(),d("MAWDeviceRegistrationTypes").FAILED_REGISTRATION_RETRIES),a.forEach(function(a){d("WALogger").ERROR(h(),a)}),v()}g.endRegistrationTimerFailure=v;g.endRegistrationTimerSuccess=a;g.handleRegistrationError=w;g.setupDeviceRegistration=e;g.logDeviceRegistrationRetryFailure=f}),98);
__d("WAPromiseBackoffs",["Promise"],(function(a,b,c,d,e,f){function a(a,b){if(a===0)return 0;var c=m(b.algo);for(var d=1;d<a;d++)c();return h(b,c())}function g(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=m(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=h(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function c(a){var c=g(a);return function(a){return new(b("Promise"))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function h(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function i(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function j(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function k(a){var b=a.delay;return function(){return b}}function l(a){var b=a.toMs;a=a.backoff;var c=m(a);return function(){return b(c())}}function m(a){switch(a.type){case"fibonacci":return i(a);case"exponential":return j(a);case"constant":return k(a);case"adjust":return l(a);default:a;throw new Error("makeTimeFunc unrecognized backoff "+a.type)}}f.getDelay=a;f.createTimer=g;f.createPromiseTimer=c}),66);
__d("WAPromiseRetryLoop",["Promise","WALogger","WAPromiseBackoffs","WAPromiseDelays","WAResolvable"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: retrying "," in ","ms"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop was called several times. You may have race conditions"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: starting ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);l=function(){return a};return a}a=function(){function a(a){var b=this;this.$2=new(d("WAResolvable").Resolvable)();this.$3=null;this.$4=null;this.$5=0;this.endWithValue=function(a){b.$5++,b.$2.resolve(a)};this.$1=a}var c=a.prototype;c.resetTimeoutAfter=function(a){this.$4=Date.now()+a};c.cancelReset=function(){this.$4=null};c.reset=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(l(),this.$1.name);this.$5++;this.$6()};c.start=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(k(),this.$1.name);this.$5!==0&&d("WALogger").ERROR(j());this.$5++;this.$6()};c.$6=function(){var a=this,c=this.$1,e=this.$5,f=d("WAPromiseBackoffs").createTimer(this.$1.timer);f();var g=function b(){if(a.$2.resolveWasCalled())return;if(e!==a.$5)return;var g=Date.now();a.$3=c.code(a.endWithValue).then(function(){if(a.$2.resolveWasCalled())return;var e=c.resetDelay;(e!==void 0&&Date.now()>=g+e||a.$4!=null&&a.$4<=Date.now())&&(d("WALogger").LOG(i(),c.name),f=d("WAPromiseBackoffs").createTimer(a.$1.timer));a.$4=null;e=f();d("WALogger").LOG(h(),c.name,e);return d("WAPromiseDelays").delayMs(e).then(b)});return a.$3};this.$3=b("Promise").resolve().then(g)};c.promise=function(){var a=this;if(this.$2.resolveWasCalled())return this.$2.promise;return!this.$3?b("Promise").reject(new Error("PromiseRetryLoop "+this.$1.name+" had promise() called before start()")):b("Promise").race([this.$2.promise,this.$3.then(function(){return a.$2.promise})])};return a}();g.PromiseRetryLoop=a}),98);
__d("WARetryUtils",[],(function(a,b,c,d,e,f){a={algo:{type:"adjust",backoff:{type:"fibonacci",first:1,second:1},toMs:function(a){return 1e3*(a+9)}},max:62e4};f.FIBONACCI_BACKOFF=a}),66);
__d("MAWDeviceRegistrationInit",["CurrentUser","MAWDeviceRegistration","MAWDeviceRegistrationTypes","NetworkStatus","ODS","QPLUserFlow","WALogger","WAPromiseRetryLoop","WARetryUtils","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Registration finished, ending device registration promise retry loop"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Device Registration not attempted - user is offline"]);j=function(){return a};return a}function a(){var a=1,e=new Set(),f=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({code:function(f){var g,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(c("NetworkStatus").isOnline()){m.next=3;break}d("WALogger").WARN(j());return m.abrupt("return");case 3:if(!(a===d("MAWDeviceRegistrationTypes").MAX_DEVICE_REGISTRATION_RETRIES)){m.next=8;break}d("MAWDeviceRegistration").logDeviceRegistrationRetryFailure(e);g=d("MAWDeviceRegistration").handleRegistrationError(d("MAWDeviceRegistrationTypes").FAILED_REGISTRATION_RETRIES);f(g);return m.abrupt("return");case 8:m.prev=8;m.next=11;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistration").setupDeviceRegistration());case 11:k=m.sent;k.registrationState===d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.finished&&(k.message===d("MAWDeviceRegistrationTypes").DEVICE_SUCCESSFULLY_REGISTERED&&(d("ODS").bumpEntityKey(3185,"armadillo_device_registration","success"),c("CurrentUser").isEmployee()||d("ODS").bumpEntityKey(3185,"armadillo_device_registration_non_employee_non_employee","success"),d("MAWDeviceRegistration").endRegistrationTimerSuccess()),d("WALogger").LOG(i()),f(k));e.add(k.message);m.next=21;break;case 16:m.prev=16,m.t0=m["catch"](8),l="Uncaught device registration error - "+m.t0,d("WALogger").WARN(h(),l),e.add(""+l);case 21:a++;case 22:case"end":return m.stop()}},null,this,[[8,16]])},name:"deviceRegistration",timer:d("WARetryUtils").FIBONACCI_BACKOFF});c("QPLUserFlow").addPoint(c("qpl")._(25310776,"6155"),"device_registration_start");f.start();return f.promise()}g.initDeviceRegistration=a}),98);
__d("MAWKeychainInit",["MAWCryptoConsts","WALogger","WAPromiseRetryLoop","WAResultOrError","WARetryUtils","cr:1230","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Keychain setup finished, ending keychain setup promise retry loop"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWKeychain Setup failure: ",""]);j=function(){return a};return a}function a(){var a=0,c=new Map(),e=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({code:function(e){var f,g;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:if(!(a===d("MAWCryptoConsts").MAX_KEYCHAIN_SETUP_RETRIES)){k.next=4;break}Array(c.values()).forEach(function(a){d("WALogger").ERROR(j(),a)});e(d("WAResultOrError").makeError("keychain-setup-failure"));return k.abrupt("return");case 4:k.prev=4;k.next=7;return b("regeneratorRuntime").awrap(b("cr:1230").setupEARKeychain());case 7:f=k.sent;d("WALogger").LOG(i());e(d("WAResultOrError").makeResult(f));k.next=18;break;case 12:k.prev=12,k.t0=k["catch"](4),b("cr:1230").resetEARKeyChain(),g="Uncaught keychain setup error - "+k.t0,d("WALogger").WARN(h(),g),c.set(g,k.t0);case 18:a++;case 19:case"end":return k.stop()}},null,this,[[4,12]])},name:"EARKeychainSetup",timer:d("WARetryUtils").FIBONACCI_BACKOFF});e.start();return e.promise()}g.initSetupKeychain=a}),98);
__d("LocalStorageWrapper",["CurrentUser","WAResultOrError","isQuotaExceededError","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("PersistedQueue").__setRef("LocalStorageWrapper");function i(a){var b=null;try{b=window.localStorage;if(b!=null&&typeof b.setItem==="function"&&typeof b.removeItem==="function"){var c="__test__"+Date.now();b.setItem(c,"");b.removeItem(c)}else return null}catch(c){if(d("isQuotaExceededError").isStorageQuotaExceededError(b,c)===!1){a("Failed to get localstorage");return null}}return b}function a(a){try{a=i(a);return a!=null}catch(a){return!1}}function j(a){try{var b=0,c={};for(var d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;var e=(a[d].length+d.length)*2;b+=e;e/1024>1e3&&(c[d.substr(0,50)]=(e/1024).toFixed(2))}c.total=(b/1024).toFixed(2);return JSON.stringify(c)}catch(a){return"Can't calculate localStorage"}}function b(a,b,c,e,f){if(a==null)return d("WAResultOrError").makeError("null-storage");try{a.setItem(b,c)}catch(i){f!=null&&f(i);if(d("CurrentUser").isEmployee()){var g=j(a);h.onReady(function(a){a=a.isQueueActivateExperiment().toString();e(i+" - Storage quota exceeded while setting "+b+":"+c+", queueActivateExp:"+a+" "+g)})}else e(i+" - Storage quota exceeded while setting "+b+":"+c);return d("WAResultOrError").makeError("quota-exceeded")}return d("WAResultOrError").makeResult()}function e(a,b,c){a==null?c("not storage found"):a.removeItem(b)}function f(a,b,c){if(a==null){c("not storage found");return null}else return a.getItem(b)}g.getStorage=i;g.isLocalStorageAvailable=a;g.setItemGuarded=b;g.removeItemGuarded=e;g.getItemGuarded=f}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]);h=function(){return a};return a}function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j)}function e(a,b){a==null?d("WALogger").ERROR(h()):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("WorkerUtils",[],(function(a,b,c,d,e,f){"use strict";function b(){try{return"WorkerGlobalScope"in a&&a instanceof a.WorkerGlobalScope}catch(a){return!1}}function c(){try{return"SharedWorkerGlobalScope"in a&&a instanceof a.SharedWorkerGlobalScope}catch(a){return!1}}function d(){return"SharedWorker"in a&&typeof a.SharedWorker==="function"}f.isWorkerContext=b;f.isSharedWorkerContext=c;f.isSharedWorkerSupported=d}),66);
__d("shouldUseMAWSharedWorker",["WorkerUtils","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WorkerUtils").isSharedWorkerSupported()&&c("qex")._("1522")===!0&&c("gkx")("264")}g["default"]=a}),98);
__d("MAWInit",["MAWEBSwitch","MAWGating.re","MAWTTRC","QPLUserFlow","UserTimingUtils","gkx","performanceNow","qpl","regeneratorRuntime","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25310776,"6155"),i=!1,j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.error=null;c.name="MAWInitError";c.message=a;c.error=null;return c}var c=a.prototype;c.catching=function(a){this.error=a;return this};return a}(babelHelpers.wrapNativeSuper(Error)),k=!1;function l(){var a;if(k)return;k=!0;c("QPLUserFlow").addAnnotations(h,{bool:{armadillo_init_sync_api_improvements:c("gkx")("1115"),code_only_enabled:c("MAWGating.re").isCodeOnlyInitEnabled(),isEBEnabled:c("MAWEBSwitch").isEnabled(),isIndexedDbEarEnabled:(a=c("gkx")("334"))!=null?a:!1,useSharedWorker:c("shouldUseMAWSharedWorker")()}})}function m(a){if(i)return;l();c("QPLUserFlow").addPoint(h,a)}function a(a){l(),i=!0,c("QPLUserFlow").endFailure(h,a),k=!1}function e(){l(),i=!0,c("QPLUserFlow").endSuccess(h),d("MAWTTRC").markEvent("maw_init_end"),k=!1}function f(a,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:f=c("performanceNow")();g=a+"_start";h=a+"_end";m(g);j.next=6;return b("regeneratorRuntime").awrap(e());case 6:i=j.sent;m(h);c("gkx")("8518")&&d("UserTimingUtils").measureModern(a,{end:c("performanceNow")(),start:f});return j.abrupt("return",i);case 10:case"end":return j.stop()}},null,this)}g.MAWInitError=j;g.logPoint=m;g.fail=a;g.endSuccess=e;g.measurePerformance=f}),98);
__d("MAWCommonSetup",["CometRelay","LSPersistedDbGating","MAWBridge","MAWDeviceRegistrationInit","MAWDeviceRegistrationTypes","MAWGating.re","MAWIndexedDb","MAWInit","MAWJobDefinitions","MAWKeychainInit","MAWLocalStorage","MAWMaybeWithTimeout","MAWStateContext.react","MAWSyncState","MAWTTRC","MAWUIJob","MAWVaultMaterials","MAWWaitForBackendSetup","MWChatBadgeCountUpdates.re","Promise","QuickPerformanceLogger","WAJobOrchestratorTypes","cr:1230","cr:3088","cr:495","cr:863","cr:917","promiseDone","qpl","react","regeneratorRuntime","requireDeferred","shouldUseMAWSharedWorker","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAW Backend Setup Failed -- ",""]);h=function(){return a};return a}e=d("react");var i=e.useContext,j=e.useEffect,k=c("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),l=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetup"),m=c("requireDeferred")("MAWPushNotificationSetup").__setRef("MAWCommonSetup"),n=c("requireDeferred")("WALogger").__setRef("MAWCommonSetup"),o=1e4,p=!1;function a(a,b){var e=d("CometRelay").useRelayEnvironment(),f=i(d("MAWStateContext.react").MAWStateContext),g=f.dispatch,h=c("useReStore")();j(function(){c("promiseDone")(q(a,e,b,g,h),function(){},function(){d("MAWTTRC").fail("backend_init_fail")})},[e,a,b,g,h])}function q(a,e,f,g,i){var j,l,m;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:if(!p){o.next=2;break}return o.abrupt("return");case 2:p=!0;o.prev=3;o.next=6;return b("regeneratorRuntime").awrap(r(a,e,f,g,i));case 6:o.next=8;return b("regeneratorRuntime").awrap(d("MAWWaitForBackendSetup").backendSetupCompleteResolve());case 8:if(!(!c("MAWGating.re").isOccamadillo()&&!c("MAWGating.re").isCodeOnlyInitEnabled())){o.next=17;break}o.prev=9;o.next=12;return b("regeneratorRuntime").awrap(s(d("MWChatBadgeCountUpdates.re").minSyncedThreads));case 12:o.next=17;break;case 14:o.prev=14;o.t0=o["catch"](9);throw new(d("MAWInit").MAWInitError)("failure_during_init_sync").catching(o.t0);case 17:o.next=30;break;case 19:o.prev=19;o.t1=o["catch"](3);j=o.t1;l="failure_during_armadillo_backend_setup";j instanceof d("MAWInit").MAWInitError&&(l=j.message,j=(m=j.error)!=null?m:o.t1);d("MAWWaitForBackendSetup").backendSetupCompleteReject(o.t1);b("cr:3088")==null?void 0:b("cr:3088").issueError(i,b("cr:3088")==null?void 0:b("cr:3088").MAWGeneralErrorMsgBody,b("cr:3088")==null?void 0:b("cr:3088").MAWGeneralErrorMsgTitle,b("cr:3088")==null?void 0:b("cr:3088").MAWUserVisibleErrorPresentationType.BANNER);d("MAWInit").fail(l);n.loadImmediately(function(a){a.ERROR(h(),j)});k.loadImmediately(function(a){return a("messenger_e2ee_web").catching(j).mustfix("MAW backend setup failed")});throw j;case 30:case"end":return o.stop()}},null,this,[[3,19],[9,14]])}function r(a,e,f,g,h){var i,j,k,n,p,q,r,s,t,u;return b("regeneratorRuntime").async(function(v){while(1)switch(v.prev=v.next){case 0:i=f.getOrSetupWorker,j=f.logout,k=f.setupBridge;d("MAWInit").logPoint("setup_armadillo_backend");d("MAWTTRC").markEvent("backend_init_start");l.onReadyImmediately(function(a){a=a.setupMainWaLogger;return a()});v.next=6;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("detection_support",function(){var a=window.indexedDB!=null,c=d("MAWLocalStorage").isLocalStorageAvailable();if(!a)throw new(d("MAWInit").MAWInitError)("indexeddb_not_supported_by_browser");if(!c)throw new(d("MAWInit").MAWInitError)("localstorage_not_supported");return b("Promise").resolve()}));case 6:n=d("MAWInit").measurePerformance("setup_vault_materials",function(){if(b("cr:863")!=null&&d("LSPersistedDbGating").allTablesPersisted){b("cr:863").listenToVaultMaterialsRequestForPersistedLSDB();return b("cr:863").setupVaultForPersistedLSDB()}else return b("Promise").resolve(d("MAWVaultMaterials").initializeVaultMaterials())});v.next=9;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("acquire_mutex",function(){return c("shouldUseMAWSharedWorker")()?b("Promise").resolve(!0):b("cr:495").use().init()}));case 9:p=v.sent;if(p){v.next=12;break}throw new(d("MAWInit").MAWInitError)("maw_appmutex_no_permission");case 12:v.next=14;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("ear_db_setup",function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("make_encryption_db",function(){return b("cr:917").makeEncryptionDB(a)}));case 2:c.next=4;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("rotate_browser_encryption_meta",function(){return b("cr:1230").maybeRotateBrowserEncryptionMetaInTxn()}));case 4:return c.abrupt("return",d("MAWInit").measurePerformance("init_setup_keychain",d("MAWKeychainInit").initSetupKeychain));case 5:case"end":return c.stop()}},null,this)}));case 14:q=v.sent;if(q.success){v.next=17;break}throw new(d("MAWInit").MAWInitError)("keychain_setup_failure").catching(q.error);case 17:v.next=19;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("main_db_setup",function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(n);case 2:c.next=4;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("make_db",function(){return d("MAWIndexedDb").makeDB(a,b("cr:1230").getDbEncryptionKey)}));case 4:case"end":return c.stop()}},null,this)}));case 19:if(!c("MAWGating.re").isCodeOnlyInitEnabled()){v.next=22;break}c("QuickPerformanceLogger").markerDrop(c("qpl")._(25310776,"6155"));return v.abrupt("return");case 22:v.next=24;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationInit").initDeviceRegistration());case 24:r=v.sent;s=r.registrationState;if(!(s===d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.failed)){v.next=28;break}throw new(d("MAWInit").MAWInitError)("registration_failed");case 28:d("MAWInit").logPoint("device_registration_end");m.onReady(function(a){a=a.setupArmadilloPushNotifications;a()});v.next=32;return b("regeneratorRuntime").awrap(n);case 32:t=v.sent;v.next=35;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("setup_worker",function(){return i(a,q.value,t,h)}));case 35:u=v.sent;v.next=38;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("bridgeworker",function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(k({dispatch:g,environment:e,logout:j,worker:u}),o,function(){throw new(d("MAWInit").MAWInitError)("setup_bridge_timeout")},"setupArmadilloBridge")}));case 38:d("MAWTTRC").markEvent("backend_init_end");case 39:case"end":return v.stop()}},null,this)}var s=function(a){return d("MAWInit").measurePerformance("init_sync",function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(!d("MAWSyncState").getIsInitialSyncComplete()){c.next=2;break}return c.abrupt("return");case 2:d("MAWSyncState").setInitSyncExecuted(!0);d("MAWTTRC").markEvent("maw_init_start");c.next=6;return b("regeneratorRuntime").awrap(d("MAWBridge").getBridge().sendAndReceive("backend","initSync",{numMsgsPerThread:1,numThreads:a}));case 6:d("MAWUIJob").UIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),d("MAWSyncState").getMarkInitSyncComplete()();case 8:case"end":return c.stop()}},null,this)})};g.useArmadillo=a;g.initSync=s}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("dexie-3.2.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():typeof i==="function"&&i.amd?i(c):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(){b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return b.apply(this,arguments)};function c(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var d=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,e=Object.keys,f=Array.isArray;typeof Promise!=="undefined"&&!d.Promise&&(d.Promise=Promise);function g(a,b){if(typeof b!=="object")return a;e(b).forEach(function(c){a[c]=b[c]});return a}var h=Object.getPrototypeOf,i={}.hasOwnProperty;function j(a,b){return i.call(a,b)}function k(a,b){typeof b==="function"&&(b=b(h(a))),(typeof Reflect==="undefined"?e:Reflect.ownKeys)(b).forEach(function(c){m(a,c,b[c])})}var l=Object.defineProperty;function m(a,b,c,d){l(a,b,g(c&&j(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function n(a){return{from:function(b){a.prototype=Object.create(b.prototype);m(a.prototype,"constructor",a);return{extend:k.bind(null,a.prototype)}}}}var o=Object.getOwnPropertyDescriptor;function p(a,b){var c=o(a,b);return c||(c=h(a))&&p(c,b)}var q=[].slice;function r(a,b,c){return q.call(a,b,c)}function s(a,b){return b(a)}function t(a){if(!a)throw new Error("Assertion Failed")}function u(a){d.setImmediate?setImmediate(a):setTimeout(a,0)}function v(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function aa(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function w(a,b){if(j(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){t(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?f(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var g=a[e];(!g||!j(a,e))&&(g=a[e]={});x(g,d,c)}}else c===void 0?f(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ba(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function ca(a){var b={};for(var c in a)j(a,c)&&(b[c]=a[c]);return b}var da=[].concat;function ea(a){return da.apply([],a)}var y="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ea([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return d[a]}),fa=y.map(function(a){return d[a]});v(y,function(a){return[a,!0]});var z=null;function ga(a){z=typeof WeakMap!=="undefined"&&new WeakMap();a=ha(a);z=null;return a}function ha(a){if(!a||typeof a!=="object")return a;var b=z&&z.get(a);if(b)return b;if(f(a)){b=[];z&&z.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ha(a[c]))}else if(fa.indexOf(a.constructor)>=0)b=a;else{c=h(a);b=c===Object.prototype?{}:Object.create(c);z&&z.set(a,b);for(var d in a)j(a,d)&&(b[d]=ha(a[d]))}return b}var ia={}.toString;function ja(a){return ia.call(a).slice(8,-1)}var ka=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",la=typeof ka==="symbol"?function(a){var b;return a!=null&&(b=a[ka])&&b.apply(a)}:function(){return null},ma={};function A(a){var b,c,d,e;if(arguments.length===1){if(f(a))return a.slice();if(this===ma&&typeof a==="string")return[a];if(e=la(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var na=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oa(a,b){B=a,pa=b}var pa=function(){return!0},qa=!new Error("").stack;function ra(){if(qa)try{throw new Error()}catch(a){return a}return new Error()}function sa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(pa).map(function(a){return"\n"+a}).join("")}y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ua(a,b){this._e=ra(),this.name=a,this.message=b}n(ua).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function va(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function wa(a,b,c,d){this._e=ra(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=va(a,b)}n(wa).from(ua);function xa(a,b){this._e=ra(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=va(a,b)}n(xa).from(ua);var ya=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),za=ua,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=ra(),this.name=d,!a?(this.message=ta[c]||d,this.inner=null):typeof a==="string"?(this.message=""+a+(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message=a.name+" "+a.message,this.inner=a)}n(a).from(za);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Aa=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function Ba(a,b){if(!a||a instanceof ua||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Aa[a.name])return a;b=new Aa[a.name](b||a.message,a);"stack"in a&&m(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=wa;C.DexieError=ua;C.BulkError=xa;function E(){}function Ca(a){return a}function Da(a,b){return a==null||a===Ca?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ea(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Fa(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ga(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);g(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var h=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?h===void 0?void 0:h:g(d,h)}}function Ha(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ia(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Ja={},Ka=100,La=20,Ma=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,h(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,h(b),a]}();var Na=y[0],Oa=y[1],Pa=y[2],Qa=Oa&&Oa.then,Ra=Na&&Na.constructor,Sa=!!Pa,Ta=!1,Ua=Pa?function(){Pa.then(mb)}:d.setImmediate?setImmediate.bind(null,mb):d.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){mb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(mb,0)},Va=function(a,b){bb.push([a,b]),Xa&&(Ua(),Xa=!1)},Wa=!0,Xa=!0,G=[],Ya=[],Za=null,$a=Ca,ab={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Jb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Jb(a[0],a[1])}catch(a){}})}},H=ab,bb=[],I=0,cb=[];function J(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=E;this._lib=!1;var b=this._PSD=H;B&&(this._stackHolder=ra(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Ja)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&gb(this,this._value);return}this._state=null;this._value=null;++b.ref;fb(this,a)}var db={get:function(){var a=H,b=xb;function c(c,d){var e=this,f=!a.global&&(a!==H||b!==xb),g=f&&!N(),h=new J(function(b,h){ib(e,new eb(Gb(c,a,f,g),Gb(d,a,f,g),b,h,a))});B&&lb(h,this);return h}c.prototype=Ja;return c},set:function(a){m(this,"then",a&&a.prototype===Ja?db:{get:function(){return a},set:db.set})}};k(J.prototype,{then:db,_then:function(a,b){ib(this,new eb(null,null,a,b,H))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):tb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):tb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return tb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Ta=!0;var a=kb(this,[],La);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Ta=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new J(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&m(J.prototype,Symbol.toStringTag,"Dexie.Promise");ab.env=Db();function eb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}k(J,{all:function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return J.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof J)return a;if(a&&typeof a.then==="function")return new J(function(b,c){a.then(b,c)});var b=new J(Ja,!0,a);lb(b,Za);return b},reject:tb,race:function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.map(function(a){return J.resolve(a).then(b,c)})})},PSD:{get:function(){return H},set:function(a){return H=a}},totalEchoes:{get:function(){return xb}},newPSD:M,usePSD:Eb,scheduler:{get:function(){return Va},set:function(a){Va=a}},rejectionMapper:{get:function(){return $a},set:function(a){$a=a}},follow:function(a,b){return new J(function(c,d){return M(function(b,c){var d=H;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;qb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Ra&&(Ra.allSettled&&m(J,"allSettled",function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return J.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Ra.any&&typeof AggregateError!=="undefined"&&m(J,"any",function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return J.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function fb(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&nb();b&&typeof b.then==="function"?fb(a,function(a,c){b instanceof J?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,hb(a));c&&ob()},gb.bind(null,a))}catch(b){gb(a,b)}}function gb(a,b){Ya.push(b);if(a._state!==null)return;var c=a._lib&&nb();b=$a(b);a._state=!1;a._value=b;B&&b!==null&&typeof b==="object"&&!b._promise&&aa(function(){var c=p(b,"stack");b._promise=a;m(b,"stack",{get:function(){return Ta?c&&(c.get?c.get.apply(b):c.value):a.stack}})});rb(a);hb(a);c&&ob()}function hb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ib(a,b[c]);c=a._PSD;--c.ref||c.finalize();I===0&&(++I,Va(function(){--I===0&&pb()},[]))}function ib(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++I;Va(jb,[c,a,b])}function jb(a,b,c){try{Za=b;var d,e=b._value;b._state?d=a(e):(Ya.length&&(Ya=[]),d=a(e),Ya.indexOf(e)===-1&&sb(b));c.resolve(d)}catch(a){c.reject(a)}finally{Za=null,--I===0&&pb(),--c.psd.ref||c.psd.finalize()}}function kb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=sa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}B&&(d=sa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&kb(a._prev,b,c));return b}function lb(a,b){var c=b?b._numPrev+1:0;c<Ka&&(a._prev=b,a._numPrev=c)}function mb(){nb()&&ob()}function nb(){var a=Wa;Wa=!1;Xa=!1;return a}function ob(){var a,b,c;do while(bb.length>0){a=bb;bb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(bb.length>0);Wa=!0;Xa=!0}function pb(){var a=G;G=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=cb.slice(0);var b=a.length;while(b)a[--b]()}function qb(a){function b(){a(),cb.splice(cb.indexOf(b),1)}cb.push(b);++I;Va(function(){--I===0&&pb()},[])}function rb(a){G.some(function(b){return b._value===a._value})||G.push(a)}function sb(a){var b=G.length;while(b)if(G[--b]._value===a._value){G.splice(b,1);return}}function tb(a){return new J(Ja,!1,a)}function K(a,b){var c=H;return function(){var d=nb(),e=H;try{O(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{O(e,!1),d&&ob()}}}var L={awaits:0,echoes:0,id:0},ub=0,vb=[],wb=0,xb=0,yb=0;function M(b,a,c,d){var e=H,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++yb;var h=ab.env;f.env=Sa?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject,nthen:Hb(h.nthen,f),gthen:Hb(h.gthen,f)}:{};a&&g(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};h=Eb(f,b,c,d);f.ref===0&&f.finalize();return h}function zb(){L.id||(L.id=++ub);++L.awaits;L.echoes+=Ma;return L.id}function N(){if(!L.awaits)return!1;--L.awaits===0&&(L.id=0);L.echoes=L.awaits*Ma;return!0}(""+Qa).indexOf("[native code]")===-1&&(zb=N=E);function Ab(a){if(L.echoes&&a&&a.constructor===Ra){zb();return a.then(function(a){N();return a},function(a){N();return P(a)})}return a}function Bb(a){++xb,(!L.echoes||--L.echoes===0)&&(L.echoes=L.id=0),vb.push(H),O(a,!0)}function Cb(){var a=vb[vb.length-1];vb.pop();O(a,!1)}function O(a,b){var c=H;(b?L.echoes&&(!wb++||a!==H):wb&&(!--wb||a!==H))&&Fb(b?Bb.bind(null,a):Cb);if(a===H)return;H=a;c===ab&&(ab.env=Db());if(Sa){b=ab.env.Promise;var e=a.env;Oa.then=e.nthen;b.prototype.then=e.gthen;(c.global||a.global)&&(Object.defineProperty(d,"Promise",e.PromiseProp),b.all=e.all,b.race=e.race,b.resolve=e.resolve,b.reject=e.reject,e.allSettled&&(b.allSettled=e.allSettled),e.any&&(b.any=e.any))}}function Db(){var a=d.Promise;return Sa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Oa.then,gthen:a.prototype.then}:{}}function Eb(a,b,c,d,e){var f=H;try{O(a,!0);return b(c,d,e)}finally{O(f,!1)}}function Fb(a){Qa.call(Na,a)}function Gb(a,b,c,d){return typeof a!=="function"?a:function(){var e=H;c&&zb();O(b,!0);try{return a.apply(this,arguments)}finally{O(e,!1),d&&Fb(N)}}}function Hb(a,b){return function(c,d){return a.call(this,Gb(c,b),Gb(d,b))}}var Ib="unhandledrejection";function Jb(a,b){var c;try{c=b.onuncatched(a)}catch(a){}if(c!==!1)try{var e;b={promise:b,reason:a};d.document&&document.createEvent?(e=document.createEvent("Event"),e.initEvent(Ib,!0,!0),g(e,b)):d.CustomEvent&&(e=new CustomEvent(Ib,{detail:b}),g(e,b));if(e&&d.dispatchEvent){dispatchEvent(e);if(!d.PromiseRejectionEvent&&d.onunhandledrejection)try{d.onunhandledrejection(e)}catch(a){}}B&&e&&!e.defaultPrevented}catch(a){}}var P=J.reject;function Kb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!H.letThrough&&!a._vip){if(a._state.openComplete)return P(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return P(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return Kb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Kb(a,b,c,d)})}return P(e)}return e._promise(b,function(a,b){return M(function(){H.trans=e;return d(a,b,e)})}).then(function(a){return e._completion.then(function(){return a})})}}y="3.2.2";var Q=String.fromCharCode(65535),Lb=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Mb="String expected.",Nb=[],Ob=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Pb=Ob,Qb=Ob,Rb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Sb="__dbnames",Tb="readonly",Ub="readwrite";function S(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Vb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=ga(b),delete b[a]);return b}:function(a){return a}}var Xb=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||H.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new D.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=nb();try{return d&&d.db===this.db?d===H.trans?d._promise(a,f,c):M(function(){return d._promise(a,f,c)},{trans:d,transless:H.transless||H}):Kb(this.db,a,[this.name],f)}finally{g&&ob()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(f(a))return new this.db.WhereClause(this,"["+a.join("+")+"]");var b=e(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){return a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})&&a.keyPath.every(function(a){return b.indexOf(a)>=0})})[0];if(c&&this.db._maxKey!==Q)return this.where(c.name).equals(c.keyPath.map(function(b){return a[b]}));!c&&B&&!1;var d=this.schema.idxByName,g=this.db._deps.indexedDB;function h(a,b){try{return g.cmp(a,b)===0}catch(a){return!1}}var i=b.reduce(function(b,c){var e=b[0];b=b[1];var g=d[c],i=a[c];return[e||g,e||!g?S(b,g&&g.multi?function(a){a=w(a,c);return f(a)&&a.some(function(a){return h(i,a)})}:function(a){return h(i,w(a,c))}):b]},[null,null]),j=i[0];i=i[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(i):c?this.filter(i):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,f(a)?"["+a.join("+")+"]":a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){this.schema.mappedClass=a;var b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(j(b,d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){g(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Wb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!f(a)){var c=w(a,this.schema.primKey.keyPath);if(c===void 0)return P(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof b!=="function"?e(b).forEach(function(c){x(a,c,b[c])}):b(a,{value:a,primKey:c})}catch(a){}return this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Wb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Vb})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Wb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkAdd(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Wb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkPut(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new xa(b.name+".bulkDelete(): "+d+" of "+c+" operations failed",a)})};return a}();function Yb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=h;for(var d=1,g=arguments.length;d<g;++d)h(arguments[d]);return c;function h(a,d,e){if(typeof a==="object")return i(a);d||(d=Ha);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){e(a).forEach(function(b){var c=a[b];if(f(c))h(b,a[b][0],a[b][1]);else if(c==="asap")var d=h(b,Ca,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){u(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Zb(a,b){n(b).from({prototype:a});return b}function $b(a){return Zb(Xb.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Yb(null,{creating:[Ea,E],reading:[Da,Ca],updating:[Ga,E],deleting:[Fa,E]})})}function ac(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function bc(a,b){a.filter=S(a.filter,b)}function cc(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return S(d(),b())}:b;a.justLimit=c&&!d}function dc(a,b){a.isMatch=S(a.isMatch,b)}function ec(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function fc(a,b,c){var d=ec(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function gc(a,b,c,d){var e=a.replayFilter?S(a.filter,a.replayFilter()):a.filter;if(!a.or)return hc(fc(a,d,c),S(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));j(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),hc(fc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function hc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=K(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}function T(a,b){try{var c=kc(a),d=kc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return jc(lc(a),lc(b));case"Array":return ic(a,b)}}catch(a){}return NaN}function ic(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function jc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function kc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ja(a);return b==="ArrayBuffer"?"binary":b}function lc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var mc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,P.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,P.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=S(b.algorithm,a)};a.prototype._iterate=function(a,b){return gc(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&g(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return gc(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(ac(c,!0))return d.count({trans:a,query:{index:ec(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return gc(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&ac(c,!0)&&c.limit>0){var d=c.valueMapper,e=ec(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return gc(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;ac(b)?cc(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):cc(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);cc(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){bc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){bc(this._ctx,function(b){return a(b.value)});dc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&ac(b,!0)&&b.limit>0)return this._read(function(a){var c=ec(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};bc(this._ctx,function(a){a=a.primaryKey.toString();var c=j(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var f;if(typeof a==="function")f=a;else{var g=e(a),h=g.length;f=function(b){var c=!1;for(var d=0;d<h;++d){var e=g[d],f=a[e];w(b,e)!==f&&(x(b,e,f),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(var a=0,b=e(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var e=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:ga(t),primKey:b[g+s]};f.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&T(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=ac(c)&&c.limit===Infinity&&(typeof a!=="function"||a===nc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===nc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&e(g+m)})})};return e(0).then(function(){if(n.length>0)throw new wa("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return ac(a)&&(a.isPrimKey&&!Qb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new wa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(nc)};return a}(),nc=function(a,b){return b.value=null};function oc(a){return Zb(mc.prototype,function(b,c){this.db=a;var d=Vb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ca?f:null}})}function pc(a,b){return a<b?-1:a===b?0:1}function qc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof xc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function rc(a){return new a.Collection(a,function(){return wc("")}).limit(0)}function sc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function tc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function uc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function vc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Mb);function m(a){e=sc(a);f=tc(a);g=a==="next"?pc:qc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=uc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function wc(a){return{type:1,lower:a,upper:a}}var xc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?rc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,R)}};a.prototype.equals=function(a){return a==null?U(this,R):new this.Collection(this,function(){return wc(a)})};a.prototype.above=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Mb):this.between(a,a+Q,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):vc(this,function(a,b){return a.indexOf(b[0])===0},[a],Q)};a.prototype.equalsIgnoreCase=function(a){return vc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(ma,arguments);return a.length===0?rc(this):vc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(ma,arguments);return a.length===0?rc(this):vc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Q)};a.prototype.anyOf=function(){var a=this,b=A.apply(ma,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,R)}if(b.length===0)return rc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Lb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(ma,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Lb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return rc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=A.apply(ma,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?rc(this):this.inAnyRange(a.map(function(a){return[a,a+Q]}))};return a}();function yc(a){return Zb(xc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};var e=a._deps.indexedDB;if(!e)throw new D.MissingAPI();this._cmp=this._ascending=e.cmp.bind(e);this._descending=function(a,b){return e.cmp(b,a)};this._max=function(a,b){return e.cmp(a,b)>0?a:b};this._min=function(a,b){return e.cmp(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange})}function W(a){return K(function(b){zc(b);a(b.target.error);return!1})}function zc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ac="storagemutated",X="x-storagemutated-1",Y=Yb(null,Ac),Bc=function(){function a(){}a.prototype._lock=function(){t(!H.global);++this._reculock;this._reculock===1&&!H.global&&(H.lockOwnerFor=this);return this};a.prototype._unlock=function(){t(!H.global);if(--this._reculock===0){H.global||(H.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Eb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;t(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();t(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=K(function(c){zc(c),b._reject(a.error)});a.onabort=K(function(c){zc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=K(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return P(new D.ReadOnly("Transaction is readonly"));if(!this.active)return P(new D.TransactionInactive());if(this._locked())return new J(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},H])});else if(c)return M(function(){var a=new J(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new J(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=J.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new J(function(a,d){c.then(function(c){return b._waitingQueue.push(K(a.bind(null,c)))},function(a){return b._waitingQueue.push(K(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(j(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Cc(a){return Zb(Bc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Yb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new J(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return P(a)})})}function Dc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Ec(b)}}function Ec(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Fc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:v(c,function(a){return[a.name,a]})}}function Gc(a){return a.length===1?a[0]:a}var Hc=function(a){try{a.only([[]]);Hc=function(){return[[]]};return[[]]}catch(a){Hc=function(){return Q};return Q}};function Ic(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Jc(a);else return function(b){return w(b,a)}}function Jc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function Kc(a){return[].slice.call(a)}var Lc=0;function Mc(a){return a==null?":id":typeof a==="string"?a:"["+a.join("+")+"]"}function Nc(a,b,c){function d(a,b){var c=Kc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=f(b),e=b==null,g={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Ic(b)},indexes:Kc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=f(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Ic(b)};g[Mc(b)]=c;return c}),getIndexByKeyPath:function(a){return g[Mc(a)]}};g[":id"]=e.primaryKey;b!=null&&(g[Mc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function g(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=K(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,zc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(var k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(var k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=K(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=W(i);m.onsuccess=K(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Lc;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=K(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=K(a),m.onerror=W(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=K(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=K(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=K(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=W(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=K(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(e)})},query:f(h),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=K(function(b){return a(b.target.result)});i.onerror=W(b)})}}}d=d(a,c);c=d.schema;var h=d.hasGetAll;d=c.tables.map(function(a){return g(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '"+a+"' not found");return i[a]},MIN_KEY:-Infinity,MAX_KEY:Hc(b),schema:c}}function Oc(a,c){return c.reduce(function(a,c){c=c.create;return b(b({},a),c(a))},a)}function Pc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Oc(Nc(b,e,d),a.dbcore);return{dbcore:c}}function Qc(a,b){var c=a._novip;a=b.db;a=Pc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Rc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=p(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?m(b,a,{get:function(){return this.table(a)},set:function(b){l(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Sc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Tc(a,b){return a._cfg.version-b._cfg.version}function Uc(a,b,c,d){var f=a._dbSchema,g=a._createTransaction("readwrite",a._storeNames,f);g.create(c);g._completion["catch"](d);var h=g._reject.bind(g),i=H.transless||H;M(function(){H.trans=g,H.transless=i,b===0?(e(f).forEach(function(a){Xc(c,a,f[a].primKey,f[a].indexes)}),Qc(a,c),J.follow(function(){return a.on.populate.fire(g)})["catch"](h)):Vc(a,b,g,c)["catch"](h)})}function Vc(a,b,c,d){var f=a._novip,g=[];a=f._versions;var h=f._dbSchema=ad(f,f.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){g.push(function(){var g=h,j=a._cfg.dbschema;dd(f,g,d);dd(f,j,d);h=f._dbSchema=j;var k=Wc(g,j);k.add.forEach(function(a){Xc(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return $c(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),$c(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Qc(f,d);c._memoizedTables={};i=!0;var m=ca(j);k.del.forEach(function(a){m[a]=g[a]});Sc(f,[f.Transaction.prototype]);Rc(f,[f.Transaction.prototype],e(m),m);c.schema=m;var n=na(l);n&&zb();var o;j=J.follow(function(){o=l(c);if(o&&n){var a=N.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?J.resolve(o):j.then(function(){return o})}}),g.push(function(b){if(!i||!Pb){var d=a._cfg.dbschema;Zc(d,b)}Sc(f,[f.Transaction.prototype]);Rc(f,[f.Transaction.prototype],f._storeNames,f._dbSchema);c.schema=f._dbSchema})});function j(){return g.length?J.resolve(g.shift()(c.idbtrans)).then(j):J.resolve()}return j().then(function(){Yc(h,d)})}function Wc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Ob)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Xc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return $c(e,a)});return e}function Yc(a,b){e(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Xc(b,c,a[c].primKey,a[c].indexes)})}function Zc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function $c(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function ad(a,b,c){var d={};a=r(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Dc(Ec(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Dc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Fc(a,f,g)});return d}function bd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=ad(a,b,c);a._storeNames=r(b.objectStoreNames,0);Rc(a,[a._allTables],e(c),c)}function cd(a,b){b=ad(a,a.idbdb,b);b=Wc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function dd(a,b,c){a=a._novip;var e=c.db.objectStoreNames;for(var f=0;f<e.length;++f){var g=e[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+r(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function ed(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Dc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),f(d),b===0)})}var fd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){e(a).forEach(function(c){if(a[c]!==null){var d=ed(a[c]),e=d.shift();if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=Fc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){g(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Sc(b,[b._allTables,b,b.Transaction.prototype]);Rc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],e(d),d);b._storeNames=e(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ia(this._cfg.contentUpgrade||E,a);return this};return a}();function gd(a){return Zb(fd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hd(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Kd(Sb,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function id(a){return a&&typeof a.databases==="function"}function jd(a){var b=a.indexedDB;a=a.IDBKeyRange;return id(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Sb})}):hd(b,a).toCollection().primaryKeys()}function kd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!id(c)&&b!==Sb&&hd(c,a).put({name:b})["catch"](E)}function ld(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!id(c)&&b!==Sb&&hd(c,a)["delete"](b)["catch"](E)}function md(a){return M(function(){H.letThrough=!0;return a()})}function nd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function od(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?P(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=ra());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return J.race([d,(typeof navigator==="undefined"?J.resolve():nd()).then(function(){return new J(function(d,f){e();if(!c)throw new D.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new D.MissingAPI();j.onerror=W(f);j.onblocked=K(a._fireOnBlocked);j.onupgradeneeded=K(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=zc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=K(function(){f(new D.NoSuchDatabase("Database "+i+" doesnt exist"))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Uc(a,e/10,g,f)}},f);j.onsuccess=K(function(){g=null;var c=a._novip.idbdb=j.result,e=r(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Gc(e),"readonly");b.autoSchema?bd(a,c,e):(dd(a,a._dbSchema,e),!cd(a,e));Qc(a,e)}catch(a){}Nb.push(a);c.onversionchange=K(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=K(function(b){a.on("close").fire(b)});h&&kd(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return J.resolve(md(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ia,E);b.onReadyBeingFired=[];return J.resolve(md(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return P(c)})["finally"](function(){b.openComplete=!0,f()})}function pd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=g(b),e=g(c);function g(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?f(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return g(b)()}function qd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ea(e);return[a,f,c]}function rd(a,b,c,d,e){return J.resolve().then(function(){var f=H.transless||H,g=a._createTransaction(b,c,a._dbSchema,d);f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return rd(a,b,c,null,e)})}return P(d)}var h=na(e);h&&zb();var i;f=J.follow(function(){i=e.call(g,g);if(i)if(h){var a=N.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=pd(i))},f);return(i&&typeof i.then==="function"?J.resolve(i).then(function(a){return g.active?a:P(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return P(a)})})}function sd(a,b,c){a=f(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function td(a){return b(b({},a),{table:function(c){var d=a.table(c);c=d.schema;var e={},f=[];function g(a,c,d){var h=Mc(a);h=e[h]=e[h]||[];var i=a==null?0:typeof a==="string"?1:a.length,j=c>0;j=b(b({},d),{isVirtual:j,keyTail:c,keyLength:i,extractKey:Ic(a),unique:!j&&d.unique});h.push(j);j.isPrimaryKey||f.push(j);if(i>1){a=i===2?a[0]:a.slice(0,i-1);g(a,c+1,d)}h.sort(function(a,b){return a.keyTail-b.keyTail});return j}var h=g(c.primaryKey.keyPath,0,c.primaryKey);e[":id"]=[h];for(var i=0,j=c.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Mc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:sd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:sd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(c){var a=c.query.index;return a.isVirtual?b(b({},c),{query:{index:a,range:m(c.query.range,a.keyTail)}}):c}k=b(b({},d),{schema:b(b({},c),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return d.count(n(a))},query:function(a){return d.query(n(a))},openCursor:function(c){var b=c.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return d.openCursor(c);function h(b){function d(d){d!=null?b["continue"](sd(d,c.reverse?a.MAX_KEY:a.MIN_KEY,e)):c.unique?b["continue"](b.key.slice(0,g).concat(c.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}d=Object.create(b,{"continue":{value:d},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(sd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return d}return d.openCursor(n(c)).then(function(a){return a&&h(a)})}});return k}})}var ud={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:td};function vd(a,b,c,d){c=c||{};d=d||"";e(a).forEach(function(e){if(!j(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ja(f),i=ja(g);h!==i?c[d+e]=b[e]:h==="Object"?vd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});e(b).forEach(function(e){j(a,e)||(c[d+e]=b[e])});return c}function wd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var xd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return b(b({},a),{table:function(d){var e=a.table(d),f=e.schema.primaryKey,g=b(b({},e),{mutate:function(a){var g=H.trans,h=g.table(d).hook,i=h.deleting,k=h.creating,l=h.updating;switch(a.type){case"add":if(k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(k.fire===E&&l.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return e.mutate(a);function m(d){var g=H.trans,a=d.keys||wd(f,d);if(!a)throw new Error("Keys missing");d=d.type==="add"||d.type==="put"?b(b({},d),{keys:a}):b({},d);d.type!=="delete"&&(d.values=c([],d.values,!0));d.keys&&(d.keys=c([],d.keys,!0));return yd(e,d,a).then(function(b){var c=a.map(function(a,c){var e=b[c],h={onerror:null,onsuccess:null};if(d.type==="delete")i.fire.call(h,a,e,g);else if(d.type==="add"||e===void 0){var m=k.fire.call(h,a,d.values[c],g);a==null&&m!=null&&(a=m,d.keys[c]=a,f.outbound||x(d.values[c],f.keyPath,a))}else{m=vd(e,d.values[c]);var n=l.fire.call(h,m,a,e,g);if(n){var o=d.values[c];Object.keys(n).forEach(function(a){j(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return e.mutate(d).then(function(e){var f=e.failures,g=e.results,h=e.numFailures;e=e.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=c[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(d.type==="put"&&b[i]?d.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:e}})["catch"](function(a){c.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,c,d){return e.query({trans:a,values:!1,query:{index:f,range:c},limit:d}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:a}).then(function(e){if(e.numFailures>0)return Promise.reject(e.failures[0]);if(f.length<d)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,b(b({},c),{lower:f[f.length-1],lowerOpen:!0}),d)})})}}});return g}})}};function yd(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function zd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?ga(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Ad={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var d=a.table(c);return b(b({},d),{getMany:function(a){if(!a.cache)return d.getMany(a);var b=zd(a.keys,a.trans._cache,a.cache==="clone");return b?J.resolve(b):d.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?ga(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return d.mutate(a)}})}}}};function Bd(a){return!("from"in a)}var Z=function(a,b){if(this)g(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new Z();a&&"d"in a&&g(c,a);return c}};k(Z.prototype,(td={add:function(a){Dd(this,a);return this},addKey:function(a){Cd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Cd(b,a,a)});return this}},td[ka]=function(){return Fd(this)},td));function Cd(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Bd(a))return g(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Cd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Gd(a)}if(T(b,a.to)>0){e?Cd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Gd(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Dd(a,d);e&&b&&Dd(a,e)}function Dd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Cd(a,d,e);f&&c(a,f);b&&c(a,b)}Bd(b)||c(a,b)}function Ed(a,b){b=Fd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Fd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Fd(a){var b=Bd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Gd(a){var c;c=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((c=a.l)===null||c===void 0?void 0:c.d)||0);c=c>1?"r":c<-1?"l":"";if(c){var d=c==="r"?"l":"r",e=b({},a),f=a[c];a.from=f.from;a.to=f.to;a[c]=f[c];e[c]=f[d];a[d]=e;e.d=Hd(e)}a.d=Hd(a)}function Hd(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}var Id={stack:"dbcore",level:0,create:function(a){var c=a.schema.name,d=new Z(a.MIN_KEY,a.MAX_KEY);return b(b({},a),{table:function(g){var h=a.table(g),i=h.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=b(b({},h),{mutate:function(e){var j=e.trans,k=j.mutatedParts||(j.mutatedParts={}),l=function(a){a="idb://"+c+"/"+g+"/"+a;return k[a]||(k[a]=new Z())},m=l(""),n=l(":dels"),b=e.type;j=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[[],e.values]:[];var a=j[0],o=j[1],p=e.trans._cache;return h.mutate(e).then(function(c){if(f(a)){b!=="delete"&&(a=c.results);m.addKeys(a);var e=zd(a,p);!e&&b!=="add"&&n.addKeys(a);(e||o)&&Jd(l,i,e,o)}else if(a){e={from:a.lower,to:a.upper};n.add(e);m.add(e)}else m.add(d),n.add(d),i.indexes.forEach(function(a){return l(a.name).add(d)});return c})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};e(o).forEach(function(a){m[a]=function(e){var f=H.subscr;if(f){var i=function(a){a="idb://"+c+"/"+g+"/"+a;return f[a]||(f[a]=new Z())},j=i(""),m=i(":dels"),n=o[a](e),p=n[0],q=n[1];i(p.name||"").add(q);if(!p.isPrimaryKey)if(a==="count")m.add(d);else{var r=a==="query"&&l&&e.values&&h.query(b(b({},e),{values:!1}));return h[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&e.values)return r.then(function(a){a=a.result;j.addKeys(a);return b});var c=e.values?b.result.map(k):b.result;e.values?j.addKeys(c):m.addKeys(c)}else if(a==="openCursor"){var d=b,f=e.values;return d&&Object.create(d,{key:{get:function(){m.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;m.addKey(a);return a}},value:{get:function(){f&&j.addKey(d.primaryKey);return d.value}}})}return b})}}return h[a].apply(this,arguments)}});return m}})}};function Jd(a,b,c,d){function e(b){var e=a(b.name||"");function g(a){return a!=null?b.extractKey(a):null}var h=function(a){return b.multiEntry&&f(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&g(c[b]);b=d&&g(d[b]);T(a,b)!==0&&(a!=null&&h(a),b!=null&&h(b))})}b.indexes.forEach(e)}var Kd=function(){function a(c,d){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=d=b({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},d);this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange};f=d.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new J(function(a){g.dbReadyResolve=a});g.openCanceller=new J(function(a,b){g.cancelOpen=b});this._state=g;this.name=c;this.on=Yb(this,"populate","blocked","versionchange","close",{ready:[Ia,E]});this.on.ready.subscribe=s(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||J.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=oc(this);this.Table=$b(this);this.Transaction=Cc(this);this.Version=gd(this);this.WhereClause=yc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Hc(d.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Nb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(ud);this.use(xd);this.use(Id);this.use(Ad);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Tc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?a():new J(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){return od(this)};a.prototype._close=function(){var a=this._state,b=Nb.indexOf(this);b>=0&&Nb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new J(function(b){a.dbReadyResolve=b});a.openCanceller=new J(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new D.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new J(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=K(function(){ld(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new D.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return e(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=qd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=H.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Tb)g=Tb;else if(a=="rw"||a==Ub)g=Ub;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Tb&&g===Ub)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):P(a)}var i=rd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):H.trans?Eb(H.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!j(this._allTables,a))throw new D.InvalidTable("Table "+a+" does not exist");return this._allTables[a]};return a}(),Ld=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Md=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Ld]=function(){return this};return a}();function Nd(a,b){e(b).forEach(function(c){var d=a[c]||(a[c]=new Z());Dd(d,b[c])});return a}function Od(a){return new Md(function(b){var c=na(a);function d(b){c&&zb();var d=function(){return M(a,{subscr:b,trans:null})};d=H.trans?Eb(H.transless,d):d();c&&d.then(N,N);return d}var f=!1,g={},h={},i={get closed(){return f},unsubscribe:function(){f=!0,Y.storagemutated.unsubscribe(m)}};b.start&&b.start(i);var j=!1,k=!1;function l(){return e(h).some(function(a){return g[a]&&Ed(g[a],h[a])})}var m=function(a){Nd(g,a),l()&&n()},n=function(){if(j||f)return;g={};var a={},c=d(a);k||(Y(Ac,m),k=!0);j=!0;Promise.resolve(c).then(function(c){j=!1;if(f)return;l()?n():(g={},h=a,b.next&&b.next(c))},function(a){j=!1,b.error&&b.error(a),i.unsubscribe()})};n();return i})}try{td={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch(a){td={indexedDB:null,IDBKeyRange:null}}var Pd=Kd;k(Pd,b(b({},C),{"delete":function(a){a=new Pd(a,{addons:[]});return a["delete"]()},exists:function(a){return new Pd(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return jd(Pd.dependencies).then(a)}catch(a){return P(new D.MissingAPI())}},defineClass:function(){function a(a){g(this,a)}return a},ignoreTransaction:function(a){return H.trans?Eb(H.transless,a):a()},vip:md,async:function(a){return function(){try{var b=pd(a.apply(this,arguments));return!b||typeof b.then!=="function"?J.resolve(b):b}catch(a){return P(a)}}},spawn:function(a,b,c){try{a=pd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?J.resolve(a):a}catch(a){return P(a)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(a,b){a=J.resolve(typeof a==="function"?Pd.ignoreTransaction(a):a).timeout(b||6e4);return H.trans?H.trans.waitFor(a):a},Promise:J,debug:{get:function(){return B},set:function(a){oa(a,a==="dexie"?function(){return!0}:Rb)}},derive:n,extend:g,props:k,override:s,Events:Yb,on:Y,liveQuery:Od,extendObservabilitySet:Nd,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ba,shallowClone:ca,deepClone:ga,getObjectDiff:vd,cmp:T,asap:u,minKey:Lb,addons:[],connections:Nb,errnames:ya,dependencies:td,semVer:y,version:y.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));Pd.maxKey=Hc(Pd.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Ac,function(a){if(!$){var b;Ob?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||Qd(a)}));function Qd(a){var b=$;try{$=!0,Y.storagemutated.fire(a)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var Rd=new BroadcastChannel(X);Y(Ac,function(a){$||Rd.postMessage(a)});Rd.onmessage=function(a){a.data&&Qd(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Ac,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&c([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&Qd(a.changedParts)}});C=self.document&&navigator.serviceWorker;C&&C.addEventListener("message",Sd)}function Sd(a){a=a.data;a&&a.type===X&&Qd(a.changedParts)}J.rejectionMapper=Ba;oa(B,Rb);ba=Object.freeze({__proto__:null,Dexie:Kd,liveQuery:Od,"default":Kd,RangeSet:Z,mergeRanges:Dd,rangesOverlap:Ed});b(Kd,ba,{"default":Kd});return Kd})}var k=!1;function l(){k||(k=!0,j());return h.exports}function b(a){switch(a){case void 0:return l()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("tweetnacl-1.0.3"));d={};var h={exports:d};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);/*FB_PKG_DELIM*/
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"4886725694759503",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWXACIntroViewQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"xacIntroNuxId"}],b=[{kind:"Variable",name:"nux_id",variableName:"xacIntroNuxId"},{kind:"Literal",name:"supported",value:["MessengerXacIntroViewRenderer"]}],c={kind:"InlineFragment",selections:[{args:null,documentName:"MWXACIntroViewQuery_xacIntroCometNux",fragmentName:"MWXACIntroFlow_introRenderer",fragmentPropName:"introRenderer",kind:"ModuleImport"}],type:"MessengerXacIntroViewRenderer",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWXACIntroViewQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"messenger_xac_intro_renderer",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWXACIntroViewQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"messenger_xac_intro_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c],storageKey:null}],storageKey:null}]},params:{id:"7403839336352965",metadata:{},name:"MWXACIntroViewQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatBadgeCountQuery",selections:b},params:{id:"5218522061549416",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5837572036269296"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c},params:{id:b("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometCalloutEdgeArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return h.jsxs("svg",babelHelpers["extends"]({className:c("stylex")(b),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("CometCalloutEdge.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometCalloutEdgeArrow.svg.react","Locale","react","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={arrow:{position:"x10l6tqk"},container:{display:"x78zum5"},content:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xofhs1l",paddingEnd:"xn6708d",paddingStart:"x1ye3gou",paddingTop:"xyamay9",paddingBottom:"x1l90r2v"}},k={accent:{backgroundColor:"xwnonoy"},"default":{backgroundColor:"x9bbmet"}},l={end:{borderBottomEndRadius:"x5pf9jr",marginBottom:"xieb3on"},middle:{marginBottom:"x12nagc"},start:{borderBottomStartRadius:"xo71vjh",marginBottom:"xieb3on"}},m={end:{borderTopEndRadius:"x13lgxp2",marginTop:"x1sy10c2"},middle:{marginTop:"x1gslohp"},start:{borderTopStartRadius:"x168nmei",marginTop:"x1sy10c2"}},n={end:{bottom:"x7ofzsv",end:"xds687c",transform:"xpk2tj9"},middle:{bottom:"x7ofzsv",end:"xds687c"},start:{bottom:"x7ofzsv",start:"x17qophe"}},o={end:{},middle:{},start:{}},p={end:{bottom:"x7ofzsv",end:"xds687c",transform:"xpk2tj9"},middle:{bottom:"x7ofzsv",end:"xds687c"},start:{bottom:"x7ofzsv",start:"x17qophe"}},q={end:{},middle:{},start:{}},r={end:{end:"xds687c",top:"x1nl0pjx",transform:"x19jd1h0"},middle:{end:"xds687c",top:"x1nl0pjx",transform:"x1oihik5"},start:{start:"x17qophe",top:"x1nl0pjx",transform:"x1oihik5"}},s={end:{transform:"x19jd1h0"},middle:{transform:"x1oihik5"},start:{transform:"x1oihik5"}},t={end:{end:"xds687c",top:"x1nl0pjx",transform:"x19jd1h0"},middle:{end:"xds687c",top:"x1nl0pjx",transform:"x1oihik5"},start:{start:"x17qophe",top:"x1nl0pjx",transform:"x1oihik5"}},u={end:{transform:"x19jd1h0"},middle:{transform:"x1oihik5"},start:{transform:"x1oihik5"}},v={end:"start",start:"end"};function a(a){var b,d=a.children,e=a.onOutsideClick,f=a.type;f=f===void 0?"default":f;a=a.xstyle;var g=i(c("BaseContextualLayerOrientationContext")),n=g.align;g=g.position;n=n==="stretch"?"start":n;g=g==="start"?"above":g==="end"?"below":g;var o=i(c("BaseContextualLayerContextSizeContext"));b=(b=i(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;n=b!==0?v[n]:n;o=y(n,(o=o==null?void 0:o.width)!=null?o:0,b);b=c("useOnOutsideClick")(e);return h.jsxs(c("BaseView.react"),{style:o,xstyle:j.container,children:[h.jsx(c("BaseRow.react"),{ref:b,xstyle:[j.content,k[f],g==="above"&&l[n],g==="below"&&m[n],a],children:d}),h.jsx(x,{align:n,position:g,type:f})]})}a.displayName=a.name+" [from "+f.id+"]";var w=c("Locale").isRTL();function x(a){var b=a.align,d=a.position;a=a.type;return h.jsx(c("CometCalloutEdgeArrow.svg.react"),{fill:a==="default"?"var(--popover-background)":"var(--accent)",xstyle:[j.arrow,d==="above"&&a==="default"&&(w?o[b]:n[b]),d==="above"&&a==="accent"&&(w?q[b]:p[b]),d==="below"&&a==="default"&&(w?s[b]:r[b]),d==="below"&&a==="accent"&&(w?u[b]:t[b])]})}x.displayName=x.name+" [from "+f.id+"]";function y(a,b,c){c=c===0?b/2:0;if(c===0)return void 0;if(a==="start")return{transform:"translateX("+(w?-1*c:c)+"px)"};return a==="end"?{transform:"translateX("+(w?c:-1*c)+"px)"}:void 0}g["default"]=a}),98);
__d("CometCalloutInsetArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return h.jsxs("svg",babelHelpers["extends"]({className:c("stylex")(b),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("CometCalloutInset.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometCalloutInsetArrow.svg.react","Locale","react","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={arrow:{position:"x10l6tqk"},container:{display:"x78zum5"},content:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xofhs1l",paddingEnd:"xn6708d",paddingStart:"x1ye3gou",paddingTop:"xyamay9",paddingBottom:"x1l90r2v"}},k={accent:{backgroundColor:"xwnonoy"},"default":{backgroundColor:"x9bbmet"}},l={above:{marginBottom:"x1yztbdb"},below:{marginTop:"xw7yly9"},end:{marginStart:"x1d52u69"}},m={above:{bottom:"x1wa3icf"},below:{top:"x1jzctok",transform:"x1oihik5"},end:{}},n={above:{bottom:"x1wa3icf"},below:{top:"x1jzctok",transform:"x1oihik5"},end:{}};function a(a){var b,d=a.children,e=a.onOutsideClick,f=a.type;f=f===void 0?"default":f;a=a.xstyle;var g=i(c("BaseContextualLayerOrientationContext")),m=g.align;g=g.position;m=m==="stretch"?"start":m;g=g==="start"?"above":g==="end"?"below":g;var n=i(c("BaseContextualLayerContextSizeContext"));b=(b=i(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;n=q(m,g,(m=n==null?void 0:n.width)!=null?m:0,b);m=n[0];b=n[1];n=c("useOnOutsideClick")(e);return h.jsxs(c("BaseView.react"),{style:m,xstyle:j.container,children:[h.jsx(c("BaseRow.react"),{ref:n,xstyle:[j.content,k[f],l[g],a],children:d}),h.jsx(o,{arrowStyles:b,position:g,type:f})]})}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=a.arrowStyles,d=a.position;a=a.type;return h.jsx(c("CometCalloutInsetArrow.svg.react"),{fill:a==="default"?"var(--popover-background)":"var(--accent)",style:b,xstyle:[j.arrow,m[d],a==="accent"&&n[d]]})}o.displayName=o.name+" [from "+f.id+"]";var p=c("Locale").isRTL();function q(a,b,c,d){var e=Math.max(c/2-8,16)+Math.abs(d),f=c/2-8<16;c=24-c/2;if(b==="above")if(a==="start"){var g;b=p?"right":"left";return[f?{transform:"translateX("+(p?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){b=p?"left":"right";return[f?{transform:"translateX("+(p?-c:c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else{var h;b=p?"left":"right";g=(p?-d:d)-8;return[void 0,(h={},h[b]="calc(50% + "+g+"px)",h)]}else if(a==="start"){b=p?"right":"left";return[f?{transform:"translateX("+(p?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){h=p?"left":"right";return[f?{transform:"translateX("+(p?-c:c)+"px)"}:void 0,(b={},b[h]="min(calc(100% - 32px), "+e+"px)",b)]}else{g=p?"left":"right";a=(p?-d:d)-8;return[void 0,(f={},f[g]="calc(50% + "+a+"px)",f)]}}g["default"]=a}),98);
__d("CometCallout.react",["fbt","ix","BaseContextualLayerOrientationContext","BaseRow.react","BaseRowItem.react","BaseView.react","CometCalloutEdge.react","CometCalloutInset.react","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometIcon.react","CometNUXInlineSurvey.react","CometPressable.react","TetraTextPairing.react","fbicon","react","unrecoverableViolation","useOnOutsideClick","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useContext,l=b.useRef,m={container:{display:"x78zum5"},content:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xofhs1l",paddingEnd:"xn6708d",paddingStart:"x1ye3gou",paddingTop:"xyamay9",paddingBottom:"x1l90r2v"},crossoutButton:{marginEnd:"xcud41i",marginTop:"x9otpla"},item:{paddingEnd:"xsyo7zv",paddingStart:"x16hj40l",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq"}},n={accent:{backgroundColor:"xwnonoy"},"default":{backgroundColor:"x9bbmet"}},o={above:{marginBottom:"x12nagc"},below:{marginTop:"x1gslohp"},end:{marginStart:"xsgj6o6"},start:{}};function a(a){var b=a.arrowStyle;b=b===void 0?"none":b;var e=a.hasCloseButton;e=e===void 0?!1:e;var f=a.headline,g=a.inlineSurvey,p=a.label,q=a.onClose,r=a.onHelpful,s=a.onHide,t=a.onNotHelpful,u=a.onOutsideClick,v=a.onPressCallout_experimentalDONOTUSE,w=a.onShow,x=a.profilePhoto_experimentalDONOTUSE,y=a.type;y=y===void 0?"default":y;a=a.xstyle;var z=k(c("BaseContextualLayerOrientationContext"));z=z.position;var A=l(null),B=function(){if(A.current==null){var a;A.current=(a=g==null?void 0:g.getShouldShowInlineSurvey==null?void 0:g.getShouldShowInlineSurvey())!=null?a:!1}return A.current}(),C=c("useOnOutsideClick")(u);s=c("useVisibilityObserver")({onHidden:s,onVisible:w});w=y==="default"?"primary":"white";if(z==="end"&&(b==="inset"||b==="edge"))throw c("unrecoverableViolation")('"end" position with arrow is not supported yet',"comet_ui");x=j.jsxs(c("CometColumn.react"),{children:[j.jsx(c("CometColumnItem.react"),{children:j.jsxs(c("BaseRow.react"),{children:[x!=null&&j.jsx(c("BaseRowItem.react"),{verticalAlign:"top",children:x}),j.jsx(c("BaseRowItem.react"),{expanding:!0,ref:s,verticalAlign:"center",xstyle:m.item,children:j.jsx(c("TetraTextPairing.react"),{body:p,bodyColor:w,headline:f,headlineColor:w,level:3})}),e&&j.jsx(c("BaseRowItem.react"),{xstyle:[m.crossoutButton,m.item],children:j.jsx(c("CometIcon.react"),{"aria-label":h._("__JHASH__cCrSTii9yXy__JHASH__"),color:y==="default"?"secondary":"white",icon:d("fbicon")._(i("478232"),16),onPress:q,size:16})})]})}),g==null||B!==!0?null:j.jsx(c("CometColumnItem.react"),{paddingTop:12,children:j.jsx(c("BaseRow.react"),{children:j.jsx(c("BaseRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:m.item,children:j.jsx(c("CometNUXInlineSurvey.react"),{bodyColor:y==="default"?void 0:"white",initialHasAnsweredSurvey:g.initialHasAnsweredSurvey,linkColor:y==="default"?void 0:"white",onAnswer:g.onAnswer,onHelpful:r,onNotHelpful:t})})})})]});p=v?j.jsx(c("BaseRowItem.react"),{ref:s,children:j.jsx(c("CometPressable.react"),{onPress:v,overlayDisabled:!0,children:x})}):x;if(b==="inset")return j.jsx(c("CometCalloutInset.react"),{onOutsideClick:u,type:y,xstyle:a,children:p});return b==="edge"?j.jsx(c("CometCalloutEdge.react"),{onOutsideClick:u,type:y,xstyle:a,children:p}):j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return j.jsx("div",{})},children:j.jsx(c("BaseView.react"),{xstyle:m.container,children:j.jsx(c("BaseRow.react"),{ref:C,xstyle:[m.content,n[y],b==="none"&&o[z],a],children:p})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometCalloutImpl.react",["BaseContextualLayer.react","BaseContextualLayerAnchorRootContext","CometCallout.react","CometCalloutContext","LayoutAnimationBoundaryContext","react","useCometDisplayTimingTrackerForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=a.anchorRootRefContext,d=a.animationContext,e=a.calloutID,f=a.calloutProps,g=a.contextRef,k=a.imperativeRef,l=a.scrollableAreaContext;a=c("useCometDisplayTimingTrackerForInteraction")("CometCalloutManager");var m=i(c("CometCalloutContext"));j(function(){var a=l.map(function(a){return a.getDOMNode()}).filter(Boolean),b=function(){var a;return(a=k.current)==null?void 0:a.reposition()};if(a.length>0){a.forEach(function(a){return a.addEventListener("scroll",b,{passive:!0})});return function(){a.forEach(function(a){return a.removeEventListener("scroll",b,{passive:!0})})}}},[k,l]);return m==null||f==null||g==null?null:h.jsx(c("LayoutAnimationBoundaryContext").Provider,{value:d,children:h.jsx(c("BaseContextualLayerAnchorRootContext").Provider,{value:b,children:h.jsx(c("BaseContextualLayer.react"),{align:f.align,contextRef:g,disableAutoAlign:f.disableAutoAlign,disableAutoFlip:f.disableAutoFlip,imperativeRef:k,position:f.position,ref:a,children:h.jsx(c("CometCallout.react"),{arrowStyle:f.arrowStyle,hasCloseButton:f.hasCloseButton,headline:f.headline,inlineSurvey:f.inlineSurvey,label:f.label,onClose:f.hasCloseButton===!0?function(){m.removeCallout(e),f.onClose==null?void 0:f.onClose()}:void 0,onHelpful:f.onHelpful,onHide:f.onHide,onNotHelpful:f.onNotHelpful,onOutsideClick:function(){f.disableOutsideClick!==!0&&m.removeCallout(e)},onPressCallout_experimentalDONOTUSE:f.onPressCallout_experimentalDONOTUSE,onShow:f.onShow,profilePhoto_experimentalDONOTUSE:f.profilePhoto_experimentalDONOTUSE,type:f.type,xstyle:f.xstyle})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTopNavTabBadge.react",["CometNumberedBadge.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.isBadgeHidden,d=a.isTab,e=a.overflow,f=a.setBadgeCount,g=a.testid,j=a.value;g=babelHelpers.objectWithoutPropertiesLoose(a,["isBadgeHidden","isTab","overflow","setBadgeCount","testid","value"]);i(function(){f&&f(j)},[j,f]);if(b===!0||j===0)return null;a=d===!0?"red":void 0;return h.jsx(c("CometNumberedBadge.react"),babelHelpers["extends"]({},g,{color:a,overflow:e,testid:void 0,value:j}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometPageletVCTracker",["InteractionTracingMetrics","cr:683059","performanceAbsoluteNow","react"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useRef;function a(a){var d=i(null);return h(function(e){if(d.current!==e){d.current=e;var f;if(e){if(a.interactionUUID!=null){var g=c("InteractionTracingMetrics").get(a.interactionUUID);g&&g.vcTracker&&(f=g.vcTracker)}else b("cr:683059")&&a.excludeFromMainVC===!0&&(f=b("cr:683059").getCurrentNavigationTrace());if(f!=null){g=c("performanceAbsoluteNow")();a.isMutationRoot===!0&&a.interactionUUID!=null&&f.addMutationRoot(e);f.addMountPoint(e,g,a.pageletName);f.trackPagelet(e,a.pageletName,g,a.vcCallback,a.pageletType,a.excludeFromMainVC)}}}},[a])}g["default"]=a}),98);
__d("CometNotificationsBadgeCount.react",["CometHeroInteractionIDContext","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometNumberedBadge.react","CometPlaceholder.react","CometRelay","react","setupNotificationsLiveQuery","unrecoverableViolation","useCometPageletVCTracker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react");e=d("react");var k=e.useContext,l=e.useEffect;function a(a){var e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"});e=e.viewer;if(e==null)throw c("unrecoverableViolation")("The viewer recieving these notifications cannot be null","comet_feed");e=d("CometRelay").useFragment(i!==void 0?i:i=b("CometNotificationsBadgeCountFragment_viewer.graphql"),e);var f=(e=e==null?void 0:e.notifications_unseen_count)!=null?e:0;e=a.isBadgeHidden;var g=a.overflow,m=a.setBadgeCount,n=d("CometRelay").useRelayEnvironment();l(function(){var a=c("setupNotificationsLiveQuery")(n);return function(){return a.dispose()}},[n]);l(function(){m&&m(f)},[f,m]);a=k(c("CometHeroInteractionIDContext"));a=c("useCometPageletVCTracker")({interactionUUID:a,pageletName:"NotificationsBadge"});return j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx("span",{}),children:e!==!0&&f>0?j.jsx(c("CometNumberedBadge.react"),{overflow:g,ref:a,testid:void 0,value:f}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatHeadError.react",["fbt","ix","CometPressable.react","MWIcon.react","MWTooltip.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa"},dropShadow:{boxShadow:"x1qeybcx",":hover":{boxShadow:"x19xcq9t"}}},l=h._("__JHASH__1kKkUA_eanI__JHASH__");function a(a){var b=a.contextRef;a=a.onPress;return j.jsx(c("MWTooltip.react"),{align:"end",position:"above",tooltip:l,children:j.jsx(c("CometPressable.react"),{"aria-label":l,disabled:a==null,display:"inline",onPress:a,ref:b,xstyle:function(a){return[k.compose,k.dropShadow]},children:j.jsx(c("MWIcon.react"),{icon:d("fbicon")._(i("502063"),24)})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.contextRef;a=a.onPress;var d=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT");return d?h.jsx("div",{className:"xixxii4 xds687c x1ey2m1c",children:h.jsx("div",{className:"x10l6tqk x92rtbv x191j7n5",children:h.jsx(c("MWChatHeadError.react"),{contextRef:b,onPress:a})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSChatInit.bs",["LSErrorHandlerDeferred.bs","MWLSChatPopperUpper.bs","bs_curry","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=b("useReStore")();var c=b("LSErrorHandlerDeferred.bs").subscribeToErrors(a);h.useEffect(function(){return function(a){return b("bs_curry")._1(c,void 0)}},[]);return b("MWLSChatPopperUpper.bs").useHook(a)}f.useHook=a}),null);
__d("MWV2Chat.react",["CometErrorBoundary.react","CometLazyPopoverTrigger.react","FBLogger","JSResourceForInteraction","MWChatDisabled.react","cr:11569","gkx","killswitch","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=c("FBLogger")("messenger_browser_clients");a!=null&&(b=b.catching(a));b.warn("Error loading MWV2Chat")}var j=c("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),k=function(a){return h.jsx(c("CometLazyPopoverTrigger.react"),{align:"start",popoverProps:{error:a},popoverResource:j,position:"above",visibleOnLoad:!0,children:function(a,b){return h.jsx(c("MWChatDisabled.react"),{contextRef:a,onPress:b})}})};function a(a){return h.jsx(c("CometErrorBoundary.react"),{fallback:k,onError:i,children:!c("gkx")("1673554")||c("killswitch")("COMET_CHAT")||!c("gkx")("1812744")?h.jsx(c("MWChatDisabled.react"),{}):b("cr:11569")&&h.jsx(b("cr:11569"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometContextualLayerAnchorRoot.re",["CometContextualLayerAnchorRoot.react"],(function(a,b,c,d,e,f){a=b("CometContextualLayerAnchorRoot.react");f.makeTypeChecked=a;c=a;f.make=c}),null);
__d("useMWChatEncryptedBackupsUpsellChatTabsDeferred",["cr:1916","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(){var a;return(a=b("cr:1916")())!=null?a:null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellChatTabs.bs",["useMWChatEncryptedBackupsUpsellChatTabsDeferred"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("useMWChatEncryptedBackupsUpsellChatTabsDeferred")()}f.useHook=a}),null);
__d("MWChatStateV2CompareTabs.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.openWatermark-b.openWatermark;if(a<0)return 1;else if(a>0)return-1;else return 0}function b(a,b){a=Math.max(a.minimizeWatermark,a.clientForcedMinimizeWatermark)-Math.max(b.minimizeWatermark,b.clientForcedMinimizeWatermark);if(a<0)return 1;else if(a>0)return-1;else return 0}f.byMostRecentOpened=a;f.byMostRecentMinimized=b}),null);
__d("MWChatStateV2IsComposeTab.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.tabType;if(a.TAG===0)return!0;else return!1}f.isComposeTab=a}),null);
__d("MWChatStateV2HeadGroups.bs",["MWChatStateV2CompareTabs.bs","MWChatStateV2IsComposeTab.bs","MWChatStateV2IsMinimized.bs","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=a!==void 0?b("bs_caml_option").valFromOption(a):void 0;a=Array.from(d.values()).filter(function(a){return b("MWChatStateV2IsMinimized.bs").isMinimized(b("bs_caml_option").some(f),a)}).sort(function(a,c){var d=b("MWChatStateV2CompareTabs.bs").byMostRecentMinimized(a,c);if(d===0)return b("MWChatStateV2CompareTabs.bs").byMostRecentOpened(a,c);else return d});d=c.filter(function(a){return!b("MWChatStateV2IsComposeTab.bs").isComposeTab(a)}).concat(a);return[d.slice(0,e),d.slice(e,d.length)]}f.getHeadGroups=a}),null);
__d("useMWIsTopLevelRouteMediaViewerExperiment",["MWChatVisibileRoutes","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometRouterState")();if(a==null)return!1;var b=a.main;a=a.pushViewStack;a=a&&a.length>0?a[a.length-1]:b;return d("MWChatVisibileRoutes").ROUTES.has((a=(b=a.route)==null?void 0:b.tracePolicy)!=null?a:"")}g["default"]=a}),98);
__d("useSubscriptionValue",["React"],(function(a,b,c,d,e,f,g){b=d("React");var h=b.useCallback,i=b.useEffect,j=b.useState;function a(a){var b=a.getCurrentValue,c=a.subscribe;a=j(function(){return b()});var d=a[0],e=a[1],f=h(function(){e(b)},[b]);a=j(function(){return b});var g=a[0];a=a[1];g!==b&&(a(function(){return b}),f());i(function(){var a=!1,b=function(){a||f()},d=c(b);f();return function(){a=!0,d()}},[f,c]);return d}g["default"]=a}),98);
__d("useWindowSize",["ExecutionEnvironment","react","throttle","useSubscriptionValue"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function i(){return!c("ExecutionEnvironment").canUseDOM?{innerHeight:0,innerWidth:0,outerHeight:0,outerWidth:0}:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}}function a(a){a===void 0&&(a=500);var b=h(function(b){var d=c("throttle")(b,a);window.addEventListener("resize",d);return function(){window.removeEventListener("resize",d)}},[a]);return c("useSubscriptionValue")({getCurrentValue:i,subscribe:b})}g["default"]=a}),98);
__d("MWChatStateV2MaxTabCount.bs",["bs_js_math","useMWIsTopLevelRouteMediaViewerExperiment","useWindowSize"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("useWindowSize")();a=a.innerWidth;var c=b("useMWIsTopLevelRouteMediaViewerExperiment")();if(a<1100||c)return 1;c=(a/2|0)-90|0;a=c/338;if(a<1)return 1;else return b("bs_js_math").ceil_int(a)}f.useHook=a}),null);
__d("MWChatStateV2TabGroups.bs",["MWChatStateV2CompareTabs.bs","MWChatStateV2IsOpen.bs","bs_caml_array","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){var e=a.length;if(e>c&&c>0&&d!==void 0){var f=a.findIndex(function(a){return a.tabId===d});if(f!==-1&&f>=c&&f<e){e=function(c,d){var e=b("bs_caml_array").get(a,c);a[c]=b("bs_caml_array").get(a,d);a[d]=e};e(c-1|0,f)}}return a}function a(a,c,d,e){var f=a!==void 0?b("bs_caml_option").valFromOption(a):void 0;a=g(Array.from(c.values()).filter(function(a){return b("MWChatStateV2IsOpen.bs").isOpen(b("bs_caml_option").some(f),a)}).sort(b("MWChatStateV2CompareTabs.bs").byMostRecentOpened),e,d);return[a.slice(0,e),a.slice(e,a.length)]}f.getTabGroups=a}),null);
__d("MWV2ChatHeadsLayout.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{position:"x10l6tqk",bottom:"x191j7n5",end:"x92rtbv",width:"x1useyqa"}};function a(a){a=a.children;return i.jsx("div",{className:(h||(h=b("stylex")))(j.root),children:a})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2PreloadComposeTab.bs",["JSResourceForInteraction","JSScheduler","react","useCometPreloader"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResourceForInteraction")("MWV2ComposeTab.bs").__setRef("MWV2PreloadComposeTab.bs");function a(a){a=h.useCallback(function(a){b("JSScheduler").scheduleSpeculativeCallback(function(){i.preload()})},[]);return b("useCometPreloader")("button",a,a)}f.useHook=a}),null);
__d("MWV2ComposeHead.bs",["fbt","ix","CometPressable.react","CometTintedIcon.react","MWChatStateV2.bs","MWTooltip.react","MWV2PreloadComposeTab.bs","bs_curry","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k={button:{position:"x1n2onr6",display:"x3nfvp2",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x1useyqa",height:"xsdox4t",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",backgroundColor:"x1l31dnx",boxShadow:"x1qeybcx",appearance:"xjyslct",":hover":{boxShadow:"x19xcq9t"}}};function a(a){var c=a.onHoverChange;a=a.onFocusChange;var d=b("MWChatStateV2.bs").useDispatch(void 0),e=function(a){var c=Date.now();a=function(a){return{tabId:a.tabId,tabType:a.tabType,openWatermark:c,minimizeWatermark:a.minimizeWatermark,clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,openFlyoutWatermark:a.openFlyoutWatermark}};var e=function(a){var b=a.openWatermark<a.closeWatermark;if(b)return{tabId:a.tabId,tabType:{TAG:0,_0:[],_1:!1},openWatermark:c,minimizeWatermark:a.minimizeWatermark,clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,openFlyoutWatermark:a.openFlyoutWatermark};else return{tabId:a.tabId,tabType:{TAG:0,_0:[],_1:!1},openWatermark:a.openWatermark,minimizeWatermark:a.minimizeWatermark,clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:c,openFlyoutWatermark:a.openFlyoutWatermark}};return b("bs_curry")._1(d,[{TAG:3,_0:{TAG:0,_0:[],_1:!1},_1:{shouldFocus:!0},_2:e,_3:a}])},f=b("MWV2PreloadComposeTab.bs").useHook(void 0),i=g._("__JHASH__lMGuJRoIOm8__JHASH__");return j.jsx(b("MWTooltip.react"),{tooltip:i.toString(),align:"middle",position:"start",children:j.jsx(b("CometPressable.react"),{"aria-label":i,testid:"mwchat-compose-head",onHoverChange:c,onHoverIn:f[0],onHoverOut:f[1],onFocusChange:a,onPress:e,xstyle:function(a){return[k.button]},children:j.jsx(b("CometTintedIcon.react"),{color:"primary",icon:b("fbicon")._(h("507172"),20)})})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ChatHeads.bs",["BootloaderResource","CometErrorBoundary.re","CometPlaceholder.react","JSResource","MWChatStateV2.bs","MWChatStateV2HeadGroups.bs","MWChatStateV2MaxTabCount.bs","MWChatStateV2TabGroups.bs","MWV2ChatHeadsLayout.bs","MWV2ComposeHead.bs","bs_caml_option","bs_curry","bs_int64","cr:1134","react","useMWIsTopLevelRouteMediaViewerExperiment"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResource")("MWV2ChatOverflowHead.bs").__setRef("MWV2ChatHeads.bs");function j(a,b,c,d){return{style:a,excessHeads:b,onHoverChange:c}}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}c={reasonResource:i,makeProps:j,make:k};var l=b("JSResource")("MWV2ChatHead.bs").__setRef("MWV2ChatHeads.bs");function m(a,b,c,d,e,f){return{threadKeyDescriptor:a,tab:b,style:c,onHoverChange:d,onFocusChange:e}}function n(a){return h.createElement(b("BootloaderResource").read(l).make,a)}d={reasonResource:l,makeProps:m,make:n};function o(a){return{transform:"translateY(-"+String(Math.imul(a,58))+"px)"}}function p(a){return{transform:"translateY(-"+String(Math.imul(a,58)-12|0)+"px)"}}function a(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});a=a.tabs;var c=b("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),d=b("MWChatStateV2.bs").useState(function(a){return a.mediaViewerOpenWatermark}),e=b("MWChatStateV2MaxTabCount.bs").useHook(void 0),f=b("useMWIsTopLevelRouteMediaViewerExperiment")();f=f?d.mediaViewerOpenWatermark:void 0;d=b("MWChatStateV2TabGroups.bs").getTabGroups(b("bs_caml_option").some(f),a,c.focusedTabId,e);c=b("MWChatStateV2HeadGroups.bs").getHeadGroups(b("bs_caml_option").some(f),d[1],a,5);e=c[1];f=c[0];a=d[0].length;c=f.length;var g=e.length>0?1:0;d=h.useState(function(){return!1});var i=d[1],l=e.length;if(l!==1)l=l!==0?h.jsx(b("CometPlaceholder.react"),{children:h.jsx(k,j(o(1),e,function(a){return b("bs_curry")._1(i,function(b){return a})},void 0)),fallback:null}):null;else{e=e[0];var q=e.tabType;if(q.TAG===0)l=null;else{q=q._0;l=h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:h.jsx(b("CometPlaceholder.react"),{children:h.jsx(n,m(q,e,o(1),function(a){return b("bs_curry")._1(i,function(b){return a})},function(a){return b("bs_curry")._1(i,function(b){return a})},void 0)),fallback:null})},b("bs_int64").to_string(q.threadKey))}}return h.jsxs(b("MWV2ChatHeadsLayout.bs").make,{children:[!(b("cr:1134")==null)&&(a>0||c>0)?h.jsx(b("cr:1134").make,{isVisible:d[0],openTabCount:a,style:p((c+g|0)+1|0)}):null,f.reverse().map(function(c,d){var a=c.tabType;if(a.TAG===0)return null;a=a._0;d=(d+g|0)+1|0;return h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:h.jsx(b("CometPlaceholder.react"),{children:h.jsx(n,m(a,c,o(d),function(a){return b("bs_curry")._1(i,function(b){return a})},function(a){return b("bs_curry")._1(i,function(b){return a})},void 0)),fallback:null})},b("bs_int64").to_string(a.threadKey))}),l,h.jsx(b("MWV2ComposeHead.bs").make,{onHoverChange:function(a){return b("bs_curry")._1(i,function(b){return a})},onFocusChange:function(a){return b("bs_curry")._1(i,function(b){return a})}})]})}e=a;f.LazyMWV2ChatOverflowHead=c;f.LazyMWV2ChatHead=d;f.$MWV2ChatOptionsHead$requireCond=b("cr:1134");f.make=e}),null);
__d("MWV2ChatTabLoading.bs",["cssVar","fbt","MWChatStateActions.bs","MWChatStateV2.bs","MWPThreadTheme.bs","MWV2HeaderCloseButton.bs","MWV2HeaderContainer.bs","MWV2IsTabFocusedContext.bs","MWV2TabContainer.bs","bs_curry","react","useCometLoadingStateTracker"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");function a(a){var c=a.tab;a=b("useCometLoadingStateTracker")();var d=a[1],e=b("MWChatStateV2.bs").useDispatch(void 0);a=b("MWPThreadTheme.bs").useTop(void 0);var f=b("MWV2IsTabFocusedContext.bs").useContext(void 0);a=f?a:"#C9CCD1";j.useEffect(function(){if(f){var a=d.current;a==null||a.focus()}},[f]);return j.jsx(b("MWV2TabContainer.bs").make,{tab:c,tabIndex:0,ariaBusy:!0,ariaLabel:h._("__JHASH__SxkfHU6fYt9__JHASH__"),domRef:d,children:j.jsx(b("MWV2HeaderContainer.bs").make,{endContent:j.jsx(b("MWV2HeaderCloseButton.bs").make,{onPress:function(a){return b("bs_curry")._1(e,b("MWChatStateActions.bs").closeTab(Date.now(),c.tabId))},color:a})})})}c=a;f.make=c}),null);
__d("MWV2ChatTabsLayout.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{display:"x78zum5",position:"xixxii4",bottom:"x1ey2m1c",end:"x164qtfw",zIndex:"x1vjfegm"}};function a(a){a=a.children;return i.jsx("div",{className:(h||(h=b("stylex")))(j.root),"data-testid":"mwchat-tabs",children:a})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2ChatTabs.bs",["BootloaderResource","CometErrorBoundary.re","CometHeroInteractionWithDiv.react","CometPlaceholder.react","JSResource","MWChatInteraction.bs","MWChatStateV2.bs","MWChatStateV2MaxTabCount.bs","MWChatStateV2TabGroups.bs","MWPReplyContext.bs","MWV2ChatTabLoading.bs","MWV2ChatTabsLayout.bs","MWV2IsTabFocusedContext.bs","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","cr:356","react","useCometDisplayTimingTrackerForInteraction","useMWIsTopLevelRouteMediaViewerExperiment"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResource")("MWV2ComposeTab.bs").__setRef("MWV2ChatTabs.bs");function a(a,b,c){return{tab:a,initialTokens:b}}function j(a){return h.createElement(b("BootloaderResource").read(i).make,a)}e={reasonResource:i,makeProps:a,make:j};var k=b("JSResource")("MWV2ChatTab.bs").__setRef("MWV2ChatTabs.bs");function c(a,b,c){return{tab:a,threadKeyDescriptor:b}}function l(a){return h.createElement(b("BootloaderResource").read(k).make,a)}a={reasonResource:k,makeProps:c,make:l};var m=b("cr:356")==null?void 0:b("bs_caml_option").some(b("cr:356"));function d(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});var c=b("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),d=c.focusedTabId;c=b("MWChatStateV2.bs").useState(function(a){return a.mediaViewerOpenWatermark});var e=b("MWChatStateV2MaxTabCount.bs").useHook(void 0),f=b("useMWIsTopLevelRouteMediaViewerExperiment")();f=b("MWChatStateV2TabGroups.bs").getTabGroups(b("bs_caml_option").some(f?c.mediaViewerOpenWatermark:void 0),a.tabs,d,e);var g=h.useCallback(function(a){if(a.TAG===0)return null;else return b("MWChatInteraction.bs").get(b("bs_int64").to_string(a._0.threadKey))},[]),i=b("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0,void 0);c=f[0].map(function(a,c){var e=b("bs_caml_obj").caml_equal(d,a.tabId),f=a.tabType;f=f.TAG===0?h.jsx(j,{tab:a,initialTokens:f._0}):h.jsx(l,{tab:a,threadKeyDescriptor:f._0});f=h.jsx(b("MWV2IsTabFocusedContext.bs").make,{children:h.jsx(b("MWPReplyContext.bs").make,{children:h.jsx(b("CometPlaceholder.react"),{children:h.jsx(b("CometHeroInteractionWithDiv.react"),{children:f,interactionUUID:b("bs_curry")._1(g,a.tabType),interactionDesc:"MWV2_CHAT_TAB",pageletName:"ChatTab",excludeFromMainVC:!0,ref:i}),fallback:h.jsx(b("MWV2ChatTabLoading.bs").make,{tab:a})})}),isFocused:e});return h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:b("cr:356")==null?f:h.jsx(m.TabIndex.make,{children:f,value:c})},String(a.tabId))});return h.jsx(b("MWV2ChatTabsLayout.bs").make,{children:b("cr:356")==null?c:h.jsx(m.make,{children:c})})}c=d;f.LazyMWV2ComposeTab=e;f.LazyMWV2ChatTab=a;f.$MWComposerKeyCommandFocusManager$OR$null$requireCond=b("cr:356");f.make=c}),null);
__d("MWV2ChatUpdateMediaViewerOpenWatermark.bs",["MWChatStateActions.bs","MWChatStateV2.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("MWChatStateV2.bs").useDispatch(void 0);return h.useCallback(function(a){a=Date.now();return b("bs_curry")._1(c,b("MWChatStateActions.bs").updateMediaViewerOpenWatermark(a))},[c])}f.useHook=a}),null);
__d("MWV2CookieWriter.bs",["DeferredCookie","MWCMThreadTypes.bs","MessagingThreadType.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml","bs_caml_option","bs_int64","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").group))return"g.";else if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaOneToOne))return"sc.";else if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaGroup))return"sg.";else return"u."}function a(a,c,d){var e=function(a){if(c===void 0)return!1;var d=c.tabType;if(d.TAG===0)return!1;else return b("bs_caml").i64_eq(d._0.threadKey,a)},f=function(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:a,tl:0}))},h={contents:void 0};a=a.map(function(a){var c=a.threadType,d=a.threadKey,i={};return f(d).then(function(a){if(a!==void 0)if(e(d)){b("gkx")("1747")&&b("MWCMThreadTypes.bs").isJoinedCMThread(c)&&(h.contents=b("bs_int64").to_string(a.parentThreadKey));return b("Promise").resolve(void 0)}else{i.i=g(c)+b("bs_int64").to_string(d);b("gkx")("1747")&&b("MWCMThreadTypes.bs").isJoinedCMThread(c)&&(i.p=b("bs_int64").to_string(a.parentThreadKey));return b("Promise").resolve(b("bs_caml_option").some(i))}else{i.i=g(c)+b("bs_int64").to_string(d);return b("Promise").resolve(b("bs_caml_option").some(i))}})});a=b("Promise").all(a).then(function(a){var d;if(c!==void 0){var e=c.tabType;if(e.TAG===0)d=void 0;else{e=e._0;d=g(e.threadType)+b("bs_int64").to_string(e.threadKey)}}else d=void 0;e=a.filter(b("bs_belt_Option").isSome);a=h.contents;a=a!==void 0?JSON.stringify({t3:e,utc3:Date.now(),lm3:d,lm3p:a,v:1}):JSON.stringify({t3:e,utc3:Date.now(),lm3:d,v:1});a!==void 0?b("DeferredCookie").addToQueue("presence","C"+a,0,b("gkx")("1747")?"/":"",!1,!1,!0):b("recoverableViolation")("Failed to serialize cookie","messenger_comet");return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)}c=1;f.version=c;f.write=a}),null);
__d("UseMWV2CookieWriter.bs",["MWChatStateV2.bs","MWChatStateV2CompareTabs.bs","MWChatStateV2IsOpen.bs","MWV2CookieWriter.bs","bs_belt_Array","bs_caml","gkx","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("MWChatStateV2.bs").useState(function(a){return a.tabs}),d=b("useReStore")();h.useEffect(function(){var a=b("bs_belt_Array").get(Array.from(c.tabs.values()).filter(function(a){return b("MWChatStateV2IsOpen.bs").isOpen(void 0,a)}).sort(b("MWChatStateV2CompareTabs.bs").byMostRecentOpened),0),e=function(c){c=c.tabType;if(a===void 0)return!1;var d=a.tabType;if(d.TAG===0||c.TAG===0)return!1;else return b("bs_caml").i64_eq(d._0.threadKey,c._0.threadKey)},f=[];Array.from(c.tabs.values()).filter(function(a){if(a.openWatermark>a.closeWatermark)return!0;else return a.minimizeWatermark>a.closeWatermark}).filter(function(a){if(b("gkx")("1747"))return!0;else return!e(a)}).sort(function(a,c){var d=b("MWChatStateV2CompareTabs.bs").byMostRecentMinimized(a,c);if(d===0)return b("MWChatStateV2CompareTabs.bs").byMostRecentOpened(a,c);else return d}).forEach(function(a){a=a.tabType;if(a.TAG===0)return;f.push(a._0)});b("MWV2CookieWriter.bs").write(f,a,d)},[d,c])}c=b("gkx")("1812641")?a:function(a){};f.useHook=c}),null);
__d("MWV2ChatTabsRoot.bs",["CometContextualLayerAnchorRoot.re","CometPlaceholder.react","MWChatEncryptedBackupsUpsellChatTabs.bs","MWChatVisibilityOverrideContext","MWLSChatInit.bs","MWLSThreadDisplayContext.bs","MWSetupPresenceReportingDeferred.bs","MWV2ChatHeads.bs","MWV2ChatTabs.bs","MWV2ChatUpdateMediaViewerOpenWatermark.bs","UseMWV2CookieWriter.bs","bs_curry","react","stylex","useMWIsOnPushView","useMWIsTopLevelRouteMediaViewerExperiment","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{position:"xixxii4",bottom:"x1ey2m1c",end:"xds687c"},container:{display:"x78zum5",alignItems:"xuk3077",isolation:"xc8icb0"},chatAbovePushView:{zIndex:"x1vjfegm"}};function k(a){a=b("useMWIsOnPushView")();var c=b("MWChatEncryptedBackupsUpsellChatTabs.bs").useHook(void 0);return i.jsx(b("MWLSThreadDisplayContext.bs").Provider.make,{children:i.jsx("div",{className:(h||(h=b("stylex")))(j.root,a?j.chatAbovePushView:!1),children:i.jsx(b("CometContextualLayerAnchorRoot.re").make,{children:i.jsx("div",{className:h(j.container),children:c===null?i.jsxs(i.Fragment,{children:[i.jsx(b("MWV2ChatTabs.bs").make,{}),i.jsx(b("MWV2ChatHeads.bs").make,{})]}):c})})}),value:"ChatTab"})}c={styles:j,make:k};function l(a){a=a.children;b("UseMWV2CookieWriter.bs").useHook(void 0);b("MWLSChatInit.bs").useHook(void 0);return a}d={make:l};function a(a){var c=b("useMWIsTopLevelRouteMediaViewerExperiment")();a=b("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(c);var d=b("MWV2ChatUpdateMediaViewerOpenWatermark.bs").useHook(void 0);a=b("useShouldShowMessagingEntrypointInCometRoot")("CHAT")&&a;i.useEffect(function(){c&&b("bs_curry")._1(d,void 0)},[c,d]);return i.jsxs(b("CometPlaceholder.react"),{children:[i.jsx(b("MWSetupPresenceReportingDeferred.bs").make,{}),i.jsx(l,{children:a?i.jsx(k,{}):null})],fallback:null})}e=a;f.ChatTabs=c;f.LoadLightspeed=d;f.make=e}),null);
__d("MWV2ChatTabsRoot.re",["MWV2ChatTabsRoot.bs"],(function(a,b,c,d,e,f){a=b("MWV2ChatTabsRoot.bs").make;f.make=a}),null);
__d("MWV2ChatContainer.react",["LSPlatformClientProviderWithDeferredLoadingStrategy.re","LSPlatformConfig.re","LSPlatformMessengerConfig.re","MWV2ChatTabsRoot.re","cr:1847792","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(d("LSPlatformConfig.re").Provider_make,{config:d("LSPlatformMessengerConfig.re").configEagerlyLoaded,children:h.jsxs(d("LSPlatformClientProviderWithDeferredLoadingStrategy.re").make,{children:[h.jsx(d("MWV2ChatTabsRoot.re").make,{}),b("cr:1847792")&&h.jsx(b("cr:1847792"),{entrypoint:"fbdotcom"})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXACIntroView.react",["CometPlaceholder.react","CometRelay","MWXACIntroViewQuery.graphql","RelayHooks","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e="8626";var j="8634",k="8635",l=h!==void 0?h:h=b("MWXACIntroViewQuery.graphql"),m={fbdotcom:e,inbox:j,mdotcom:k};function a(a){var b=m[a.entrypoint],e=d("RelayHooks").useLazyLoadQuery(l,{xacIntroNuxId:b});e=e==null?void 0:(e=e.viewer)==null?void 0:e.messenger_xac_intro_renderer;return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:e?i.jsx(d("CometRelay").MatchContainer,{match:e,props:{entrypoint:a.entrypoint,nuxId:b,onClose:c("emptyFunction")}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCometXACIntroView.react",["MWXACIntroView.react","react","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(){var a=c("useCometRouterState")(),b=a==null?void 0:a.main;a=a==null?void 0:a.pushViewStack;a=a&&a.length>0?a[a.length-1]:b;return(a==null?void 0:a.route.tracePolicy)==="comet.messenger.inbox"}function a(a){var b=i();return b&&a.entrypoint==="fbdotcom"?null:h.jsx(c("MWXACIntroView.react"),{entrypoint:a.entrypoint})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWChatBadgeInitSyncCompleteUpdates.bs",["LSSyncStatus.bs","MAWInitSyncComplete.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return b("bs_belt_Option").mapWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("sync_groups")),{hd:b("MAWInitSyncComplete.bs").id,tl:0})},[c])),!1,function(a){return b("bs_caml").i64_eq(a.syncStatus,b("LSSyncStatus.bs").complete)})}f.useHook=a}),null);
__d("MAWChatBadgeInitSyncCompleteUpdates.re",["MAWChatBadgeInitSyncCompleteUpdates.bs"],(function(a,b,c,d,e,f){a=b("MAWChatBadgeInitSyncCompleteUpdates.bs").useHook;f.useHook=a}),null);
__d("MWChatBadgeCount.react",["CometNumberedBadge.react","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","MAWGating.re","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.re","MWXacGating.re","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useRef;function l(a){var e,f=a.overflow,g=a.setBadgeCount;a=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!c("MWXacGating.re").isGroupsEnabled()},{fetchPolicy:"store-or-network"});a=(a=a.viewer)==null?void 0:a.message_threads;var l=a!=null&&!m((e=a.is_loading_client_threads)!=null?e:d("MAWGating.re").isArmadillo()===!0)&&a.unseen_count!=null&&a.unseen_count>0?Math.min(d("MWChatBadgeCountUpdates.re").minSyncedThreads,a.unseen_count):0,n=k(null);j(function(){g&&n.current!==l&&(n.current=l,g(l))},[l,g]);return i.jsx(i.Fragment,{children:l>0?i.jsx(c("CometNumberedBadge.react"),{overflow:f,testid:void 0,value:l}):null})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.overflow;a=a.setBadgeCount;return i.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx("span",{}),children:i.jsx(l,{overflow:b,setBadgeCount:a})})}))}a.displayName=a.name+" [from "+f.id+"]";function m(a){return a&&((a=c("qex")._("15"))!=null?a:!1)}g["default"]=a}),98);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","CometRelay","ExecutionEnvironment","FBLogger","LsSystemFolder.re","MAWChatBadgeInitSyncCompleteUpdates.re","MWChatBadgeCountUpdates.re","MWXacGating.re","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function j(){var a=d("CometRelay").useRelayEnvironment(),b=d("MWChatBadgeCountUpdates.re").useHook(d("LsSystemFolder.re").inbox),e=d("MAWChatBadgeInitSyncCompleteUpdates.re").useHook();i(function(){var d={suppress_xac_groups:!c("MWXacGating.re").isGroupsEnabled()};a.commitUpdate(function(a){var f=a.getRoot();if(f==null){c("recoverableViolation")("A store root must be present to move forward.","messenger_comet");return}f=f.getLinkedRecord("viewer");if(f==null){c("recoverableViolation")("A viewer record does not exist.","messenger_comet");return}var g=f.getLinkedRecord("message_threads");if(g==null){var h="client:root:viewer:message_threads";g=a.create(h,"ViewerMessageThreadsConnection");f.setLinkedRecord(g,"message_threads")}if(b!=null){a=g.getValue("unseen_count",d);(a===null||a!==b)&&g.setValue(b,"unseen_count",d)}h=g.getValue("is_loading_client_threads");(h==null||h===e)&&g.setValue(!e,"is_loading_client_threads")})},[a,e,b]);return null}function k(a){var b=c("FBLogger")("messenger_browser_clients");a!=null&&(b=b.catching(a));b.debug("Error loading MWChatBadgeCountUpdater")}function a(){return c("ExecutionEnvironment").canUseDOM?h.jsx(c("CometErrorBoundary.react"),{onError:k,children:h.jsx(j,{})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatOptionsHead.bs",["fbt","ix","CometDeferredPopoverTrigger.react","CometPressable.react","MWIcon.react","MWTooltip.react","bs_curry","fbicon","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={headArea:{height:"xc9qbxq",width:"x14qfxbe",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",position:"x10l6tqk",start:"xi8xln7"},hoverTarget:{alignItems:"x6s0dn4",backgroundColor:"xjbqb8w",display:"x78zum5",height:"xnnlda6",justifyContent:"xl56j7k",marginStart:"x1tl9596",marginTop:"xhsvlbd",width:"x1dmp6jm"},head:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",height:"xc9qbxq",width:"x14qfxbe",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",backgroundColor:"x1l31dnx",boxShadow:"x1qeybcx",":hover":{boxShadow:"x19xcq9t"},opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i"},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh"}},m=g._("__JHASH__GqqnGnZcXBj__JHASH__");function a(a){var c=a.isVisible,d=a.openTabCount,e=a.style;a=k.useState(function(){return!1});var f=a[1],g=a[0];a=k.useState(function(){return!1});var i=a[1],n=a[0];a=k.useState(function(){return!1});var o=a[1],p=a[0];return k.jsx(b("CometDeferredPopoverTrigger.react"),{onVisibilityChange:function(a){return b("bs_curry")._1(o,function(b){return a})},popoverResource:b("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.bs"),popoverProps:{hasOpenTabs:d>0},align:"end",position:"above",children:function(a,d){return k.jsx("div",{className:(j||(j=b("stylex")))(l.headArea),style:e,children:k.jsx("div",{className:j(l.hoverTarget),onMouseEnter:function(a){return b("bs_curry")._1(f,function(a){return!0})},onMouseLeave:function(a){return b("bs_curry")._1(f,function(a){return!1})},"data-testid":"mwchat-options-head-hover-target",children:k.jsx(b("CometPressable.react"),{label:m,ref:a,testid:"mwchat-options-head",onFocusChange:function(a){return b("bs_curry")._1(i,function(b){return a})},onPress:function(a){return b("bs_curry")._1(d,void 0)},xstyle:function(a){return[l.head,c||g||n||p?l.headVisible:!1]},children:k.jsx(b("MWTooltip.react"),{tooltip:m,align:"middle",position:"start",children:k.jsx(b("MWIcon.react"),{icon:b("fbicon")._(h("484387"),20)})})})})})}})}c=36;d=10;e=a;f.width=c;f.marginBottom=d;f.styles=l;f.make=e}),null);
__d("CometTypeaheadTraceProvider",["CometHeroLogging","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.loggingProvider,c=a.trace;a=a.vcTrackerRef;this.$5=!1;this.$7=null;this.$1=c;this.$2=b;this.$6=a;this.$3="unknown"}var b=a.prototype;b.getInteractionUUID=function(){return this.$4};b.getVCTrackerRef=function(){return this.$6};b.isResolved=function(){return this.$5};b.resolve=function(){this.$5=!0,this.$7=null};b.setEventStartTime=function(a){this.$7=a};b.setEndReason=function(a){this.$3=a};b.getEndReason=function(){return this.$3};b.getEntriesCountForVisualComplete=function(){return 8};b.trace=function(a,b){var d=this;this.setEndReason("continued_typing");this.$5=!1;var e=void 0,f=void 0;this.$7!=null&&(f=this.$7,e=c("performanceNow")()-f);return this.$1(function(e){var f=c("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(e.getTraceId());d.$4=f;e.addMetadata("entry_point_surface",d.$2.getContext());e.addMetadata("current_text_length",b.length);f=d.$2.getSessionID();f!=null&&e.addMetadata("typeahead_sid",f);e.onComplete(function(){e.addMetadata("end_reason",d.getEndReason())});a(e)},f,e)};return a}();g["default"]=a}),98);
__d("CometTypeaheadEntityViewItem.react",["CometProfilePhoto.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,d=a.meta,e=a.pictureUrl;a.queryString;var f=a.size;f=f===void 0?36:f;var g=a.style;g=g===void 0?"circle":g;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","meta","pictureUrl","queryString","size","style"]);return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemStartContent:e!=null?h.jsx(c("CometProfilePhoto.react"),{shape:g,size:f,source:{uri:e}}):null,children:h.jsx(c("TetraTextPairing.react"),{body:b.label,bodyLineLimit:2,level:3,meta:d,metaLineLimit:1,reduceEmphasis:!0})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a,b){var c=a?a.getInteractionUUID():null,d=a?a.getVCTrackerRef():null,e=c!=null&&a!=null&&!a.isResolved();return h(function(){var f=function(c,d){a&&d!=null&&a.setEventStartTime(d.timeStamp),b(c,d)};return{interactionUUID:c,onTracedChange:f,shouldHoldHeroTracing:e,vcTrackerRef:d}},[c,b,e,a,d])}g["default"]=a}),98);
__d("searchCometTypeaheadODSLogFocusEvent",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("searchCometTypeaheadODSLogFocusEvent");function a(a,b){b===void 0&&(b=1),h.onReady(function(c){c.bumpEntityKey(354,a,"focused",b)})}g["default"]=a}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){return function(b){var c=b.inputRef,d=b.onPressEntry,e=b.traceProvider;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onPressEntry","traceProvider"]);var f=i(function(a){e&&e.setEndReason("successful_user_action"),d&&d(a)},[d,e]);return h.jsx(a,babelHelpers["extends"]({},b,{inputRef:c,onPressEntry:f,traceProvider:e}))}}g["default"]=a}),98);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","filterNulls","react","recoverableViolation","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useMemo;function a(a){var e=a.bootstrapDatasource,f=d("CometRelay").useRelayEnvironment();return i(function(){return{validate:function(a){a=c("filterNulls")(a.map(function(a){if(a.subtype!=="bootstrap")return null;a=(a=a.rawData.structuredInfo)!=null?a:{};a=a.direct_nav_result;if(a==null)return null;var b=a.ent_id;a=a.title;if(b==null||a==null){c("recoverableViolation")("Unexpected missing ent_id or title on direct_nav_result","search");return null}return{id:b,keyword:a}}));d("CometRelay").fetchQuery(f,h!==void 0?h:h=b("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:a}}).subscribe({error:function(a){d("CometRelayErrorHandling").markErrorAsHandled(a)},next:function(a){a=a.search_client_cache_policy_check;for(var a=(a=a==null?void 0:a.policy_decision)!=null?a:[],b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var f=d.cache_type,g=d.force_cache_refresh;d=d.ids_to_remove;if(f==="KEYWORD_BOOTSTRAP"){for(var f=d,d=Array.isArray(f),h=0,f=d?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(d){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;e.removeEntriesByEntID(i)}g===!0&&(e.clear(),e.bootstrap())}}}})}}},[e,f])}g["default"]=a}),98);
__d("useCometSearchTypeaheadTraceProvider",["CometTypeaheadTraceProvider","qpl","react","useCometDisplayTimingTrackerForInteraction","useCometInteractionTracing"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){var b=c("useCometInteractionTracing")(c("qpl")._(30605354,"2310"),"contingent","INTERACTION"),d=c("useCometDisplayTimingTrackerForInteraction")("SearchTypeaheadLayout"),e=h(function(){return new(c("CometTypeaheadTraceProvider"))({loggingProvider:a,trace:b,vcTrackerRef:d})},[a,b,d]);return e}g["default"]=a}),98);
__d("useSearchCometShouldRenderBadgeWithExposure",["QE2Logger","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){return h(function(){var b;if(a==null)return!1;if(!c("qex")._("578"))return!0;d("QE2Logger").logExposureForUser("search_nullstate_desktop");return(b=c("qex")._("580"))!=null?b:!1},[a])}g["default"]=a}),98);
__d("CometSearchTypeaheadRecentEntityViewItem.react",["CometBadge.react","CometTypeaheadEntityViewItem.react","react","recoverableViolation","useSearchCometShouldRenderBadgeWithExposure"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.rawData,e=d.badgeSnippet;d=d.profile;d=(d=d)!=null?d:{};var f=d.id,g=d.profilePictureURL;d=d.url;g==null&&c("recoverableViolation")("Missing profile picture for fbid "+f,"search");f=c("useSearchCometShouldRenderBadgeWithExposure")(e);f=f?h.jsxs(h.Fragment,{children:[h.jsx(c("CometBadge.react"),{color:"blue"}),e]}):void 0;return h.jsx(c("CometTypeaheadEntityViewItem.react"),babelHelpers["extends"]({},a,{entry:b,linkProps:{preventLocalNavigation:!0,url:d},meta:f,pictureUrl:g,size:36}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadRecentEntityViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("entity")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react",["CometImage.react","CometProfilePhoto.react","CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo,j=36,k={imageIcon:{display:"x1lliihq"}};function a(a){var b,d=a.entry,e=a.isActive,f=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);b=(b=(b=d.rawData.structuredInfo)==null?void 0:b.direct_nav_result)!=null?b:{};var g=b.img_url,l=b.link_url,m=b.snippet;b=b.type;var n=i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:l}},[l]),o=null;g!=null&&(o=b==="SHORTCUT"?h.jsx(c("CometImage.react"),{height:j,src:g,width:j,xstyle:k.imageIcon}):h.jsx(c("CometProfilePhoto.react"),{shape:b==="SHORTCUT"?"square":"circle",size:j,source:{uri:g}}));return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:d,isActive:e,itemStartContent:o,linkProps:n,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:d.label,query:f,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:m,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react",["CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps,i=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=e.rawData.structuredInfo)!=null?b:{};b=b.disambiguation_result;if(b==null){c("recoverableViolation")("We were trying to show disambiguation result, but had missing data","search");return null}b=b.disambiguation_info_list;var j=b[0].snippet;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f}),linkProps:g,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:e.label,query:i,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:j,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react",["CometProfilePhoto.react","CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps,i=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=(b=e.rawData.structuredInfo)==null?void 0:b.high_confidence_result)!=null?b:{};var j=b.hcm_id,k=b.picture_url,l=b.snippet;if(k==null){c("recoverableViolation")("Missing HC keyword item picture url for hcm_id "+((b=j)!=null?b:"null"),"search")}return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemEndContent:k!=null?h.jsx(c("CometProfilePhoto.react"),{shape:"roundedRect",size:36,source:{uri:k}}):null,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f}),linkProps:g,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:e.label,query:i,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:l,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometSearchTypeaheadRecentEntityViewItem.react","CometTypeaheadFocusLockRegion.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);return h.jsx(c("CometSearchTypeaheadRecentEntityViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})}),testid:void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react",["CometBadge.react","CometProfilePhoto.react","CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react","useSearchCometShouldRenderBadgeWithExposure"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function a(a){var b=a.entry,d=a.isActive;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);var e=b.metaData,f=b.rawData;e=e.markers;var g=f.badgeSnippet;f=f.structuredInfo;f=(f=f==null?void 0:f.direct_nav_result)!=null?f:{};var j=f.img_url,k=f.link_url,l=f.snippet,m=f.title;f=f.type;var n=i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:k}},[k]),o=c("useSearchCometShouldRenderBadgeWithExposure")(g);o=o?h.jsxs(h.Fragment,{children:[h.jsx(c("CometBadge.react"),{color:"blue"}),g]}):e.has("TEMP_direct_nav_as_entity")?null:l;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:d,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})}),itemStartContent:j!=null?h.jsx(c("CometProfilePhoto.react"),{shape:f==="SHORTCUT"?"square":"circle",size:36,source:{uri:j}}):null,linkProps:n,testid:void 0,children:h.jsx(c("TetraTextPairing.react"),{body:m,bodyLineLimit:2,level:3,meta:o,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=e.rawData.structuredInfo)!=null?b:{};b=b.disambiguation_result;if(b==null){c("recoverableViolation")("Missing disambiguation result STS info","search");return null}b=b.disambiguation_info_list;b=b[0].snippet;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:e})}),itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewRecentIcon,{isActive:f}),linkProps:g,children:h.jsx(c("TetraTextPairing.react"),{body:e.label,bodyLineLimit:2,level:2,meta:b,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react",["CometProfilePhoto.react","CometRow.react","CometRowItem.react","CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,e=a.isActive,f=a.linkProps;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);var g=b.metaData,i=b.rawData;i=(i=(i=i.structuredInfo)==null?void 0:i.high_confidence_result)!=null?i:{};var j=i.hcm_id,k=i.picture_url;i=i.snippet;g=g.markers;if(k==null){c("recoverableViolation")("Missing HC keyword item picture url for hcm_id "+((j=j)!=null?j:"null"),"search")}j=g.has("TEMP_high_confidence_as_plain_keyword");return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:e,itemEndContent:h.jsxs(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[k!=null&&!j?h.jsx(c("CometRowItem.react"),{children:h.jsx(c("CometProfilePhoto.react"),{shape:"roundedRect",size:36,source:{uri:k}})}):null,h.jsx(c("CometRowItem.react"),{children:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})})})]}),itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewRecentIcon,{isActive:e}),linkProps:f,children:h.jsx(c("TetraTextPairing.react"),{body:j?b.label.toLowerCase():b.label,bodyLineLimit:2,level:3,meta:g.has("TEMP_high_confidence_as_plain_keyword")?void 0:i,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("direct_nav")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("keyword")&&b.has("direct_nav")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("disambiguation")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("disambiguation")&&a.subtype==="keyword"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("high_confidence")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("high_confidence")&&a.subtype==="keyword"?a:null}f["default"]=a}),66);
__d("searchCometTypeaheadSTSMappings",["CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react","CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react","CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react","CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react","CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react","CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react","CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react","cometSearchTypeaheadRecentEntityViewItem.resolver","cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver","cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver","cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver"],(function(a,b,c,d,e,f,g){"use strict";a=[{resolver:c("cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadRecentEntityViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react")}].filter(Boolean);g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef;function a(a,d){var e,f=a.onChange;a=babelHelpers.objectWithoutPropertiesLoose(a,["onChange"]);e=(e=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?e:{};var g=e.subscribeToGlobalTypeaheadFocus;e=c("useRefEffect")(function(a){var b=g==null?void 0:g(function(){if(a==null)return;a.value="";a.focus();f("")});return b},[f,g]);var k=j(null),l=j(!1);i(function(){var a=k.current;if(b("cr:2012305")!=null&&a!=null&&l.current===!1){b("cr:2012305").trackTypingPerf(a,"top_tab_serp_typeahead");l.current=!0;return function(){b("cr:2012305").unregisterTypingPerf(a),l.current=!1}}},[]);e=c("useMergeRefs")(e,k);e=c("useMergeRefs")(e,d);return h.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},a,{onChange:f,ref:e}))}a.displayName=a.name+" [from "+f.id+"]";d=h.forwardRef(a);g["default"]=d}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.extraLayoutProps;b=b===void 0?{}:b;var d=b.afterViewContent;b=b.beforeViewContent;var e=a.helperText,f=a.label,g=a.onAbandonTypeahead_DO_NOT_USE,i=a.onBlur,j=a.onChange,k=a.onClick,l=a.onDownArrow,m=a.onEnter,n=a.onEscape,o=a.onHighlightEntry,p=a.onOutsideClick,q=a.onPressEntry,r=a.onShiftTab,s=a.onTab,t=a.onUpArrow,u=a.traceProvider,v=a.viewRole,w=a.inputRef,x=a.xstyles;a=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","viewRole","inputRef","xstyles"]);var y=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();y=y.isOpened;var z=c("useCometInternalTypeaheadState")(),A=z.activeEntries;z=z.highlightedEntry;var B=c("useCometInternalTypeaheadFetch")();B=B.isLoading;w=c("useCometTypeaheadInputRefs")(w);var C=w.composedRef;w=w.inputRef;x=(x=x)!=null?x:c("useSearchCometGlobalTypeaheadStyles")();u=c("useCometInternalTypeaheadHeroTracing")(u,j);j=u.interactionUUID;var D=u.onTracedChange,E=u.shouldHoldHeroTracing;u=u.vcTrackerRef;g=c("useCometTypeaheadInternalLayoutContextualStrategyHandlers")({handlers:{onAbandonTypeahead_DO_NOT_USE:g,onBlur:i,onChange:D,onClick:k,onDownArrow:l,onEnter:m,onEscape:n,onHighlightEntry:o,onOutsideClick:p,onPressEntry:q,onShiftTab:r,onTab:s,onUpArrow:t},inputRef:w});i=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:A,helperText:e,highlightedEntry:z,inputLabel:f,isOpened:y,viewRole:v});return h.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:j,ref:u,children:[h.jsx(c("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:E}),h.jsx(c("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},a,g,{extraLayoutProps:{afterViewContent:d,ariaProps:i,beforeViewContent:b,helperTextComponent:null,isLoading:B,isOpened:y},inputRef:C,label:f,viewRole:v,xstyles:x}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("1570865")}g.hasTypeaheadRedirection=a}),98);
__d("searchCometGlobalTypeahead.config",["qex"],(function(a,b,c,d,e,f,g){"use strict";a=8;d={dataSources:{bootstrapKeywordsDataSourceParams:{queryVariables:{first:(b=c("qex")._("156"))!=null?b:2e3}},keywordDataSourceParams:{queryVariables:{fetch_count:a,fetch_mode:"blended"}}},logging:{sessionContext:"SEARCH_GLOBAL"},view:{renderLimit:a,sectionLimits:new Map([["RECENT_SEARCHES",a]])}};g["default"]=d}),98);
__d("useSearchCometGlobalTypeaheadCompositeDataSource",["useSearchCometTypeaheadCompositeDataSource"],(function(a,b,c,d,e,f,g){"use strict";var h={instance:null};function a(a){a=c("useSearchCometTypeaheadCompositeDataSource")(a);h.instance==null&&(h.instance=a);return h.instance}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometGlobalSERPRouteUrlBuilder","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useSearchCometGlobalSERPRouteUrlBuilder")(),b=c("useSearchCometHashtagRouteUrlBuilder")(),e=c("useSearchCometResultsEntryPointSurface")();return function(f){var g=f.entry,h=f.queryString;f=f.typeaheadSessionID;var i=g.label.toLowerCase(),j=g.metaData;j=j==null?void 0:j.markers;var k=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(i);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&k!=null&&!j.has("see_all"))return b({entryPointAction:"SEARCH_BOX",exploreEntryPoint:h===""?3:4,hashtag:k,typeaheadSessionID:f});else{h=g.rawData;k=(k=c("searchCometTypeaheadGetStsDisambiguation")(g))!=null?k:void 0;if(g.subtype==="keyword"&&j.has("disambiguation")){h=(j=(j=h.structuredInfo)==null?void 0:(h=j.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?j:{};j=h.link_url;if(j!=null){h=d("ConstUriUtils").getUri(j);if(h!=null){j=new Map();e!=null&&j.set("__eps__",e);k!==void 0&&j.set("__stsd__",c("Base64").encode(JSON.stringify(k)));var l=new Map();for(var j=j,m=Array.isArray(j),n=0,j=m?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=j.length)break;o=j[n++]}else{n=j.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];l.set(p,o)}p=h.addQueryParams(l);if(p!=null)return p.toString()}}}return a({entryPointAction:"SEARCH_BOX",highConfidenceResult:c("searchCometTypeaheadGetHighConfidenceResult")(g),query:i,stsDisambiguation:k,typeaheadSessionID:f})}}}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["gkx","react","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useMemo;function a(a){var b=a.entry,d=a.queryString,e=c("useCometRouterDispatcher")(),f=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),g=i(function(){return f({entry:b,queryString:d})},[f,b,d]);h(function(){e!=null&&c("gkx")("1990285")&&e.preloadRouteCode(g)},[e,g]);return i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:g}},[g])}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometGlobalPanelGating","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useMemo,k={view:{backgroundColor:"x1jx94hy",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha"},viewGlobalPanel:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x10h3on"}};function a(a){a=a.onHeaderActionPress;var b=j(function(){return[k.view,d("CometGlobalPanelGating").isGlobalPanelEnabled()&&k.viewGlobalPanel]},[]),e=j(function(){return i.jsx(c("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return c("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:c("searchCometTypeaheadSTSMappings"),emptyStateContent:e,getLinkProps:c("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:a,seeAllLabelBuilder:l,xstyle:b})}function l(a){return h._("__JHASH__LChIaXBIwAT__JHASH__",[h._implicitParam("=m1",i.jsx("strong",{children:h._("__JHASH__BFbyaDXF_eS__JHASH__",[h._param("query",a)])}))])}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){return function(b){var c=b.inputRef,d=b.onChange,e=b.onPressEntry,f=b.shouldQueryStringUpdateFromSelectedEntryOnClick;f=f===void 0?!1:f;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"]);var g=i(function(a){var b=a.metaData.markers,c=a.subtype;c=c==="recent"&&b.has("entity")||b.has("direct_nav");d(c?"":a.label);e&&e(a)},[d,e]);return h.jsx(a,babelHelpers["extends"]({},b,{inputRef:c,onChange:d,onPressEntry:g,shouldQueryStringUpdateFromSelectedEntryOnClick:f}))}}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useMemo;function a(a){return function(b){var e=b.inputRef;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef"]);e=c("useCometTypeaheadInputRefs")(e);var f=e.composedRef,g=e.inputRef;e=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var k=e.dispatchIsOpened,l=i(function(){g.current!=null&&(g.current.focus(),k(!0))},[g,k]);e=j(function(){return[d("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",l)]},[l]);c("useGlobalKeyCommands")(e);return h.jsx(a,babelHelpers["extends"]({},b,{inputRef:f}))}}g["default"]=a}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometGlobalPanelGating","CometTypeaheadErrorFallback.react","QPLUserFlow","QPLUtils","Random","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","cr:3634","emptyFunction","qex","qpl","react","searchCometGlobalTypeahead.config","searchCometTypeaheadODSLogFocusEvent","unrecoverableViolation","useCometSearchTypeaheadLoggingProvider","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalSERPRouteUrlBuilder","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometRecentSearchDataSource","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useEffect,l=e.useMemo,m=e.useRef;function a(a){var e,f=a.inputXStyle,g=a.onClose,o=a.onEscape,p=a.onFocus,q=a.onHeaderActionPress,r=a.onPressEntry,s=a.onSelectFreeformQuery,t=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"]);t=c("useCometTypeaheadStateQueryString")(t);var u=t[0];t=t[1];var v=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),w=c("useSearchCometGlobalSERPRouteUrlBuilder")(),x=c("useSearchCometHashtagRouteUrlBuilder")(),y=c("useCometTypeaheadNavigate")({tapPoint:"tap_search_bar"}),z=m(!1),A=c("useSearchCometRecentSearchDataSource")({fetchNullstate:Boolean(c("qex")._("88")),fetchSearchBadge:Boolean(c("qex")._("1272")),fetchSTS:Boolean(c("qex")._("320")),filter:"all"}),B=c("useSearchCometGlobalTypeaheadCompositeDataSource")({config:c("searchCometGlobalTypeahead.config"),recentDataSource:A}),C=B.getBootstrapKeywordsDataSource();if(C==null)throw c("unrecoverableViolation")("Bootstrap datasource is missing","search");A=c("useSearchCometTypeaheadBootstrapValidation")({bootstrapDatasource:C});var D=A.validate;A=j(function(a){var b=a.reason,e=a.sessionID;a=a.shownEntries;D(a);b==="success"?c("QPLUserFlow").endSuccess(c("qpl")._(195636649,"5429"),{instanceKey:d("QPLUtils").deriveInstanceKey(e)}):b==="abandon"&&c("QPLUserFlow").endCancel(c("qpl")._(195636649,"5429"),{instanceKey:d("QPLUtils").deriveInstanceKey(e)})},[D]);var E=c("useCometSearchTypeaheadLoggingProvider")({context:"search_global",onSessionEnd:A});A=c("useCometSearchTypeaheadTraceProvider")(E);var F=c("useSearchCometTypeaheadRecentDataSourceContextDecorator")(B,!1,(e=c("qex")._("320"))!=null?e:!1);e=l(function(){return[F,{decorate:c("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")}].filter(Boolean)},[F]);k(function(){B.bootstrap()},[B]);var G=j(function(){var a;a=(a=c("qex")._("869"))!=null?a:!1;a&&!z.current&&C.bootstrap();z.current=!0;a=2;d("Random").coinflip(a)&&c("searchCometTypeaheadODSLogFocusEvent")("comet.ta_global_event_focus",a);c("QPLUserFlow").start(c("qpl")._(195636649,"5429"),{instanceKey:d("QPLUtils").deriveInstanceKey(E.getSessionID())});p&&p()},[E,p]),H=j(function(a){var b=a.metaData;b=b==null?void 0:b.markers;var c=b!=null&&b.has("entity");b=b!=null&&b.has("direct_nav");var d=v({entry:a,queryString:u,typeaheadSessionID:E.getSessionID()});d=n(a,d,c,b);y(d);r==null?void 0:r(a)},[E,y,r,u,v]),I=j(function(a){var b=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(a);d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&b!=null?b=x({entryPointAction:"SEARCH_BOX",exploreEntryPoint:u===""?3:4,hashtag:b,typeaheadSessionID:E.getSessionID()}):b=w({entryPointAction:"SEARCH_BOX",query:a,typeaheadSessionID:E.getSessionID()});y(b);s==null?void 0:s(a)},[x,E,y,s,u,w]),J=j(function(){B.clearQueryCache(),g&&g()},[B,g]),K=c("useStable")(function(){var a;return((a=b("cr:3634"))!=null?a:c("emptyFunction").thatReturnsArgument)(c("withSearchCometTypeaheadTraceEndReasonDecorator")(c("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(c("withSearchCometTypeaheadBaseNavigationDecorator")(c("BaseTypeahead.react")))))}),L=h._("__JHASH___9EIWdQL4U5__JHASH__"),M=u==="";M=M?"grid":"listbox";return i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return i.jsx(c("CometTypeaheadErrorFallback.react"),{})},children:i.jsx(K,babelHelpers["extends"]({},a,{dataSource:B,decorators:e,inputEndContent:a.inputEndContent,inputExtraProps:{hideIconOnFocus:!d("CometGlobalPanelGating").isGlobalPanelEnabled(),size:"large",xstyle:f},inputStartContent:a.inputStartContent,inputStrategyRenderer:c("SearchCometGlobalTypeaheadInputStrategy.react"),label:h._("__JHASH__oTSOcwn1bTU__JHASH__"),layoutStrategyRenderer:c("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:E,onChange:t,onClose:J,onEscape:o,onFocus:G,onPressEntry:H,onSelectFreeformQuery:I,placeholder:L,queryString:u,testid:void 0,traceProvider:A,viewRole:M,viewStrategyRenderer:c("useSearchCometGlobalTypeaheadViewStrategy")({onHeaderActionPress:q})}))})}a.displayName=a.name+" [from "+f.id+"]";function n(a,b,c,d){var e=a.rawData,f;if(e!=null&&a.subtype==="recent"&&c){f=e==null?void 0:(c=e.profile)==null?void 0:c.url}if(e!=null&&(a.subtype==="keyword"||a.subtype==="bootstrap"||a.subtype==="recent")&&d){f=e==null?void 0:(c=e.structuredInfo)==null?void 0:(a=c.direct_nav_result)==null?void 0:a.link_url}return(d=f)!=null?d:b}g["default"]=a}),98);
__d("GlobalVideoPortsManager",["addToMap","emptyFunction","gkx","removeFromMap"],(function(a,b,c,d,e,f,g){"use strict";a=c("emptyFunction");function h(a){return a.unlinkedAtTimestampMs!==null}var i=1e4;b=function(){function a(a){var b=this;this.$1=function(c){var d=function(a){return c(b.$2(a))};a(d)}}var b=a.prototype;b.addOrUpdatePlace=function(a){var b=this,d=a.coreVideoPlayerMetaData,e=a.fullscreenController,f=a.implementations,g=a.injectCoreVideoStatesRef,i=a.isFullscreen,j=a.portablePlaceContainer,k=a.portablePlaceID,l=a.portablePlaceMetaData,m=a.portableVideoID,n=a.renderComponents,o=a.renderPlaceholder,p=a.trackingDataEncrypted,q=a.trackingNodes,r=a.viewportMarginsForViewability;this.$1(function(a){var s,t=b.getPortableVideoState(a,m),u=(s=a.places.get(k))!=null?s:null;s=u!=null&&!h(u)?u.sequenceNumber:a.placesSequenceNumberNext;var v=s===a.placesSequenceNumberNext?a.placesSequenceNumberNext+1:a.placesSequenceNumberNext,w=l||{},x=a.places;if(m!=null){var y=b.getPlacesBorrowingThisVideo(x,m);y.forEach(function(a){h(a)&&a.portablePlaceID!==(u==null?void 0:u.portablePlaceID)&&(x=c("removeFromMap")(x,a.portablePlaceID))})}x=c("addToMap")(x,k,babelHelpers["extends"]({},u,{coreVideoPlayerMetaData:d,currentVideoID:m,fullscreenController:e,implementations:f,injectCoreVideoStatesRef:g,isFullscreen:i,portablePlaceContainer:j,portablePlaceID:k,portablePlaceMetaData:w,renderComponents:n,renderPlaceholder:(y=o)!=null?y:null,sequenceNumber:s,trackingDataEncrypted:p,trackingNodes:q,unlinkedAtTimestampMs:null,viewportMarginsForViewability:r}));w=u!==null&&m===null?u.currentVideoID:null;y=a.videos;if(w!==null){s=b.getPlacesBorrowingThisVideo(x,w);s=0===s.length;s&&(y=c("removeFromMap")(a.videos,w))}if(m!==null){s=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:t,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:x,videoID:m});w=s.nextPreviousPlaceMetaData;y=c("addToMap")(y,m,t?babelHelpers["extends"]({},t,{portableVideoID:m,previousPlaceMetaData:w}):{portableVideoID:m,preferredPlaceID:null,previousPlaceMetaData:w})}return x===a.places&&v===a.placesSequenceNumberNext&&y===a.videos?a:babelHelpers["extends"]({},a,{places:x,placesSequenceNumberNext:v,videos:y})})};b.removePlace=function(a){var b=this,d=a.portablePlaceID,e=Date.now();this.$1(function(a){var f;f=(f=a.places.get(d))!=null?f:null;var g=f!==null?f.currentVideoID:null;if(f===null)return a;var h=a.places,i=g!==null?b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(h,g)).filter(function(a){return a.portablePlaceID!==d}):[];g!==null&&i.length===0?h=c("addToMap")(h,d,babelHelpers["extends"]({},f,{unlinkedAtTimestampMs:e})):h=c("removeFromMap")(h,d);i=a.videos;if(g!==null){f=b.getPlacesBorrowingThisVideo(h,g);f=0===f.length;if(f)i=c("removeFromMap")(i,g);else{f=b.getPortableVideoState(a,g);var j=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:f,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:h,videoID:g}),k=j.nextPreviousPlaceMetaData;j=j.shouldUpdatePreviousPlaceMetaDataForVideo;f!=null&&j&&(i=c("addToMap")(i,g,babelHelpers["extends"]({},f,{portableVideoID:g,previousPlaceMetaData:k})))}}return h===a.places&&i===a.videos?a:babelHelpers["extends"]({},a,{places:h,videos:i})})};b.setPreferredPlaceForVideo=function(a){var b=this,d=a.portablePlaceID,e=a.portableVideoID;this.$1(function(a){var f=b.getPortableVideoState(a,e),g=d!=null?a.places.get(d):null,h=b.updatePreviousPlaceMetaDataInfoForVideo({existingPlaceStateForSetPreferredPlaceForVideo:g,existingVideoState:f,places:a.places,preferredPlaceID:d,setPreferredPlaceForVideo:!0,updatedPlaces:a.places,videoID:e});h=h.nextPreviousPlaceMetaData;f=f!=null?c("addToMap")(a.videos,e,babelHelpers["extends"]({},f,{preferredPlaceID:g!=null&&d!=null?d:null,previousPlaceMetaData:h})):a.videos;return f===a.videos?a:babelHelpers["extends"]({},a,{videos:f})})};b.getPlacesBorrowingThisVideo=function(a,b){var c=[];a.forEach(function(a){a.currentVideoID===b&&c.push(a)});return c};b.skipUnlinkedPlaces=function(a){return a.filter(function(a){return!h(a)})};b.selectCurrentPlaceFromThesePlaces=function(a,b){var c;a=a.slice().sort(function(a,b){return a.sequenceNumber-b.sequenceNumber});c=(c=a.find(function(a){return a.portablePlaceID===b}))!=null?c:null;a=a.length>0?a[a.length-1]:null;return(c=(c=c)!=null?c:a)!=null?c:null};b.getCurrentPlaceStateForVideo=function(a,b){var c=this.getPortableVideoState(a,b);if(c!=null&&b!=null){a=this.selectCurrentPlaceFromThesePlaces(this.skipUnlinkedPlaces(this.getPlacesBorrowingThisVideo(a.places,b)),c.preferredPlaceID);return(b=a)!=null?b:null}else return null};b.getPortableVideoState=function(a,b){if(b!=null){a=a.videos.get(b);return(b=a)!=null?b:null}return null};b.updatePreviousPlaceMetaDataInfoForVideo=function(a){var b=this,c=a.existingPlaceStateForSetPreferredPlaceForVideo,d=a.existingVideoState,e=a.places,f=a.preferredPlaceID,g=a.setPreferredPlaceForVideo,h=a.updatedPlaces,i=a.videoID;a=function(a,c){return b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(a,i)),(a=c)!=null?a:null)};var j=a(e,d==null?void 0:d.preferredPlaceID);g?g=c!=null?a(e,f):null:g=a(h,d==null?void 0:d.preferredPlaceID);e=j!=null&&(j==null?void 0:j.portablePlaceID)!==((c=g)==null?void 0:c.portablePlaceID);return{nextPreviousPlaceMetaData:e&&j!=null?j.portablePlaceMetaData:(f=d==null?void 0:d.previousPlaceMetaData)!=null?f:null,shouldUpdatePreviousPlaceMetaDataForVideo:e}};b.collectGarbage=function(){this.$1(function(a){return a})};b.$2=function(a){var b=Date.now(),d=new Set(),e=a.places;a.places.forEach(function(a){a.unlinkedAtTimestampMs!==null&&b-a.unlinkedAtTimestampMs>=i?e=c("removeFromMap")(e,a.portablePlaceID):a.currentVideoID!==null&&d.add(a.currentVideoID)});var f=a.videos;a.videos.forEach(function(a){d.has(a.portableVideoID)||(f=c("removeFromMap")(f,a.portableVideoID))});return e===a.places&&f===a.videos?a:babelHelpers["extends"]({},a,{places:e,videos:f})};return a}();g.isUnlinkedGlobalVideoPortsPlace=h;g.UNLINKED_PLACE_TIMEOUT_MS=i;g.GlobalVideoPortsManager=b}),98);
__d("GlobalVideoPortsPortalerErrorBoundary.react",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={errorRaw:null},c.suppressReactDefaultErrorLogging=!0,b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromError=function(a){return{errorRaw:a}};var c=b.prototype;c.componentDidCatch=function(a,b){b=this.props.onError;b!=null&&b(a)};c.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.errorRaw;return c!=null?typeof a==="function"?a(b):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("GlobalVideoPortsPortaler.react",["CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsPortalerErrorBoundary.react","GlobalVideoPortsRenderers.react","ReactDOMComet","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useRef,j=b.useState;function a(a){var b=a.globalVideoPortsManager,e=a.globalVideoPortsState,f=a.thisVideoID;a=j(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var g=a[0],k=i(null),l=c("useUnsafeRef_DEPRECATED")(null),m=(a=e.videos.get(f))!=null?a:null,n=b.getPlacesBorrowingThisVideo(e.places,f);if(n.length<=0)return null;a=b.selectCurrentPlaceFromThesePlaces(n,m?m.preferredPlaceID:null);var o=b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(n),m?m.preferredPlaceID:null);e=function(a){l.current=a,n.forEach(function(b){b=b.injectCoreVideoStatesRef.current;b&&b(k.current,a)})};b=function(a){return null};var p=function(a){k.current=a,n.forEach(function(a){a=a.injectCoreVideoStatesRef.current;a&&a(k.current,l.current)})};return h.jsxs(h.Fragment,{children:[d("ReactDOMComet").createPortal(a?h.jsx(c("GlobalVideoPortsPortalerErrorBoundary.react"),{description:"GlobalVideoPortsPortaler",fallback:b,onError:p,children:h.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlayerRenderer,{coreVideoPlayerMetaData:a.coreVideoPlayerMetaData,currentPlaceID:a.portablePlaceID,currentVideoID:f,fullscreenController:a.fullscreenController,implementations:a.implementations,isFullscreen:a.isFullscreen,onCoreVideoStatesChanged:e,previousPlaceMetaData:(b=m==null?void 0:m.previousPlaceMetaData)!=null?b:null,trackingDataEncrypted:a.trackingDataEncrypted,trackingNodes:a.trackingNodes,viewportMarginsForViewability:a.viewportMarginsForViewability})}):null,g),n.map(function(a){var b;return d("ReactDOMComet").createPortal(a.portablePlaceID===(o==null?void 0:o.portablePlaceID)?h.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:g}):h.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:(b=o==null?void 0:o.portablePlaceID)!=null?b:null,currentVideoID:f,originalHeight:a.coreVideoPlayerMetaData.originalHeight,originalWidth:a.coreVideoPlayerMetaData.originalWidth,previousPlaceMetaData:(b=m==null?void 0:m.previousPlaceMetaData)!=null?b:null,renderPlaceholder:a.renderPlaceholder,thisPlaceID:a.portablePlaceID}),a.portablePlaceContainer)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("GlobalVideoPortsImpl.react",["CometErrorBoundary.react","GlobalVideoPortsContexts","GlobalVideoPortsManager","GlobalVideoPortsPortaler.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.setGlobalVideoPortsManager;i(function(){var a=function(a){return new(d("GlobalVideoPortsManager").GlobalVideoPortsManager)(a)};b(a)},[b]);var e=[],f=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),g=d("GlobalVideoPortsContexts").useGlobalVideoPortsState();f&&g&&g.videos.forEach(function(a,b){e.push(h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("GlobalVideoPortsPortaler.react"),{globalVideoPortsManager:f,globalVideoPortsState:g,thisVideoID:b})},b))});return h.jsx(h.Fragment,{children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSOptimisticPseudoUnblock",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.db.table(7).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=[0,0]:(b=a.item,d[0]=b.capabilities)})},function(b){return c.db.table(7).fetch([[[a[0]]]]).next().then(function(b,d){var e=b.done;b=b.value;return e?0:(d=b.item,c.fe(c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}),function(a){var b=a.update;a.item;return b({capabilities:c.i64.and_(d.capabilities==null?[0,0]:d.capabilities,[-1,4227858431])})}))})},function(e){return d[2]=new c.Map(),d[2].set("blockee_id",a[0]),d[2].set("request_id",a[1]),d[2].set("capabilities",d[0]==null?[0,0]:d[0]),d[3]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),"pseudo_unblock",[0,194],d[3],f,f,[0,0],[0,0],f,f,[0,0])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchMessageSeenCount",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_id",a[0]),d[0].set("message_id",a[1]),d[1]=d[0].get("thread_id"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),["cm_message_seen_count",c.i64.to_string(d[1])].join(""),[0,540],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MDSCircleButton.react",["BaseTheme.react","TetraCircleButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={green:"#31CC46",red:"#FF443D"};function j(a){return a==null?"":i[a]}function a(a,b){var d=a.buttonColor;a=babelHelpers.objectWithoutPropertiesLoose(a,["buttonColor"]);d={dark:{"secondary-button-background":j(d)},light:{"secondary-button-background":j(d)},type:"VARIABLES"};return h.jsx(c("BaseTheme.react"),{config:d,children:h.jsx(c("TetraCircleButton.react"),babelHelpers["extends"]({iconRatio:"large"},a,{ref:b}))})}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MDSListCell.react",["BaseListCell.react","CometFocusGroupContext","CometPressable.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={addOnEndContainer:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",minWidth:"x15kz4h8"},addOnStartContainer:{display:"x78zum5"},container:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",display:"x1lliihq",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r"},pressableSelected:{backgroundColor:"x1av1boa"}},k={large:{paddingEnd:"xn6708d"},medium:{paddingEnd:"xn6708d",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2"}},l={large:{paddingEnd:"x1iji9kk"},medium:{paddingEnd:"x1sxyh0",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2"}},m={large:{},medium:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8"}},n={large:{},medium:{paddingTop:"x889kno",paddingBottom:"x1a8lsjc"}},o={large:{paddingStart:"x1ye3gou"},medium:{paddingStart:"x1ye3gou",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8"}},p={large:{paddingStart:"x1sln4lm"},medium:{paddingStart:"xurb0ha",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2"}},q={large:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha"},medium:{alignItems:"x6s0dn4",display:"x78zum5",minHeight:"x1gg8mnh",paddingEnd:"x1sxyh0",paddingStart:"xurb0ha"}},r={large:{paddingTop:"x889kno",paddingEnd:"x1iji9kk",paddingBottom:"x1a8lsjc",paddingStart:"x1sln4lm"},medium:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",paddingEnd:"x1sxyh0",paddingStart:"xurb0ha"}};function a(a,b){var d=a.addOnEnd,e=a.addOnEndVerticalAlign,f=a.addOnStart,g=a.addOnStartVerticalAlign,s=a["aria-checked"],t=a["aria-controls"],u=a["aria-current"],v=a["aria-expanded"],w=a["aria-label"],x=a.content,y=a.contentTestId;y=a.contentXStyle;var z=a.disabled,A=a.focusable,B=a.linkProps;a.nestedSpacing;var C=a.onFocusChange,D=a.onHoverIn,E=a.onHoverOut,F=a.onPress,G=a.overlayDisabled,H=a.role,I=a.selected,J=a.size;a=babelHelpers.objectWithoutPropertiesLoose(a,["addOnEnd","addOnEndVerticalAlign","addOnStart","addOnStartVerticalAlign","aria-checked","aria-controls","aria-current","aria-expanded","aria-label","content","contentTestId","contentXStyle","disabled","focusable","linkProps","nestedSpacing","onFocusChange","onHoverIn","onHoverOut","onPress","overlayDisabled","role","selected","size"]);var K=c("gkx")("571")?r[J]:q[J],L=c("gkx")("571")?p[J]:o[J],M=c("gkx")("571")?l[J]:k[J];J=c("gkx")("571")?n[J]:m[J];var N=i(c("CometFocusGroupContext"));N=N.FocusItem;N=(N=N)!=null?N:h.Fragment;L=h.jsx(c("BaseListCell.react"),babelHelpers["extends"]({addOnEnd:d!=null?h.jsx("div",{className:c("stylex")([j.addOnEndContainer,L]),children:d}):void 0,addOnEndVerticalAlign:e,addOnStart:f!=null?h.jsx("div",{className:c("stylex")([j.addOnStartContainer,M]),children:f}):void 0,addOnStartVerticalAlign:g,content:h.jsx("div",{className:c("stylex")(J,y),"data-testid":void 0,children:x})},a));return!F&&!B?h.jsx("div",{className:c("stylex")([j.container,K,I===!0&&j.pressableSelected]),children:L}):h.jsx(N,{children:h.jsx(c("CometPressable.react"),{"aria-checked":s,"aria-controls":t,"aria-current":u,"aria-expanded":v,"aria-label":w,disabled:z,focusable:A,linkProps:B,onFocusChange:C,onHoverIn:D,onHoverOut:E,onPress:F,overlayDisabled:I===!0||G,ref:b,role:H,xstyle:[j.container,K,y,I===!0&&j.pressableSelected],children:L})})}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("ReQLPaginatedList.react",["BaseScrollableAreaContext","PromiseOrValue","ReQL","ReQLSuspense","SortedAsyncIterable","gkx","promiseDone","react","stylex"],(function(aa,ba,a,b,ca,da,ea){"use strict";var c=b("react"),d=b("react"),e=d.useCallback,fa=d.useContext,ga=d.useEffect,ha=d.useLayoutEffect,f=d.useMemo,g=d.useRef,h=d.useState,ia=d.useTransition,ja=a("gkx")("1649"),i=function(m){babelHelpers.inheritsLoose(i,m);function i(){var o,p;for(var q=arguments.length,r=new Array(q),s=0;s<q;s++)r[s]=arguments[s];return(o=p=m.call.apply(m,[this].concat(r))||this,p.render=function(){return p.props.children},o)||babelHelpers.assertThisInitialized(p)}var n=i.prototype;n.componentDidUpdate=function(o,p,q){var r=o.children;this.props.componentDidUpdate(r,q)};n.getSnapshotBeforeUpdate=function(o){var p=o.children;return this.props.getSnapshotBeforeUpdate(p)};return i}(c.PureComponent),j={content:{position:"x1n2onr6"},contentMinHeight:{minHeight:"x1us19tq"},disableScrollAnchoring:{overflowAnchor:"x1xzczws"},fallbackIframe:{borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"x112ta8",borderStart:"xxxdfa6",height:"x5yr21d",marginBottom:"x1ty9z65",opacity:"xg01cxk",pointerEvents:"x47corl",position:"x10l6tqk",start:"x17qophe",top:"x1yhy09f",width:"xh8yej3"},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowAnchor:"x1xzczws",overflowX:"x6ikm8r",overflowY:"x1rife3k",position:"x1n2onr6",width:"xh8yej3"},wrapper:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6"}};function k(m,n){return n==null?m:m.bounds(n)}function ka(m){if(m instanceof Promise)throw m;return m}var l=typeof ResizeObserver!=="undefined";function la(m){return{direction:m.direction,iterator:function(n,o){var p=m.iterator(n,o);return{next:function(q){return b("PromiseOrValue").map(p.next(q),function(r){return r.done?r:{done:!1,value:[r.value[0],r.value]}})}}},keyLength:m.keyLength,subscribe:function(n,o){return m.subscribe(async function(p,q,r){q.operation==="delete"?await n(p,q,r):q.operation==="add"?await n(p,{operation:"add",value:[p,q.value]},r):q.operation==="put"&&await n(p,{operation:"put",value:[p,q.value]},r)},o)}}}function ma(m){var n=m.bounds,o=m.direction,p=o===void 0?"asc":o,q=m.hasReachedBottom,r=q===void 0?!0:q,s=m.hasReachedTop,t=s===void 0?!0:s,na=m.imperativeRef,u=m.initialAnchor,oa=m.onReachingBottom,pa=m.onReachingTop,qa=m.onScroll,ra=m.pageSize,v=ra===void 0?15:ra,sa=m.renderContent,ta=m.renderEmptyContent,ua=m.renderFooter,va=m.renderHeader,wa=m.renderHeaderContentSpacer,xa=m.renderItem,w=m.renderLoadingAnimation,x=m.scrollAreaElementRef,ya=m.snapThreshold,za=ya===void 0?5:ya,y=m.table,Aa=m.xstyle;if(u!=null&&u!=="top"&&u!=="bottom"){var z=k(b("ReQL").fromTableDescending(y),n).bounds({lt:u}).iterator(new WeakMap()).next();if(z instanceof Promise)throw z;u=z.done?"top":z.value[0]}var Ba=fa(a("BaseScrollableAreaContext")),Ca=f(function(){return[].concat(Ba,[{getDOMNode:function(){return x==null?void 0:x.current}}])},[Ba,x]),A=f(function(){var N,O;u==="top"||u==null?(N=b("ReQL").empty(),O=p==="asc"?b("ReQL").fromTableAscending(y):b("ReQL").fromTableDescending(y)):u==="bottom"?(N=p==="asc"?b("ReQL").fromTableDescending(y):b("ReQL").fromTableAscending(y),O=b("ReQL").empty()):(N=p==="asc"?b("ReQL").fromTableDescending(y).bounds({lt:u}):b("ReQL").fromTableAscending(y).bounds({gt:u}),O=p==="asc"?b("ReQL").fromTableAscending(y).bounds({gte:u}):b("ReQL").fromTableDescending(y).bounds({lte:u}));return{after:O,before:N}},[u,y,p]),B=g(),Da=g(),C=g(),D=g(!1),E=g(),Ea=h(u),Fa=Ea[0],Ga=Ea[1],F=g(u),Ha=f(function(){var U,V,W,N=ka(b("SortedAsyncIterable").toArray(k(A.before,n).take(u==="bottom"?v:0))).reverse(),O=ka(b("SortedAsyncIterable").toArray(k(A.after,n).take(v))),X=u==="bottom"?!0:O.length<v,Y=u==="top"||u==null?!0:u==="bottom"?N.length<v:!1;return{firstKey:Y?void 0:u==="bottom"?(U=N[0])==null?void 0:U[0]:(V=O[0])==null?void 0:V[0],hasReachedBottom:X,hasReachedTop:Y,lastKey:X?void 0:(W=O[O.length-1])==null?void 0:W[0]}},[u,n,A.after,A.before,v]),Ia=h(function(){return[Ha,[A,u]]}),G=Ia[0],Ja=Ia[1],Ka=ia(),La=Ka[0],Ma=Ka[1],H=G!=null&&G[1][0]===A&&G[1][1]===u?G[0]:Ha,I=H.firstKey,J=H.hasReachedBottom,K=H.hasReachedTop,L=H.lastKey,M=g(null),Na=h(0),Oa=Na[0],Pa=Na[1],Qa=h(0),Ra=Qa[0],Sa=Qa[1],Ta=b("ReQLSuspense").useArray(function(){return la(I==null?k(A.before,n).take(v+Oa):k(A.before,n).bounds(p==="asc"?{gte:I}:{lte:I}))},[n,p,I,A.before,v,Oa]),N=f(function(){return[].concat(Ta).reverse()},[Ta]),O=b("ReQLSuspense").useArray(function(){return la(L==null?k(A.after,n).take(v+Ra):k(A.after,n).bounds(p==="asc"?{lte:L}:{gte:L}))},[n,p,A.after,L,v,Ra]);ga(function(){Pa(N.length),Sa(O.length)},[N,O]);var P=f(function(){return[].concat(N,O)},[N,O]),Ua=e(function(){var U=B.current,V=C.current;if(U==null||V==null||U.offsetParent===null||V.offsetParent===null||!P.length)return;var W=V.clientHeight-U.scrollTop>U.clientHeight*2;if(!W&&!D.current&&!La)if(J){if(!r&&oa!=null)return oa()}else{D.current=!0;a("promiseDone")(Promise.resolve(b("SortedAsyncIterable").toArray(k(p==="asc"?b("ReQL").fromTableAscending(y):b("ReQL").fromTableDescending(y),n).bounds(p==="asc"?{gt:P[P.length-1][0]}:{lt:P[P.length-1][0]}).take(v))),function(Y){D.current=!1;var Z=Y.length<v;Ma(function(){var $;return Ja([{firstKey:I,hasReachedBottom:Z,hasReachedTop:K,lastKey:Z?void 0:($=Y[Y.length-1])==null?void 0:$[0]},[A,u]])})});return}var X=U.scrollTop>U.clientHeight*2;if(!X&&!D.current&&!La)if(K){if(!t&&pa!=null)return pa()}else{D.current=!0;a("promiseDone")(Promise.resolve(b("SortedAsyncIterable").toArray(k(p==="asc"?b("ReQL").fromTableDescending(y):b("ReQL").fromTableAscending(y),n).bounds(p==="asc"?{lt:P[0][0]}:{gt:P[0][0]}).take(v))),function(Y){D.current=!1;var Z=Y.length<v;Y.reverse();Ma(function(){var $;return Ja([{firstKey:Z?void 0:($=Y[0])==null?void 0:$[0],hasReachedBottom:J,hasReachedTop:Z,lastKey:L},[A,u]])})});return}},[n,P,I,J,r,K,t,u,La,A,L,oa,pa,v,y,p]);ga(Ua,[Ua]);ha(function(){var U=B.current,V=C.current;if(U==null||V==null)return;F.current=u;u==="bottom"?(U.scrollTop=U.scrollHeight,M.current=U.scrollTop):u!=="top"&&u!=null&&(U.scrollTop=V.offsetTop,M.current=U.scrollTop)},[u]);var Va=e(function(U){Ga(F.current=U.scrollHeight-U.clientHeight-U.scrollTop<za&&J&&r?"bottom":"top")},[J,r,za]);ha(function(){var U=B.current;if(U==null)return;Va(U)},[Va,u]);var Q=e(function(){var U=B.current;if(U==null)return;F.current==="bottom"&&(U.scrollTop=U.scrollHeight,M.current=U.scrollTop)},[]),R=e(function(){if(!l)return{observe:function(U){},unobserve:function(U){}};E.current==null&&(E.current=new ResizeObserver(Q));return E.current},[Q]),Wa=e(function(){Ua();var U=B.current;if(U==null)return;if(U.scrollTop===M.current)return;M.current=null;Va(U);qa&&qa()},[Ua,qa,Va]),Xa=e(function(U){if(U==null){var V=B.current;V!=null&&R().unobserve(V)}else R().observe(U);x&&(x.current=U);B.current=U},[R,x]),Ya=e(function(U){if(U==null){var V=C.current;V!=null&&R().unobserve(V)}else R().observe(U);C.current=U},[R]);ga(function(){var U;if(!l)return;(U=E.current)==null?void 0:U.disconnect();var V=new ResizeObserver(Q);V&&B.current!=null&&V.observe(B.current);V&&C.current!=null&&V.observe(C.current);return function(){V&&ja&&(V.disconnect(),V=null)}},[Q]);function Za(U,V){if(V!=null){var W=V.element,X=V.height,Y=V.scrollAreaElement;W.clientHeight!==X&&!(W.clientHeight<X&&F.current==="bottom")&&(Y.scrollTop+=W.clientHeight-X,M.current=Y.scrollTop)}}function $a(){if(B.current!=null){var U=B.current;U.scrollTop=U.scrollHeight;M.current=U.scrollTop}Ga(F.current=r?"bottom":"top")}na!=null&&(na.current={scrollToBottom:$a});var ab=K&&t?0:1,bb=P.length-(J&&r?0:1),S=new Array(bb>ab?bb-ab:0);for(var T=ab;T<bb;T++){var cb,db;S[T-ab]=xa(P[T][1],{nextItem:(cb=P[T+1])==null?void 0:cb[1],previousItem:(db=P[T-1])==null?void 0:db[1]})}var eb=c.jsx(i,{componentDidUpdate:Za,getSnapshotBeforeUpdate:function(U){var V=C.current,W=B.current;if(V!=null&&W!=null&&!(K&&t&&W.scrollTop===0)&&(!U.length||S.length&&U[0].key!==S[0].key&&U.length!==S.length)){var X=V.clientHeight;return{element:V,height:X,scrollAreaElement:W}}return null},children:S});return c.jsx(a("BaseScrollableAreaContext").Provider,{value:Ca,children:c.jsx("div",{className:a("stylex")(Aa),children:c.jsx("div",{className:a("stylex")(j.wrapper,Fa==="bottom"&&j.disableScrollAnchoring),children:c.jsxs("div",{className:a("stylex")(j.scrollArea),"data-testid":void 0,onScroll:Wa,ref:Xa,children:[!l&&c.jsx("iframe",{className:a("stylex")(j.fallbackIframe),ref:function(U){U!=null&&(U.contentWindow.onresize=Q)}}),c.jsxs(i,{componentDidUpdate:Za,getSnapshotBeforeUpdate:function(){var U=Da.current,V=B.current;if(U!=null&&V!=null){var W=U.clientHeight;return{element:U,height:W,scrollAreaElement:V}}return null},children:[c.jsx("div",{ref:Da,children:K&&t?va&&va():w&&w()}),ta!=null?ta():null]}),wa!=null&&wa(),c.jsx("div",{className:a("stylex")(S.length!==0&&!(K&&t)&&!(J&&r)&&j.contentMinHeight),children:c.jsxs("div",{className:a("stylex")(j.content),ref:Ya,children:[!l&&c.jsx("iframe",{className:a("stylex")(j.fallbackIframe),ref:function(U){U!=null&&(U.contentWindow.onresize=Q)}}),sa!=null?sa(eb):eb,J&&r?ua&&ua():w&&w()]})})]})})})})}ma.displayName=ma.name+" [from "+da.id+"]";ea.default=ma}),98);
__d("MAWStateContext.react",["MAWMessengerStatusOnFacebookEventEmitter","err","gkx","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react"),j=i.useCallback,k=i.useContext,l=i.useEffect,m=i.useMemo,n=i.useReducer,o=i.useState,p={messageLatencies:{},offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueSyncComplete:!1};function a(){var a=k(s)(),b=a.dispatch;return j(function(a,c){c===void 0&&(c=Date.now()),b({optimisticMsgId:a,tag:"OptimisticSendMessage",timestamp:c})},[b])}var q=function(a,b){switch(b.tag){case"OptimisticSendMessage":var c;return babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(c={},c[b.optimisticMsgId]={sent:b.timestamp},c))});case"NewMsg":case"MsgUpdated":var d,e;c=b.value.ack;var f=b.value.msgId;d=(d=b.value.offlineMsg)==null?void 0:d.msgId;d!=null&&a.messageLatencies[d]!=null&&(a.messageLatencies[f]=a.messageLatencies[d],delete a.messageLatencies[d]);d=a.messageLatencies[f];if((d==null?void 0:d.sent)!=null&&(d==null?void 0:d.acked)!=null)return a;d=(d==null?void 0:d.sent)||Date.now();c=c!==0?Date.now():void 0;return babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(e={},e[f]={acked:c,sent:d},e))});case"InitOfflineQueueSyncProgress":f=b.value;return babelHelpers["extends"]({},a,{offlineQueueProgressDownloaded:f});case"InitOfflineQueueSyncStart":c=b.value;return babelHelpers["extends"]({},a,{offlineQueueCount:c});case"InitOfflineQueueSyncComplete":return babelHelpers["extends"]({},a,{offlineQueueSyncComplete:!0})}return a},r={dispatch:function(a){throw c("err")("MAW Dispatch not implemented")},state:p},s=h.createContext(function(){return r});i=function(){return k(s)().state};var t=h.createContext(r);function u(a){var b=c("useUnsafeRef_DEPRECATED")(a);b.current=a;return b}function b(){var a=k(t);a=a.state;return a}function e(){var a=k(t).state,b=a.offlineQueueCount;a=a.offlineQueueSyncComplete;var e=o(!1),f=e[0],g=e[1];l(function(){var a=d("MAWMessengerStatusOnFacebookEventEmitter").subscribe(function(a){a===d("MAWMessengerStatusOnFacebookEventEmitter").MESSENGER_IS_ACTIVE_ON_FACEBOOK&&g(!0)});return function(){return a()}},[]);e=c("gkx")("571");return e||f?b>0&&!a:!1}function v(a){a=a.children;var b=n(q,p),c=b[0],d=b[1];b=m(function(){return{dispatch:d,state:c}},[c,d]);var e=u(b),f=j(function(){return e.current},[e]);return h.jsx(t.Provider,{value:b,children:h.jsx(s.Provider,{value:f,children:a})})}v.displayName=v.name+" [from "+f.id+"]";g.useDispatchOptimisticSendMessage=a;g.useStaleMAWStateWithoutRerendering=i;g.MAWStateContext=t;g.useMAWState=b;g.useMAWOfflineQueueState=e;g.MAWStateContextProvider=v}),98);
__d("UseBlockedUserInterstitial.bs",["JSResource","LS.bs","LSContactBitOffset.bs","LSContactBlockedByViewerStatus.bs","LSContactCapabilityBitOffset.bs","LSMessagingThreadTypeUtil.bs","LSOptimisticPseudoUnblock","LSTransaction.bs","MWCMThreadTypes.bs","MWLSThread.bs","MWPActor.bs","Promise","ReQL.bs","WebStorage.bs","bs_belt_Option","bs_caml","bs_caml_option","bs_curry","bs_int64","promiseDone","react","recoverableViolation","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){return"__BlockOrRestrictUserInterstitial."+a+"__"}function a(a){var c=b("useCometLazyDialog")(b("JSResource")("LSBlockedUserInterstitialDialog.react").__setRef("UseBlockedUserInterstitial.bs")),d=c[0];c=b("useCometLazyDialog")(b("JSResource")("MWChatPseudoBlockWarningCardDialog.react").__setRef("UseBlockedUserInterstitial.bs"));var e=c[0],f=b("useReStore")(),g=b("MWPActor.bs").useActor(void 0),j=b("MWLSThread.bs").useThread(a);return h.useCallback(function(c){return function(h){if(j===void 0)return b("bs_curry")._1(c,void 0);var k=b("MWCMThreadTypes.bs").isBroadcastThread(j.threadType);b("promiseDone")(b("Promise").all([b("ReQL.bs").toArray(b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQL.bs").mergeJoin(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(f.table("participants")),{hd:a,tl:0}),b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexAscending(f.table("contacts").index("blockedByViewerStatusId")),{hd:b("LSContactBlockedByViewerStatus.bs").messageBlocked,tl:0})),function(a){var c=a[0];if(b("bs_caml").i64_neq(a[1].id,g))if(!k||c.isAdmin===!0)return!0;else return c.isModerator===!0;else return!1}),function(a){return a[1]})),b("ReQL.bs").toArray(b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQL.bs").mergeJoin(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(f.table("participants")),{hd:a,tl:0}),b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexAscending(f.table("contacts").index("blockedByViewerStatusId")),{hd:b("LSContactBlockedByViewerStatus.bs").fullyBlocked,tl:0})),function(a){var c=a[0];if(b("bs_caml").i64_neq(a[1].id,g))if(!k||c.isAdmin===!0)return!0;else return c.isModerator===!0;else return!1}),function(a){return a[1]})),b("ReQL.bs").first(b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQL.bs").mergeJoin(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(f.table("participants")),{hd:a,tl:0}),b("ReQL.bs").fromTableAscending(f.table("contacts"))),function(a){return b("bs_caml").i64_neq(a[1].id,g)}),function(a){return a[1]}))]),function(g){var k=g[2];g=g[1].concat(g[0]);var l=b("LSMessagingThreadTypeUtil.bs").isOneToOne(j.threadType),m=b("LSMessagingThreadTypeUtil.bs").isGroup(j.threadType),n=b("bs_belt_Option").mapWithDefault(k,!1,function(a){return b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").pseudoBlock,a),!1)}),o=b("WebStorage.bs").getLocalStorage(void 0),p=i(a),q=b("bs_belt_Option").flatMap(o,function(a){return b("bs_caml_option").nullable_to_opt(a.getItem(p))});q=q!==void 0?q==="true":!1;l=l&&n;n=!q&&g.length>0&&m;if(l){q=function(a){if(k!==void 0){b("promiseDone")(b("LSTransaction.bs").run(f,function(c){return b("LSOptimisticPseudoUnblock")(k.id,a,b("LS.bs").make(c))},"readWrite"),function(a){return b("bs_curry")._1(c,void 0)},function(a){return b("bs_curry")._1(c,void 0)});return}};return e({contact:k,thread:j,onOptIn:q,onClose:function(a){},entryPoint:h},function(a){})}if(!n)return b("bs_curry")._1(c,void 0);m=function(a){a=b("bs_belt_Option").flatMap(o,function(a){return b("bs_caml_option").nullable_to_opt(b("WebStorage.bs").setItemGuarded(a,p,"true"))});a!==void 0&&b("recoverableViolation")("Unable to set item at path for BlockedUserInterstitial","messenger_web_product");return b("bs_curry")._1(c,void 0)};return d({thread:j,blockees:g,onOptIn:m},function(a){})})}},[b("bs_int64").to_string(a)])}f.getWarningCardStorageKey=i;f.useHook=a}),null);
__d("MWUseAriaLabelForThread.bs",["fbt","MWPActor.bs","MWPGetThreadTitle.bs","ReQL.bs","ReQLSuspense","bs_belt_Option","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=b("MWPActor.bs").useActor(void 0),d=b("useReStore")(),e=b("ReQLSuspense").useArray(function(){var c;return(c=b("ReQL.bs")).take(c.leftJoin(c.getKeyRange(c.fromTableAscending(d.table("participants")),{hd:a.threadKey,tl:0}),c.fromTableAscending(d.table("contacts"))),8)},[a.threadKey]);return i.useMemo(function(){var d=a.threadName;if(d!==void 0)return g._("__JHASH__Hkglfueb2S7__JHASH__",[g._param("name of conversation",d)]).toString();d=b("bs_belt_Option").getWithDefault(b("MWPGetThreadTitle.bs").computeThreadTitle(void 0,a,e,c),"");return g._("__JHASH__Bc4odEiE4Gu__JHASH__",[g._param("participant list",d)]).toString()},[a.threadName,c])}f.useHook=a}),null);
__d("XCometArchivedThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/archived/t/{thread_key}/",Object.freeze({}),["/messages/archived/"],void 0);b=a;g["default"]=b}),98);
__d("XMessengerDotComCometArchivedThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/archived/t/{thread_key}/",Object.freeze({}),["/archived/"],void 0);b=a;g["default"]=b}),98);
__d("MWInboxArchivedThreadsRouteBuilder.bs",["CurrentEnvironment","XCometArchivedThreadsControllerRouteBuilder","XMessengerDotComCometArchivedThreadsControllerRouteBuilder"],(function(a,b,c,d,e,f){"use strict";a=b("CurrentEnvironment").facebookdotcom?{buildURL:function(a){return b("XCometArchivedThreadsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XCometArchivedThreadsControllerRouteBuilder").buildExtraURL("/messages/archived/",a)}}:{buildURL:function(a){return b("XMessengerDotComCometArchivedThreadsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XMessengerDotComCometArchivedThreadsControllerRouteBuilder").buildExtraURL("/archived/",a)}};c=a.buildURL;d=a.buildURLWithoutThread;f.routeBuilderModule=a;f.buildURL=c;f.buildURLWithoutThread=d}),null);
__d("XCometBusinessSupportThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/business_support/t/{thread_key}/",Object.freeze({}),["/messages/business_support/"],void 0);b=a;g["default"]=b}),98);
__d("XMessengerDotComCometBusinessSupportThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/business_support/t/{thread_key}/",Object.freeze({}),["/business_support/"],void 0);b=a;g["default"]=b}),98);
__d("MWInboxBusinessSupportThreadsRouteBuilder.bs",["CurrentEnvironment","XCometBusinessSupportThreadsControllerRouteBuilder","XMessengerDotComCometBusinessSupportThreadsControllerRouteBuilder"],(function(a,b,c,d,e,f){"use strict";a=b("CurrentEnvironment").facebookdotcom?{buildURL:function(a){return b("XCometBusinessSupportThreadsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XCometBusinessSupportThreadsControllerRouteBuilder").buildExtraURL("/messages/business_support/",a)}}:{buildURL:function(a){return b("XMessengerDotComCometBusinessSupportThreadsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XMessengerDotComCometBusinessSupportThreadsControllerRouteBuilder").buildExtraURL("/business_support/",a)}};c=a.buildURL;d=a.buildURLWithoutThread;f.routeBuilderModule=a;f.buildURL=c;f.buildURLWithoutThread=d}),null);
__d("XCometMarketplaceThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/marketplace/t/{thread_key}/",Object.freeze({}),["/messages/marketplace/"],void 0);b=a;g["default"]=b}),98);
__d("XMessengerDotComCometMarketplaceThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/marketplace/t/{thread_key}/",Object.freeze({}),["/marketplace/"],void 0);b=a;g["default"]=b}),98);
__d("MWInboxMarketplaceThreadsRouteBuilder.bs",["CurrentEnvironment","XCometMarketplaceThreadsControllerRouteBuilder","XMessengerDotComCometMarketplaceThreadsControllerRouteBuilder"],(function(a,b,c,d,e,f){"use strict";a=b("CurrentEnvironment").facebookdotcom?{buildURL:function(a){return b("XCometMarketplaceThreadsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XCometMarketplaceThreadsControllerRouteBuilder").buildExtraURL("/messages/marketplace/",a)}}:{buildURL:function(a){return b("XMessengerDotComCometMarketplaceThreadsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XMessengerDotComCometMarketplaceThreadsControllerRouteBuilder").buildExtraURL("/marketplace/",a)}};c=a.buildURL;d=a.buildURLWithoutThread;f.routeBuilderModule=a;f.buildURL=c;f.buildURLWithoutThread=d}),null);
__d("XCometMessageRequestsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/requests/t/{thread_key}/",Object.freeze({}),["/messages/requests/"],void 0);b=a;g["default"]=b}),98);
__d("XMessengerDotComCometMessageRequestsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/requests/t/{thread_key}/",Object.freeze({}),["/requests/"],void 0);b=a;g["default"]=b}),98);
__d("MWInboxMessageRequestsRouteBuilder.bs",["CurrentEnvironment","XCometMessageRequestsControllerRouteBuilder","XMessengerDotComCometMessageRequestsControllerRouteBuilder"],(function(a,b,c,d,e,f){"use strict";a=b("CurrentEnvironment").facebookdotcom?{buildURL:function(a){return b("XCometMessageRequestsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XCometMessageRequestsControllerRouteBuilder").buildExtraURL("/messages/requests/",a)}}:{buildURL:function(a){return b("XMessengerDotComCometMessageRequestsControllerRouteBuilder").buildURL(a)},buildURLWithoutThread:function(a){return b("XMessengerDotComCometMessageRequestsControllerRouteBuilder").buildExtraURL("/requests/",a)}};c=a.buildURL;d=a.buildURLWithoutThread;f.routeBuilderModule=a;f.buildURL=c;f.buildURLWithoutThread=d}),null);
__d("MWSelectedThreadOptionsIdContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(void 0);function a(a){var b=a.children;a=a.threadId;return h.createElement(i.Provider,{value:a,children:b})}c=a;f.context=i;f.make=c}),null);
__d("useMWV2ChatOpenTabTraceProvider",["CometHeroLogging","ODS","qpl","react","useCometInteractionTracing"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback,i=!1;function j(a){return a===15||a===16}function a(){var a=c("useCometInteractionTracing")(c("qpl")._(30605380,"18"),"responsive","INTERACTION"),b=h(function(b,e,f,g){d("ODS").bumpEntityKey(3185,"mwchat_tab","open_tab_start");var h=j(e);a(function(a){var g=c("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(a.getTraceId());a.onComplete(function(){d("ODS").bumpEntityKey(3185,"mwchat_tab","open_tab_completed"),a.addMetadata("messagingThreadType",e),a.addMetadata("entrypoint",f),a.addMetadata("version",2),a.addMetadata("isSecure",h?1:0),i?a.addMetadata("revisit",1):(a.addMetadata("revisit",0),i=!0)});b(g)},void 0,void 0,void 0,g)},[a]);return b}g["default"]=a}),98);
__d("LSMediaUrl.re",["LSMediaUrl.bs"],(function(a,b,c,d,e,f){c=(a=b("LSMediaUrl.bs")).Attachment.previewUrl;f.Attachment_previewUrl=c;d=a.Attachment.headerImageUrl;f.Attachment_headerImageUrl=d;e=a.Contact.profilePictureUrl;f.Contact_profilePictureUrl=e;b=a.CommunityMember.profilePictureUrl;f.CommunityMember_profilePictureUrl=b;c=a.Thread.threadPictureUrl;f.Thread_threadPictureUrl=c;d=a.CommunityFolder.folderPictureUrl;f.CommunityFolder_folderPictureUrl=d;e=a.CommunityFolder.folderCoverPictureUrl;f.CommunityFolder_folderCoverPictureUrl=e;b=a.GroupInvitationsPending.communityImageUrl;f.GroupInvitationsPending_communityImageUrl=b;c=a.GroupInvitationsPending.groupImageUrl;f.GroupInvitationsPending_groupImageUrl=c;d=a.CommunityMember;f.CommunityMember=d;e=a.GroupInvitationsPending;f.GroupInvitationsPending=e;b=a.Attachment;f.Attachment=b;c=a.CommunityFolder;f.CommunityFolder=c;d=a.Contact;f.Contact=d;e=a.Thread;f.Thread=e}),null);
__d("MWClickedMessageContext.react",["LS.re","LSFetchMessageSeenCount","emptyFunction","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");e=b.createContext;var i=b.useCallback,j=b.useContext,k=b.useMemo,l=b.useState,m=e({clickedMessageId:null,fetchMessageSeenCount:c("emptyFunction"),hasError:!1,isLoading:!1,setClickedMessageId:c("emptyFunction")});function a(a){a=a.children;var b=l(null),d=b[0],e=b[1];b=l(!1);var f=b[0],g=b[1];b=l(!1);var j=b[0],n=b[1],o=c("useReStore")(),p=i(function(a,b){n(!0),e(b),o.runInTransaction(function(d){return c("LSFetchMessageSeenCount")(a,b,c("LS.re").make(d))},"readwrite").then(function(){n(!1),g(!1)})["catch"](function(){n(!1),g(!0)})},[o]);b=k(function(){return{clickedMessageId:d,fetchMessageSeenCount:p,hasError:f,isLoading:j,setClickedMessageId:e}},[d,p,f,j]);return h.jsx(m.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";d={Provider:a,useHook:function(){return j(m)}};g["default"]=d}),98);
__d("MercuryTimestamp",["fbt","formatDate"],(function(a,b,c,d,e,f,g){a=864e5;var h=6*a,i={getFormatedTimestamp:function(a){var b=a/1e3;return i.getFormattedTimestampByBucket(b,i.getTimeBucket(a))},getAbsoluteTimestamp:function(a){if(a==null)return null;else{a=i.getFormatedTimestamp(a);return a.absolute}},getRelativeTimestamp:function(a){a=i.getFormatedTimestamp(a);return a.relative},getFormattedTimestampByBucket:function(a,c){switch(c){case 0:return{absolute:g._("__JHASH__EpdLnM9AeUo__JHASH__").toString(),relative:b("formatDate")(a,"g:ia")};case 1:return{absolute:b("formatDate")(a,"l"),relative:b("formatDate")(a,"D")};case 3:return{absolute:b("formatDate")(a,"F j"),relative:b("formatDate")(a,"M j")};default:return{absolute:b("formatDate")(a,"F j, Y"),relative:b("formatDate")(a,"n/j/y")}}},getTimeBucket:function(a){a=new Date(a);var b=new Date();b=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(b<a)return 0;else if(b-h<a)return 1;else if(b.getFullYear()===a.getFullYear())return 3;else return 4},getPreciseTimestamp:function(a){return b("formatDate")(new Date(a),i.getPreciseFormat(a))},getPreciseFormat:function(a){a=i.getTimeBucket(a);switch(a){case 0:return"g:ia";case 1:return"l g:ia";case 3:return"F jS, g:ia";case 4:default:return"F j, Y g:i a"}}};e.exports=i}),null);
__d("getFBTSafeGenderFromGenderConst",["GenderConst","IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case c("GenderConst").MALE_SINGULAR:return c("IntlVariations").GENDER_MALE;case c("GenderConst").FEMALE_SINGULAR:return c("IntlVariations").GENDER_FEMALE;default:return c("IntlVariations").GENDER_UNKNOWN}}g["default"]=a}),98);
__d("MWMessageDeliveryStatus.bs",["fbt","LSMessageSendStatusV2.bs","MercuryTimestamp","bs_caml","getFBTSafeGenderFromGenderConst","intlList"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a.length!==1)return{TAG:1,_0:a};a=a[0];return{TAG:0,_0:a}}function c(b,a){return{TAG:2,_0:b,_1:a}}function d(a){return{TAG:3,_0:a}}var h=g._("__JHASH__-KPam8KdjJ8__JHASH__"),i=g._("__JHASH__FdnMQ3ayYbi__JHASH__"),j=g._("__JHASH__DGTdcv4yxEO__JHASH__"),k=g._("__JHASH__HWY7OcPbAjW__JHASH__");function l(a){if(a.timestamp>0)return g._("__JHASH__i65FoHjBJBT__JHASH__",[g._name("full name",a.name,b("getFBTSafeGenderFromGenderConst")(a.gender)),g._param("seen time",b("MercuryTimestamp").getPreciseTimestamp(a.timestamp))]);else return g._("__JHASH__o0y2JESDXU1__JHASH__",[g._name("full name",a.name,b("getFBTSafeGenderFromGenderConst")(a.gender))])}function m(a,c){if(a.length===0)return"";if(c)return g._("__JHASH__xJFzJjmgrii__JHASH__").toString();c=a.map(function(a){return g._("__JHASH__anoMlIo0TA0__JHASH__",[g._name("full name",a.name,b("getFBTSafeGenderFromGenderConst")(a.gender))])});a=b("intlList")(c,b("intlList").CONJUNCTIONS.AND,b("intlList").DELIMITERS.COMMA);return g._("__JHASH__rtgGiNEWfHK__JHASH__",[g._param("full name",a)]).toString()}function n(a){return g._("__JHASH___KIWePVuuHb__JHASH__",[g._param("seen count",a.toString())]).toString()}var o=g._("__JHASH__ge1hq8iGlfw__JHASH__"),p=g._("__JHASH__VG5ajSXV9DG__JHASH__"),q={sending:h,sent:i,delivered:j,error:k,getSingleSeenHead:l,getDeliveredAndRead:m,getSeenCount:n,loading:o,retriableError:p};function e(a){if(typeof a==="number")switch(a){case 0:return"";case 1:return h;case 2:case 3:return i;case 4:return k;case 5:return o;case 6:return p}else switch(a.TAG|0){case 0:return l(a._0);case 1:return"";case 2:return m(a._0,a._1);case 3:return n(a._0)}}function r(a){if(typeof a==="number")switch(a){case 1:return h;case 2:return i;case 3:return j;case 4:return k;default:return""}else switch(a.TAG|0){case 0:return l(a._0);case 2:return m(a._0,a._1);default:return""}}function s(a){if(b("bs_caml").i64_eq(a,b("LSMessageSendStatusV2.bs").sendingToServer))return 1;else if(b("bs_caml").i64_eq(a,b("LSMessageSendStatusV2.bs").serverReceived)||b("bs_caml").i64_eq(a,b("LSMessageSendStatusV2.bs").sentOnly))return 2;else if(b("bs_caml").i64_eq(a,b("LSMessageSendStatusV2.bs").nonRetriableError)||b("bs_caml").i64_eq(a,b("LSMessageSendStatusV2.bs").retriableError))return 4;else return 0}function t(a,c,d){var e=s(a.sendStatusV2);if(b("bs_caml").i64_eq(a.sendStatusV2,b("LSMessageSendStatusV2.bs").nonRetriableError)||b("bs_caml").i64_eq(a.sendStatusV2,b("LSMessageSendStatusV2.bs").retriableError)||b("bs_caml").i64_eq(a.sendStatusV2,b("LSMessageSendStatusV2.bs").sendingToServer))return e;else if(!d&&b("bs_caml").i64_eq(a.sendStatusV2,b("LSMessageSendStatusV2.bs").serverReceived))return 0;else if(b("bs_caml").i64_ge(c,a.timestampMs))return 3;else return e}var u=0,v=1,w=2,x=3,y=4,z=5,A=6;f.noneStatus=u;f.sending=v;f.sent=w;f.delivered=x;f.error=y;f.seenHead=a;f.deliveredAndRead=c;f.seenCount=d;f.loading=z;f.retriableError=A;f.Titles=q;f.getBroadcastStatusTitle=e;f.getStatusTitle=r;f.getFromSendStatus=s;f.deliveryStatusForMessageSentByYou=t}),null);
__d("MWMessageDeliveryStatus.re",["MWMessageDeliveryStatus.bs"],(function(a,b,c,d,e,f){c=(a=b("MWMessageDeliveryStatus.bs")).noneStatus;f.noneStatus=c;d=a.sending;f.sending=d;e=a.sent;f.sent=e;b=a.delivered;f.delivered=b;c=a.error;f.error=c;d=a.seenHead;f.seenHead=d;e=a.deliveredAndRead;f.deliveredAndRead=e;b=a.seenCount;f.seenCount=b;c=a.loading;f.loading=c;d=a.retriableError;f.retriableError=d}),null);
__d("MWPMessageRowCalculateStatus.react",["GenderConst","I64","LSMediaUrl.re","MWClickedMessageContext.react","MWMessageDeliveryStatus.re","MWPActor.re","ReQL","ReQLSuspense","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useState;function a(a){var b=a.children,e=a.isBroadcastThread,f=a.isLargeGroup,g=a.isSecureGroupThread,i=a.message,j=a.nextMessage,k=c("MWPActor.re").useActor(),l=c("useReStore")(),o=d("I64").equal(k,i.senderId);k=j!=null&&!d("I64").equal(k,j.senderId);var p=i.isUnsent,q=e&&!i.isUnsent&&c("gkx")("6706"),r=c("MWClickedMessageContext.react").useHook(),s=r.clickedMessageId,t=r.hasError;r=r.isLoading;var u=d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(l.table("community_chat_message_seen_count")).getKeyRange(i.threadKey,i.messageId):d("ReQL").empty()},[l,e,i.threadKey,i.messageId]);if(i.isAdminMessage)return b(d("MWMessageDeliveryStatus.re").noneStatus);if(e)if(!q){if(!o||j!=null||p)return b(d("MWMessageDeliveryStatus.re").noneStatus)}else{if(s!==i.messageId)return b(d("MWMessageDeliveryStatus.re").noneStatus);if(r)return b(d("MWMessageDeliveryStatus.re").loading);return t?b(d("MWMessageDeliveryStatus.re").retriableError):u!=null?b(d("MWMessageDeliveryStatus.re").seenCount(d("I64").to_int32(u.seenCount))):b(d("MWMessageDeliveryStatus.re").loading)}if(!o)return g||f?b(d("MWMessageDeliveryStatus.re").noneStatus):h.jsx(m,babelHelpers["extends"]({},a));if(k&&g)return b(d("MWMessageDeliveryStatus.re").noneStatus);if(d("I64").equal(i.sendStatusV2,d("I64").of_int32(0)))return b(d("MWMessageDeliveryStatus.re").noneStatus);if(d("I64").equal(i.sendStatusV2,d("I64").of_int32(4))||d("I64").equal(i.sendStatusV2,d("I64").of_int32(5)))return b(d("MWMessageDeliveryStatus.re").error);if(d("I64").equal(i.sendStatusV2,d("I64").of_int32(1)))return b(d("MWMessageDeliveryStatus.re").sending);if(d("I64").equal(i.sendStatusV2,d("I64").of_int32(6)))return b(d("MWMessageDeliveryStatus.re").sent);if(f)if(j!=null||p)return b(d("MWMessageDeliveryStatus.re").noneStatus);else if(d("I64").equal(i.sendStatusV2,d("I64").of_int32(2)))return b(d("MWMessageDeliveryStatus.re").delivered);return h.jsx(n,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";var j=10;function k(a){var b=a.message;a=a.nextMessage;var e=c("useReStore")(),f=(a==null?void 0:a.isAdminMessage)===!0,g=d("ReQLSuspense").useFirst(function(){return f?d("ReQL").fromTableAscending(e.table("messages").index("messageDisplayOrder")).getKeyRange(b.threadKey).bounds({gt:{hd:b.primarySortKey,tl:0}}).take(j).filter(function(a){return!a.isAdminMessage}):d("ReQL").empty()},[e,f,b.primarySortKey,b.threadKey]);return f?g:a}function l(a,b,e){var f=c("useReStore")(),g=c("MWPActor.re").useActor(),h=a.message,i=k(a);a=o(function(){var a=i!=null?{gte:{hd:h.timestampMs,tl:0},lt:{hd:i.timestampMs,tl:0}}:{gte:{hd:h.timestampMs,tl:0}};return d("ReQL").fromTableAscending(f.table("participants").index("threadKeyReadWatermarkTimestampMs")).getKeyRange(h.threadKey).bounds(a).filter(function(a){return!d("I64").equal(a.contactId,g)}).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(f.table("contacts")).getKeyRange(a.contactId));return[a,b]})},b,[f,h.threadKey,h.timestampMs,i==null?void 0:i.timestampMs,i==null,g].concat(e));return a.map(function(a){var b,e=a[0];a=a[1];if(a==null)return;return{gender:c("GenderConst").UNKNOWN_SINGULAR,id:d("I64").to_string(a.id),imageSrc:d("LSMediaUrl.re").Contact.profilePictureUrl(a),name:(b=e.nickname)!=null?b:a.name,timestamp:d("I64").to_float(e.readActionTimestampMs)}}).filter(Boolean)}function m(a){var b=a.nextMessage,c=b==null;b=l(a,function(a){return!c&&a.length===0},[c]);return b.length>0?a.children(d("MWMessageDeliveryStatus.re").seenHead(b)):a.children(d("MWMessageDeliveryStatus.re").noneStatus)}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.children,e=a.isSecureGroupThread,f=a.message,g=a.nextMessage,h=c("useReStore")(),i=c("MWPActor.re").useActor(),j=o(function(){return d("ReQL").fromTableDescending(h.table("participants").index("threadKeyReadWatermarkTimestampMs")).getKeyRange(f.threadKey).filter(function(a){return!d("I64").equal(a.contactId,i)}).take(1)},function(a){return a.length>0},[f.threadKey,i]).length>0,k=o(function(){return d("ReQL").fromTableDescending(h.table("participants").index("threadKeyReadWatermarkTimestampMs")).getKeyRange(f.threadKey).bounds({gte:{hd:f.timestampMs,tl:0}}).filter(function(a){return!d("I64").equal(a.contactId,i)}).take(1)},function(a){return j&&a.length>0},[f.timestampMs,f.threadKey,i,j]),m=k.length>0,n=o(function(){return d("ReQL").fromTableAscending(h.table("participants").index("threadKeyReadWatermarkTimestampMs")).getKeyRange(f.threadKey).bounds({lt:{hd:f.timestampMs,tl:0}}).filter(function(a){return!d("I64").equal(a.contactId,i)}).take(1)},function(a){return m&&a.length===0},[f.threadKey,m,f.timestampMs,i]).length===0&&m,p=o(function(){return d("ReQL").fromTableDescending(h.table("participants").index("threadKeyDeliveredWatermarkTimestampMs")).getKeyRange(f.threadKey).bounds({gte:{hd:f.timestampMs,tl:0}}).filter(function(a){return!d("I64").equal(a.contactId,i)}).take(1)},function(a){return a.length>0||m},[f.threadKey,f.timestampMs,m,i]).length>0;a=l(a,function(a){return m&&a.length===0},[m]);if(m)if(e){e=g==null||d("I64").compare(k[0].readWatermarkTimestampMs,g.timestampMs)<0;return e&&a.length>0?b(d("MWMessageDeliveryStatus.re").deliveredAndRead(a,n)):b(d("MWMessageDeliveryStatus.re").noneStatus)}else return a.length>0?b(d("MWMessageDeliveryStatus.re").seenHead(a)):b(d("MWMessageDeliveryStatus.re").noneStatus);return p?b(d("MWMessageDeliveryStatus.re").delivered):b(d("MWMessageDeliveryStatus.re").sent)}n.displayName=n.name+" [from "+f.id+"]";function o(a,b,c){var e=i(void 0),f=e[0];e=e[1];c=d("ReQLSuspense").useArray(function(){return f!=null?d("ReQL").empty():a()},[].concat(c,[f]));b(c)&&f==null&&e(c);return f!=null?f:c}g["default"]=a}),98);
__d("MWPMessageRowCalculateStatus.bs",["MWPMessageRowCalculateStatus.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWPMessageRowCalculateStatus.react");f.make=a}),null);
__d("MWThreadIsMuted_DEPRECATED.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a<=-1)return!0;else return a>Date.now()}f.getThreadIsMuted=a}),null);
__d("MWChatCalculateIsMutedFromExpireTime.bs",["MWThreadIsMuted_DEPRECATED.bs","bs_curry","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=h.useState(function(){return b("MWThreadIsMuted_DEPRECATED.bs").getThreadIsMuted(a)}),d=c[1];h.useEffect(function(){var c=b("MWThreadIsMuted_DEPRECATED.bs").getThreadIsMuted(a);b("bs_curry")._1(d,function(a){return c});if(!(c&&a>-1))return;var e=b("setTimeout")(function(a){return b("bs_curry")._1(d,function(a){return!1})},a-Date.now());return function(a){b("clearTimeout")(e)}},[a,d]);return c[0]}f.useHook=a}),null);
__d("MWV2OpenTabOrThread.bs",["CurrentEnvironment","JSScheduler","LSMessagingThreadTypeUtil.bs","LSThreadAttributionStore.bs","MAWGating.bs","MWChatInteraction.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWInboxArchivedThreadsRouteBuilder.bs","MWInboxBusinessSupportThreadsRouteBuilder.bs","MWInboxMarketplaceThreadsRouteBuilder.bs","MWInboxMessageRequestsRouteBuilder.bs","MWInboxRouteBuilder.bs","XCometGroupDiscussionControllerRouteBuilder","XCometMessengerControllerRouteBuilder","bs_belt_Option","bs_caml_int64","bs_caml_option","bs_curry","bs_int64","cr:1369","cr:2299","gkx","react","useCometEntityKey","useCometFeedNoRoutingNavigationEventLogger","useCometRouterDispatcher","useGroupThreadViewParams","useMWV2ChatOpenTabTraceProvider","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(void 0);function a(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{value:a,children:b})}d={make:a};var j=b("cr:1369")==null?void 0:b("bs_caml_option").some(b("cr:1369")),k=b("cr:2299")==null?void 0:b("bs_caml_option").some(b("cr:2299"));function l(a){var c=b("MWChatStateV2.bs").useDispatch(void 0),d=b("useCometFeedNoRoutingNavigationEventLogger")(),e=b("useMWV2ChatOpenTabTraceProvider")();return h.useCallback(function(a){return function(f,g){d(Date.now(),"","messenger");return e(function(d){b("MWChatInteraction.bs").set(b("bs_int64").to_string(a.threadKey),d);return b("bs_curry")._1(c,b("MWChatStateActions.bs").openTab(Date.now(),{shouldFocus:!0},{TAG:1,_0:a}))},b("bs_caml_int64").to_int32(a.threadType),g,b("bs_int64").to_string(a.threadKey))}},[c,d,e])}function m(a){var c=b("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),d=b("useCometRouterDispatcher")(),e=h.useContext(i),f=b("useGroupThreadViewParams")(),g=l(void 0),m=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(b("useCometEntityKey")()),function(a){return b("bs_caml_option").nullable_to_opt(a.entity_type)}),void 0);return h.useMemo(function(){var a=function(a,c){var d=b("bs_belt_Option").getWithDefault(e,function(a){var d=b("bs_int64").to_string(a);if(!(b("cr:2299")==null)){if(!b("MAWGating.bs").isOccamadillo(void 0)&&b("bs_curry")._1(k.isThreadId,a))if(b("CurrentEnvironment").facebookdotcom)return b("XCometMessengerControllerRouteBuilder").buildURL({});else return"/";if(b("MAWGating.bs").isOccamadillo(void 0)&&b("LSMessagingThreadTypeUtil.bs").isSecure(c))return b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildE2EEThreadURL,{thread_key:d})}if(!(f==null))return b("XCometGroupDiscussionControllerRouteBuilder").buildURL({chats_to_open:[f.threadKey,b("bs_int64").to_string(a)],idorvanity:f.groupId});if(m===void 0)return b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:d});switch(m){case"archived":return b("bs_curry")._1(b("MWInboxArchivedThreadsRouteBuilder.bs").buildURL,{thread_key:d});case"business_support":return b("bs_curry")._1(b("MWInboxBusinessSupportThreadsRouteBuilder.bs").buildURL,{thread_key:d});case"marketplace":return b("bs_curry")._1(b("MWInboxMarketplaceThreadsRouteBuilder.bs").buildURL,{thread_key:d});case"message_requests":return b("bs_curry")._1(b("MWInboxMessageRequestsRouteBuilder.bs").buildURL,{thread_key:d});default:return b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:d})}});return b("bs_curry")._1(d,a)},h=function(c){var e=c.threadKey;!(b("cr:2299")==null)&&!(b("cr:1369")==null)&&!b("MAWGating.bs").isOccamadillo(void 0)&&b("bs_curry")._1(k.isThreadId,e)&&b("bs_curry")._1(j.setMostRecentSecureThreadKey,b("bs_int64").to_string(e));if(!(d==null)){d.go(a(e,c.threadType));return}},i=function(a,c){return b("LSThreadAttributionStore.bs").setSource(b("bs_int64").to_string(a.threadKey),c)};return{getUrlFromThreadKey:a,openInbox:function(a,b){i(a,b);return h(a)},openTabOrInbox:function(a,d,e){a=a!==void 0?a:!0;i(d,e);if(c)return b("bs_curry")._3(g,d,a,e);else return h(d)}}},[c,d,g])}function c(a,c){var d=m(void 0),e=b("useCometRouterDispatcher")();h.useEffect(function(){b("gkx")("6944")&&b("JSScheduler").scheduleSpeculativeCallback(function(){if(!(e==null)){e.prefetchRouteDefinition(b("bs_curry")._2(d.getUrlFromThreadKey,a,c));return}})},[])}f.Provider=d;f.$MAWSessionStorage$requireCondXplat=b("cr:1369");f.$MAWThreadId$requireCondXplat=b("cr:2299");f.useHook=m;f.usePreloadRoute=c}),null);
__d("FDSMWMessageDeliveryStatusIcons.bs",["MWMessageDeliveryStatus.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={disabled:{fill:"xsrhx6k"},negative:{fill:"x1i5740i"}};function k(a){switch(a){case 0:return"12px";case 1:return"14px";case 2:return"16px"}}var l={toString:k};function a(a){var c=a.size;a=a.xstyle;return i.jsxs("svg",{className:(h||(h=b("stylex")))(j.disabled,a),height:k(c),width:k(c),viewBox:"2 2 20 20",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("title",{children:b("MWMessageDeliveryStatus.bs").Titles.sending}),i.jsx("path",{d:"m12 2a10 10 0 1 0 10 10 10.011 10.011 0 0 0 -10-10zm0 18.5a8.5 8.5 0 1 1 8.5-8.5 8.51 8.51 0 0 1 -8.5 8.5z"})]})}a={make:a};function c(a){var c=a.size;a=a.xstyle;return i.jsxs("svg",{className:(h||(h=b("stylex")))(j.disabled,a),height:k(c),width:k(c),viewBox:"2 2 20 20",role:"img","data-testid":"message_delivery_state_sent",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("title",{children:b("MWMessageDeliveryStatus.bs").Titles.sent}),i.jsx("path",{d:"m12 2a10 10 0 1 0 10 10 10.011 10.011 0 0 0 -10-10zm0 18.5a8.5 8.5 0 1 1 8.5-8.5 8.51 8.51 0 0 1 -8.5 8.5z"}),i.jsx("path",{d:"m15.982 8.762-5.482 5.487-2.482-2.478a.75.75 0 0 0 -1.06 1.06l3.008 3.008a.748.748 0 0 0 1.06 0l6.016-6.016a.75.75 0 0 0 -1.06-1.061z"})]})}c={make:c};function d(a){var c=a.size;a=a.xstyle;return i.jsxs("svg",{"data-testid":"message-delivery-status-icon-delivered",className:(h||(h=b("stylex")))(j.disabled,a),height:k(c),width:k(c),viewBox:"2 2 20 20",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("title",{children:b("MWMessageDeliveryStatus.bs").Titles.delivered}),i.jsx("path",{d:"m12 2a10 10 0 1 0 10 10 10.011 10.011 0 0 0 -10-10zm5.219 8-6.019 6.016a1 1 0 0 1 -1.414 0l-3.005-3.008a1 1 0 1 1 1.419-1.414l2.3 2.3 5.309-5.31a1 1 0 1 1 1.41 1.416z"})]})}d={make:d};function e(a){var c=a.size,d=a.xstyle;a=a.title;a=a!==void 0?a:b("MWMessageDeliveryStatus.bs").Titles.error;return i.jsxs("svg",{className:(h||(h=b("stylex")))(j.negative,d),height:k(c),width:k(c),viewBox:"2 2 20 20",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("title",{children:a}),i.jsx("path",{d:"m12 2a10 10 0 1 0 10 10 10.011 10.011 0 0 0 -10-10zm0 15.139a1.125 1.125 0 1 1 1.125-1.125 1.127 1.127 0 0 1 -1.125 1.125zm.8-3.81a.75.75 0 0 1 -.75.685.852.852 0 0 1 -.847-.685l-.45-5.145c0-.022 0-.043 0-.065a1.254 1.254 0 1 1 2.5 0z"})]})}e={make:e};function m(a){var c=a.size;a=a.xstyle;return i.jsx("svg",{className:(h||(h=b("stylex")))(j.disabled,a),width:k(c),height:k(c),viewBox:"0 0 16 16",role:"img",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 108 0a8 8 0 000 16zm.473-5.26a.5.5 0 00.08.605l.27.271a1 1 0 001.572-.205l3.379-5.818a1 1 0 00-1.73-1.004l-.974 1.678a.911.911 0 01-.034.06L8.473 10.74zm1.3-5.147A1 1 0 008.045 4.59L5.417 9.114a.15.15 0 01-.236.03L3.798 7.763a1 1 0 10-1.414 1.414l2.44 2.44a1 1 0 001.571-.205l3.379-5.818z"})})}m={make:m};f.styles=j;f.IconSize=l;f.Sending=a;f.Sent=c;f.Delivered=d;f.$$Error=e;f.DeliveredAndRead=m}),null);
__d("MWMessageDeliveryStatusIcons.bs",["cr:151"],(function(a,b,c,d,e,f){"use strict";c=(a=b("cr:151")).IconSize;d=a.Sending;e=a.Sent;b=a.Delivered;var g=a.$$Error,h=a.DeliveredAndRead;f.$MDSMWMessageDeliveryStatusIcons$OR$FDSMWMessageDeliveryStatusIcons$requireCond=a;f.IconSize=c;f.Sending=d;f.Sent=e;f.Delivered=b;f.$$Error=g;f.DeliveredAndRead=h}),null);
__d("MWFacepile.bs",["BaseGlimmer.react","CometFacepilePhoto.react","LSMediaUrl.bs","MWFacepileBadge.bs","MWFacepileGetContactsToShow.bs","bs_caml_option","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i={glimmer:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",width:"xh8yej3",height:"x5yr21d"}};function a(a){var c=a.thread,d=a.photoSize,e=a.badgeSize,f=a.badge;a=a.withAltText;f=f!==void 0?b("bs_caml_option").valFromOption(f):h.jsx(b("MWFacepileBadge.bs").make,{thread:c,size:e});var g=a!==void 0?a:!0;e=d==="s_36"?"36px":d==="s_40"?"40px":d==="s_44"?"44px":d==="s_48"?"48px":d==="s_56"?"56px":d==="s_60"?"60px":d==="s_72"?"72px":d==="s_80"?"80px":"32px";a=h.jsx("div",{style:{height:e,width:e},children:h.jsx(b("BaseGlimmer.react"),{index:1,xstyle:i.glimmer})});e=b("MWFacepileGetContactsToShow.bs").useHook(c);if(e.length!==0)return h.jsx(b("CometFacepilePhoto.react"),{sources:e.map(function(a){return{alt:g?a.name:"",disabled:!1,source:b("LSMediaUrl.bs").Contact.profilePictureUrl(a)}}),badge:f,size:function(){switch(d){case"s_32":return 32;case"s_36":return 36;case"s_40":return 40;case"s_44":return 44;case"s_48":return 48;case"s_56":return 56;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}(),totalItems:e.length});else return a}c=a;f.styles=i;f.make=c}),null);
__d("MWThreadPicture.bs",["CometFacepilePhoto.react","CometProfilePhoto.react","LSMediaUrl.bs","MWCMThreadTypes.bs","MWFacepile.bs","MWFacepileBadge.bs","MWPActor.bs","MWPGetThreadTitle.bs","ReQL.bs","ReQLSuspense","bs_belt_Option","bs_caml_option","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=a.thread,d=a.photoSize,e=a.badgeSize,f=a.badge,g=a.threadPictureUrl;a=a.withAltText;f=f!==void 0?b("bs_caml_option").valFromOption(f):h.jsx(b("MWFacepileBadge.bs").make,{thread:c,size:e});e=b("MWPActor.bs").useActor(void 0);var i=b("useReStore")(),j=b("ReQLSuspense").useArray(function(){var a;return(a=b("ReQL.bs")).take(a.leftJoin(a.getKeyRange(a.fromTableAscending(i.table("participants")),{hd:c.threadKey,tl:0}),a.fromTableAscending(i.table("contacts"))),8)},[c.threadKey]);j=b("bs_belt_Option").getWithDefault(b("MWPGetThreadTitle.bs").computeThreadTitle(void 0,c,j,e),"");if(b("MWCMThreadTypes.bs").isAnyCMThread(c.threadType))return h.jsx(b("CometProfilePhoto.react"),{source:{uri:g},badge:f,shape:"roundedRect",size:function(){switch(d){case"s_32":return 32;case"s_36":return 36;case"s_40":return 40;case"s_44":return 44;case"s_48":return 48;case"s_56":return 56;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}()});else return h.jsx(b("CometFacepilePhoto.react"),{sources:[{alt:a?j:"",disabled:!1,source:g}],badge:f,size:function(){switch(d){case"s_32":return 32;case"s_36":return 36;case"s_40":return 40;case"s_44":return 44;case"s_48":return 48;case"s_56":return 56;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}(),totalItems:1})}c={make:i};function a(a){var c=a.photoSize,d=a.badge,e=a.badgeSize,f=a.thread;a=a.withAltText;a=a!==void 0?a:!0;var g=b("LSMediaUrl.bs").Thread.threadPictureUrl(f);if(g!==void 0){g={thread:f,photoSize:c,badgeSize:e,threadPictureUrl:g,withAltText:a};d!==void 0&&(g.badge=b("bs_caml_option").valFromOption(d));return h.jsx(i,g)}g={thread:f,photoSize:c,badgeSize:e,withAltText:a};d!==void 0&&(g.badge=b("bs_caml_option").valFromOption(d));return h.jsx(b("MWFacepile.bs").make,g)}d=a;f.CustomThreadPicture=c;f.make=d}),null);
__d("CancellationToken.bs",["bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";c=b("bs_caml_exceptions").create("CancellationToken.TokenCancelled");function a(a){var b={contents:!1};return{cancel:function(a){b.contents=!0},isCancelled:function(a){return b.contents}}}f.TokenCancelled=c;f.make=a}),null);
__d("CancellablePromise.bs",["CancellationToken.bs","Promise","bs_caml_exceptions","bs_curry","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=b("bs_caml_exceptions").create("CancellablePromise.PromiseError");e=function(a){throw a};function a(a){var c={contents:!1},d=new window.Promise(function(d,e){var f=a.then(function(a){c.contents?e(0):d({_0:a})});b("promiseDone")(f,void 0,void 0)})["catch"](function(a){if(a)throw{RE_EXN_ID:g,_1:a,Error:new Error()};return b("Promise").resolve(0)}),e=function(a){c.contents=!0};return[e,d]}function c(a,c,d){return d.then(function(d){if(b("bs_curry")._1(a.isCancelled,void 0))return b("Promise").reject({RE_EXN_ID:b("CancellationToken.bs").TokenCancelled});else return b("bs_curry")._1(c,d)})}function d(a,c){return c["catch"](function(c){if(c.RE_EXN_ID===b("CancellationToken.bs").TokenCancelled)return b("Promise").resolve(a);else return b("Promise").reject(c)})}f.PromiseError=g;f.jsThrowError=e;f.make=a;f.then_=c;f.ignoreFailed=d}),null);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("javascript-blowfish-1.0.5",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=function(b,c){this.key=b,(c==="ecb"||c==="cbc")&&(this.mode=c),this.sBox0=a.sBox0.slice(),this.sBox1=a.sBox1.slice(),this.sBox2=a.sBox2.slice(),this.sBox3=a.sBox3.slice(),this.pArray=a.pArray.slice(),this.generateSubkeys(b)};a.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(a,b){if(this.mode==="ecb")return this.encryptECB(a);if(this.mode==="cbc")return this.encryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},decrypt:function(a,b){if(this.mode==="ecb")return this.decryptECB(a);if(this.mode==="cbc")return this.decryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},encryptECB:function(a){a=this.utf8Decode(a);var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8){var f=8-e.length;while(0<f--)e+="\0"}var g;f=this.split64by32(e);e=f[0];g=f[1];f=this.encipher(e,g);e=f[0];g=f[1];c+=this.num2block32(e)+this.num2block32(g)}return c},encryptCBC:function(a,b){a=this.utf8Decode(a);var c=Math.ceil(a.length/8),d;b=this.split64by32(b);d=b[0];b=b[1];var e="";for(var f=0;f<c;f++){var g=a.substr(f*8,8);if(g.length<8){var h=8-g.length;while(0<h--)g+="\0"}var i;h=this.split64by32(g);g=h[0];i=h[1];g=this.xor(g,d);i=this.xor(i,b);h=this.encipher(g,i);g=h[0];i=h[1];d=g;b=i;e+=this.num2block32(g)+this.num2block32(i)}return e},decryptECB:function(a){var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u044b\u0439\u0442\u0430\u043c.");var f,g;e=this.split64by32(e);f=e[0];g=e[1];e=this.decipher(f,g);f=e[0];g=e[1];c+=this.num2block32(f)+this.num2block32(g)}c=this.utf8Encode(c);return c},decryptCBC:function(a,b){var c=Math.ceil(a.length/8),d,e,f;b=this.split64by32(b);d=b[0];b=b[1];var g="";for(var h=0;h<c;h++){var i=a.substr(h*8,8);if(i.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043c.");var j,k;i=this.split64by32(i);j=i[0];k=i[1];e=j;f=k;i=this.decipher(j,k);j=i[0];k=i[1];j=this.xor(j,d);k=this.xor(k,b);d=e;b=f;g+=this.num2block32(j)+this.num2block32(k)}g=this.utf8Encode(g);return g},F:function(a){var b=a>>>24,c=a<<8>>>24,d=a<<16>>>24;a=a<<24>>>24;b=this.addMod32(this.sBox0[b],this.sBox1[c]);b=this.xor(b,this.sBox2[d]);b=this.addMod32(b,this.sBox3[a]);return b},encipher:function(a,b){var c;for(var d=0;d<16;d++)a=this.xor(a,this.pArray[d]),b=this.xor(this.F(a),b),c=a,a=b,b=c;c=a;a=b;b=c;b=this.xor(b,this.pArray[16]);a=this.xor(a,this.pArray[17]);return[a,b]},decipher:function(a,b){var c;a=this.xor(a,this.pArray[17]);b=this.xor(b,this.pArray[16]);c=a;a=b;b=c;for(var d=15;d>=0;d--)c=a,a=b,b=c,b=this.xor(this.F(a),b),a=this.xor(a,this.pArray[d]);return[a,b]},generateSubkeys:function(a){var b=0,c=0,d,e;for(d=0;d<18;d++){for(e=4;e>0;e--)b=this.fixNegative(b<<8|a.charCodeAt(c)),c=(c+1)%a.length;this.pArray[d]=this.xor(this.pArray[d],b);b=0}e=[0,0];for(d=0;d<18;d+=2)e=this.encipher(e[0],e[1]),this.pArray[d]=e[0],this.pArray[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox0[d]=e[0],this.sBox0[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox1[d]=e[0],this.sBox1[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox2[d]=e[0],this.sBox2[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox3[d]=e[0],this.sBox3[d+1]=e[1]},block32toNum:function(a){return this.fixNegative(a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3))},num2block32:function(a){return String.fromCharCode(a>>>24)+String.fromCharCode(a<<8>>>24)+String.fromCharCode(a<<16>>>24)+String.fromCharCode(a<<24>>>24)},xor:function(a,b){return this.fixNegative(a^b)},addMod32:function(a,b){return this.fixNegative(a+b|0)},fixNegative:function(a){return a>>>0},split64by32:function(a){var b=a.substring(0,4);a=a.substring(4,8);return[this.block32toNum(b),this.block32toNum(a)]},utf8Decode:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},utf8Encode:function(a){var b="",c=0,d=0,e=0,f;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b},base64Encode:function(a){var b="",c,d,e,f,g,h,i=0;while(i<a.length)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this.keyStr.charAt(f)+this.keyStr.charAt(c)+this.keyStr.charAt(g)+this.keyStr.charAt(h);return b},base64Decode:function(a){var b="",c,d,e,f,g,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<a.length)d=this.keyStr.indexOf(a.charAt(h++)),e=this.keyStr.indexOf(a.charAt(h++)),f=this.keyStr.indexOf(a.charAt(h++)),g=this.keyStr.indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|f>>2,c=(f&3)<<6|g,b=b+String.fromCharCode(d),f!=64&&(b=b+String.fromCharCode(e)),g!=64&&(b=b+String.fromCharCode(c));return b},trimZeros:function(a){return a.replace(/\0+$/g,"")}};a.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];a.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946];a.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055];a.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504];a.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];g.exports=a}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(a,b,c,d,e,f){e.exports=b("javascript-blowfish-1.0.5")()}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("minisearch-3.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():typeof i==="function"&&i.amd?i(c):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.MiniSearch=c())})(this,function(){var a=function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)};function b(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e}function d(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a}var e="ENTRIES",f="KEYS",g="VALUES",h="",i=function(){function a(a,b){var c=a._tree,d=Object.keys(c);this.set=a;this._type=b;this._path=d.length>0?[{node:c,keys:d}]:[]}a.prototype.next=function(){var a=this.dive();this.backtrack();return a};a.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var a=j(this._path),b=a.node;a=a.keys;if(j(a)===h)return{done:!1,value:this.result()};this._path.push({node:b[j(a)],keys:Object.keys(b[j(a)])});return this.dive()};a.prototype.backtrack=function(){if(this._path.length===0)return;j(this._path).keys.pop();if(j(this._path).keys.length>0)return;this._path.pop();this.backtrack()};a.prototype.key=function(){return this.set._prefix+this._path.map(function(a){a=a.keys;return j(a)}).filter(function(a){return a!==h}).join("")};a.prototype.value=function(){return j(this._path).node[h]};a.prototype.result=function(){if(this._type===g)return this.value();return this._type===f?this.key():[this.key(),this.value()]};a.prototype[Symbol.iterator]=function(){return this};return a}(),j=function(a){return a[a.length-1]},k=0,l=1,m=2,n=3,o=function(a,b,d){var e=[{distance:0,i:0,key:"",node:a}],f={},g=[];a=function(){var a=e.pop(),i=a.node,j=a.distance,k=a.key,l=a.i,m=a.edit;Object.keys(i).forEach(function(n){if(n===h){var o=j+(b.length-l),a=c(f[k]||[null,Infinity],2);a=a[1];o<=d&&o<a&&(f[k]=[i[n],o])}else p(b,n,d-j,l,m,g).forEach(function(a){var c=a.distance,b=a.i;a=a.edit;e.push({node:i[n],distance:j+c,key:k+n,i:b,edit:a})})})};while(e.length>0)a();return f},p=function(a,b,c,d,e,f){f.push({distance:0,ia:d,ib:0,edit:e});d=[];while(f.length>0){e=f.pop();var g=e.distance,h=e.ia,i=e.ib;e=e.edit;if(i===b.length){d.push({distance:g,i:h,edit:e});continue}if(a[h]===b[i])f.push({distance:g,ia:h+1,ib:i+1,edit:k});else{if(g>=c)continue;e!==m&&f.push({distance:g+1,ia:h,ib:i+1,edit:n});h<a.length&&(e!==n&&f.push({distance:g+1,ia:h+1,ib:i,edit:m}),e!==n&&e!==m&&f.push({distance:g+1,ia:h+1,ib:i+1,edit:l}))}}return d},q=function(){function a(a,b){a===void 0&&(a={}),b===void 0&&(b=""),this._tree=a,this._prefix=b}a.prototype.atPrefix=function(d){var b;if(!d.startsWith(this._prefix))throw new Error("Mismatched prefix");var e=c(r(this._tree,d.slice(this._prefix.length)),2),f=e[0];e=e[1];if(f===void 0){e=c(y(e),2);var g=e[0],i=e[1];e=Object.keys(g).find(function(a){return a!==h&&a.startsWith(i)});if(e!==void 0)return new a((b={},b[e.slice(i.length)]=g[e],b),d)}return new a(f||{},d)};a.prototype.clear=function(){delete this._size,this._tree={}};a.prototype["delete"]=function(a){delete this._size;return v(this._tree,a)};a.prototype.entries=function(){return new i(this,e)};a.prototype.forEach=function(d){var e,a;try{for(var f=b(this),g=f.next();!g.done;g=f.next()){var h=c(g.value,2),i=h[0];h=h[1];d(i,h,this)}}catch(a){e={error:a}}finally{try{g&&!g.done&&(a=f["return"])&&a.call(f)}finally{if(e)throw e.error}}};a.prototype.fuzzyGet=function(a,b){return o(this._tree,a,b)};a.prototype.get=function(a){a=s(this._tree,a);return a!==void 0?a[h]:void 0};a.prototype.has=function(a){a=s(this._tree,a);return a!==void 0&&a.hasOwnProperty(h)};a.prototype.keys=function(){return new i(this,f)};a.prototype.set=function(a,b){if(typeof a!=="string")throw new Error("key must be a string");delete this._size;a=t(this._tree,a);a[h]=b;return this};Object.defineProperty(a.prototype,"size",{get:function(){var a=this;if(this._size)return this._size;this._size=0;this.forEach(function(){a._size+=1});return this._size},enumerable:!1,configurable:!0});a.prototype.update=function(a,b){if(typeof a!=="string")throw new Error("key must be a string");delete this._size;a=t(this._tree,a);a[h]=b(a[h]);return this};a.prototype.values=function(){return new i(this,g)};a.prototype[Symbol.iterator]=function(){return this.entries()};a.from=function(e){var f,d,g=new a();try{for(var h=b(e),i=h.next();!i.done;i=h.next()){e=c(i.value,2);var j=e[0];e=e[1];g.set(j,e)}}catch(a){f={error:a}}finally{try{i&&!i.done&&(d=h["return"])&&d.call(h)}finally{if(f)throw f.error}}return g};a.fromObject=function(b){return a.from(Object.entries(b))};return a}(),r=function(a,b,c){c===void 0&&(c=[]);if(b.length===0||a==null)return[a,c];var d=Object.keys(a).find(function(a){return a!==h&&b.startsWith(a)});if(d===void 0){c.push([a,b]);return r(void 0,"",c)}c.push([a,d]);return r(a[d],b.slice(d.length),c)},s=function(a,b){if(b.length===0||a==null)return a;var c=Object.keys(a).find(function(a){return a!==h&&b.startsWith(a)});return c===void 0?void 0:s(a[c],b.slice(c.length))},t=function(b,c){var a;if(c.length===0||b==null)return b;var d=Object.keys(b).find(function(a){return a!==h&&c.startsWith(a)});if(d===void 0){var e=Object.keys(b).find(function(a){return a!==h&&a.startsWith(c[0])});if(e===void 0)b[c]={};else{var f=u(c,e);b[f]=(a={},a[e.slice(f.length)]=b[e],a);delete b[e];return t(b[f],c.slice(f.length))}return b[c]}return t(b[d],c.slice(d.length))},u=function(a,b,c,d,e){c===void 0&&(c=0);d===void 0&&(d=Math.min(a.length,b.length));e===void 0&&(e="");if(c>=d)return e;return a[c]!==b[c]?e:u(a,b,c+1,d,e+a[c])},v=function(a,b){a=c(r(a,b),2);b=a[0];a=a[1];if(b===void 0)return;delete b[h];var d=Object.keys(b);d.length===0&&w(a);d.length===1&&x(a,d[0],b[d[0]])},w=function(b){if(b.length===0)return;var a=c(y(b),2),d=a[0];a=a[1];delete d[a];Object.keys(d).length===0&&w(b.slice(0,-1))},x=function(a,b,d){if(a.length===0)return;a=c(y(a),2);var e=a[0];a=a[1];e[a+b]=d;delete e[a]},y=function(a){return a[a.length-1]},z,A="or",B="and",C=function(){function b(b){if((b===null||b===void 0?void 0:b.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');this._options=a(a(a({},J),b),{searchOptions:a(a({},K),b.searchOptions||{})});this._index=new q();this._documentCount=0;this._documentIds={};this._fieldIds={};this._fieldLength={};this._averageFieldLength={};this._nextId=0;this._storedFields={};this.addFields(this._options.fields)}b.prototype.add=function(b){var c=this,a=this._options,d=a.extractField,e=a.tokenize,f=a.processTerm,g=a.fields;a=a.idField;var h=d(b,a);if(h==null)throw new Error('MiniSearch: document does not have ID field "'+a+'"');var i=this.addDocumentId(h);this.saveStoredFields(i,b);g.forEach(function(a){var g=d(b,a);if(g==null)return;g=e(g.toString(),a);c.addFieldLength(i,c._fieldIds[a],c.documentCount-1,g.length);g.forEach(function(b){b=f(b,a);b&&c.addTerm(c._fieldIds[a],i,b)})})};b.prototype.addAll=function(a){var b=this;a.forEach(function(a){return b.add(a)})};b.prototype.addAllAsync=function(a,b){var c=this;b===void 0&&(b={});b=b.chunkSize;var d=b===void 0?10:b;b={chunk:[],promise:Promise.resolve()};a=a.reduce(function(a,e,f){var b=a.chunk;a=a.promise;b.push(e);if((f+1)%d===0)return{chunk:[],promise:a.then(function(){return new Promise(function(a){return setTimeout(a,0)})}).then(function(){return c.addAll(b)})};else return{chunk:b,promise:a}},b);var e=a.chunk;b=a.promise;return b.then(function(){return c.addAll(e)})};b.prototype.remove=function(b){var d=this,a=this._options,e=a.tokenize,f=a.processTerm,g=a.extractField,h=a.fields;a=a.idField;var i=g(b,a);if(i==null)throw new Error('MiniSearch: document does not have ID field "'+a+'"');a=c(Object.entries(this._documentIds).find(function(a){a=c(a,2);a[0];a=a[1];return i===a})||[],1);var j=a[0];if(j==null)throw new Error("MiniSearch: cannot remove document with ID "+i+": it is not in the index");h.forEach(function(a){var c=g(b,a);if(c==null)return;c=e(c.toString(),a);c.forEach(function(b){b=f(b,a);b&&d.removeTerm(d._fieldIds[a],j,b)})});delete this._storedFields[j];delete this._documentIds[j];this._documentCount-=1};b.prototype.removeAll=function(a){var b=this;if(a)a.forEach(function(a){return b.remove(a)});else if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");else this._index=new q(),this._documentCount=0,this._documentIds={},this._fieldLength={},this._averageFieldLength={},this._storedFields={},this._nextId=0};b.prototype.search=function(d,e){var f=this;e===void 0&&(e={});var b=this._options,g=b.tokenize,h=b.processTerm;b=b.searchOptions;var i=a(a({tokenize:g,processTerm:h},b),e);g=i.tokenize;var j=i.processTerm;h=g(d).map(function(a){return j(a)}).filter(function(a){return!!a});b=h.map(H(i));e=b.map(function(a){return f.executeQuery(a,i)});g=this.combineResults(e,i.combineWith);return Object.entries(g).reduce(function(d,a){a=c(a,2);var e=a[0];a=a[1];var b=a.score,g=a.match;a=a.terms;a={id:f._documentIds[e],terms:I(a),score:b,match:g};Object.assign(a,f._storedFields[e]);(i.filter==null||i.filter(a))&&d.push(a);return d},[]).sort(function(a,b){a=a.score;b=b.score;return a<b?1:-1})};b.prototype.autoSuggest=function(b,d){d===void 0&&(d={});d=a(a({},L),d);b=this.search(b,d).reduce(function(c,a){var b=a.score;a=a.terms;var d=a.join(" ");c[d]==null?c[d]={score:b,terms:a,count:1}:(c[d].score+=b,c[d].count+=1);return c},{});return Object.entries(b).map(function(a){a=c(a,2);var d=a[0];a=a[1];var b=a.score,e=a.terms;a=a.count;return{suggestion:d,terms:e,score:b/a}}).sort(function(a,b){a=a.score;b=b.score;return a<b?1:-1})};Object.defineProperty(b.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0});b.loadJSON=function(a,c){if(c==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return b.loadJS(JSON.parse(a),c)};b.getDefault=function(a){if(J.hasOwnProperty(a))return D(J,a);else throw new Error('MiniSearch: unknown option "'+a+'"')};b.loadJS=function(a,c){var d=a.index,e=a.documentCount,f=a.nextId,g=a.documentIds,h=a.fieldIds,i=a.fieldLength,j=a.averageFieldLength;a=a.storedFields;c=new b(c);c._index=new q(d._tree,d._prefix);c._documentCount=e;c._nextId=f;c._documentIds=g;c._fieldIds=h;c._fieldLength=i;c._averageFieldLength=j;c._fieldIds=h;c._storedFields=a||{};return c};b.prototype.executeQuery=function(b,d){var e=this;d=a(a({},this._options.searchOptions),d);var f=(d.fields||this._options.fields).reduce(function(c,d){var b;return a(a({},c),(b={},b[d]=D(c,d)||1,b))},d.boost||{}),g=d.boostDocument;d=d.weights;d=a(a({},K.weights),d);var h=d.fuzzy,i=d.prefix;d=this.termResults(b.term,f,g,this._index.get(b.term));if(!b.fuzzy&&!b.prefix)return d;var j=[d];b.prefix&&this._index.atPrefix(b.term).forEach(function(a,c){var d=.3*(a.length-b.term.length)/a.length;j.push(e.termResults(a,f,g,c,i,d))});if(b.fuzzy){d=b.fuzzy===!0?.2:b.fuzzy;d=d<1?Math.round(b.term.length*d):d;Object.entries(this._index.fuzzyGet(b.term,d)).forEach(function(a){a=c(a,2);var b=a[0];a=c(a[1],2);var d=a[0];a=a[1];a=a/b.length;j.push(e.termResults(b,f,g,d,h,a))})}return j.reduce(E[A],{})};b.prototype.combineResults=function(a,b){b===void 0&&(b=A);if(a.length===0)return{};b=b.toLowerCase();return a.reduce(E[b],null)||{}};b.prototype.toJSON=function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength,storedFields:this._storedFields}};b.prototype.termResults=function(a,b,d,e,f,g){var h=this;g===void 0&&(g=0);return e==null?{}:Object.entries(b).reduce(function(f,b){b=c(b,2);var i=b[0],j=b[1],k=h._fieldIds[i];b=e[k]||{ds:{}};var l=b.df;b=b.ds;Object.entries(b).forEach(function(b){b=c(b,2);var e=b[0];b=b[1];var m=d?d(h._documentIds[e],a):1;if(!m)return;var n=h._fieldLength[e][k]/h._averageFieldLength[k];f[e]=f[e]||{score:0,match:{},terms:[]};f[e].terms.push(a);f[e].match[a]=D(f[e].match,a)||[];f[e].score+=m*G(b,l,h._documentCount,n,j,g);f[e].match[a].push(i)});return f},{})};b.prototype.addTerm=function(b,c,d){this._index.update(d,function(d){d=d||{};var e=d[b]||{df:0,ds:{}};e.ds[c]==null&&(e.df+=1);e.ds[c]=(e.ds[c]||0)+1;return a(a({},d),(d={},d[b]=e,d))})};b.prototype.removeTerm=function(b,c,d){var e=this;if(!this._index.has(d)){this.warnDocumentChanged(c,b,d);return}this._index.update(d,function(f){var g=f[b];if(g==null||g.ds[c]==null){e.warnDocumentChanged(c,b,d);return f}if(g.ds[c]<=1){if(g.df<=1){delete f[b];return f}g.df-=1}if(g.ds[c]<=1){delete g.ds[c];return f}g.ds[c]-=1;return a(a({},f),(f={},f[b]=g,f))});Object.keys(this._index.get(d)).length===0&&this._index["delete"](d)};b.prototype.warnDocumentChanged=function(a,b,d){if(console==null||emptyFunction==null)return;a=Object.entries(this._fieldIds).find(function(a){a=c(a,2);a[0];a=a[1];return a===b})[0]};b.prototype.addDocumentId=function(a){var b=this._nextId.toString(36);this._documentIds[b]=a;this._documentCount+=1;this._nextId+=1;return b};b.prototype.addFields=function(a){var b=this;a.forEach(function(a,c){b._fieldIds[a]=c})};b.prototype.addFieldLength=function(a,b,c,d){this._averageFieldLength[b]=this._averageFieldLength[b]||0;var e=this._averageFieldLength[b]*c+d;this._fieldLength[a]=this._fieldLength[a]||{};this._fieldLength[a][b]=d;this._averageFieldLength[b]=e/(c+1)};b.prototype.saveStoredFields=function(b,c){var d=this,a=this._options,e=a.storeFields,f=a.extractField;if(e==null||e.length===0)return;this._storedFields[b]=this._storedFields[b]||{};e.forEach(function(a){var e=f(c,a);if(e===void 0)return;d._storedFields[b][a]=e})};return b}(),D=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:void 0},E=(z={},z[A]=function(a,b){return Object.entries(b).reduce(function(e,a){a=c(a,2);var f=a[0];a=a[1];var b=a.score,g=a.match;a=a.terms;e[f]==null?e[f]={score:b,match:g,terms:a}:(e[f].score+=b,e[f].score*=1.5,(b=e[f].terms).push.apply(b,d(a)),Object.assign(e[f].match,g));return e},a||{})},z[B]=function(b,e){return b==null?e:Object.entries(e).reduce(function(g,e){e=c(e,2);var h=e[0];e=e[1];var f=e.score,i=e.match;e=e.terms;if(b[h]===void 0)return g;g[h]=g[h]||{};g[h].score=b[h].score+f;g[h].match=a(a({},b[h].match),i);g[h].terms=d(b[h].terms,e);return g},{})},z),F=function(a,b,c){return a*Math.log(c/b)},G=function(a,b,c,d,e,f){e=e/(1+.333*e*f);return e*F(a,b,c)/d},H=function(a){return function(b,c,d){var e=typeof a.fuzzy==="function"?a.fuzzy(b,c,d):a.fuzzy||!1;c=typeof a.prefix==="function"?a.prefix(b,c,d):a.prefix===!0;return{term:b,fuzzy:e,prefix:c}}},I=function(a){return a.filter(function(b,c,a){return a.indexOf(b)===c})},J={idField:"id",extractField:function(a,b){return a[b]},tokenize:function(a,b){return a.split(M)},processTerm:function(a,b){return a.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},K={combineWith:A,prefix:!1,fuzzy:!1,boost:{},weights:{fuzzy:.9,prefix:.75}},L={prefix:function(a,b,c){return b===c.length-1}},M=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return C})}var k=!1;function l(){k||(k=!0,j());return h.exports}function a(a){switch(a){case void 0:return l()}}e.exports=a}),null);
__d("minisearch",["minisearch-3.0.2"],(function(a,b,c,d,e,f){e.exports=b("minisearch-3.0.2")()}),null);/*FB_PKG_DELIM*/
__d("CometAddTypeaheadRecentSearchMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4967262846700060"}),null);
__d("CometAddTypeaheadRecentSearchMutation.graphql",["CometAddTypeaheadRecentSearchMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SearchTypeaheadAddRecentSearchResponsePayload",kind:"LinkedField",name:"search_typeahead_add_recent_search",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometAddTypeaheadRecentSearchMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometAddTypeaheadRecentSearchMutation",selections:c},params:{id:b("CometAddTypeaheadRecentSearchMutation_facebookRelayOperation"),metadata:{},name:"CometAddTypeaheadRecentSearchMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometDeleteRecentSearchMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4945240752198545"}),null);
__d("CometDeleteRecentSearchMutation.graphql",["CometDeleteRecentSearchMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SearchTypeaheadDeleteRecentResponsePayload",kind:"LinkedField",name:"search_typeahead_delete_recent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometDeleteRecentSearchMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometDeleteRecentSearchMutation",selections:c},params:{id:b("CometDeleteRecentSearchMutation_facebookRelayOperation"),metadata:{},name:"CometDeleteRecentSearchMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometSearchBootstrapKeywordsDataSourceQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"first"}],b=[{kind:"Variable",name:"first",variableName:"first"}],c={alias:null,args:null,kind:"ScalarField",name:"keyword_text",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"item_logging_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"item_logging_info",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};g=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},g,h,i],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[h,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},f,i],storageKey:null}],storageKey:null}];h={alias:null,args:null,concreteType:"SearchTypeaheadSuggestionKeys",kind:"LinkedField",name:"suggestion_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keys",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_key",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometSearchBootstrapKeywordsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:"BootstrapKeywordsConnection",kind:"LinkedField",name:"bootstrap_keywords",plural:!1,selections:[{alias:null,args:null,concreteType:"BootstrapKeywordsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BootstrapResult",kind:"LinkedField",name:"node",plural:!1,selections:[c,d,e,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:g,args:null,argumentDefinitions:[]}],storageKey:null},h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometSearchBootstrapKeywordsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:"BootstrapKeywordsConnection",kind:"LinkedField",name:"bootstrap_keywords",plural:!1,selections:[{alias:null,args:null,concreteType:"BootstrapKeywordsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BootstrapResult",kind:"LinkedField",name:"node",plural:!1,selections:[c,d,e,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:g,storageKey:null},h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"4255077087859078",metadata:{},name:"CometSearchBootstrapKeywordsDataSourceQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo"};e.exports=a}),null);
__d("CometSearchKeywordDataSourceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4970436386382601"}),null);
__d("CometSearchKeywordDataSourceQuery.graphql",["CometSearchKeywordDataSourceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"query"}],c=[{kind:"Variable",name:"query",variableName:"query"}],d={alias:"name",args:null,kind:"ScalarField",name:"text",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"logging_id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"logging_info",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};h=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},h,i,j],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},h,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[i,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},g,j],storageKey:null}],storageKey:null}];i={alias:null,args:null,concreteType:"SearchTypeaheadSuggestionKeys",kind:"LinkedField",name:"suggestion_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keys",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_key",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometSearchKeywordDataSourceQuery",selections:[{alias:null,args:c,concreteType:"KeywordsSearchSuggestionSet",kind:"LinkedField",name:"search_keywords_suggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsConnection",kind:"LinkedField",name:"suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KeywordSuggestionUnit",kind:"LinkedField",name:"node",plural:!1,selections:[d,e,f,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"structured_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:h,args:null,argumentDefinitions:[]}],storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometSearchKeywordDataSourceQuery",selections:[{alias:null,args:c,concreteType:"KeywordsSearchSuggestionSet",kind:"LinkedField",name:"search_keywords_suggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsConnection",kind:"LinkedField",name:"suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KeywordSuggestionUnit",kind:"LinkedField",name:"node",plural:!1,selections:[d,e,f,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"structured_info",plural:!1,selections:h,storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometSearchKeywordDataSourceQuery_facebookRelayOperation"),metadata:{},name:"CometSearchKeywordDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometSearchRecentDataSourceQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"fetch_nullstate"},b={defaultValue:null,kind:"LocalArgument",name:"fetch_search_badge"},c={defaultValue:null,kind:"LocalArgument",name:"fetch_sts"},d={defaultValue:null,kind:"LocalArgument",name:"filter"},e={defaultValue:null,kind:"LocalArgument",name:"first"},f={defaultValue:null,kind:"LocalArgument",name:"scale"},g={defaultValue:null,kind:"LocalArgument",name:"search_null_state_argument"},h={defaultValue:null,kind:"LocalArgument",name:"search_scope_entity_id"},i=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"search_scope_entity_id",variableName:"search_scope_entity_id"}],j={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Profile",abstractKey:"__isProfile"},m=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],n={kind:"InlineFragment",selections:m,type:"Application",abstractKey:null},o={kind:"InlineFragment",selections:m,type:"Event",abstractKey:null},p={kind:"InlineFragment",selections:m,type:"Group",abstractKey:null},q={kind:"InlineFragment",selections:m,type:"Page",abstractKey:null};m={kind:"InlineFragment",selections:m,type:"User",abstractKey:null};var r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};u=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},t,u,v],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[u,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},s,v],storageKey:null}],storageKey:null}];s={alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:u,args:null,argumentDefinitions:[]}],storageKey:null};v={alias:null,args:null,kind:"ScalarField",name:"item_logging_info",storageKey:null};t={condition:"fetch_search_badge",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBSearchEntityBadge",kind:"LinkedField",name:"search_badge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},t],storageKey:null}]};var w=[{kind:"Variable",name:"input",variableName:"search_null_state_argument"}],x={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},y={kind:"InlineFragment",selections:[x,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"header_text",storageKey:null}],storageKey:null}],type:"XFBSearchNullStateGeneralHeaderRenderingStrategy",abstractKey:null},z={alias:null,args:null,kind:"ScalarField",name:"display_text",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"entity_id",storageKey:null};u={alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:u,storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"CometSearchRecentDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:i,concreteType:"RecentSearchConnection",kind:"LinkedField",name:"recent_searches",plural:!1,selections:[{alias:null,args:null,concreteType:"RecentSearchEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[j,k],type:"Node",abstractKey:"__isNode"},l,n,o,p,q,m,r,{kind:"InlineFragment",selections:[{condition:"fetch_sts",kind:"Condition",passingValue:!0,selections:[s]},v],type:"GraphSearchQuery",abstractKey:null}],storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:null},{condition:"fetch_nullstate",kind:"Condition",passingValue:!0,selections:[{alias:null,args:w,concreteType:"SearchNullStatePage",kind:"LinkedField",name:"search_null_state",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsConnection",kind:"LinkedField",name:"results",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"rendering_strategy",plural:!1,selections:[y,{kind:"InlineFragment",selections:[x,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"suggestions",plural:!0,selections:[j,{kind:"InlineFragment",selections:[x,z,A,s],type:"XFBSearchNullStateQuerySuggestion",abstractKey:null}],storageKey:null}],storageKey:null}],type:"XFBSearchNullStateListRenderingStrategy",abstractKey:null}],storageKey:null}],type:"XFBSearchNullStateRenderingStrategyResult",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,e,f,c,h,b,g,a],kind:"Operation",name:"CometSearchRecentDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:i,concreteType:"RecentSearchConnection",kind:"LinkedField",name:"recent_searches",plural:!1,selections:[{alias:null,args:null,concreteType:"RecentSearchEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,r,{kind:"InlineFragment",selections:[k],type:"Node",abstractKey:"__isNode"},l,n,o,p,q,m,{kind:"InlineFragment",selections:[{condition:"fetch_sts",kind:"Condition",passingValue:!0,selections:[u]},v],type:"GraphSearchQuery",abstractKey:null}],storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:null},{condition:"fetch_nullstate",kind:"Condition",passingValue:!0,selections:[{alias:null,args:w,concreteType:"SearchNullStatePage",kind:"LinkedField",name:"search_null_state",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsConnection",kind:"LinkedField",name:"results",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"rendering_strategy",plural:!1,selections:[j,y,{kind:"InlineFragment",selections:[x,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"suggestions",plural:!0,selections:[j,{kind:"InlineFragment",selections:[x,z,A,u],type:"XFBSearchNullStateQuerySuggestion",abstractKey:null}],storageKey:null}],storageKey:null}],type:"XFBSearchNullStateListRenderingStrategy",abstractKey:null}],storageKey:null}],type:"XFBSearchNullStateRenderingStrategyResult",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}]},params:{id:"5738103542976318",metadata:{},name:"CometSearchRecentDataSourceQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("BaseTypeaheadInMemoryListDataCache",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=[]}var b=a.prototype;b.clear=function(){this.$1=[]};b.get=function(a){var b=this.$1.find(function(b){return b.key===a});return b?b.value:null};b.has=function(a){return this.$1.some(function(b){return b.key===a})};b.set=function(a,b){var c=this.$1.findIndex(function(b){return b.key===a});if(c===-1){this.$1.push({key:a,value:b});return}this.$1[c]={key:a,value:b}};b.remove=function(a){var b=this.$1.findIndex(function(b){return b.key===a});this.$1.splice(b,1)};b.values=function(){return this.$1.map(function(a){return a.value})};return a}();f["default"]=a}),66);
__d("cometTypeaheadMemoizeEntryKey",["cometUniqueID","memoizeStringOnly"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoizeStringOnly")(function(a){return c("cometUniqueID")()});function a(a){return h(a)}g["default"]=a}),98);
__d("CometTypeaheadEchoViewItem.react",["CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,e=a.isActive,f=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:e,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:e}),children:h.jsx(c("TetraText.react"),{numberOfLines:1,type:"body3",children:String(f).toLowerCase()})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadSeeAllViewItem.react",["fbt","ix","CometTypeaheadViewItem.react","TetraIcon.react","TetraText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useMemo;function a(a){var b=a.entry,e=a.extraViewItemProps,f=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","extraViewItemProps","queryString"]);var g=k(function(){var a;return(a=e==null?void 0:e.placeholderBuilder)!=null?a:l},[e==null?void 0:e.placeholderBuilder]);return j.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemStartContent:j.jsx("div",{className:"x14qfxbe xl56j7k xc9qbxq x78zum5 x13rtm0m x1e5q0jg x3x9cwd x1o1ewxj xwnonoy x6s0dn4",children:j.jsx(c("TetraIcon.react"),{color:"white",icon:d("fbicon")._(i("491282"),16),size:16})}),children:j.jsx(c("TetraText.react"),{color:"blueLink",numberOfLines:1,type:"body3",children:g(f)})}))}a.displayName=a.name+" [from "+f.id+"]";function l(a){return h._("__JHASH__rcEEwxiDmS5__JHASH__",[h._implicitParam("=m1",j.jsx("strong",{children:h._("__JHASH__BFbyaDXF_eS__JHASH__",[h._param("query",a.toLowerCase())])}))])}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadViewListSection.react",["CometUnitHeader.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.action,d=a.children,e=a.emptyStateContent,f=a.entries,g=a.highlightedEntry,i=a.itemRole,j=a.onHeaderActionPress;a=a.title;var k=i==="row"?"gridcell":"none";return h.jsxs("li",{children:[a!=null&&f.length!==0?h.jsx("div",{className:"x1e56ztr",children:h.jsx(c("CometUnitHeader.react"),{action:(b==null?void 0:b.type)==="link"?b.label:null,actionLinkProps:(b==null?void 0:b.type)==="link"?{url:b.url}:void 0,headline:a,level:3,onActionPress:(b==null?void 0:b.type)==="link"?j:c("emptyFunction"),paddingHorizontal:8,paddingTop:12})}):null,h.jsx("ul",{children:f.length!==0?f.map(function(a,b){return d({entry:a,index:b,isActive:a.key===(g==null?void 0:g.key),itemRole:i})}):h.jsx("li",{role:i,children:h.jsx("div",{role:k,children:e})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadSectionedViewListStrategy.react",["CometCompositeStructureContext","CometTypeaheadViewListSection.react","getItemRoleFromCompositeRole","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function a(a){var b=a.ariaProps,d=a.emptyStateContent,e=a.entries;a.extraViewProps;var f=a.highlightedEntry;a.isLoading;a.onAbandonTypeahead_DO_NOT_USE;var g=a.onHeaderActionPress,k=a.viewItemStrategyRenderer,l=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","emptyStateContent","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","onHeaderActionPress","viewItemStrategyRenderer"]);a=i(function(){return j(e)},[e]);var m=b.role,n=i(function(){if(m!=null)return{role:m};else return{}},[m]);return a.length===0&&d!=null?d:h.jsx("ul",babelHelpers["extends"]({},b,{className:"x1iyjqo2 xdt5ytf x78zum5","data-testid":void 0,children:h.jsx(c("CometCompositeStructureContext").Provider,{value:n,children:a.map(function(a){var b=a.action,e=a.items,i=a.key;a=a.title;return h.jsx(c("CometTypeaheadViewListSection.react"),{action:b,emptyStateContent:d,entries:e,highlightedEntry:f,itemRole:c("getItemRoleFromCompositeRole")(m),onHeaderActionPress:g,title:a,children:function(a){var b=a.entry,c=a.isActive;a=a.itemRole;return h.createElement(k,babelHelpers["extends"]({},l,{entry:b,isActive:c,key:b.key,role:a}))}},i)})})}))}a.displayName=a.name+" [from "+f.id+"]";function j(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.type==="section"){var f;b.push({action:e.action,items:e.entries,key:e.key,title:(f=e.title)!=null?f:e.label})}else b.push({items:[e],key:e.key})}return b}g["default"]=a}),98);
__d("useCometTypeaheadSectionedViewListStrategy",["CometTypeaheadProgressGlimmer.react","CometTypeaheadSectionedViewListStrategy.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.emptyStateContent,d=a.nullstateContent,e=a.onHeaderActionPress,f=a.viewItemStrategyRenderer;return i(function(a){var g=a.entries,i=a.isLoading,j=a.onAbandonTypeahead_DO_NOT_USE,k=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entries","isLoading","onAbandonTypeahead_DO_NOT_USE","queryString"]);if(k.length===0&&d!=null)return d;var l=c("CometTypeaheadSectionedViewListStrategy.react");return h.jsxs(h.Fragment,{children:[h.jsx(l,babelHelpers["extends"]({},a,{emptyStateContent:b,entries:g,isLoading:i,onHeaderActionPress:function(){j==null?void 0:j(),e==null?void 0:e()},queryString:k,viewItemStrategyRenderer:f})),i&&h.jsx(c("CometTypeaheadProgressGlimmer.react"),{})]})},[b,d,e,f])}g["default"]=a}),98);
__d("CometSearchRecentDataSourceDispatcherContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext();g["default"]=b}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react",["fbt","ix","CometSearchRecentDataSourceDispatcherContext","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useCallback,l=b.useContext,m=b.useState;function a(a){var b=a.entry;a=a.testid;var e=l(c("CometSearchRecentDataSourceDispatcherContext"));a=m(!1);var f=a[0],g=a[1];a=k(function(a){a&&a.type!=="press"&&a.stopPropagation(),g(!0),e==null?void 0:e.dispatchRemoveRecentEntry(b)},[b,e]);return j.jsx("div",{className:"xw4jnvo x1qx5ct2","data-testid":void 0,children:j.jsx(c("TetraIcon.react"),{"aria-label":h._("__JHASH__Im1kdkmyLZa__JHASH__"),color:"secondary",disabled:f,focusable:!1,icon:d("fbicon")._(i("478231"),12),onPress:a,size:24})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadRecentViewItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);return h.jsx(c("CometTypeaheadRecentViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b,testid:void 0})}),testid:void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadEchoViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("echo")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("keyword")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadSeeAllViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("see_all")?a:null}f["default"]=a}),66);
__d("SearchCometTypeaheadViewItemResolver.react",["CometSearchTypeaheadBaseSurfaceRecentViewItem.react","CometTypeaheadEchoViewItem.react","CometTypeaheadKeywordViewItem.react","CometTypeaheadSeeAllViewItem.react","cometSearchTypeaheadEchoViewItem.resolver","cometSearchTypeaheadKeywordViewItem.resolver","cometSearchTypeaheadRecentViewItem.resolver","cometSearchTypeaheadSeeAllViewItem.resolver","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){var b=a.additionalEntryMappings,d=a.children,e=a.entry,f=a.fallbackViewItem;f=f===void 0?c("CometTypeaheadKeywordViewItem.react"):f;var g=a.seeAllLabelBuilder;a=h(function(){var a;return[].concat((a=b)!=null?a:[],i({seeAllLabelBuilder:g}))},[b,g]);a=a.find(function(a){a=a.resolver;return a(e)});if(a){var j=a.viewItem;a=a.viewItemProps;return d(j,a)}return d(f)}function i(a){a=a.seeAllLabelBuilder;return[{resolver:c("cometSearchTypeaheadEchoViewItem.resolver"),viewItem:c("CometTypeaheadEchoViewItem.react")},{resolver:c("cometSearchTypeaheadSeeAllViewItem.resolver"),viewItem:c("CometTypeaheadSeeAllViewItem.react"),viewItemProps:{placeholderBuilder:a}},{resolver:c("cometSearchTypeaheadRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseSurfaceRecentViewItem.react")},{resolver:c("cometSearchTypeaheadKeywordViewItem.resolver"),viewItem:c("CometTypeaheadKeywordViewItem.react")}].filter(Boolean)}g["default"]=a}),98);
__d("useSearchCometTypeaheadViewItem",["SearchCometTypeaheadViewItemResolver.react","cr:2417","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var d=a.additionalEntryMappings,e=a.getLinkProps,f=a.seeAllLabelBuilder;return i(function(a){var g=a.entry,i=a.queryString,j=babelHelpers.objectWithoutPropertiesLoose(a,["entry","queryString"]);return h.jsx(c("SearchCometTypeaheadViewItemResolver.react"),{additionalEntryMappings:d,entry:g,seeAllLabelBuilder:f,children:function(a,c){return h.jsx(a,babelHelpers["extends"]({},j,{debugElement:b("cr:2417")?h.jsx(b("cr:2417"),{entry:g,queryString:i}):null,entry:g,extraViewItemProps:c,linkProps:e==null?void 0:e({entry:g,queryString:i}),queryString:i}))}})},[d,e,f])}g["default"]=a}),98);
__d("useSearchCometTypeaheadViewListStrategy",["CometScrollableArea.react","FocusInertRegion.react","focusScopeQueries","react","stylex","useCometTypeaheadSectionedViewListStrategy","useSearchCometTypeaheadViewItem"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.additionalEntryMappings,e=a.afterNullstateContent,f=a.emptyStateContent,g=a.getLinkProps,j=a.isScrollable,k=a.nullstateContent,l=a.onHeaderActionPress,m=a.scrollableXStyle,n=a.seeAllLabelBuilder,o=a.xstyle;a=c("useSearchCometTypeaheadViewItem")({additionalEntryMappings:b,getLinkProps:g,seeAllLabelBuilder:n});var p=c("useCometTypeaheadSectionedViewListStrategy")({emptyStateContent:f,nullstateContent:k,onHeaderActionPress:l,viewItemStrategyRenderer:a});return i(function(a){var b=a.ariaProps,f=a.entries,g=a.highlightedEntry,i=a.isLoading,k=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","entries","highlightedEntry","isLoading","queryString"]);b=h.jsxs(h.Fragment,{children:[h.jsx(p,babelHelpers["extends"]({ariaProps:b,entries:f,highlightedEntry:g,isLoading:i,queryString:k},a)),e!=null&&k.length===0&&f.length>0?e:null]});g=k==="";return h.jsx(c("FocusInertRegion.react"),{focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:h.jsx("div",{className:c("stylex")(o),"data-testid":void 0,children:j?h.jsx(c("CometScrollableArea.react"),{horizontal:!1,xstyle:m,children:b}):b})})},[p,e,j,m,o])}g["default"]=a}),98);
__d("CometAddTypeaheadRecentSearchMutation",["CometAddTypeaheadRecentSearchMutation.graphql","cr:1012418"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometAddTypeaheadRecentSearchMutation.graphql");function a(a){var c=a.onBeforeCommitMutation,d=a.onError,e=a.onSuccess,f=a.relayEnvironment,g=a.searchScopeEntityID,h=a.selectedID,j=a.selectedText,k=a.selectedType,l=a.source,m=a.stsDirectNavType,n=a.stsDisambiguationType,o=a.stsHighConfidenceSource,p=a.userID;a=a.userInput;c&&c();b("cr:1012418").commitMutation(f,{mutation:i,onCompleted:function(a,b){b&&b.length?d&&d(new Error("Payload errors while executing `addTypeaheadRecentSearchMutation`.")):e&&e(a)},onError:d,variables:{input:{actor_id:p!=null?p:void 0,search_scope_entity_id:g,selected_id:h,selected_text:j,selected_type:k,source:l,sts_direct_nav_type_for_graphql:m,sts_disambiguation_type_for_graphql:n,sts_high_confidence_source_for_graphql:o,user_input:a}}})}g.commit=a}),98);
__d("CometDeleteRecentSearchMutation",["CometDeleteRecentSearchMutation.graphql","cr:1012418"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometDeleteRecentSearchMutation.graphql");function a(a){var c=a.onBeforeCommitMutation,d=a.onError,e=a.onSuccess,f=a.relayEnvironment,g=a.searchEntityType,h=a.searchText;a=a.userID;c&&c();b("cr:1012418").commitMutation(f,{mutation:i,onCompleted:function(a,b){b&&b.length?d&&d(new Error("Payloads error while executing `deleteSearchMutation`.")):e&&e(a)},onError:d,variables:{input:babelHelpers["extends"]({},a!=null?{actor_id:a}:null,{search_entity_type:g,search_text:h})}})}g.commit=a}),98);
__d("useSearchCometEventEmitterContext",["FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(a){a=h(a);a==null&&c("FBLogger")("search").mustfix("Missing event emitter context");return a}g["default"]=a}),98);
__d("searchCometTypeaheadGetHighConfidenceResult",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData,c=a.rawData;b=b.markers;if((a.subtype==="keyword"||a.subtype==="recent")&&b.has("high_confidence")&&!b.has("TEMP_high_confidence_as_plain_keyword")){c=(b=(a=c.structuredInfo)==null?void 0:a.high_confidence_result)!=null?b:{};a=c.hcm_id;b=c.source_as_enum;if(a!=null&&b!=null)return{id:a,source:b}}}f["default"]=a}),66);
__d("searchCometTypeaheadGetStsDisambiguation",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData,c=a.rawData;b=b.markers;if(a.subtype==="keyword"&&b.has("disambiguation")){a=(c=(a=c.structuredInfo)==null?void 0:(b=a.disambiguation_result)==null?void 0:b.disambiguation_info_list[0])!=null?c:{};b=a.type;if(b!=null)return{primary:{type:b}}}}f["default"]=a}),66);
__d("getSearchCometKeywordDataSourceStructuredSuggestionKey",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;if(((b=a.direct_nav_result)==null?void 0:b.ent_id)!=null){return"dir_nav_sts:"+((b=a.direct_nav_result)==null?void 0:b.ent_id)}if(((b=a.high_confidence_result)==null?void 0:b.hcm_id)!=null){return"hc_sts:"+((b=a.high_confidence_result)==null?void 0:b.hcm_id)}return((b=a.disambiguation_result)==null?void 0:b.title)!=null&&((b=a.disambiguation_result)==null?void 0:(b=b.disambiguation_info_list[0])==null?void 0:b.type)!=null?a.disambiguation_result.disambiguation_info_list[0].type+":"+a.disambiguation_result.title:null}f["default"]=a}),66);
__d("getSearchCometKeywordDataSourceStructuredInfoForEntry",["CometRelay","getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql","getSearchCometKeywordDataSourceStructuredSuggestionKey"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=a.structuredTypeaheadInfo;if(a==null)return{entryKey:null,extraLoggingInfo:null,label:null,markers:[],structuredInfo:null};a=d("CometRelay").readInlineData(h!==void 0?h:h=b("getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql"),a);var e=a.direct_nav_result,f=a.disambiguation_result;a=a.high_confidence_result;var g=[],i,j,k;if(e!=null){g=["direct_nav"];var l=e.ent_id,m=e.entity_type,n=e.img_url,o=e.link_url,p=e.snippet,q=e.title;e=e.type;k=q;i={direct_nav_result:{ent_id:l,entity_type:m,img_url:n,link_url:o,snippet:p,title:q,type:e}};j={stsDirectNavEntityID:l,stsDirectNavEntityType:m,stsDirectNavType:e}}if(a!=null){g=["high_confidence"];n=a.hcm_id;o=a.picture_url;p=a.snippet;q=a.source_as_enum;l=a.text;k=l;i={high_confidence_result:{hcm_id:n,picture_url:o,snippet:p,source_as_enum:q,text:l}};j={stsHighConfidenceID:n,stsHighConfidenceSource:q}}if(f!=null){g=["disambiguation"];m=f.disambiguation_info_list;e=f.title;k=e;i={disambiguation_result:{disambiguation_info_list:m,title:e}};j={stsDisambiguationType:m[0].type}}return{entryKey:i!=null?c("getSearchCometKeywordDataSourceStructuredSuggestionKey")(i):null,extraLoggingInfo:j,label:k,markers:g,structuredInfo:i}}g["default"]=a}),98);
__d("CometSearchBootstrapKeywordsDataSource.query",["CometSearchBootstrapKeywordsDataSourceQuery.graphql","filterNulls","getSearchCometKeywordDataSourceStructuredInfoForEntry","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;d=h!==void 0?h:h=b("CometSearchBootstrapKeywordsDataSourceQuery.graphql");function a(a){if(!a)return[];a=a.viewer;a=((a=a==null?void 0:(a=a.bootstrap_keywords)==null?void 0:a.edges)!=null?a:[]).map(function(a){return a.node}).filter(Boolean);a=c("filterNulls")(a.map(function(a){var b,d=a.item_logging_id,e=a.item_logging_info,f=a.keyword_text,g=a.sts_info;a=a.suggestion_keys;if(f==null){c("recoverableViolation")("Cannot have TA bootstrap entry without keyword_text","search");return null}g=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:g});var h=g.entryKey,i=g.extraLoggingInfo,j=g.label,k=g.markers;g=g.structuredInfo;b=(b=a)!=null?b:{};var l=b.default_key,m=b.keys;b=b.tier;return{key:(h=(h=h)!=null?h:g&&(a==null?void 0:a.default_key))!=null?h:f,label:(a=j)!=null?a:f,metaData:{logging:babelHelpers["extends"]({},i,{loggingID:(h=d)!=null?h:"",loggingInfo:e}),markers:new Set(["bootstrap","keyword"].concat(k))},rawData:{structuredInfo:g,suggestion_keys:b!=null?{default_key:l,keys:m,tier:b}:null},subtype:"bootstrap",type:"entry"}}));return a}g.query=d;g.normalize=a}),98);
__d("CometSearchBootstrapKeywordsDataSource",["BaseTypeaheadDataCacheProvider","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadInMemoryMapDataCache","BaseTypeaheadPayloadDecoratorAddLimit","CometSearchBootstrapKeywordsDataSource.query","baseTypeaheadStartsWithMatchBuilder","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.limit,e=a.queryVariables;a=a.relayEnvironment;this.$2=new(c("BaseTypeaheadDataCacheProvider"))({cache:new(c("BaseTypeaheadInMemoryMapDataCache"))(),matchBuilder:c("baseTypeaheadStartsWithMatchBuilder")});this.$3=b;b=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(function(){return function(){return e}});this.$1=new(c("BaseTypeaheadDataProvider"))({query:d("CometSearchBootstrapKeywordsDataSource.query").query,queryVariablesBuilder:b,relayEnvironment:a})}var b=a.prototype;b.bootstrap=function(){var a=this;c("promiseDone")(this.$1.fetch({query:""}).then(function(a){a=a.response;return d("CometSearchBootstrapKeywordsDataSource.query").normalize(a)}).then(function(b){a.$2.clear(),a.$2.add(b,null)}))};b.fetchCache=function(a){var b=a.query;b=this.$2.match(b);var d=c("BaseTypeaheadPayloadDecoratorAddLimit")(this.$3);return d({entries:b,params:a})};b.clear=function(){this.$2.clear()};b.removeEntriesByEntID=function(a){var b=this.$2.values();for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f;if(c){if(d>=b.length)break;f=b[d++]}else{d=b.next();if(d.done)break;f=d.value}f=f;a===((e=f.rawData.structuredInfo)==null?void 0:(e=e.direct_nav_result)==null?void 0:e.ent_id)&&this.$2.remove(f)}};return a}();g["default"]=a}),98);
__d("CometSearchKeywordDataSource.query",["CometSearchKeywordDataSourceQuery.graphql","cometUniqueID","getSearchCometKeywordDataSourceStructuredInfoForEntry"],(function(a,b,c,d,e,f,g){"use strict";var h;d=h!==void 0?h:h=b("CometSearchKeywordDataSourceQuery.graphql");function a(a,b){if(!a)return[];a=a.search_keywords_suggestion;var d=b.query.request_id;a=((a=a==null?void 0:(a=a.suggestions)==null?void 0:a.edges)!=null?a:[]).map(function(a){return a.node}).filter(Boolean);var e;try{b=JSON.parse(b.query.query_text);e=b!=null?b[0]:null}catch(a){}b=a.map(function(a){var b,f=a.logging_id,g=a.logging_info,h=a.name,i=a.structured_info;a=a.suggestion_keys;i=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:i});var j=i.entryKey,k=i.extraLoggingInfo,l=i.label,m=i.markers;i=i.structuredInfo;b=(b=a)!=null?b:{};var n=b.default_key,o=b.keys;b=b.tier;return{key:(a=(j=(j=j)!=null?j:i&&(a==null?void 0:a.default_key))!=null?j:h)!=null?a:c("cometUniqueID")(),label:(a=(j=l)!=null?j:h)!=null?a:"",metaData:{logging:babelHelpers["extends"]({},k,{loggingID:f,loggingInfo:g,query:e,sequenceID:d}),markers:new Set(["keyword"].concat(m))},rawData:{structuredInfo:i,suggestion_keys:b!=null?{default_key:n,keys:o,tier:b}:null},subtype:"keyword",type:"entry"}});return b}g.query=d;g.normalize=a}),98);
__d("cometSearchKeywordDataSourceQueryVariablesBuilder",[],(function(a,b,c,d,e,f){"use strict";var g=10,h="blended";function a(a){return function(b){var c,d=b.loggingEventTrace;b=b.query;c=(c=a)!=null?c:{};var e=c.fetch_count,f=c.fetch_mode;c=c.group_id;c=JSON.stringify(c!=null?[{text:"",type:"group",uid:c},b]:[b]);return{query:{fetch_count:(b=e)!=null?b:g,fetch_mode:(e=f)!=null?e:h,query_text:c,request_id:d==null?void 0:d.sequenceID,session_id:(b=d==null?void 0:d.sessionID)!=null?b:""}}}}f["default"]=a}),66);
__d("CometSearchKeywordDataSource",["BaseCacheEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadDedupEntriesBuilder","BaseTypeaheadLabelSuffixBuilder","BaseTypeaheadNetworkCacheDataSource","BaseTypeaheadQueryDataCacheProvider","CometSearchKeywordDataSource.query","cometSearchKeywordDataSourceQueryVariablesBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.dedupe,e=a.onError,f=a.queryVariables;a=a.relayEnvironment;f=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(c("cometSearchKeywordDataSourceQueryVariablesBuilder")).setDefaultVariables(f);e=new(c("BaseTypeaheadDataProvider"))({onError:e,query:d("CometSearchKeywordDataSource.query").query,queryVariablesBuilder:f,relayEnvironment:a});this.$1=new(c("BaseTypeaheadQueryDataCacheProvider"))({dedupe:(f=b)!=null?f:c("BaseTypeaheadDedupEntriesBuilder")(c("BaseCacheEntryKeyBuilder")),suffixBuilder:function(){return c("BaseTypeaheadLabelSuffixBuilder").apply(void 0,arguments)}});this.$2=new(c("BaseTypeaheadNetworkCacheDataSource"))(e,this.$1,{normalizeFunc:d("CometSearchKeywordDataSource.query").normalize})}var b=a.prototype;b.fetchCache=function(a){return this.$2.fetchCache(a)};b.fetchNetwork=function(a){return this.$2.fetchNetwork(a)};b.clearQueryCache=function(){this.$1.clear()};return a}();g["default"]=a}),98);
__d("cometSearchTypeaheadPayloadDecoratorAddEcho",["BaseDataEntryKeyBuilder","cometTypeaheadMemoizeEntryKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.keyBuilder,d=b===void 0?c("BaseDataEntryKeyBuilder"):b,e=a.limit;return function(a){var b=a.entries,f=a.params.query;b=(b=b)!=null?b:[];var g=b.find(function(a){return d(a).trim().toLowerCase()===f.trim().toLowerCase()})!=null,h=[];if(!g&&b.length<e){g=c("cometTypeaheadMemoizeEntryKey")(f+"-echo");g={key:g,label:f,metaData:{markers:new Set(["echo"])},rawData:{type:"echo"}};h.push(g)}return babelHelpers["extends"]({},a,{entries:[].concat(b,h)})}}g["default"]=a}),98);
__d("cometSearchTypeaheadPayloadDecoratorAddSeeAll",["cometTypeaheadMemoizeEntryKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.position;return function(a){var d=a.entries,e=a.params.query;d=(d=d)!=null?d:[];var f=c("cometTypeaheadMemoizeEntryKey")(e+"-see_all");f={key:f,label:e,metaData:{markers:new Set(["see_all"])},rawData:{type:"see_all"}};e=[];switch(b){case"bottom":e=[].concat(d,[f]);break;case"top":e=[f].concat(d);break}return babelHelpers["extends"]({},a,{entries:e})}}g["default"]=a}),98);
__d("cometSearchTypeaheadDecorateMixedPayload",["BaseTypeaheadPayloadDecoratorAddLimit","baseTypeaheadFetchPayloadDecorate","cometSearchTypeaheadPayloadDecoratorAddEcho","cometSearchTypeaheadPayloadDecoratorAddSeeAll"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b.keyBuilder,e=b.limit;b=b.seeAllPosition;b=b===void 0?"bottom":b;return c("baseTypeaheadFetchPayloadDecorate")(a,[c("BaseTypeaheadPayloadDecoratorAddLimit")(e),c("cometSearchTypeaheadPayloadDecoratorAddEcho")({keyBuilder:d,limit:e}),c("cometSearchTypeaheadPayloadDecoratorAddSeeAll")({position:b})])}g["default"]=a}),98);
__d("cometSearchTypeaheadPayloadDecoratorApplySectionLimits",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){for(var c=b.entries,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=a.get(f.key);g!=null&&f.type==="section"&&(f.entries=f.entries.slice(0,g))}return b}}f["default"]=a}),66);
__d("cometSearchTypeaheadDecorateRecentPayload",["BaseTypeaheadPayloadDecoratorAddLimit","baseTypeaheadFetchPayloadDecorate","cometSearchTypeaheadPayloadDecoratorApplySectionLimits"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b.limit;b=b.sectionLimits;var e=a.entries.every(function(a){return a.type==="section"});return c("baseTypeaheadFetchPayloadDecorate")(a,[e&&b!=null?c("cometSearchTypeaheadPayloadDecoratorApplySectionLimits")(b):c("BaseTypeaheadPayloadDecoratorAddLimit")(d)])}g["default"]=a}),98);
__d("getCometSearchTypeaheadStructuredInfoKey",["getSearchCometKeywordDataSourceStructuredSuggestionKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.rawData.structuredInfo;return a==null?null:c("getSearchCometKeywordDataSourceStructuredSuggestionKey")(a)}g["default"]=a}),98);
__d("CometSearchTypeaheadDefaultEntryComparator",["BaseDataEntryLabelKeyBuilder","getCometSearchTypeaheadStructuredInfoKey","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=c("getCometSearchTypeaheadStructuredInfoKey")(a),e=c("getCometSearchTypeaheadStructuredInfoKey")(b);return d!=null&&e!=null?d===e:c("BaseDataEntryLabelKeyBuilder")(a)===c("BaseDataEntryLabelKeyBuilder")(b)}function a(a,b){if(!h(a,b)){c("recoverableViolation")("The suggestions are not dupes: "+a.key+" compared to "+b.key,"search");return a}var d=c("getCometSearchTypeaheadStructuredInfoKey")(a),e=c("getCometSearchTypeaheadStructuredInfoKey")(b);return d!=null&&e!=null?b:e!=null?b:a}g.areEntriesDupes=h;g.pickEntryToKeep=a}),98);
__d("CometSearchTypeaheadServerDrivenEntryComparator",["FBLogger","getCometSearchTypeaheadStructuredInfoKey","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=(a=a.rawData)!=null?a:{};a=a.suggestion_keys;if(a==null)throw c("FBLogger")("search").mustfixThrow("Unexpected missing keys");return a}function a(a,b){var d=h(a),e=d.default_key;d=d.keys;var f=h(b),g=f.default_key,i=f.keys;if(d.some(function(a){return i.includes(a)}))return!0;f=c("getCometSearchTypeaheadStructuredInfoKey")(a);var k=c("getCometSearchTypeaheadStructuredInfoKey")(b);f!=null&&f===k&&j("STS dupe: same STS UI key but no keys overlap",a,b);if(d.length>0&&i.length>0)return!1;if(e==null||g==null)return!1;e===g&&a.label.toLowerCase()!==b.label.toLowerCase()&&j("STS dupe: same default key but different label",a,b);return e.toLowerCase()===g.toLowerCase()}function b(a,b){var c=h(a);c=c.tier;var d=h(b);d=d.tier;return c<=d?b:a}function i(a){var b=h(a),c=b.default_key;b=b.keys;return"ui key: "+a.key+", keys: "+(b.join(",")||"empty")+", default key: "+((b=c)!=null?b:"null")+", label: "+a.label}function j(a,b,d){c("FBLogger")("search").warn(a+": ("+i(b)+") vs ("+i(d)+")")}g.areEntriesDupes=a;g.pickEntryToKeep=b}),98);
__d("cometSearchTypeaheadDedupeAndLog",["FBLogger","gkx","killswitch","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometSearchTypeaheadDedupeAndLog");function a(a,b,d){if(c("killswitch")("SEARCH_COMET_DISABLE_STS_DUPE_LOGGING"))return b;var e=new Map(),f=[];for(var b=b,g=Array.isArray(b),h=0,b=g?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(h>=b.length)break;j=b[h++]}else{h=b.next();if(h.done)break;j=h.value}j=j;var k=e.get(j.key);k!=null?i({caller:d,dupeEntry:j,existingEntry:k,strategy:a}):(e.set(j.key,j),f.push(j))}return f}function i(a){var b=a.caller,d=a.dupeEntry,e=a.existingEntry;a=a.strategy;var f=e.metaData.markers,g=d.metaData.markers;c("FBLogger")("search").warn("STS Dupe encountered: "+e.key+" ("+Array.from(f).join("_")+", label: "+e.label+") compared to "+d.key+"\n    ("+Array.from(g).join("_")+", label: "+d.label+")");var i="comet_ta_sts_dupe_v4."+a,j=["react_key_"+(Array.from(f).join("_")||"plain_keyword"),b,"existing_kind_"+Array.from(f).join("_"),"dupe_kind_"+Array.from(g).join("_")].join(".");h.onReady(function(a){a.bumpEntityKey(354,i,j,1)})}g["default"]=a}),98);
__d("cometSearchTypeaheadSTSDedupeEntries",["CometSearchTypeaheadDefaultEntryComparator","CometSearchTypeaheadServerDrivenEntryComparator","cometSearchTypeaheadDedupeAndLog","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){c===void 0&&(c="bootstrap_and_backend_merge");var e=a.concat(b).every(function(a){return a.rawData.suggestion_keys!=null});return h.apply(void 0,[a,b,c].concat(e?[d("CometSearchTypeaheadServerDrivenEntryComparator").areEntriesDupes,d("CometSearchTypeaheadServerDrivenEntryComparator").pickEntryToKeep]:[d("CometSearchTypeaheadDefaultEntryComparator").areEntriesDupes,d("CometSearchTypeaheadDefaultEntryComparator").pickEntryToKeep]))}function h(a,b,e,f,g){var h=d("CometSearchTypeaheadServerDrivenEntryComparator").areEntriesDupes,i=[],j=new Set(b);for(var a=a,k=Array.isArray(a),l=0,a=k?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=a.length)break;m=a[l++]}else{l=a.next();if(l.done)break;m=l.value}m=m;i.push(m)}for(var m=b,l=Array.isArray(m),k=0,m=l?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(l){if(k>=m.length)break;a=m[k++]}else{k=m.next();if(k.done)break;a=k.value}b=a;a=[];for(var n=0;n<i.length;n++){var o=i[n];o!=null&&f(o,b)&&a.push(n)}o=a[0];n=o!=null?i[o]:null;if(n!=null&&!j.has(n)){n=g(n,b);i[o]=n;for(var o=0;o<a.length;o++){var p=a[o],q=i[p];q!=null&&q!==n&&q!==g(q,b)&&(i[p]=null)}}else i.push(b)}return c("cometSearchTypeaheadDedupeAndLog")(h?"with_keys":"without_keys",c("filterNulls")(i),e)}g["default"]=a}),98);
__d("cometSearchTypeaheadSTSDedupeCachedEntries",["cometSearchTypeaheadSTSDedupeEntries","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=c("cometSearchTypeaheadSTSDedupeEntries")(a.map(function(a){return a.entry}),b.map(function(a){return a.entry}),"query_cache"),e=[].concat(a,b);return c("filterNulls")(d.map(function(a){return e.find(function(b){return b.entry===a})}))}g["default"]=a}),98);
__d("searchCometTypeaheadPushErrorToast",["fbt","cometPushToast"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){d("cometPushToast").cometPushErrorToast({message:h._("__JHASH__EY5KKLiSk-O__JHASH__")})}g["default"]=a}),98);
__d("useSearchCometTypeaheadCompositeDataSource",["BaseDataEntryLabelKeyBuilder","CometRelay","CometSearchBootstrapKeywordsDataSource","CometSearchKeywordDataSource","Promise","cometSearchTypeaheadDecorateMixedPayload","cometSearchTypeaheadDecorateRecentPayload","cometSearchTypeaheadSTSDedupeCachedEntries","cometSearchTypeaheadSTSDedupeEntries","qex","react","searchCometTypeaheadPushErrorToast"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useMemo;function a(a){var e=a.config,f=e.dataSources,g=f.bootstrapKeywordsDataSourceParams,j=f.keywordDataSourceParams,k=e.logging.sessionContext;f=e.view;var l=f.renderLimit,m=f.sectionLimits,n=a.recentDataSource,o=a.searchScopeEntityID,p=d("CometRelay").useRelayEnvironment(),q=i(function(){return g!=null?new(c("CometSearchBootstrapKeywordsDataSource"))(babelHelpers["extends"]({},g,{limit:l,relayEnvironment:p})):null},[g,l,p]),r=i(function(){return new(c("CometSearchKeywordDataSource"))(babelHelpers["extends"]({},j,{dedupe:c("cometSearchTypeaheadSTSDedupeCachedEntries"),limit:l,onError:function(){return c("searchCometTypeaheadPushErrorToast")()},relayEnvironment:p}))},[j,l,p]),s=h(function(a){var b=a.entries;a=a.params;return c("cometSearchTypeaheadDecorateMixedPayload")({entries:b,params:a},{keyBuilder:c("BaseDataEntryLabelKeyBuilder"),limit:l})},[l]),t=h(function(a,b){return c("cometSearchTypeaheadSTSDedupeEntries")(a,b,"bootstrap_and_backend_merge")},[]),u=h(function(){var a;a=(a=c("qex")._("869"))!=null?a:!1;a||(q==null?void 0:q.bootstrap());n==null?void 0:n.bootstrap()},[q,n]),v=h(function(a,b){if(n==null)return;if(o==null){n.add(a,k,b);return}var c=a.key,d=a.label,e=a.metaData;a=a.rawData;e={logging:{searchScopeEntityID:o},markers:e.markers};c={key:c,label:d,metaData:e,rawData:a,subtype:"recent",type:"entry"};n.add(c,k,b)},[k,n,o]),w=h(function(a){var b=a.query;if(b===""&&n!=null){var d=n.fetchCache(a),e=d.entries;d=d.params;return c("cometSearchTypeaheadDecorateRecentPayload")({entries:e.map(function(a){return a.type==="section"?babelHelpers["extends"]({},a):babelHelpers["extends"]({},a)}),params:d},{limit:l,sectionLimits:m})}if(b==="")return{entries:[],params:a};if(q==null){e=r.fetchCache(a);return s(babelHelpers["extends"]({},e))}d=q.fetchCache(a);b=d.entries;e=d.params;if(b.length>=l)return s({entries:b,params:e});d=r.fetchCache(a);e=d.entries;a=d.params;d=t(b,e);return s({entries:d,params:a})},[q,s,t,r,l,n,m]),x=h(function(a){var d=a.query;if(d===""&&n!=null)return n.fetchNetwork(a).then(function(a){return c("cometSearchTypeaheadDecorateRecentPayload")({entries:a.entries.map(function(a){return a.type==="section"?babelHelpers["extends"]({},a):babelHelpers["extends"]({},a)}),params:a.params},{limit:l,sectionLimits:m})});if(d==="")return b("Promise").resolve({entries:[],params:a});return q==null?r.fetchNetwork(a).then(function(a){return s(babelHelpers["extends"]({},a))}):r.fetchNetwork(a).then(function(b){var c=q.fetchCache(a);c=c.entries;var d=b.entries;b=b.params;c=t(c,d);return s({entries:c,params:b})})},[q,s,t,r,l,n,m]),y=h(function(a,b){n!=null&&n.remove(a,b)},[n]);return i(function(){return{addRecentEntry:v,bootstrap:u,clearQueryCache:function(){return r.clearQueryCache()},clearRecentSearches:function(){return n==null?void 0:n.clear()},fetchCache:w,fetchNetwork:x,getBootstrapKeywordsDataSource:function(){return q},removeRecentEntry:y}},[q,v,u,w,x,y,r,n])}g["default"]=a}),98);
__d("searchCometTypeaheadSubtractSections",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Set(a.entries.map(function(a){return a.key}));b.entries=b.entries.filter(function(a){return!c.has(a.key)})}f["default"]=a}),66);
__d("searchCometTypeaheadMergeSections",["searchCometTypeaheadSubtractSections"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("searchCometTypeaheadSubtractSections")(a,b),b.entries=a.entries.concat(b.entries)}g["default"]=a}),98);
__d("CometSearchRecentDataCacheProvider",["BaseDataEntryLabelKeyBuilder","searchCometTypeaheadMergeSections","searchCometTypeaheadSubtractSections"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.cache,d=a.matchBuilder;a=a.keyBuilder;a=a===void 0?c("BaseDataEntryLabelKeyBuilder"):a;this.$1=b;this.$2=d;this.$3=a}var b=a.prototype;b.add=function(a,b,d){var e=this;if(d==="network"){this.$1.clear();[].concat(a).reverse().forEach(function(a){var b=e.$3(a);e.$1.set(b,a)});return}a.forEach(function(a){var b=e.$3(a),d=e.$1.get(b);if(d)if(d.type==="section"&&a.type==="section"){c("searchCometTypeaheadMergeSections")(a,d);return}else e.$1.remove(b);e.$1.set(b,a)})};b.clear=function(){this.$1.clear()};b.remove=function(a){var b=this.$3(a),d=this.$1.get(b);d&&d.type==="section"&&a.type==="section"&&d.entries.length!==0?c("searchCometTypeaheadSubtractSections")(a,d):this.$1.remove(b)};b.match=function(a){var b=this.$2({query:a});return this.$1.values().map(function(a){return a.type==="section"?babelHelpers["extends"]({},a):babelHelpers["extends"]({},a)}).reverse().filter(function(a){if(a.type==="section"){a.entries=a.entries.filter(b);return!0}else return b(a)})};b.values=function(){return this.$1.values()};return a}();g["default"]=a}),98);
__d("cometSearchNullStateMatchBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a){a=a.metaData.markers;return a.has("recent")||a.has("nullstate_explore")||a.has("keyword")}}f["default"]=a}),66);
__d("CometSearchRecentDataSource",["fbt","BaseDataEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadInMemoryListDataCache","BaseTypeaheadNetworkDataSource","CometAddTypeaheadRecentSearchMutation","CometDeleteRecentSearchMutation","CometSearchRecentDataCacheProvider","Promise","cometSearchNullStateMatchBuilder","qex"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){var a=e.prototype;a.$8=function(){var a=this.$2.values().map(function(a){return a.type==="section"&&a.key==="RECENT_SEARCHES"?a:null}).filter(Boolean);return a.length!==0?a[0]:null};function e(a){var b=a.activityLogURL,d=a.gqlQuery,e=a.limit,f=a.normalize,g=a.options,h=a.queryVariablesBuilderFunction;a=a.relayEnvironment;this.$4=a;this.$5=e;this.$6=h({query:""}).filter;this.$7=b;a=function(){return h};e=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(a);b=new(c("BaseTypeaheadDataProvider"))({options:g,query:d,queryVariablesBuilder:e,relayEnvironment:this.$4});this.$2=new(c("CometSearchRecentDataCacheProvider"))({cache:new(c("BaseTypeaheadInMemoryListDataCache"))(),keyBuilder:c("BaseDataEntryKeyBuilder"),matchBuilder:c("cometSearchNullStateMatchBuilder")});this.$1=new(c("BaseTypeaheadNetworkDataSource"))(b,f)}a.add=function(a,b,c){c=c===void 0?{}:c;var e=c.onBeforeCommitMutation,f=c.onError;c=c.onSuccess;var g=a.metaData,h=this.$8();h!=null?this.$2.add([babelHelpers["extends"]({},h,{entries:[a]})],""):this.$2.add([a],"");g=(h=g==null?void 0:g.logging)!=null?h:{};h=g.entityID;var i=g.entityType,j=g.searchScopeEntityID,k=g.stsDirectNavEntityID,l=g.stsDirectNavType,m=g.stsDisambiguationType,n=g.stsHighConfidenceID;g=g.stsHighConfidenceSource;d("CometAddTypeaheadRecentSearchMutation").commit({onBeforeCommitMutation:e,onError:f,onSuccess:c,relayEnvironment:this.$4,searchScopeEntityID:j,selectedID:(f=(e=h)!=null?e:k)!=null?f:n,selectedText:a.label.toLowerCase(),selectedType:(c=i)!=null?c:"keyword",source:b,stsDirectNavType:l,stsDisambiguationType:m,stsHighConfidenceSource:g,userInput:a.label.toLowerCase()})};a.bootstrap=function(){var a;a=(a=c("qex")._("1300"))!=null?a:!1;if(a&&this.$6==="all")return;this.fetchNetwork({query:""})};a.fetchCache=function(a){var b=a.query;b=this.$2.match(b);return{entries:b,params:a}};a.fetchNetwork=function(a){var c=this;return this.$3!=null&&this.$3<this.$5?b("Promise").resolve({entries:this.$2.match(a.query),params:a}):this.$1.fetchNetwork(a).then(function(b){var d=b.entries;b=b.params.query;d!=null&&(d.forEach(function(a){var b=c.$7;["all","group_scoped_search"].includes(c.$6)&&b!=null&&a.type==="section"&&a.key==="RECENT_SEARCHES"&&(a.action={label:h._("__JHASH__0ioTgLFUb4g__JHASH__"),type:"link",url:b})}),c.$3=d.length,c.$2.add(d,b,"network"));return{entries:c.$2.match(b),params:a}})};a.remove=function(a,b){b=b===void 0?{}:b;var c=b.onBeforeCommitMutation,e=b.onError;b=b.onSuccess;var f=this.$8();f!=null?this.$2.remove(babelHelpers["extends"]({},f,{entries:[a]})):this.$2.remove(a);d("CometDeleteRecentSearchMutation").commit({onBeforeCommitMutation:c,onError:e,onSuccess:b,relayEnvironment:this.$4,searchText:a.label})};a.clear=function(){var a=this.$8();if(a==null){this.$2.clear();return}a.entries.length!==0&&this.$2.remove(a)};return e}();g["default"]=a}),98);
__d("searchCometIsValidRecentSearchEntityType",[],(function(a,b,c,d,e,f){"use strict";var g=["app","application","event","group","page","user"];function a(a){return g.includes(a==null?void 0:a.toLowerCase())}f["default"]=a}),66);
__d("CometSearchRecentDataSource.query",["fbt","CometSearchRecentDataSourceQuery.graphql","FBLogger","getSearchCometKeywordDataSourceStructuredInfoForEntry","searchCometIsValidRecentSearchEntityType"],(function(a,b,c,d,e,f,g,h){"use strict";var i;d=i!==void 0?i:i=b("CometSearchRecentDataSourceQuery.graphql");function a(a){var b;if(!a)return[];b=((b=(b=a.search_null_state)==null?void 0:(b=b.results)==null?void 0:b.edges)!=null?b:[{node:{rendering_strategy:{key:"RECENT_SEARCHES",result:{header_fbt:h._("__JHASH__QJCAJUEzrgs__JHASH__"),header_text:"RECENT_SEARCHES"}}}}]).map(function(a){return(a=a.node)==null?void 0:a.rendering_strategy}).filter(Boolean);var c=[],d=null;for(var b=b,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var i=g.key;g=g.result;if(g==null||i==null)continue;var l=g.header_fbt,m=g.header_text;m!=null?i==="RECENT_SEARCHES"?c.push({entries:k(a),key:i,label:m,title:l,type:"section"}):d={headerText:m,key:i}:d!=null&&(g==null?void 0:g.suggestions)!=null&&(c.push({entries:j(g.suggestions),key:d.key,label:d.headerText,type:"section"}),d=null)}return c}function j(a){return a.map(function(a){var b=a.__typename,c=a.display_text,d=a.entity_id;a=a.sts_info;return l({markers:["keyword","nullstate_explore"],node:{__typename:b,id:d==null?void 0:d.toString(),name:c,sts_info:a}})}).filter(Boolean)}function k(a){a=((a=(a=a.viewer)==null?void 0:(a=a.recent_searches)==null?void 0:a.edges)!=null?a:[]).map(function(a){return a.node?{node:a.node,search_badge:a.search_badge}:null}).filter(Boolean);a=a.map(function(a){return l(babelHelpers["extends"]({markers:["recent"]},a))}).filter(Boolean);return a}function l(a){var b=a.markers,d=a.node,e=d.__typename,f=d.id,g=d.item_logging_info,h=d.name,i=d.profile_picture,j=d.sts_info;d=d.url;a=a.search_badge;var k=c("searchCometIsValidRecentSearchEntityType")(e);j=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:j});var l=j.entryKey,m=j.extraLoggingInfo,n=j.label,o=j.markers;j=j.structuredInfo;l=(l=l)!=null?l:h;if(l==null){c("FBLogger")("search").mustfix("Missing key for recent search data with __typename: %s",e);return null}if(h==null){c("FBLogger")("search").mustfix("Missing name for recent search data with __typename: %s and key %s",e,l);return null}return{key:b.includes("nullstate_explore")?"nullstate_explore:"+l:l,label:(l=n)!=null?l:h,metaData:{logging:babelHelpers["extends"]({},m,{entityID:k?f:null,entityType:k&&e!=null?e.toLowerCase():null,loggingInfo:g}),markers:new Set(k?[].concat(b,["entity"]):[].concat(b,o))},rawData:{badgeSnippet:(a==null?void 0:a.enabled)===!0?a.snippet:null,profile:k&&f!=null&&(i==null?void 0:i.uri)!=null&&d!=null?{id:f,profilePictureURL:i.uri,url:d}:void 0,structuredInfo:j},subtype:"recent",type:"entry"}}g.query=d;g.normalize=a}),98);
__d("searchCometTypeaheadWithRecentDataSourceContext",["CometSearchRecentDataSourceDispatcherContext","SearchCometTypeaheadEventEmitterContext","react","useCometInternalTypeaheadFetch","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useMemo;function a(a,b){var d=b.dataSource,e=b.fetchSTS,f=b.shouldSubscribeToRecentSearches;return function(b){var g=b.inputRef,l=b.onPressEntry,m=b.onSelectFreeformQuery;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onPressEntry","onSelectFreeformQuery"]);var n=c("useCometInternalTypeaheadFetch")(),o=n.refetch;n=(n=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?n:{};var p=n.subscribeToRecentSearchEntryAdded;j(function(){if(f)return p==null?void 0:p(function(a){d.addRecentEntry(a)})},[p]);n=i(function(a){var b={key:a,label:a,metaData:{markers:new Set(["recent"])},rawData:{},subtype:"recent",type:"entry"};d.addRecentEntry(b);m&&m(a)},[m]);var q=i(function(a){var b,c=a.label,f=a.metaData;b=(b=f==null?void 0:f.markers)!=null?b:new Set();if(b.has("nullstate_explore")){l&&l(a);return}var g=new Set(["recent"]);b.has("entity")&&g.add("entity");b.has("direct_nav")&&(g.add("direct_nav"),e||g.add("TEMP_direct_nav_as_entity"));b.has("high_confidence")&&(g.add("high_confidence"),e||g.add("TEMP_high_confidence_as_plain_keyword"));b=function(){if(a.subtype==="recent")return babelHelpers["extends"]({},a.rawData,{badgeSnippet:null});return a.subtype==="bootstrap"||a.subtype==="keyword"?a.rawData:{}};f=(f=f==null?void 0:f.logging)!=null?f:{};var h=f.entityID,i=f.entityType,j=f.loggingInfo,k=f.stsDirectNavEntityID,m=f.stsDirectNavType,n=f.stsDisambiguationType,o=f.stsHighConfidenceID;f=f.stsHighConfidenceSource;c={key:c,label:c,metaData:{logging:{entityID:h,entityType:i,loggingInfo:j,stsDirectNavEntityID:k,stsDirectNavType:m,stsDisambiguationType:n,stsHighConfidenceID:o,stsHighConfidenceSource:f},markers:g},rawData:b(),subtype:"recent",type:"entry"};d.addRecentEntry(c);l&&l(a)},[l]),r=i(function(a){d.removeRecentEntry(a,{onBeforeCommitMutation:function(){o({source:"cache"})}})},[o]),s=k(function(){return{dispatchRemoveRecentEntry:r}},[r]);return h.jsx(c("CometSearchRecentDataSourceDispatcherContext").Provider,{value:s,children:h.jsx(a,babelHelpers["extends"]({},b,{inputRef:g,onPressEntry:q,onSelectFreeformQuery:n}))})}}g["default"]=a}),98);
__d("useSearchCometTypeaheadRecentDataSourceContextDecorator",["react","searchCometTypeaheadWithRecentDataSourceContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a,b,d){b===void 0&&(b=!0);d===void 0&&(d=!1);return h(function(){return{decorate:function(){return c("searchCometTypeaheadWithRecentDataSourceContext").apply(void 0,arguments)},params:{dataSource:a,fetchSTS:d,shouldSubscribeToRecentSearches:b}}},[a,d,b])}g["default"]=a}),98);
__d("useSearchCometRecentSearchDataSource",["Actor","CometRelay","CometSearchRecentDataSource","CometSearchRecentDataSource.query","WebPixelRatio","XCometActivityLogControllerRouteBuilder","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo,i=16;function a(a){var b=a.fetchNullstate,e=b===void 0?!1:b;b=a.fetchSearchBadge;var f=b===void 0?!1:b;b=a.fetchSTS;var g=b===void 0?!1:b,k=a.filter,l=a.searchScopeEntityID,m=d("CometRelay").useRelayEnvironment();b=d("Actor").useActor();a=b[0];var n=c("XCometActivityLogControllerRouteBuilder").buildURL({category_key:"SEARCH",entry_point:"edit_search_history",log_filter:"search",vanity:a});return h(function(){return new(c("CometSearchRecentDataSource"))({activityLogURL:n,gqlQuery:d("CometSearchRecentDataSource.query").query,limit:i,normalize:d("CometSearchRecentDataSource.query").normalize,queryVariablesBuilderFunction:function(){return{fetch_nullstate:e,fetch_search_badge:f,fetch_sts:g,filter:k,first:i,scale:d("WebPixelRatio").get(),search_null_state_argument:{surface:{name:j(k)}},search_scope_entity_id:l}},relayEnvironment:m})},[n,e,g,f,k,m,l])}function j(a){switch(a){case"all":return"GLOBAL";case"friends_scoped_search":return"FRIENDS";case"group_scoped_search":return"GROUPS";case"group_search":return"GROUPS_TAB";case"profile_scoped_search":return"PROFILE";case"reels_search":return"REELS";case"video_search":return"VIDEO";default:return"GLOBAL"}}g["default"]=a}),98);
__d("XCometGamingVideoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/gaming/video/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);